<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>算法笔记 | 差分数组</title>
    <url>/2021/11/14/algorithm_1/</url>
    <content><![CDATA[<h1 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h1>
<p>对于一个数组<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>，如果对它有着频繁的区间操作（例如第5个到第60个数增加2，或第6个到第40个数减去2）。这个时候，暴力的做法时，直接用循环去操作，但是这样做的时间复杂度很大。所以对于这样的问题，可以使用<strong>差分数组</strong>。</p>
<h1 id="具体做法"><a class="markdownIt-Anchor" href="#具体做法"></a> 具体做法</h1>
<p><code>差分</code>其实就是数据之间的差，什么数据的差呢？就是上面所给的原始数组<code>a[n]</code>的相邻元素之间的差值，我们令<code>d[i]=a[i+1]-a[i]</code>，一遍for循环即可将差分数组求出来。例如下面这个数组。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211114164848.PNG" alt="" /><br />
据此，可以发现两条差分数组的性质：</p>
<ul>
<li><code>a[i]</code>等于<code>d[i]</code>的前缀和</li>
<li><code>a[i]</code>的前缀和可以通过如下公式来求得：
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>x</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>x</mi></msubsup><msub><mi>a</mi><mi>x</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>x</mi></msubsup><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>i</mi></msubsup><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>x</mi></msubsup><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">sum_x=\sum_{i=1}^{x}a_x=\sum_{i=1}^{x}\sum_{j=1}^{i}d_i=\sum_{i=1}^{x}(x-i+1)\times d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.400382em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.964564em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
</ul>
<h1 id="用途"><a class="markdownIt-Anchor" href="#用途"></a> 用途</h1>
<p>差分数组主要支持两种操作：<strong>1、区间修改；2、单点查询</strong><br />
根据性质一，可以得到若对某个区间<code>[L, R]</code> 增加一个数 <code>x</code>，只需要使 <code>d[L] += x; d[R + 1] -= x;</code> 即可实现对区间的批量修改，而查询时只需要<strong>求前缀和查询单个元素</strong>，或者通过上述性质二的公式查询<strong>前缀和/区间和</strong>即可</p>
<h2 id="区间修改"><a class="markdownIt-Anchor" href="#区间修改"></a> 区间修改</h2>
<p>对上面那个表的数组作下面两个操作：</p>
<ul>
<li>将区间 [1,4] 的数值全部加上3</li>
<li>将区间 [3,5] 的数值全部减去5<br />
其实<strong>当你将原始数组中元素同时加上或者减掉某个数，那么他们的差分数组其实是不会变化的。</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211114170247.PNG" alt="" /><br />
只有 d[1]和d[5]发生了变化，而d[2],d[3],d[4]却保持着原样。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211114170311.PNG" alt="" /></p>
<blockquote>
<p>当对一个区间进行增减某个值的时候，它的差分数组对应的区间左端点的值会同步变化，而它的右端点的后一个值则会相反地变化，其实这个很好理解</p>
</blockquote>
<h2 id="更新原数组"><a class="markdownIt-Anchor" href="#更新原数组"></a> 更新原数组</h2>
<p>因为我们的差分数组是由原始数组的相邻两项作差求出来的，即 d[i]=a[i]-a[i-1]；那么我们能不能反过来，求得一下修改过后的a[i]呢？</p>
<p><strong>直接反过来即得  a[i]=a[i-1]+d[i]</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    a[i]=a[i<span class="number">-1</span>]+d[i];</span><br></pre></td></tr></table></figure>
<h1 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h1>
<p>[1] <a href="https://blog.csdn.net/qq_31601743/article/details/105352885" target="_blank" rel="noopener">https://blog.csdn.net/qq_31601743/article/details/105352885</a><br />
[2] <a href="https://blog.csdn.net/qq_44786250/article/details/100056975" target="_blank" rel="noopener">https://blog.csdn.net/qq_44786250/article/details/100056975</a><br />
[3] <a href="https://www.jianshu.com/p/2a4e861b44ae" target="_blank" rel="noopener">https://www.jianshu.com/p/2a4e861b44ae</a><br />
[4] <a href="https://www.cnblogs.com/COLIN-LIGHTNING/p/8436624.html" target="_blank" rel="noopener">https://www.cnblogs.com/COLIN-LIGHTNING/p/8436624.html</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>差分数组</tag>
      </tags>
  </entry>
  <entry>
    <title>算法笔记 | 快速幂</title>
    <url>/2021/11/14/algorithm_2/</url>
    <content><![CDATA[<h1 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h1>
<p><strong>快速幂</strong>（<strong>Exponentiation by squaring</strong>，平方求幂）是一种简单而有效的小算法，它可以以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>的时间复杂度计算乘方。快速幂不仅本身非常常见，而且后续很多算法也都会用到快速幂。</p>
<h2 id="背景问题"><a class="markdownIt-Anchor" href="#背景问题"></a> 背景问题</h2>
<p>例如计算一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>7</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">7^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">7</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>，有以下几种方法。</p>
<ul>
<li>最朴素的想法，7*7=49，49*7=343，… 一步一步算，共进行了<strong>9次</strong>乘法。
<ul>
<li>这样算无疑太慢了，尤其对计算机的CPU而言，每次运算只乘上一个个位数，无疑太屈才了。这时我们想到，也许可以拆分问题。</li>
</ul>
</li>
<li>先算7的5次方，即7*7*7*7*7，再算它的平方，共进行了<strong>5次</strong>乘法。
<ul>
<li>但这并不是最优解，因为对于“7的5次方”，我们仍然可以拆分问题。</li>
</ul>
</li>
<li>先算7*7得49，则7的5次方为49*49*7，再算它的平方，共进行了<strong>4次</strong>乘法。</li>
</ul>
<p>模仿这样的过程，我们得到一个在 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span> 时间内计算出幂的算法，也就是快速幂。</p>
<h1 id="具体实现"><a class="markdownIt-Anchor" href="#具体实现"></a> 具体实现</h1>
<h2 id="递归快速幂"><a class="markdownIt-Anchor" href="#递归快速幂"></a> 递归快速幂</h2>
<p>用上面的背景问题可以得到下面这个递归公式：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>a</mi><mi>n</mi></msup><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msup><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>×</mo><mi>a</mi><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mtext> </mtext><mi>i</mi><mi>s</mi><mtext> </mtext><mi>o</mi><mi>d</mi><mi>d</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msup><mi>a</mi><mfrac><mi>n</mi><mn>2</mn></mfrac></msup><mo>×</mo><msup><mi>a</mi><mfrac><mi>n</mi><mn>2</mn></mfrac></msup><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mtext> </mtext><mi>i</mi><mi>s</mi><mtext> </mtext><mi>e</mi><mi>v</mi><mi>e</mi><mi>n</mi><mtext> </mtext><mi>b</mi><mi>u</mi><mi>t</mi><mtext> </mtext><mi>n</mi><mi>o</mi><mi>t</mi><mtext> </mtext><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">a^n = \begin{cases}
a^{n-1}\times a, &amp; n\  is\  odd \\
a^{\frac{n}{2}}\times a^{\frac{n}{2}}, &amp; n\  is\  even \  but \  not \  0 \\
1,&amp;n=0
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7143919999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.84708em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915428571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.84708em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915428571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mpunct">,</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mspace"> </span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mspace"> </span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">d</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mspace"> </span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mspace"> </span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mspace"> </span><span class="mord mathdefault">b</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mspace"> </span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mspace"> </span><span class="mord">0</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>依据这个递归公式，可以写出递归版本的快速幂。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> qpow(a,n<span class="number">-1</span>)*a; <span class="comment">//n是奇数</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp=qpow(a,n/<span class="number">2</span>); <span class="comment">//n是偶数</span></span><br><span class="line">        <span class="keyword">return</span> temp*temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码中有一个temp变量，暂存<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>a</mi><mfrac><mi>n</mi><mn>2</mn></mfrac></msup></mrow><annotation encoding="application/x-tex">a^{\frac{n}{2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84708em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.84708em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915428571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span>的值，这样就能避免计算两次。</p>
<h2 id="非递归快速幂"><a class="markdownIt-Anchor" href="#非递归快速幂"></a> 非递归快速幂</h2>
<p>虽然递归版本很容易写，但是会产生额外的空间开销。因此可以把递归版本的改写为循环版本的。<br />
将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>7</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">7^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">7</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>转化为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>×</mo><msup><mn>7</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">y^2 \times 7^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">7</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211117172806.jpg" alt="" /></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)&#123;       <span class="comment">//如果n的当前末位为1</span></span><br><span class="line">            ans *= a;  <span class="comment">//ans乘上当前的a</span></span><br><span class="line">        &#125;</span><br><span class="line">        a *= a;        <span class="comment">//a自乘</span></span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;       <span class="comment">//n往右移一位</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果加上取模过程：<br />
有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>∗</mo><mi>b</mi><mo stretchy="false">)</mo><mi mathvariant="normal">%</mi><mi>c</mi><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>a</mi><mi mathvariant="normal">%</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>b</mi><mi mathvariant="normal">%</mi><mi>c</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi mathvariant="normal">%</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">(a*b)\%c = ((a\%c)*(b\%c))\%c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mord">%</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord">%</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord">%</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord">%</span><span class="mord mathdefault">c</span></span></span></span></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)&#123;       <span class="comment">//如果n的当前末位为1</span></span><br><span class="line">            ans *= a;  <span class="comment">//ans乘上当前的a</span></span><br><span class="line">            ans %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">        a *= a%mod;        <span class="comment">//a自乘</span></span><br><span class="line">        a %= mod;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;       <span class="comment">//n往右移一位</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>感觉有点类似计算<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>∗</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">2*10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>时转换为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>∗</mo><mn>8</mn><mo>+</mo><mn>2</mn><mo>∗</mo><mn>2</mn><mo>=</mo><mo>=</mo><mo stretchy="false">(</mo><mn>2</mn><mo>&lt;</mo><mo>&lt;</mo><mn>3</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>2</mn><mo>&lt;</mo><mo>&lt;</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2*8+2*2==(2&lt;&lt;3)+(2&lt;&lt;1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>10</mn><mi>D</mi><mo>=</mo><mo>=</mo><mn>1010</mn><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(10D==1010B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<h1 id="矩阵快速幂"><a class="markdownIt-Anchor" href="#矩阵快速幂"></a> 矩阵快速幂</h1>
<p>其实，在算 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>a</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">a^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span> 时，只要a的数据类型支持<strong>乘法</strong>且<strong>满足结合律</strong>，快速幂的算法都是有效的。矩阵、高精度整数，都可以照搬这个思路。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//泛型的非递归快速幂</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">qpow</span><span class="params">(T a, ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    T ans = <span class="number">1</span>; <span class="comment">// 赋值为乘法单位元，可能要根据构造函数修改</span></span><br><span class="line">    <span class="keyword">while</span> (n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &amp; <span class="number">1</span>)</span><br><span class="line">            ans = ans * a; <span class="comment">// 这里就最好别用自乘了，不然重载完*还要重载*=，有点麻烦。</span></span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        a = a * a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>矩阵快速幂的一个经典应用是求斐波那契数列：<a href="https://www.luogu.com.cn/problem/P1962" target="_blank" rel="noopener">P1962 斐波那契数列</a><br />
设矩阵</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A=\begin{bmatrix}
0&amp;1\\
1&amp;1
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>我们有：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mi>n</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>F</mi><mi>n</mi></msub><mo>+</mo><msub><mi>F</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>+</mo><mn>2</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A\begin{bmatrix}
F_n\\F_{n+1}
\end{bmatrix}=\begin{bmatrix}
F_{n+1}\\F_n+F_{n+1}
\end{bmatrix}=\begin{bmatrix}
F_{n+1}\\F_{n+2}
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>于是 :</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mi>n</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mi>A</mi><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mi>n</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><msup><mi>A</mi><mn>2</mn></msup><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>−</mo><mn>2</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mo>⋯</mo><mo>=</mo><msup><mi>A</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>F</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><msup><mi>A</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
F_n\\F_{n+1}
\end{bmatrix}=
A\begin{bmatrix}
F_{n-1}\\F_{n}
\end{bmatrix}=A^2\begin{bmatrix}
F_{n-2}\\F_{n-1}
\end{bmatrix}=\cdots=A^{n-1}\begin{bmatrix}
F_1\\F_{2}
\end{bmatrix}=A^{n-1}\begin{bmatrix}
1\\1
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>这样，我们把原来较为复杂的问题转化成了<strong>求某个矩阵的幂</strong>的问题，这就可以应用快速幂求解了。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD 1000000007</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">matrix</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ll a1, a2, b1, b2;</span><br><span class="line">    matrix(ll a1, ll a2, ll b1, ll b2) : a1(a1), a2(a2), b1(b1), b2(b2) &#123;&#125;</span><br><span class="line">    matrix <span class="keyword">operator</span>*(<span class="keyword">const</span> matrix &amp;y)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">matrix <span class="title">ans</span><span class="params">((a1 * y.a1 + a2 * y.b1) % MOD,</span></span></span><br><span class="line"><span class="function"><span class="params">                   (a1 * y.a2 + a2 * y.b2) % MOD,</span></span></span><br><span class="line"><span class="function"><span class="params">                   (b1 * y.a1 + b2 * y.b1) % MOD,</span></span></span><br><span class="line"><span class="function"><span class="params">                   (b1 * y.a2 + b2 * y.b2) % MOD)</span></span>;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">matrix <span class="title">qpow</span><span class="params">(matrix a, ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">matrix <span class="title">ans</span><span class="params">(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span></span>; <span class="comment">//单位矩阵</span></span><br><span class="line">    <span class="keyword">while</span> (n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            ans = ans * a;</span><br><span class="line">        &#125;</span><br><span class="line">        a = a * a;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x;</span><br><span class="line">    <span class="function">matrix <span class="title">M</span><span class="params">(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;x);</span><br><span class="line">    matrix ans = qpow(M, x - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans.a1 % MOD);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h1>
<p>[1] <a href="https://zhuanlan.zhihu.com/p/95902286" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/95902286</a><br />
[2] <a href="https://blog.csdn.net/qq_40061421/article/details/82625338" target="_blank" rel="noopener">https://blog.csdn.net/qq_40061421/article/details/82625338</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>快速幂</tag>
      </tags>
  </entry>
  <entry>
    <title>算法笔记 | 前缀和</title>
    <url>/2021/11/11/algorithm_0/</url>
    <content><![CDATA[<h1 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h1>
<p>给定某个数组 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>，给定区间<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>，计算这个数组，从下标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span>到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>的加和。如果直接加和，需要作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>r</mi><mo>−</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(r-l+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>次加法。如果有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>次询问，复杂度就是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nm)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span>。引入<strong>前缀和数组</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>，可以将复杂度降到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m+n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>。</p>
<h1 id="具体做法"><a class="markdownIt-Anchor" href="#具体做法"></a> 具体做法</h1>
<h2 id="预处理"><a class="markdownIt-Anchor" href="#预处理"></a> 预处理</h2>
<p>定义一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>数组，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span></span></span></span>表示<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>数组中前<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>项之和。</p>
<blockquote>
<p>就和数组<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{a_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>的前<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>项和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">S_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>一样。</p>
</blockquote>
<p>先用一次<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">for</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>循环，对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>进行预处理。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">  s[i]=s[i<span class="number">-1</span>]+a[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此过程复杂度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>。</p>
<h2 id="查询"><a class="markdownIt-Anchor" href="#查询"></a> 查询</h2>
<p>对于每次查询，只需执行<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>r</mi><mo stretchy="false">]</mo><mo>−</mo><mi>s</mi><mo stretchy="false">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[r]-s[l-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>，时间复杂度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>。</p>
<blockquote>
<p><strong>原理</strong><br />
s[r] =a[1]+a[2]+a[3]+a[l-1]+a[l]+a[l+1]…a[r];<br />
s[l-1]=a[1]+a[2]+a[3]+a[l-1];<br />
s[r]-s[l-1]=a[l]+a[l+1]+…+a[r];</p>
</blockquote>
<p>此过程复杂度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span>。</p>
<h1 id="二维前缀和"><a class="markdownIt-Anchor" href="#二维前缀和"></a> 二维前缀和</h1>
<p>输入一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n\times m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>的整数矩阵，再输入<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>个询问，每个询问包含四个整数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mn>1</mn><mo separator="true">,</mo><mi>x</mi><mn>2</mn><mo separator="true">,</mo><mi>y</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">x1, y1, x2, y2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">2</span></span></span></span>，表示一个子矩阵的左上角坐标和右下角坐标。对于每个询问输出子矩阵中所有数的和。</p>
<p>同一维前缀和一样，先定义一个二维数组<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[n][m]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault">m</span><span class="mclose">]</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>，表示二维数组中，左上角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>到右下角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">( i,j )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>所包围的矩阵元素的和。<br />
接下来推导二维前缀和的公式。</p>
<h2 id="预处理-2"><a class="markdownIt-Anchor" href="#预处理-2"></a> 预处理</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211111165631.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211111165825.png" alt="" /><br />
注：最后一项是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>，和一维前缀和一样。<br />
由上图可知，二维前缀和的预处理公式为：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">s[i][j] = s[i<span class="number">-1</span>][j] + s[i][j<span class="number">-1</span>] + a[i][j] - s[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br></pre></td></tr></table></figure>
<hr />
<p>也可以一维、一维来求进行预处理。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">        a[i][j] += a[i - <span class="number">1</span>][j];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">        a[i][j] += a[i][j - <span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<h2 id="查询-2"><a class="markdownIt-Anchor" href="#查询-2"></a> 查询</h2>
<p>接下来如何去求以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x1,y1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>为左上角和以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mn>2</mn><mo separator="true">,</mo><mi>y</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x2,y2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">2</span><span class="mclose">)</span></span></span></span>为右下角的矩阵的元素的和呢？<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211111170341.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211111170439.png" alt="" /><br />
即<code>s[x2][y2]-s[x1-1][y2]-s[x2][y1-1] + s[x1-1][y1-1]</code></p>
<h1 id="高维前缀和"><a class="markdownIt-Anchor" href="#高维前缀和"></a> 高维前缀和</h1>
<p>暂时还看不懂这玩意儿……。先mark一下。<br />
<a href="https://www.cnblogs.com/heyuhhh/p/11585358.html" target="_blank" rel="noopener">https://www.cnblogs.com/heyuhhh/p/11585358.html</a></p>
<h1 id="参考资料"><a class="markdownIt-Anchor" href="#参考资料"></a> 参考资料</h1>
<p>[1] <a href="https://blog.csdn.net/weixin_45629285/article/details/111146240" target="_blank" rel="noopener">https://blog.csdn.net/weixin_45629285/article/details/111146240</a></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>前缀和</tag>
      </tags>
  </entry>
  <entry>
    <title>Works | 标签夹 Tab Clamp</title>
    <url>/2021/10/26/TabClamp/</url>
    <content><![CDATA[<h1 id="标签夹-tabclamp-是什么"><a class="markdownIt-Anchor" href="#标签夹-tabclamp-是什么"></a> 标签夹 TabClamp 是什么</h1>
<p>试想您是否有这样的一个需求？</p>
<blockquote>
<p>有时候进行某项工作/学习时打开了若干个网页，但是后来中断去做别的事情了，在下一次进行这项工作/学习时又要回到历史记录里一个个点开。这样非常麻烦。</p>
</blockquote>
<p>「标签夹 TabClamp」就是为了解决这样的需求而被开发的。它是一款用于<strong>任一基于Chromium开源项目webkit内核的浏览器</strong>插件，这款插件可以帮助您一次性打开多个网页，以方便您随时恢复之前的工作环境。</p>
<p>如果您不知道您的浏览器是否是<strong>基于Chromium开源项目webkit内核</strong>的，您可以参考下面这个列表：</p>
<ul>
<li>Google Chrome</li>
<li>Microsoft Edge</li>
<li>360安全浏览器</li>
<li>360极速浏览器</li>
<li>搜狗高速浏览器</li>
<li>QQ浏览器</li>
<li>猎豹安全浏览器</li>
<li>傲游浏览器</li>
<li>……</li>
</ul>
<h1 id="安装教程"><a class="markdownIt-Anchor" href="#安装教程"></a> 安装教程</h1>
<h1 id="使用说明"><a class="markdownIt-Anchor" href="#使用说明"></a> 使用说明</h1>
<h2 id="名词术语解释"><a class="markdownIt-Anchor" href="#名词术语解释"></a> 名词术语解释</h2>
<ul>
<li><strong>标签 Tabs</strong>，准确称法是“标签页”，也称作“选项卡”，简称为“标签”。通常标签页栏所处的是浏览器窗体的上方，您可以通过点击标签来切换当前要浏览的网页。</li>
<li><strong>窗体 Windows</strong>，您运行浏览器时打开的整个浏览器程序界面被称作窗体，您可以打开多个窗体，也可以在每个窗体上打开多个标签。</li>
<li><strong>标签夹 Tab Clamp</strong>，即本插件的名称，亦是本插件中引入的概念。顾名思义地，标签夹是将复数数量的标签打包在一起后的物体。</li>
</ul>
<h2 id="界面功能解释"><a class="markdownIt-Anchor" href="#界面功能解释"></a> 界面功能解释</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211026142613.png" alt="" /></p>
<h3 id="保存当前所有标签页到标签夹"><a class="markdownIt-Anchor" href="#保存当前所有标签页到标签夹"></a> 保存当前所有标签页到标签夹</h3>
<ol>
<li>输入标签夹名字，注意不要和已有的标签夹名字重复，否则会直接覆盖内容。虽然没有对标签夹名字长度进行限制，但是仍然不建议使用过长的标签夹名字。</li>
<li>点击“保存当前所有标签页到标签夹”按钮，将会保存<strong>当前浏览器上打开的所有标签</strong>到指定标签夹中。由于后续的“打开”功能是一次性全部打开并加载网页，出于对您的机器性能负担考虑，一个标签夹内最好不要放过多的标签。</li>
</ol>
<h3 id="打开该标签夹内所有的标签"><a class="markdownIt-Anchor" href="#打开该标签夹内所有的标签"></a> 打开该标签夹内所有的标签</h3>
<ol>
<li>输入标签夹名字，注意应该输入已有的标签夹。</li>
<li>点击“打开该标签夹内所有的标签”按钮，将会在<strong>当前浏览器窗口上</strong>打开该标签夹内的所有网页。</li>
</ol>
<h3 id="删除该标签夹"><a class="markdownIt-Anchor" href="#删除该标签夹"></a> 删除该标签夹</h3>
<ol>
<li>输入标签夹名字，注意应该输入已有的标签夹。</li>
<li>点击“删除该标签夹”按钮，将会<strong>永久删除</strong>该标签夹和该标签夹下所有的标签。</li>
</ol>
<h3 id="点击标签夹"><a class="markdownIt-Anchor" href="#点击标签夹"></a> 点击标签夹</h3>
<ol>
<li>当您已经拥有标签夹时，界面上将会显示其按钮。按钮文本为标签夹名字，括号内部数字表示标签夹内的标签数量。</li>
<li>单击这些标签夹按钮，将会在下方显示该标签夹内的标签，您可以点击这些标签，就能打开指定的单个标签页。</li>
<li>单击标签夹按钮后，标签夹名字会自动输入到输入框中，而不需要自己手动输入，方便您的后续操作（例如保存、打开、删除）。</li>
</ol>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211026144533.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211026144549.png" alt="" /></p>
<h1 id="环境要求"><a class="markdownIt-Anchor" href="#环境要求"></a> 环境要求</h1>
<p>本插件使用了localStorage特性作为存储，</p>
<h1 id="版本更新日志"><a class="markdownIt-Anchor" href="#版本更新日志"></a> 版本更新日志</h1>
<h2 id="10020211026"><a class="markdownIt-Anchor" href="#10020211026"></a> 1.0.0(2021/10/26)</h2>
<ul>
<li>产品上线</li>
</ul>
<h1 id="打赏"><a class="markdownIt-Anchor" href="#打赏"></a> 打赏</h1>
<p>如果您对这个小插件满意的话，您可以通过下面两种方式给予任意金额的打赏鼓励嗷~~。非常感谢您请我的一杯咖啡~。<br />
感谢少侠打赏，来杯咖啡提提神，大战到天亮。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211026152954.png" alt="" /></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>Works</category>
      </categories>
      <tags>
        <tag>Works</tag>
        <tag>效率</tag>
        <tag>浏览器</tag>
      </tags>
  </entry>
  <entry>
    <title>书读 | 初读东野圭吾《白夜行》</title>
    <url>/2021/06/14/reading_0/</url>
    <content><![CDATA[<div class="snote bug"><p>本文可能含一定程度的剧透，提前浏览可能会影响阅读体验。</p></div>
<p>熟悉东野圭吾的朋友必定知道作为其代表作之一的《白夜行》，一直以来我都很喜爱阅读东野圭吾的作品，但是大学期间好像很容易浮躁，很难沉下心去阅读。终于在百无聊赖（忙里偷闲）的时候，捧起兼有阅读功能的Kindle牌泡面盖，开始阅读起来。</p>
<p>在读《白夜行》前，在高中有读过其姊妹篇《幻夜》。到底说是姊妹篇，作者写作风格和角色人设隐隐约约间总有些相似。<br />
整篇小说叙事的不同人物视角的分镜手法，黑色系、老到辛辣的语言，含蓄深刻的内容。</p>
<p>雪穗和美冬很像，亮司也和雅也很像。</p>
<p>不过阅读《幻夜》的时候到今天已经有两三个年头了，不少故事里的情节我都几乎忘得一干二净，所以应该不会在这篇随笔里提到什么了。</p>
<p>阅读这本书，总共花了四天时间（2021/06/10~2021/06/13）。读得很快，囫囵吞枣，有一些地方可能说得不对，请书友海涵。此外，故事想表达的内容的确有些晦涩难懂，看完书的我五味杂陈，有很多话想说，但凭我拙劣的语言，恐怕难以说清其中一二。</p>
<p>先简要介绍书中故事吧，当然毕竟这不是在写小说，我会用全知视角来说明这个故事内容。不想看剧透的，可以直接往下找到另一条剧透分割线。</p>
<p>首先有两个家庭，桐原亮司和西本雪穗。</p>
<p>桐原亮司家里是开当铺的，父母似乎都没有尽其教育责任。母亲和当铺店员有染。</p>
<p>西本雪穗家庭贫苦，父亲早逝，母亲独自抚养其长大，但在当时的历史背景，其生活并不乐观。</p>
<p>他们打小起，就很要好的样子。会一起去图书馆看书（比如：《飘》）、剪纸（是桐原亮司的强项）。</p>
<p>似乎是，生活所迫之下，西本雪穗的母亲将西本雪穗卖给了有恋童癖的桐原亮司的父亲。</p>
<p>桐原亮司偶然之下看到了正在对西本雪穗实施猥亵行为的父亲，在愤怒和绝望之下，11岁的他用剪刀杀死了父亲。</p>
<p>这个案子由于各种原因，没有被立马查明。作为故事的线索一直延续了20年。</p>
<p>后来，西本雪穗伪造了其母亲自杀的情形，同样地，这个案子也成了悬案。在生母离世后，她被她的表亲唐泽礼子收养，唐泽礼子教会了她茶道和插花等等非常修身养性的知识，使得旁人眼中的西本雪穗有如一个优雅的名门大小姐。</p>
<p>接下来的亮司和雪穗，像是两个没有交点的平行线，一个就读大学，一个辍学干着各种勾当。但在背地里，他们在互相帮助。</p>
<p>例如，雪穗嫉妒另一个长相漂亮的女同学，而且女同学在散播雪穗过去的事情。于是，亮司帮助雪穗制造了该女同学被强暴了的假象，令其一丝不挂地昏在路边，然后雪穗按预先的安排假装发现并救助了她。雪穗对她说，会帮她保守这个秘密的，以此来收买这个女同学的心。</p>
<p>另一方面，亮司在做盗版游戏、软件时，雪穗通过她的社会关系偷到了不少知名人士的程序传给了亮司。</p>
<p>雪穗注意到有私家侦探在追查她，亮司帮她杀害了那个侦探。</p>
<p>这样的犯罪数不胜数。</p>
<p>亮司帮着雪穗除掉了一个又一个她成功路上的障碍，她如愿以偿地娶到了第一任丈夫，攀上了豪门。利用更高的社会关系，不断地积累财富。</p>
<p>开了一家奢侈的衣服精品店：R&amp;Y。</p>
<p>后来又故意与第一任丈夫吵架离婚，加上亮司的暗中协助，攀上第二任名门贵族丈夫。</p>
<p>R&amp;Y开了一家又一家分店。</p>
<p>雪穗在旁人的眼里就是年轻有为、长相漂亮端庄、做生意强势果断的女强人形象。</p>
<p>但是二十年前的刑警一直在追查那个案件，即使那个案件已经快过了时效期。他始终认为这个女人可没有表面上那么简单，眼神中隐藏着难以察觉的险恶和卑劣。</p>
<p>在R&amp;Y第三家分店的开张仪式上，刑警敏锐地判断亮司一定会出现。</p>
<p>亮司果然出现了，并且奋力逃避追捕，但终究是无力回天。</p>
<p>为了自己不被抓捕而暴露雪穗，他选择从楼上跃下然后用那把剪刀自尽。</p>
<p>刑警问雪穗：你认识这个人吗？</p>
<p>雪穗说：我不认识。然后头也不回地离开了。</p>
<p>正义不仅迟到了，而且没有发挥出它的力量。两人犯下这么多的罪行，因为亮司的牺牲式自尽，并没有大白于天下。他们的邪恶仍然在世间嚣张，在精品店的招牌上闪烁。</p>
<p>雪穗成功地获得了人生的幸福。从灰姑娘变成了大有可为的女青年。</p>
<p>======== 剧透线 ========<br />
看完这本书，我心情沉重又复杂，非常矛盾。</p>
<p>既觉得亮司和雪穗之间是有爱情的，又觉得雪穗是个无情的女性，对亮司也是像对其他男人利用罢了。</p>
<p>既替他们的爱情悲剧感到惋惜，又觉得他们犯下了太多罪行活该。</p>
<p>他们俩之间有爱情吗？好像是没有的，整篇作品里，长大后的雪穗和亮司几乎没在小说里直接见过面，唯一一次见面就是最后一章的生死永隔，而且雪穗望着亮司的尸体，说着不认识便永远回了头。</p>
<p>他们俩之间有爱情吗？又好像是有的，雪穗累积财富后，开了一家店，名字叫R&amp;Y，是亮司和雪穗两个人名字的缩写。为了能过上幸福的生活，他们相辅相成，如果警方再迟一些，案件有效期就过了，他们俩就能永远走在白天下了。虽然亮司和雪穗有着各自的恋人，但是与他们似乎是有性无爱。</p>
<p>雪穗说：我的天空里没有太阳，总是黑夜，但并不黑暗，因为有东西代替了太阳。虽然没有太阳那么明亮，但对我来说已经足够。凭借着这份光，我便能把黑夜当成白天。你明白吗？我从来就没有太阳，所以不怕失去。</p>
<p>她的太阳就是桐原亮司。亮司的愿望是在白天（一起）走路（书的封面是亮司的剪纸作品之一，小男孩和小女孩一起牵着手走路）。</p>
<p>年仅十一岁的亮司从一出场就走上了一条永远黑暗的不归之路，只能永远期期指望“等到有一天，能够和她手牵手去阳光下散步”；为了这个希望，他一路为恶，直到长大成人，大开杀戒……</p>
<p>说到底，他们的恶终究或许来源于家庭的不幸。</p>
<p>东野圭吾太鲨了，在我心里留下了难以抹去的压抑和阴影……</p>
<p>甚至都有些恐恋了。现实生活中也总会有像这样，容貌出众、透露着聪慧、气质优雅、全身上下散发出温柔的光芒，但藏着不少难以察觉的险恶卑劣的人吧。</p>
<p>当遇上现实生活中的雪穗，我到底会是自我牺牲也要帮助她的亮司、盲目地被她的表象所吸引的康晴还是察觉到她的险恶的一成呢……？</p>
<p>那我当然不希望遇上雪穗。</p>
<p>因为她的背影犹如白色的幽灵。</p>
<h2 id="想到什么再补充什么吧"><a class="markdownIt-Anchor" href="#想到什么再补充什么吧"></a> 想到什么再补充什么吧。</h2>
<p>原来这句话出自这里呀。<br />
曾经拥有的东西被夺走，并不代表就会回到原来没有那种东西的时候。——东野圭吾《白夜行》<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20211026163516.jpg" alt="" /></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>书读</category>
      </categories>
      <tags>
        <tag>书读</tag>
        <tag>读后感</tag>
      </tags>
  </entry>
  <entry>
    <title>题解心得 | P3379 【模板】最近公共祖先（LCA）</title>
    <url>/2021/01/21/P3379/</url>
    <content><![CDATA[<h1 id="题面原文"><a class="markdownIt-Anchor" href="#题面原文"></a> 题面原文</h1>
<p><a href="https://www.luogu.com.cn/problem/P3379" target="_blank" rel="noopener">原题链接</a></p>
<h2 id="题目描述"><a class="markdownIt-Anchor" href="#题目描述"></a> 题目描述</h2>
<p>如题，给定一棵有根多叉树，请求出指定两个点直接最近的公共祖先。</p>
<h2 id="输入格式"><a class="markdownIt-Anchor" href="#输入格式"></a> 输入格式</h2>
<p>第一行包含三个正整数 N,M，分别表示树的结点个数、询问的个数和树根结点的序号。<br />
接下来 N-1 行每行包含两个正整数 x, y，表示 x 结点和 y 结点之间有一条直接连接的边（数据保证可以构成树）。<br />
接下来 M行每行包含两个正整数 a, b表示询问 a 结点和 b 结点的最近公共祖先。</p>
<h2 id="输出格式"><a class="markdownIt-Anchor" href="#输出格式"></a> 输出格式</h2>
<p>输出包含 M 行，每行包含一个正整数，依次为每一个询问的结果。</p>
<h1 id="ac-record"><a class="markdownIt-Anchor" href="#ac-record"></a> Ac Record</h1>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201205213926.png" alt="" /></p>
<h1 id="code"><a class="markdownIt-Anchor" href="#code"></a> Code</h1>
<details cyan open><summary> <p>show me the code.</p> </summary>
              <div class='content'>
              <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500001</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; node[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn];</span><br><span class="line"><span class="keyword">int</span> f[maxn][<span class="number">22</span>]; <span class="comment">//2^20</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> log2(x&amp;(-x));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa,<span class="keyword">int</span> d)</span></span>&#123;</span><br><span class="line">    dep[u]=d;</span><br><span class="line">    f[u][<span class="number">0</span>]=fa;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;node[u].size();++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(node[u][i]==fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(node[u][i],u,d+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dep[x]&lt;dep[y]) swap(x,y);</span><br><span class="line">    <span class="keyword">while</span>(dep[x]&gt;dep[y])&#123;</span><br><span class="line">        x=f[x][lowbit(dep[x]-dep[y])];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;<span class="comment">// or return y.</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=log2(dep[x]);i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(f[x][i]!=f[y][i])&#123;</span><br><span class="line">            x=f[x][i];</span><br><span class="line">            y=f[y][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c=(<span class="keyword">char</span>)getchar();</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,fs=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!<span class="built_in">isdigit</span>(c))&#123;<span class="keyword">if</span>(c==<span class="string">'-'</span>)fs=<span class="number">-1</span>;c=(<span class="keyword">char</span>)getchar();&#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">isdigit</span>(c))x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+(c^<span class="number">48</span>),c=(<span class="keyword">char</span>)getchar(); <span class="comment">//NOLINT</span></span><br><span class="line">    <span class="keyword">return</span> x*fs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;<span class="number">0</span>) <span class="built_in">putchar</span>(<span class="string">'-'</span>),a=-a;</span><br><span class="line">    <span class="keyword">if</span>(a&gt;=<span class="number">10</span>)write(a/<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(a%<span class="number">10</span>+<span class="number">48</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,m,s;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;++i)&#123;</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        x=read();</span><br><span class="line">        y=read();</span><br><span class="line">        node[x].push_back(y);</span><br><span class="line">        node[y].push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(s,s,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">22</span>;++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> u=<span class="number">1</span>;u&lt;=n;u++)&#123;</span><br><span class="line">            f[u][i]=f[f[u][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        x=read();</span><br><span class="line">        y=read();</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;lca(x,y)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details>
<h1 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h1>
<p>这就是一道LCA模板题。</p>
<ul>
<li>简单地用vector存图。</li>
<li>先用DFS把整个树遍历一遍，标记上每个节点的<strong>深度</strong>。这个深度的作用会在后面的算法体现到。</li>
<li><code>f[u][i]=f[f[u][i-1]][i-1];</code>这是<strong>倍增</strong>的递推式。
<ul>
<li><code>f[u][i]</code>指的是，节点<code>u</code>的前<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">2^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.824664em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span>个父节点。</li>
<li>例如<code>f[u][0]</code>指的是就是节点<code>u</code>的父节点。<code>f[u][1]</code>指的是就是节点<code>u</code>的父节点的父节点。<code>f[u][2]</code>指的是就是节点<code>u</code>的父节点的父节点的父节点的父节点。</li>
<li>在这个题目中的节点数最多是500000，所以最坏情况下是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>19</mn></msup></mrow><annotation encoding="application/x-tex">2^{19}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span>，所以数组开到20就差不多够用了。（为保险可以多开一点）</li>
</ul>
</li>
<li>用LCA函数求解答案。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dep[x]&lt;dep[y]) swap(x,y);</span><br><span class="line">    <span class="keyword">while</span>(dep[x]&gt;dep[y])&#123;</span><br><span class="line">        x=f[x][lowbit(dep[x]-dep[y])];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;<span class="comment">// or return y.</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=log2(dep[x]);i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(f[x][i]!=f[y][i])&#123;</span><br><span class="line">            x=f[x][i];</span><br><span class="line">            y=f[y][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>先将两个节点移动至同一深度。
<ul>
<li>这个操作可以通过不断使更深的节点变为它的父节点就行了。</li>
<li>为了快速移动，通过<strong>倍增</strong>来实现。</li>
</ul>
</li>
<li>如果移动至同一深度，两个节点变成同一节点了，那么就可以返回了。</li>
<li>如果不是同一节点，那么就再<strong>同时移动两个节点</strong>（变为它们的父节点），直至最后一个节点的下一层节点。</li>
<li>这个时候返回这层节点的父节点即为答案。</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式 | 初入茅庐[0-9]+</title>
    <url>/2020/09/26/regexp_0/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1>
<p>正则表达式描述了一种字符串匹配的模式是怎么回事呢？正则表达式相信大家都很熟悉，但是正则表达式描述了一种字符串匹配的模式是怎么回事呢，下面就让小编带大家一起了解吧。</p>
<p>正则表达式描述了一种字符串匹配的模式，其实就是正则表达式可以用来匹配字符串，大家可能会很惊讶正则表达式怎么会描述了一种字符串匹配的模式呢？但事实就是这样，小编也感到非常惊讶。</p>
<p>这就是关于正则表达式描述了一种字符串匹配的模式的事情了，大家有什么想法呢，欢迎在评论区告诉小编一起讨论哦！【大雾】</p>
<h1 id="是什么"><a class="markdownIt-Anchor" href="#是什么"></a> 是什么</h1>
<p>在阐述我自己的理解前，先搬出<a href="https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1700215?fr=aladdin" target="_blank" rel="noopener">百度百科</a>的内容撑撑场面。</p>
<div class="snote quote"><p class="p subtitle">度娘百科</p><p><b>正则表达式</b>，又称规则表达式。（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。</p></div>
<blockquote>
<p>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p>
</blockquote>
<blockquote>
<p>正则表达式是对字符串（包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为“元字符”））操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。正则表达式是一种文本模式，该模式描述在搜索文本时要匹配的一个或多个字符串。</p>
</blockquote>
<blockquote>
<p>给定一个正则表达式和另一个字符串，我们可以达到如下的目的：</p>
<ol>
<li>给定的字符串是否符合正则表达式的过滤逻辑（称作“匹配”）</li>
<li>可以通过正则表达式，从字符串中获取我们想要的特定部分。</li>
</ol>
</blockquote>
<p>从上面三段内容可以看到，关键词<strong>检索、过滤、匹配</strong>。而这些工作让我想到了 <code>?</code> <code>*</code>。<br />
我相信大多数人对 <code>?</code> <code>*</code>的作用应该不陌生。在Word文档中，<code>?</code>用于匹配单一字符，<code>*</code>用于匹配多个字符。</p>
<p>例如下面这个例子。我在编辑这篇文章时，发现我居然蠢到把每一个<strong>正则表达式</strong>都打错了。只有<strong>第一个字</strong>和<strong>最后一个字</strong>是正确的。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423223525.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423223654.png" alt="" /></p>
<p>于是我果断地按下了 <code>Ctrl</code> <code>H</code>，勾选了使用通配符。由于<strong>第一个字</strong>和<strong>最后一个字</strong>是正确的，因此查找的内容只需为<code>正*式</code>即可检索到所有错误的<strong>正则表达式</strong>文本。然后点击<strong>全部替换</strong>。便轻松愉快地全部修正了。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423223902.png" alt="" /></p>
<p>或许这时候你要问了。就这？就这？就这？<s>怎么可能会有sabi犯这种错误啊</s>这玩意儿有什么用？<br />
嗐。您可别着急。如果说<strong>正则表达式</strong>并不是这种简单的<code>?</code>和<code>*</code>呢？</p>
<hr />
<h1 id="快速上手"><a class="markdownIt-Anchor" href="#快速上手"></a> 快速上手</h1>
<h2 id="最简单的匹配情况"><a class="markdownIt-Anchor" href="#最简单的匹配情况"></a> 最简单的匹配情况</h2>
<p>最简单的匹配情况相当容易想到，即表达式本身等同于要匹配的表达式。例如使用<code>China</code>匹配下面的文本。就会匹配到下面两个<code>China</code>子字符串。</p>
<p>I love <span class="inline-tag red">China</span>. Long live <span class="inline-tag red">China</span>!</p>
<h2 id="简单的几个符号"><a class="markdownIt-Anchor" href="#简单的几个符号"></a> 简单的几个符号</h2>
<p>再来介绍几个简单的符号，引用我本学期的「编译原理」课程PPT中的一张图片。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200923230150.png" alt="" /></p>
<h3 id="选项-choice-among-alternatives"><a class="markdownIt-Anchor" href="#选项-choice-among-alternatives"></a> 选项 Choice among alternatives</h3>
<p>令<code>r</code>和<code>s</code>是两个正则表达式，那么<code>r|s</code>既可以匹配<code>r</code>能匹配的字符串，也能匹配<code>s</code>能匹配的字符串。<br />
例如使用正则表达式<code>China|Long</code>就能匹配到三个子字符串了。</p>
<p>I love <span class="inline-tag red">China</span>. <span class="inline-tag red">Long</span> live <span class="inline-tag red">China</span>!<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211645.png" alt="" /></p>
<h3 id="连接-concatenation"><a class="markdownIt-Anchor" href="#连接-concatenation"></a> 连接 Concatenation</h3>
<p>连接<strong>没有符号</strong>，直接把一个正则表达式与另一个正则表达式相连即可。<br />
例如之前举过的例子<code>China</code>能够匹配字符串中的<code>China</code>子串。这里是五个字符直接相连的正则表达式。<br />
又例如，<code>(a|b)c</code>，能够匹配字符串 <code>ac</code>或<code>bc</code>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211619.png" alt="" /></p>
<h3 id="重复-repetition"><a class="markdownIt-Anchor" href="#重复-repetition"></a> 重复 Repetition</h3>
<p>重复也被称作是<strong>闭包(closure)</strong>，用符号<code>*</code>表示，其内涵是<strong>可以把<code>*</code>所作用的表达式重复0次或多次</strong>。<br />
注意，作用的表达式是<code>*</code>前的字符串，如果没有打括号的话，就只有一个字符。<br />
例如<code>a*</code>能够匹配<strong>空字符串</strong>、<code>a</code>、<code>aa</code>、<code>aaa</code>等等。<br />
再例如对于正则表达式<code>(a|bb)*</code>，能够匹配<strong>空字符串</strong>，<code>a</code>，<code>bb</code>，<code>aa</code>，<code>abb</code>，<code>bba</code>，<code>bbbb</code>，<code>aaa</code>，<code>aabbbba</code>，<code>abbabbabbbba</code>等等。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211425.png" alt="" /></p>
<h2 id="更多符号"><a class="markdownIt-Anchor" href="#更多符号"></a> 更多符号</h2>
<h3 id="熟悉的老朋友通配符"><a class="markdownIt-Anchor" href="#熟悉的老朋友通配符"></a> 熟悉的老朋友通配符 .</h3>
<p>这里的<code>.</code>的作用等同于我在<strong>是什么</strong>那一节中举例的Word软件中的<code>?</code>。<br />
它可以匹配一个除了换行符以外的字符。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211912.png" alt="" /></p>
<h3 id="加号"><a class="markdownIt-Anchor" href="#加号"></a> 加号 +</h3>
<p>和重复<code>*</code>类似，不过加号是匹配子表达式<strong>一次或多次</strong>。<br />
<code>zo(rua)+</code>能够匹配<code>zorua</code>，<code>zoruarua</code>，<code>zoruaruarua</code>等等。但是不能匹配<code>zo</code>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211347.png" alt="" /></p>
<h3 id="问号"><a class="markdownIt-Anchor" href="#问号"></a> 问号 ?</h3>
<p>还是和重复<code>*</code>类似，不过问号是匹配子表达式<strong>0次或一次</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926212040.png" alt="" /></p>
<h3 id="字符集合"><a class="markdownIt-Anchor" href="#字符集合"></a> 字符集合 [  ]</h3>
<p>匹配所包含的任意一个字符。例如，<code>[abc]</code> 可以匹配<code>plain</code>中的<code>a</code>。<code>[a-z]</code>表示一个范围，可以匹配二十六个字母。<br />
<code>[a-cf-l]</code>表示字母的<code>a</code>到<code>c</code>，然后<code>f</code>到<code>l</code>。也可以使用数字<code>[0-9]</code><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231016.png" alt="" /></p>
<h4 id="否定符号"><a class="markdownIt-Anchor" href="#否定符号"></a> 否定符号 ^</h4>
<p><code>[^xyz]</code>是对<code>[xyz]</code>的否定，即匹配除去<code>xyz</code>三个字母后的其他字符。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231300.png" alt="" /></p>
<h3 id="匹配次数大括号"><a class="markdownIt-Anchor" href="#匹配次数大括号"></a> 匹配次数大括号 {  }</h3>
<p>大括号内填写一个非负整数。<br />
代表前面的表达式应该被匹配的次数。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231822.png" alt="" /></p>
<h4 id="限制下限"><a class="markdownIt-Anchor" href="#限制下限"></a> 限制下限</h4>
<p>如果填写为<code>{n,}</code>的形式，则可以匹配<code>n</code>次以上。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231914.png" alt="" /></p>
<h4 id="限制下限上限"><a class="markdownIt-Anchor" href="#限制下限上限"></a> 限制下限上限</h4>
<p>如果填写为<code>{n,m}</code>的形式，则可以匹配<code>n</code>次以上，最多<code>m</code>次。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926232001.png" alt="" /></p>
<h2 id="转义符号"><a class="markdownIt-Anchor" href="#转义符号"></a> 转义符号</h2>
<p><code>\</code>将下一个字符标记为一个<strong>特殊字符</strong>、或一个<strong>原义字符</strong>、或一个 <strong>向后引用</strong>、或一个<strong>八进制转义符</strong>。例如，‘n’ 匹配字符 “n”。’\n’ 匹配一个换行符。序列 <code>\\</code> 匹配 <code>\</code> 而 <code>\(</code> 则匹配 <code>(</code>。</p>
<p>转义符号的设计使得一些难以输入的字符可以被匹配，或已被使用的字符(例如问号<code>?</code>被在正则表达式里被认为是0,1次匹配。)<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231557.png" alt="" /></p>
<h1 id="在线测试正则表达式"><a class="markdownIt-Anchor" href="#在线测试正则表达式"></a> 在线测试正则表达式</h1>
<p>除了可以在程序内调试正则表达式外，也可以使用在线的一些工具测试正则表达式。例如下面的几个网站。</p>
<ul>
<li><a href="https://c.runoob.com/front-end/854" target="_blank" rel="noopener">菜鸟工具 - 正则表达式在线测试</a></li>
<li><a href="http://tool.chinaz.com/regex/" target="_blank" rel="noopener">站长工具 - 正则表达式在线测试</a></li>
<li><a href="https://www.w3cschool.cn/tools/index?name=reg" target="_blank" rel="noopener">w3school 在线正则表达式测试</a></li>
</ul>
<h1 id="写在最后"><a class="markdownIt-Anchor" href="#写在最后"></a> 写在最后</h1>
<p>关于正则表达式的内容还有很多，一篇文章难以详尽。日后如果有时间，我会再次学习。<br />
在本篇文章中，多处参考了我的朋友Kooer的博文，在此表示对他衷心感谢。<br />
您可以在<a href="https://dooerlly.github.io/2020/09/22/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" target="_blank" rel="noopener">这个链接</a>看到他的博文。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>正则表达式</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 一些填空题的摘录</title>
    <url>/2020/09/11/database_x/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="关于"><a class="markdownIt-Anchor" href="#关于"></a> 关于</h1>
<p>本文档由Zorua自行整理，如果有错误请在评论区反馈，或投递邮件至zoruasama@qq.com。<br />
文档采用<code>CC BY-NC-ND 4.0许可协议</code>。转载本文档请保留本文档地址。<br />
(?)如果您对此留有任何疑问，可以访问<a href="https://zh.wikipedia.org/wiki/%E5%89%B5%E4%BD%9C%E5%85%B1%E7%94%A8%E6%8E%88%E6%AC%8A%E6%A2%9D%E6%AC%BE" target="_blank" rel="noopener">知识共享许可协议</a>以获取帮助。</p>
<h1 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h1>
<ol>
<li>数据管理技术经历了<strong>人工管理、文件系统、数据库管理</strong>三个阶段。</li>
<li>数据库系统中常用的三种模型有<strong>层次模型、网状模型、关系模型</strong>。</li>
<li>数据模型的三要素包括<strong>数据结构、数据操纵或操作、数据的完整性约束</strong>。</li>
<li>实体之间的联系可抽象为三类，它们是<strong>一对一、一对多、多对多</strong>。</li>
<li>在数据库设计中，<strong>数据字典</strong>是系统中各类数据描述的集合，是进行详细的数据收集和数据分析所获得的主要成果。</li>
<li>数据库系统一般由<strong>数据库、数据库应用系统、数据库管理系统、数据库管理员</strong>和用户构成。</li>
<li>数据库系统在运行过程中，可能会发生故障。故障主要有<strong>事务故障、系统故障、介质故障和计算机病毒</strong>四类。</li>
<li>并发控制的主要方法是采用<strong>封锁</strong>机制，其类型有<strong>共享锁</strong>和<strong>排它锁</strong>两种。</li>
<li>数据库的完整性是指数据的<strong>正确性</strong>和<strong>相容性</strong>。</li>
<li>在SQL语言中，为了数据库的安全性，设置了对数据的存取进行控制的语句，对用户授权使用<strong>GRANT</strong>语句，收回所授的权限使用<strong>REVOKE</strong>语句。</li>
<li><strong>数据库</strong>是长期存储在计算机内的、有组织、可共享的数据集合。</li>
<li>数据库系统的三级模式结构是指数据库系统是由<strong>模式</strong>、<strong>外模式</strong>、<strong>内模式</strong>三级构成的。</li>
<li>E-R图一般在数据库设计的<strong>概念结构设计</strong>阶段使用。</li>
<li><strong>事务</strong>是用户定义的一个数据库操作序列，是一个不可分割的工作单位，它具有<strong>原子性</strong>、<strong>一致性</strong>、<strong>隔离性</strong>、<strong>持续性</strong>四个特性。</li>
<li>数据库系统中，系统故障通常称为<strong>软故障</strong>，介质故障称为<strong>硬故障</strong>。</li>
<li>关系操作的特点是<strong>集合</strong>操作。</li>
<li>若事务T对数据对象A加了S锁，则其他事务只能对数据A再加<strong>S</strong>锁，不能加<strong>X</strong>锁，直到事务T释放A上的锁。</li>
<li>现实世界进行第一层抽象的模型，称为<strong>概念</strong>模型；对现实世界进行第二层抽象的模型，称为<strong>数据</strong>模型。</li>
<li>在数据库技术中，编写应用程序的语言仍然是C—类高级语言，这些语言被称为<strong>宿主语言或主语言</strong>。</li>
<li>层次、网状的DML属于<strong>过程性</strong>语言，而关系型DML属于<strong>非过程性</strong>语言。</li>
<li>关系模式的操作异常问题往往是由<strong>数据冗余</strong>引起的。</li>
<li>恢复的基本原则是<strong>冗余</strong>。要使数据库具有可恢复性，在平时要做好两件事：<strong>转储</strong>备份和<strong>记“日志”</strong>。</li>
<li>如果对数据库的并发操作不加以控制，则会带来的问题：<strong>丢失更新</strong>、<strong>读“脏数据”<strong>和</strong>不可重复读</strong>。</li>
<li>事务的执行次序称为<strong>调度</strong>。</li>
<li>判断一个并发调度是否正确，可以用<strong>可串行化</strong>概念来解决。</li>
<li>封锁能避免错误的发生，但会引起<strong>活锁和死锁</strong>问题。</li>
<li>S封锁增加了并发度，但缺点是<strong>容易发生死锁</strong>。</li>
<li>两段式封锁是可串行化的<strong>充分</strong>条件。</li>
<li>SQL中的安全性机制，主要有两个：<strong>视图</strong>和<strong>授权</strong>。</li>
<li>数据库的基本特点是<strong>数据可以共享</strong>或<strong>数据结构化、数据独立性、数据冗余度小，易扩充、统一管理和控制</strong>。</li>
<li>数据库技术中采取分级方法将数据库的结构划分成多个层次，是为了提高数据库的<strong>逻辑独立性</strong>和<strong>物理独立性</strong>。</li>
<li>数据库是长期存储在计算机内，有<strong>组织</strong>的，可<strong>共享</strong>的数据集合</li>
<li>现实世界的事物反映到人的头脑中经过思维加工是数据，这一过程要经历三个领域，依次是<strong>现实世界</strong>，<strong>信息世界</strong>和<strong>计算机世界</strong>。</li>
<li>关系数据库规范化是为解决关系数据库中<strong>插入、删除和数据冗余</strong>问题而引入的。</li>
<li>关系规范中的删除操作异常是指<strong>不该删除的数据被删除</strong>，插入操作异常是指<strong>应该插入的数据未被插入</strong>。</li>
<li>设计性能较优的关系模式称为规范化，规范化主要的理论依据是<strong>关系规范化理论</strong>。</li>
<li>规范化理论是关系数据库进行逻辑设计的理论依据。根据这个理论，关系数据库中的关系必须满足：其每一属性都是<strong>不可分解的</strong>。</li>
<li>关系模型是把实体之间的联系用<strong>二维表格</strong>表示。</li>
<li>在关系数据库中，当关系的类型改变时，用户程序也可以不变，这是<strong>数据的逻辑独立性</strong>。</li>
<li>当数据库的存储结构改变时，可相应修改<strong>模式/内模式映像</strong>，从而保持模式不变。</li>
<li>在数据库系统的三级模式体系结构中，描述数据在数据库中的物理结构或存储方式的是<strong>内模式</strong>。</li>
<li>在数据库系统的三级组织结构中，DBA视图是<strong>概念模式</strong>，系统程序员视图是<strong>内模式</strong>，用户视图是<strong>外模式</strong>。</li>
<li>在数据库的三级模式体系结构中，模式与内模式之间的映象<strong>模式/内模式</strong>，实现了数据库的<strong>物理</strong>独立性。</li>
<li>描述概念模型常用的方法是<strong>实体–联系方法</strong>。</li>
<li>在数据库设计中，将E-R图转换成关系数据模型的过程属于<strong>逻辑设计阶段</strong>。</li>
<li>在数据库设计的4个阶段中，每个阶段都有自己的设计内容。“在哪些表、在哪些属性上、建什么样的索引”，这一内容应该属于<strong>物理</strong>设计阶段。</li>
<li>在登录日志文件时，应该先<strong>登录日志文件</strong>，后<strong>更新数据库</strong>。</li>
<li>对数据对象施加封锁，可能会引起活锁和死锁问题。预防死锁通常有<strong>一次封锁法</strong>和<strong>顺序封锁法</strong>两种方法。</li>
<li>数据库管理系统通常提供授权功能来控制不同用户访问数据的权限，这主要是为了实现数据库的<strong>安全性</strong>。</li>
</ol>
<h1 id="测试"><a class="markdownIt-Anchor" href="#测试"></a> 测试</h1>
<p><button>隐藏答案</button></p>
<script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
<script>
$('button').on('click',function(){
        console.log("By Zorua");
         $('strong').css('color',"white");
     })
</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 7. 关系数据理论</title>
    <url>/2020/09/07/database_6/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>关系数据理论
<ul>
<li>问题的提出</li>
<li>函数依赖
<ul>
<li>函数依赖</li>
<li>平凡函数依赖与非平凡函数依赖</li>
<li>完全函数依赖与部分函数依赖</li>
<li>传递函数依赖</li>
</ul>
</li>
<li>码</li>
<li>范式
<ul>
<li>1NF</li>
<li>2NF
<ul>
<li>SLC不是一个好的关系模式</li>
<li>原因及解决办法</li>
<li>2NF的定义</li>
</ul>
</li>
<li>3NF
<ul>
<li>解决方法</li>
<li>3NF的定义</li>
</ul>
</li>
<li>BC 范式
<ul>
<li>解决方法</li>
<li>3NF与BCNF的关系</li>
<li>BCNF的关系模式所具有的性质</li>
</ul>
</li>
<li>规范化
<ul>
<li>关系模式规范化的基本步骤</li>
<li>规范化的基本思想</li>
</ul>
</li>
</ul>
</li>
<li>数据依赖的公理系统
<ul>
<li>Armstrong公理系统</li>
<li>导出规则</li>
<li>函数依赖闭包
<ul>
<li>关于闭包的引理</li>
</ul>
</li>
<li>函数依赖集等价
<ul>
<li>最小依赖集</li>
<li>极小化过程</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="问题的提出"><a class="markdownIt-Anchor" href="#问题的提出"></a> 问题的提出</h1>
<ul>
<li>关系数据库逻辑设计
<ul>
<li>针对具体问题，如何构造一个适合于它的数据模式</li>
<li>数据库逻辑设计的工具──关系数据库的规范化理论</li>
</ul>
</li>
</ul>
<h1 id="函数依赖"><a class="markdownIt-Anchor" href="#函数依赖"></a> 函数依赖</h1>
<h2 id="函数依赖-2"><a class="markdownIt-Anchor" href="#函数依赖-2"></a> 函数依赖</h2>
<p>设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>是一个属性集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>上的关系模式，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>的子集。<br />
若对于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>的任意一个可能的关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>中不可能存在两个元组在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>上的属性值相等， 而在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>上的属性值不等， 则称 <strong>X函数确定Y</strong> 或<strong>Y函数依赖于X</strong>，记作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。<br />
X称为这个函数依赖的<strong>决定属性集</strong>(Determinant)。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Y=f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></p>
<ol>
<li>函数依赖不是指关系模式R的某个或某些关系实例满足的约束条件，而是指R的<strong>所有关系实例</strong>均要满足的约束条件。</li>
<li>函数依赖是<strong>语义范畴</strong>的概念。只能根据数据的语义来确定函数依赖。<br />
例如“姓名→年龄”这个函数依赖只有在不允许有同名人的条件下成立</li>
<li>数据库设计者可以对现实世界作强制的规定。例如规定不允许同名人出现，函数依赖“姓名→年龄”成立。所插入的元组必须满足规定的函数依赖，若发现有同名人存在， 则拒绝装入该元组。</li>
</ol>
<blockquote>
<p><strong>例</strong><br />
Student(Sno, Sname, Ssex, Sage, Sdept)<br />
假设不允许重名，则有:<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>s</mi><mi>e</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Ssex</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span></span></span></span>， <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Sage</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span></span></span></span> , <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span>，<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>←</mo><mo>→</mo><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>→</mo><mi>S</mi><mi>s</mi><mi>e</mi><mi>x</mi><mo separator="true">,</mo><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>→</mo><mi>S</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">Sno \leftarrow \rightarrow Sname, Sname \rightarrow Ssex, Sname \rightarrow Sage</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sname \rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span><br />
但<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>s</mi><mi>e</mi><mi>x</mi><mo>→</mo><mi>S</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">Ssex \rightarrow Sage</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span></span></span></span><br />
若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，并且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>,  则记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>←</mo><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\leftarrow \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。<br />
若Y不函数依赖于X,   则记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>↛</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\not\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</p>
</blockquote>
<h2 id="平凡函数依赖与非平凡函数依赖"><a class="markdownIt-Anchor" href="#平凡函数依赖与非平凡函数依赖"></a> 平凡函数依赖与非平凡函数依赖</h2>
<p>在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>中，对于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>的子集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，<br />
如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，但<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊈</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\not\subseteq X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，则称X→Y是<strong>非平凡的函数依赖</strong><br />
若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，但<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊆</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\subseteq X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>,   则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是<strong>平凡的函数依赖</strong></p>
<blockquote>
<p><strong>例</strong><br />
在关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SC(Sno, Cno, Grade)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span>中，</p>
<ol>
<li>非平凡函数依赖： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mo>→</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \rightarrow Grade</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span></span></span></span></li>
<li>平凡函数依赖：     <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mo>→</mo><mi>S</mi><mi>n</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \rightarrow Sno</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mo>→</mo><mi>C</mi><mi>n</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \rightarrow Cno</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span></span></span></span></li>
</ol>
</blockquote>
<p>任一关系模式，平凡函数依赖都是必然成立的，它不反映新的语义，因此若不特别声明， 我们总是讨论非平凡函数依赖。</p>
<h2 id="完全函数依赖与部分函数依赖"><a class="markdownIt-Anchor" href="#完全函数依赖与部分函数依赖"></a> 完全函数依赖与部分函数依赖</h2>
<p>在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>中，如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，并且对于X的任何一个真子集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">X&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>，都有</p>
<ul>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal">′</mo></msup><mo>↛</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X&#x27;\not\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.946332em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>, 则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>完全函数依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，记作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mover><mo><mo>→</mo></mo><mi>f</mi></mover><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\mathop{\rightarrow}\limits^{f} Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.200086em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.200086em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.613978em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，但Y不完全函数依赖于X，则称Y部分函数依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，记作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mover><mo><mo>→</mo></mo><mi>P</mi></mover><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \mathop{\rightarrow}\limits^{P}   Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1452010000000001em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1452010000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</li>
</ul>
<h2 id="传递函数依赖"><a class="markdownIt-Anchor" href="#传递函数依赖"></a> 传递函数依赖</h2>
<p>在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>中，如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊈</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\not\subseteq X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span><strong>传递函数依赖于</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>。<br />
注: 如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>， 即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>←</mo><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\leftarrow \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span><strong>直接依赖</strong>于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>。</p>
<blockquote>
<p><strong>例</strong><br />
在关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>t</mi><mi>d</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Std(Sno, Sdept, Sloc)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">t</span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span></span></span></span>中，有：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo>→</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sdept \rightarrow Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span>传递函数依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">Sno</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span></span></span></span></p>
</blockquote>
<h1 id="码"><a class="markdownIt-Anchor" href="#码"></a> 码</h1>
<p>设K为关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>中的属性或属性组合。若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mover><mo><mo>→</mo></mo><mi>f</mi></mover><mi>U</mi></mrow><annotation encoding="application/x-tex">K \mathop{\rightarrow}\limits^{f} U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.200086em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.200086em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.613978em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，则K称为R的一个候选码（Candidate Key）。若关系模式R有多个候选码，则选定其中的一个做为主码（Primary key）。</p>
<h1 id="范式"><a class="markdownIt-Anchor" href="#范式"></a> 范式</h1>
<ul>
<li>范式是符合某一种级别的关系模式的集合。</li>
<li>关系数据库中的关系必须满足一定的要求。满足不同程度要求的为不同范式。</li>
<li>范式的种类：
<ul>
<li>第一范式(1NF)</li>
<li>第二范式(2NF)</li>
<li>第三范式(3NF)</li>
<li>BC范式(BCNF)</li>
<li>第四范式(4NF)</li>
<li>第五范式(5NF)</li>
</ul>
</li>
<li>各种范式之间存在联系：
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>2</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>3</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">C</mi><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>4</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>5</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">1\mathrm{NF} \supset 2\mathrm{NF} \supset 3\mathrm{NF} \supset \mathrm{BCNF} \supset 4\mathrm{NF} \supset 5\mathrm{NF}F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">3</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord mathrm">B</span><span class="mord mathrm">C</span><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">4</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
</ul>
</li>
<li>某一关系模式R为第n范式，可简记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>n</mi><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow></mrow><annotation encoding="application/x-tex">R\in n\mathrm{NF}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span></span></span></span>。</li>
</ul>
<h2 id="1nf"><a class="markdownIt-Anchor" href="#1nf"></a> 1NF</h2>
<ul>
<li>1NF的定义
<ul>
<li>如果<strong>一个关系模式R的所有属性</strong>都是不可分的基本数据项，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>1</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow></mrow><annotation encoding="application/x-tex">R\in 1\mathrm{NF}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span></span></span></span>。</li>
<li>第一范式是对关系模式的最起码的要求。不满足第一范式的数据库模式不能称为关系数据库。</li>
<li>但是满足第一范式的关系模式并不一定是一个好的关系模式。</li>
</ul>
</li>
</ul>
<h2 id="2nf"><a class="markdownIt-Anchor" href="#2nf"></a> 2NF</h2>
<ul>
<li>
<p>例: 关系模式   SLC(Sno, Sdept, Sloc, Cno, Grade)</p>
</li>
<li>
<pre><code>Sloc为学生住处，假设每个系的学生住在同一个地方。
</code></pre>
</li>
<li>
<p>函数依赖包括：</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mover><mo><mo>→</mo></mo><mi>f</mi></mover><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \mathop{\rightarrow}\limits^f     Grade</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.450086em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.200086em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.613978em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo><mo>→</mo></mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno \mathop{\rightarrow} Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">→</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mover><mo><mo>→</mo></mo><mi>P</mi></mover><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \mathop{\rightarrow}\limits^P     Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3952010000000001em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1452010000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo><mo>→</mo></mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sno \mathop{\rightarrow} Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">→</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mover><mo><mo>→</mo></mo><mi>P</mi></mover><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \mathop{\rightarrow}\limits^P     Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3952010000000001em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1452010000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo><mo>→</mo></mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sdept \mathop{\rightarrow} Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">→</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200519200344.png" alt="" /></p>
<ul>
<li>SLC的码为(Sno, Cno)</li>
<li>SLC满足第一范式。</li>
<li>非主属性Sdept和Sloc部分函数依赖于码(Sno, Cno)</li>
</ul>
<h3 id="slc不是一个好的关系模式"><a class="markdownIt-Anchor" href="#slc不是一个好的关系模式"></a> SLC不是一个好的关系模式</h3>
<ol>
<li>插入异常<br />
假设Sno＝95102，Sdept＝IS，Sloc＝N的学生还未选课，因课程号是主属性，因此该学生的信息无法插入SLC。</li>
<li>删除异常<br />
假定某个学生本来只选修了3号课程这一门课。现在因身体不适，他连3号课程也不选修了。因课程号是主属性，此操作将导致该学生信息的整个元组都要删除。</li>
<li>数据冗余度大<br />
如果一个学生选修了10门课程，那么他的Sdept和Sloc值就要重复存储了10次。</li>
<li>修改复杂<br />
例如学生转系，在修改此学生元组的Sdept值的同时，还可能需要修改住处（Sloc）。如果这个学生选修了K门课，则必须无遗漏地修改K个元组中全部Sdept、Sloc信息。</li>
</ol>
<h3 id="原因及解决办法"><a class="markdownIt-Anchor" href="#原因及解决办法"></a> 原因及解决办法</h3>
<ul>
<li>Sdept、 Sloc部分函数依赖于码。</li>
<li>SLC分解为两个关系模式，以消除这些部分函数依赖
<ul>
<li>SC（Sno， Cno， Grade）</li>
<li>SL（Sno， Sdept， Sloc）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200519202552.png" alt="" /></li>
</ul>
</li>
</ul>
<h3 id="2nf的定义"><a class="markdownIt-Anchor" href="#2nf的定义"></a> 2NF的定义</h3>
<ul>
<li>
<p>若关系模式R∈1NF，并且每一个非主属性都完全函数依赖于R的码，则R∈2NF。</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>1</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SLC(Sno, Sdept, Sloc, Cno, Grade) \in 1NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SLC(Sno, Sdept, Sloc, Cno, Grade) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SC(Sno, Cno, Grade) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SL(Sno, Sdept, Sloc) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
</ul>
</li>
<li>
<p>采用投影分解法将一个1NF的关系分解为多个2NF的关系，可以在一定程度上减轻原1NF关系中存在的插入异常、删除异常、数据冗余度大、修改复杂等问题。</p>
</li>
<li>
<p>将一个1NF关系分解为多个2NF的关系，并不能完全消除关系模式中的各种异常情况和数据冗余。</p>
</li>
</ul>
<h2 id="3nf"><a class="markdownIt-Anchor" href="#3nf"></a> 3NF</h2>
<ul>
<li>
<p>例：2NF关系模式SL(Sno, Sdept, Sloc)中<br />
函数依赖：</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno\rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo>→</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sdept\rightarrow Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sno\rightarrow Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span><br />
Sloc传递函数依赖于Sno，即SL中存在非主属性对码的传递函数依赖。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520211845.png" alt="" /></p>
</li>
</ul>
<h3 id="解决方法"><a class="markdownIt-Anchor" href="#解决方法"></a> 解决方法</h3>
<p>采用投影分解法，把SL分解为两个关系模式，以消除传递函数依赖：</p>
<ul>
<li>SD（Sno, Sdept）</li>
<li>DL（Sdept, Sloc）<br />
SD的码为Sno， DL的码为Sdept。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520225001.png" alt="" /></li>
</ul>
<h3 id="3nf的定义"><a class="markdownIt-Anchor" href="#3nf的定义"></a> 3NF的定义</h3>
<p>关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>中若不存在这样的码X、属性组Y及非主属性Z（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>⊈</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">Z\not\subseteq Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>）, 使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mo separator="true">,</mo><mi>Y</mi><mo>→</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y,Y\rightarrow X,Y\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，成立，则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>。</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SL(Sno, Sdept, Sloc) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SL(Sno, Sdept, Sloc) \in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>D</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SD(Sno, Sdept) \in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">DL(Sdept, Sloc)\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
</ul>
<hr />
<ul>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，则R的每一个非主属性既不部分函数依赖于候选码也不传递函数依赖于候选码。</li>
<li>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，则R也是2NF。</li>
<li>采用投影分解法将一个2NF的关系分解为多个3NF的关系，可以在一定程度上解决原2NF关系中存在的插入异常、删除异常、数据冗余度大、修改复杂等问题。</li>
<li>将一个2NF关系分解为多个3NF的关系后，并不能完全消除关系模式中的各种异常情况和数据冗余。</li>
</ul>
<h2 id="bc-范式"><a class="markdownIt-Anchor" href="#bc-范式"></a> BC 范式</h2>
<ul>
<li>设关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo><mo>∈</mo><mn>1</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;\in 1NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，如果对于R的每个函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，若Y不属于X，则X必含有候选码，那么<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>。</li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>
<ul>
<li>每一个决定属性集（因素）都包含（候选）码</li>
<li>R中的所有属性（主，非主属性）都完全函数依赖于码</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>（证明）</li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>    则  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>不一定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span><br />
例：在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>T</mi><mi>J</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>T</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">STJ(S,T,J)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span></span></span></span>中，S表示学生，T表示教师，J表示课程。<br />
每一教师只教一门课。每门课由若干教师教，某一学生选定某门课，就确定了一个固定的教师。某个学生选修某个教师的课就确定了所选课的名称 ：                <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo><mo>→</mo><mi>T</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>T</mi><mo stretchy="false">)</mo><mo>→</mo><mi>J</mi><mo separator="true">,</mo><mi>T</mi><mo>→</mo><mi>J</mi></mrow><annotation encoding="application/x-tex">(S,J)\rightarrow T,(S,T)\rightarrow J,T\rightarrow J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520230033.png" alt="" /></li>
</ul>
</li>
</ul>
<h3 id="解决方法-2"><a class="markdownIt-Anchor" href="#解决方法-2"></a> 解决方法</h3>
<ul>
<li>将STJ分解为二个关系模式：</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>J</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi><mi mathvariant="normal">，</mi><mi>T</mi><mi>J</mi><mo stretchy="false">(</mo><mi>T</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SJ(S,J) \in BCNF， TJ(T,J)\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>没有<strong>任何属性</strong>对码的部分函数依赖和传递函数依赖</li>
</ul>
<h3 id="3nf与bcnf的关系"><a class="markdownIt-Anchor" href="#3nf与bcnf的关系"></a> 3NF与BCNF的关系</h3>
<ul>
<li>如果关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，必定有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，且R只有一个候选码，则必定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>。</li>
</ul>
<h3 id="bcnf的关系模式所具有的性质"><a class="markdownIt-Anchor" href="#bcnf的关系模式所具有的性质"></a> BCNF的关系模式所具有的性质</h3>
<ol>
<li>所有<strong>非主属性</strong>都完全函数依赖于每个候选码</li>
<li>所有<strong>主属性</strong>都完全函数依赖于每个不包含它的候选码</li>
<li>没有任何属性完全函数依赖于<strong>非码</strong>的任何一组属性</li>
</ol>
<h2 id="规范化"><a class="markdownIt-Anchor" href="#规范化"></a> 规范化</h2>
<ul>
<li>关系数据库的规范化理论是数据库逻辑设计的工具。</li>
<li>一个关系只要其分量都是不可分的数据项，它就是规范化的关系，但这只是最基本的规范化。</li>
<li>规范化程度可以有多个不同的级别</li>
<li>规范化程度过低的关系不一定能够很好地描述现实世界，可能会存在插入异常、删除异常、修改复杂、数据冗余等问题</li>
<li>一个低一级范式的关系模式，通过模式分解可以转换为若干个高一级范式的关系模式集合，这种过程就叫<strong>关系模式的规范化</strong></li>
</ul>
<h3 id="关系模式规范化的基本步骤"><a class="markdownIt-Anchor" href="#关系模式规范化的基本步骤"></a> 关系模式规范化的基本步骤</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520230604.png" alt="" /></p>
<h3 id="规范化的基本思想"><a class="markdownIt-Anchor" href="#规范化的基本思想"></a> 规范化的基本思想</h3>
<ul>
<li>消除不合适的数据依赖</li>
<li>使模式中的各关系模式达到某种程度的“分离”</li>
<li>采用“一事一地”的模式设计原则
<ul>
<li>让一个关系描述一个概念、一个实体或者实体间的一种联系。若多于一个概念就把它“分离”出去</li>
</ul>
</li>
<li>所谓规范化实质上是<strong>概念的单一化</strong></li>
<li>不能说规范化程度越高的关系模式就越好</li>
<li>在设计数据库模式结构时，必须对现实世界的实际情况和用户应用需求作进一步分析，确定一个合适的、能够反映现实世界的模式</li>
<li>上面的规范化步骤可以在其中任何一步终止</li>
</ul>
<h1 id="数据依赖的公理系统"><a class="markdownIt-Anchor" href="#数据依赖的公理系统"></a> 数据依赖的公理系统</h1>
<p>对于满足一组<strong>函数依赖</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>的关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>，其任何一个关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，若函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>都成立, 则称F<strong>逻辑蕴含</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</p>
<h2 id="armstrong公理系统"><a class="markdownIt-Anchor" href="#armstrong公理系统"></a> Armstrong公理系统</h2>
<ul>
<li>一套推理规则，是模式分解算法的理论基础</li>
<li>用途
<ul>
<li>求给定关系模式的码</li>
<li>从一组函数依赖求得蕴含的函数依赖</li>
</ul>
</li>
</ul>
<hr />
<p>关系模式R &lt;U，F &gt;来说有以下的推理规则：</p>
<ul>
<li>自反律（Reflexivity）：若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊆</mo><mi>X</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">Y \subseteq X \subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含。</li>
<li>增广律（Augmentation）：若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>为F所蕴含，且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">Z \subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mi>Z</mi><mo>→</mo><mi>Y</mi><mi>Z</mi></mrow><annotation encoding="application/x-tex">XZ\rightarrow YZ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含。</li>
<li>传递律（Transitivity）：若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>及<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含。</li>
</ul>
<p>注意：由自反律所得到的函数依赖均是平凡的函数依赖，自反律的使用并不依赖于F</p>
<h2 id="导出规则"><a class="markdownIt-Anchor" href="#导出规则"></a> 导出规则</h2>
<p>根据A1，A2，A3这三条推理规则可以得到下面三条推理规则：</p>
<ul>
<li>合并规则：由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mo separator="true">,</mo><mi>X</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y, X\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow YZ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>。</li>
<li>伪传递规则：由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mo separator="true">,</mo><mi>W</mi><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y, WY\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mi>W</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">XW\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>。</li>
<li>分解规则：由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>及 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>⊆</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">Z\subseteq Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>。</li>
</ul>
<hr />
<ul>
<li>引理：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>A</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">X→A_1,A_2\cdots A_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>成立的充分必要条件是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X\rightarrow A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>成立<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mi>l</mi><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i=l,2,\cdots,k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>。</li>
</ul>
<h2 id="函数依赖闭包"><a class="markdownIt-Anchor" href="#函数依赖闭包"></a> 函数依赖闭包</h2>
<ul>
<li>在关系模式R&lt;U，F&gt;中为F所逻辑蕴含的函数依赖的全体叫作<strong>F的闭包</strong>，记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>F</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>。</li>
<li>设F为属性集U上的一组函数依赖，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">X\subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>， <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span> ={A|X→A能由F根据Armstrong公理导出}，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span>称为<strong>属性集X关于函数依赖集F的闭包</strong>。</li>
</ul>
<h3 id="关于闭包的引理"><a class="markdownIt-Anchor" href="#关于闭包的引理"></a> 关于闭包的引理</h3>
<ul>
<li><strong>内容</strong>：设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>为属性集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>上的一组函数依赖，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">X,Y \subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>能由F 根据Armstrong公理导出的充分必要条件是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊆</mo><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">Y\subseteq X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span></li>
<li><strong>用途</strong>：将判定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是否能由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>根据Armstrong公理导出的问题，就转化为求出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span> ，判定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是否为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span>的子集的问题。</li>
</ul>
<h2 id="函数依赖集等价"><a class="markdownIt-Anchor" href="#函数依赖集等价"></a> 函数依赖集等价</h2>
<p>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>G</mi><mo>+</mo></msup><mo>=</mo><msup><mi>F</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">G^+=F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>，就说函数依赖集F<strong>覆盖</strong>G（F是G的覆盖，或G是F的覆盖），或F与G<strong>等价</strong>。</p>
<h3 id="最小依赖集"><a class="markdownIt-Anchor" href="#最小依赖集"></a> 最小依赖集</h3>
<p>如果函数依赖集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>满足下列条件，则称F为一个<strong>极小函数依赖集</strong>。亦称为<strong>最小依赖集</strong>或<strong>最小覆盖</strong>。</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>中任一函数依赖的右部仅含有一个属性。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>中不存在这样的函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">X\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>，使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>−</mo><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow></mrow><annotation encoding="application/x-tex">F-{X\rightarrow A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span></span></span></span></span>等价。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>中不存在这样的函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">X\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>， X有真子集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>−</mo><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><mo>∪</mo><mrow><mi>Z</mi><mo>→</mo><mi>A</mi></mrow></mrow><annotation encoding="application/x-tex">F-{X\rightarrow A}\cup{Z\rightarrow A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span></span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>等价。</li>
</ul>
<h3 id="极小化过程"><a class="markdownIt-Anchor" href="#极小化过程"></a> 极小化过程</h3>
<p>每一个函数依赖集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>均等价于一个极小函数依赖集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">F_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。此<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">F_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>称为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>的最小依赖集。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux入门 | 3.常用命令</title>
    <url>/2020/08/27/Linux_2/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="基础命令"><a class="markdownIt-Anchor" href="#基础命令"></a> 基础命令</h1>
<p>在<a href="/2020/04/14/Linux_1/#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4">上一篇文章</a>中，我写到了在<code>Linux</code>系统中常用了8个命令，在这篇文章中，将会对这8个命令作较为详细的解析。<br />
如果各位读者对本文有所不清晰或认为有错误的地方，欢迎来评论区指出。我会及时确认并修正。</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>命令</th>
<th>对应英语</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>ls</td>
<td>list</td>
<td>列出指定文件夹下的内容</td>
</tr>
<tr>
<td>02</td>
<td>pwd</td>
<td>print work directory</td>
<td>显示当前工作路径</td>
</tr>
<tr>
<td>03</td>
<td>cd</td>
<td>change directory</td>
<td>改变当前工作路径</td>
</tr>
<tr>
<td>04</td>
<td>touch</td>
<td>touch</td>
<td>新建一个空白文件</td>
</tr>
<tr>
<td>05</td>
<td>mkdir</td>
<td>make directory</td>
<td>创建一个新的目录</td>
</tr>
<tr>
<td>06</td>
<td>rm</td>
<td>remove</td>
<td>删除指定文件</td>
</tr>
<tr>
<td>07</td>
<td>clear</td>
<td>clear</td>
<td>清除当前屏幕上的信息（新建一屏）</td>
</tr>
<tr>
<td>08</td>
<td>reset</td>
<td>reset</td>
<td>重置终端</td>
</tr>
</tbody>
</table>
<h1 id="命令格式"><a class="markdownIt-Anchor" href="#命令格式"></a> 命令格式</h1>
<p>在终端中，命令通常是按照如下格式进行的：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">command</span> [-options] [parameter]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>command</code>：命令名称，</li>
<li><code>[-options]</code>：选项，可用来对命令进行控制，实现不同的效果。这一项可以省略。</li>
<li><code>parameter</code>：传给命令的参数，可以是 <strong>零个</strong>、<strong>一个</strong> 或者 <strong>多个</strong></li>
</ul>
<h1 id="ls-命令说明"><a class="markdownIt-Anchor" href="#ls-命令说明"></a> ls 命令说明</h1>
<ul>
<li><code>ls</code> 是<strong>list</strong> 的缩写，功能是列出指定文件夹下的内容，可以类比于 <strong>DOS</strong> 下的 <code>dir</code> 命令。</li>
<li><code>ls path</code>显示path路径的目录下的内容。</li>
<li>如果直接使用<code>ls</code>，等价于<code>ls .</code>（下文有解释<code>.</code>）。</li>
</ul>
<h2 id="ls-常用选项"><a class="markdownIt-Anchor" href="#ls-常用选项"></a> ls 常用选项</h2>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示指定目录下所有子目录与文件，包括<strong>隐藏文件</strong></td>
</tr>
<tr>
<td>-l</td>
<td>以<strong>列表方式</strong>显示文件的详细信息</td>
</tr>
<tr>
<td>-h</td>
<td>配合 -l 以人性化的方式显示文件大小</td>
</tr>
</tbody>
</table>
<h2 id="linux-系统的文件和目录的特点"><a class="markdownIt-Anchor" href="#linux-系统的文件和目录的特点"></a> Linux 系统的文件和目录的特点</h2>
<ul>
<li><strong>文件</strong> 或者 <strong>目录</strong> 名称最长可以有 <code>256</code> 个字符</li>
<li>以 <code>.</code> 开头的文件为隐藏文件，需要用 -a 参数才能显示</li>
<li><strong>.</strong> 代表当前目录，也可以叫做工作目录（或者工作路径）</li>
<li><strong>…</strong> 代表上一级目录</li>
<li>上面这两个目录严格来说也是<code>.</code>开头的，所以也是在 -a 参数下才能显示。</li>
</ul>
<h3 id="绝对路径与相对路径"><a class="markdownIt-Anchor" href="#绝对路径与相对路径"></a> 绝对路径与相对路径</h3>
<p>在Linux中，以path作为参数时，可分为绝对路径和相对路径。</p>
<ul>
<li>
<p><strong>绝对路径</strong><br />
从<strong>根目录</strong><code>/</code>开始，依次将各级子目录的名字组合起来，形成的路径就称为某个文件的绝对路径。例如，根目录（/）下有目录usr，usr目录下有子目录bin，bin目录下有文件chsh，则chsh文件的绝对路径就是：/usr/bin/chsh。</p>
</li>
<li>
<p><strong>相对路径</strong><br />
相对当前所在路径的位置，例如当前所在的位置为/usr，也就是在根目录的usr子目录下，则chsh文件相对当前位置的路径为：bin/chsh。</p>
</li>
</ul>
<div class="snote guide"><p>相对路径就是相对于当前工作目录的路径。例如我想显示当前工作目录的上一级目录下的文件：ls ..</p></div>
<h2 id="ls-通配符的使用"><a class="markdownIt-Anchor" href="#ls-通配符的使用"></a> ls 通配符的使用</h2>
<p>在<code>ls</code>命令的参数中，可以使用通配符。</p>
<table>
<thead>
<tr>
<th>通配符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>代表任意个数个字符</td>
</tr>
<tr>
<td>?</td>
<td>代表任意一个字符，至少 1 个</td>
</tr>
<tr>
<td>[]</td>
<td>表示可以匹配字符组中的任一一个</td>
</tr>
<tr>
<td>[abc]</td>
<td>匹配 a、b、c 中的任意一个</td>
</tr>
<tr>
<td>[a-f]</td>
<td>匹配从 a 到 f 范围内的的任意一个字符</td>
</tr>
</tbody>
</table>
<h2 id="演示"><a class="markdownIt-Anchor" href="#演示"></a> 演示</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827191622.gif" alt="" /></p>
<h1 id="pwd-命令说明"><a class="markdownIt-Anchor" href="#pwd-命令说明"></a> pwd 命令说明</h1>
<ul>
<li><code>pwd</code> 命令相对比较简单，就是显示当前工作目录。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827192734.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827192945.png" alt="" /></li>
</ul>
<h2 id="演示-2"><a class="markdownIt-Anchor" href="#演示-2"></a> 演示</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827191855.gif" alt="" /></p>
<h1 id="cd-命令说明"><a class="markdownIt-Anchor" href="#cd-命令说明"></a> cd 命令说明</h1>
<h2 id="使用cd命令"><a class="markdownIt-Anchor" href="#使用cd命令"></a> 使用cd命令</h2>
<ul>
<li>如果单纯地使用<code>cd</code>命令，等价于<code>cd ~</code>或<code>cd /home/username</code>
<ul>
<li>即切换到家目录</li>
</ul>
</li>
<li><code>cd</code>后面可以接<strong>绝对路径</strong>或<strong>相对路径</strong>作为参数。</li>
<li><code>cd -</code>可以来回切换目录，即<strong>访问上一次访问的目录</strong>。</li>
</ul>
<h2 id="演示-3"><a class="markdownIt-Anchor" href="#演示-3"></a> 演示</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827192449.gif" alt="" /></p>
<h1 id="touch-命令说明"><a class="markdownIt-Anchor" href="#touch-命令说明"></a> touch 命令说明</h1>
<p><code>touch</code>用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，<strong>系统会建立一个新的文件</strong>。<br />
作为入门级教程，我们只需要知道<code>touch</code>命令可以创建一个空白文件就行了。<br />
语法：<code>touch filename</code></p>
<h2 id="演示-4"><a class="markdownIt-Anchor" href="#演示-4"></a> 演示</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827200707.gif" alt="" /></p>
<h1 id="mkdir-命令说明"><a class="markdownIt-Anchor" href="#mkdir-命令说明"></a> mkdir 命令说明</h1>
<ul>
<li><code>mkdir path</code>会创建一个path目录。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827203633.gif" alt="" /></li>
</ul>
<hr />
<p>如果path是一个较长的路径，例如<code>aaa/bbb/ccc/ddd</code>这个例子，需要确保<code>aaa``bbb``ccc</code>文件夹都已经存在。<br />
如果加一个<code>-p</code>选项（递归创建目录），则不需要确保这些文件夹都已经存在。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827204408.gif" alt="" /></p>
<h1 id="rm-命令说明"><a class="markdownIt-Anchor" href="#rm-命令说明"></a> rm 命令说明</h1>
<p>使用<code>rm</code>时请<strong>万分小心</strong>，<code>rm</code>是删除文件或目录，是<strong>不可逆操作</strong>。<br />
<code>rm</code>后接文件名就可以了。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827204738.gif" alt="" /></p>
<h2 id="选项"><a class="markdownIt-Anchor" href="#选项"></a> 选项</h2>
<p>如果想用<code>rm</code>删除目录，则应该加一个<code>-r</code>选项，代表递归删除。<br />
如果想用<code>rm</code>删除前进行提示，则应该加一个<code>-i</code>选项。<br />
如果想用<code>rm</code>强制删除，则应该加一个<code>-f</code>选项。<br />
下面是这些选项的演示：</p>
<h3 id="递归删除"><a class="markdownIt-Anchor" href="#递归删除"></a> 递归删除</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827205022.gif" alt="" /></p>
<h3 id="删除前提示"><a class="markdownIt-Anchor" href="#删除前提示"></a> 删除前提示</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827205304.gif" alt="" /></p>
<h1 id="查阅命令帮助信息"><a class="markdownIt-Anchor" href="#查阅命令帮助信息"></a> 查阅命令帮助信息</h1>
<blockquote>
<p>提示</p>
<ul>
<li>现阶段只需要 <strong>知道</strong> 通过以下两种方式可以查询命令的帮助信息</li>
<li>先学习<strong>常用命令</strong>及<strong>常用选项</strong>的使用即可，工作中如果遇到问题可以借助 <strong>网络搜索</strong></li>
</ul>
</blockquote>
<h2 id="-help"><a class="markdownIt-Anchor" href="#-help"></a> <code>--help</code></h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">command</span> --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>显示 <code>command</code> 命令的帮助信息</li>
<li>示例：<code>pwd --help</code></li>
</ul>
<h2 id="man"><a class="markdownIt-Anchor" href="#man"></a> man</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">man <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>查阅 <code>command</code> 命令的使用手册</li>
<li>示例：<code>man pwd</code></li>
</ul>
<blockquote>
<p><code>man</code> 是 <strong>manual</strong> 的缩写，是 Linux 提供的一个 <strong>手册</strong>，包含了绝大部分的命令、函数的详细使用说明</p>
</blockquote>
<p>使用 <code>man</code> 时的操作键：</p>
<table>
<thead>
<tr>
<th>操作键</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>空格键</td>
<td>显示手册页的下一屏</td>
</tr>
<tr>
<td>Enter 键</td>
<td>一次滚动手册页的一行</td>
</tr>
<tr>
<td>b</td>
<td>回滚一屏</td>
</tr>
<tr>
<td>f</td>
<td>前滚一屏</td>
</tr>
<tr>
<td>q</td>
<td>退出</td>
</tr>
<tr>
<td>/word</td>
<td>搜索 <strong>word</strong> 字符串</td>
</tr>
</tbody>
</table>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>操作系统</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 20. 答辩的终稿</title>
    <url>/2020/08/20/training_20/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>今天是8月14日，实训的第20天。实训的最后一天。<br />
今天我如预期一样地完成了答辩，两位老师似乎对我的项目及答辩都还很满意。<br />
看着自己完整的项目和老师的认可，我感到非常有成就感。<br />
我能在这取得一个小小的进步，离不开孟老师的耐心教导，同学们友爱的帮助。<br />
由于我今天中午又加了一些新的内容，所以也在这里再对昨天的内容进行补充。</p>
<h1 id="事先准备"><a class="markdownIt-Anchor" href="#事先准备"></a> 事先准备</h1>
<ul>
<li>另一块屏幕用来播放本文档</li>
<li>已经开启服务的项目（原项目，处于登录状态，数据仅有一页）</li>
<li>ZOL手机报价网站</li>
<li>360安全浏览器</li>
</ul>
<h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
<ul>
<li>名称：指上云霄手机信息查阅系统</li>
<li>功能：提供爬虫和数据可视化两部分功能。
<ul>
<li>爬虫：可以在页面上调用后台接口，爬取ZOL手机报价网站上的数据并存储到数据库中。</li>
<li>数据可视化：可以在页面上显示手机的相关数据信息。</li>
</ul>
</li>
</ul>
<h1 id="介绍数据爬取来源"><a class="markdownIt-Anchor" href="#介绍数据爬取来源"></a> 介绍数据爬取来源</h1>
<ul>
<li>手机报价首页</li>
<li>手机配置参数页</li>
<li>手机评价页面</li>
<li>bilibili搜索</li>
</ul>
<p>难点：ZOL手机报价的页面很多都不一样。对于一些没有评价或未上市的手机数据不予爬取。</p>
<h1 id="应用页面"><a class="markdownIt-Anchor" href="#应用页面"></a> 应用页面</h1>
<p>应用的页面有<strong>登录注册页面</strong>、<strong>数据可视化首页</strong>、<strong>爬虫页面</strong>、<strong>数据柱状图页面</strong>、<strong>关于页面</strong>五个页面。</p>
<h2 id="登录注册页面"><a class="markdownIt-Anchor" href="#登录注册页面"></a> 登录注册页面</h2>
<ul>
<li>在图1中点击注册按钮可切换为图2界面，图2界面点击返回按钮可切换为图1界面。</li>
<li>在<strong>注册登录界面</strong>，对填充的文本内容有长度和字符内容的限制。例如用户名和密码只能为字母和数字组成。</li>
<li>在此界面注册后，密码将以加密后的文本进行存储。</li>
<li><strong>如果还未登录，企图访问其他网页，则会自动跳转至登录注册页面</strong>。反之，若在登录后，访问该登录注册页面，将会自动跳转至首页。</li>
</ul>
<h2 id="数据可视化首页"><a class="markdownIt-Anchor" href="#数据可视化首页"></a> 数据可视化首页</h2>
<ul>
<li>数据可视化首页会在顶部显示<strong>当前的数据库条目数量</strong>。</li>
<li>数据可视化首页显示的手机信息的序列，将是一个<strong>随机序列</strong>。</li>
<li><strong>在刚载入页面时，首页只会显示8条数据。当滚轮被滑到底部时，将会再次载入至多4条数据。实现了动态加载数据的过程，直至数据库的所有数据都已呈现</strong>。
<ul>
<li>每次载入的数据都是从后端被渲染完毕后，以HTML的形式插入的。</li>
</ul>
</li>
<li><strong>每个标签左侧会读取数据库中的基本信息并显示，右侧会以echarts雷达图的形式显示当前的数据和平均的数据。</strong></li>
<li>点击名字可以弹出bilibili的视频。</li>
</ul>
<h2 id="爬虫页面"><a class="markdownIt-Anchor" href="#爬虫页面"></a> 爬虫页面</h2>
<p>在文本框填入要爬取数据的第几页，点击爬虫，即可爬取数据。<br />
数据来源是<strong>ZOL手机报价</strong>。</p>
<ul>
<li>如果选择的页号已经被爬取到数据库中，后端将会拒绝该爬取请求。</li>
<li>如果选择的页号不符合要求，后端也会拒绝该爬取请求。</li>
<li>清空数据库前，需要填入事先在后端设置好的密码。</li>
</ul>
<h2 id="数据柱状图页面"><a class="markdownIt-Anchor" href="#数据柱状图页面"></a> 数据柱状图页面</h2>
<p>该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。<br />
该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。</p>
<ul>
<li>单击柱状条可以在下方显示手机信息卡片。</li>
<li>双击柱状条会自动跳转到和这个手机相关的B站视频链接。</li>
</ul>
<h2 id="关于页面"><a class="markdownIt-Anchor" href="#关于页面"></a> 关于页面</h2>
<p>关于页面比较简单，仅仅只是显示了本文档的<strong>简介</strong>部分的内容。在此不再赘述。</p>
<h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1>
<p>接口分成两个模块，UserInfo模块和echarts模块。</p>
<h2 id="userinfo"><a class="markdownIt-Anchor" href="#userinfo"></a> UserInfo</h2>
<ul>
<li>index，被请求时，将会返回<strong>登录注册页面</strong>。</li>
<li>user_login，仅能被POST请求，参数为username和password。用于登录。</li>
<li>user_register，仅能被POST请求，参数为username和password及emailAddress。用于注册。</li>
<li>user_activate，能被GET请求，参数为id。用于注册账号的激活。将会返回一个JsonResponse。</li>
<li>is_login，参数为id。被请求时，会检查浏览器的session，查看是否登录。</li>
<li>user_logout，参数为id。被请求时，将会删除浏览器的session。</li>
</ul>
<h2 id="echarts"><a class="markdownIt-Anchor" href="#echarts"></a> echarts</h2>
<ul>
<li>空，被请求时，返回<strong>数据可视化首页</strong>。</li>
<li>run_page，被请求时，返回<strong>爬虫页面</strong>。</li>
<li>hot_page，被请求时，返回<strong>数据柱状图页面</strong>。</li>
<li>about，被请求时，返回<strong>关于页面</strong>。</li>
<li>timenow，被请求时，返回含有系统现行时间信息的JsonResponse。</li>
<li>run，参数为index，仅能被POST请求。被请求后，将会启动爬虫程序。</li>
<li>get_hot_json，被请求时，返回一个字典。字典内容为数据库中所有手机的名称、价格、分数数据。</li>
<li>delete，仅能被POST请求。将会清空数据库数据。</li>
<li>get_data，参数为index，将会从数据库中读取序号为index的手机数据并返回一个JsonResponse。</li>
<li>get_random_dict，以列表的形式产生一个随机的序列。</li>
<li>get_average，被请求时，将以JsonResponse返回数据库中所有数据的评分的平均值。</li>
<li>init_zorua_box，参数为index，将读取数据库中的数据，并对指定的HTML文件进行渲染，然后<strong>将渲染后的HTML文件返回</strong>。</li>
</ul>
<h1 id="数据库结构"><a class="markdownIt-Anchor" href="#数据库结构"></a> 数据库结构</h1>
<ul>
<li>User(id,username,password,is_activate)</li>
<li>Phone(id,name,price,img,score)</li>
<li>config(phone,soc,camera,camera_vice,ram,battery,screen_size,image)</li>
<li>evaluation(phone,cost_performance,performance,endurance,design,photograph)</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 19. 答辩的准备</title>
    <url>/2020/08/13/training_19/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>今天是8月13日，实训的第19天。实训即将步入尾声。<br />
今天是答辩的第一天。<br />
而我是在第二天答辩。今天准备了一下答辩的思路。</p>
<h1 id="事先准备"><a class="markdownIt-Anchor" href="#事先准备"></a> 事先准备</h1>
<ul>
<li>另一块屏幕用来播放本文档</li>
<li>已经开启服务的项目（原项目，处于登录状态，数据仅有一页）</li>
<li>ZOL手机报价网站</li>
<li>360安全浏览器</li>
</ul>
<h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
<ul>
<li>名称：指上云霄手机信息查阅系统</li>
<li>功能：提供爬虫和数据可视化两部分功能。
<ul>
<li>爬虫：可以在页面上调用后台接口，爬取ZOL手机报价网站上的数据并存储到数据库中。</li>
<li>数据可视化：可以在页面上显示手机的相关数据信息。</li>
</ul>
</li>
</ul>
<h1 id="介绍数据爬取来源"><a class="markdownIt-Anchor" href="#介绍数据爬取来源"></a> 介绍数据爬取来源</h1>
<ul>
<li>手机报价首页</li>
<li>手机配置参数页</li>
<li>手机评价页面</li>
<li>bilibili搜索</li>
</ul>
<p>难点：ZOL手机报价的页面很多都不一样。对于一些没有评价或未上市的手机数据不予爬取。</p>
<h1 id="应用页面"><a class="markdownIt-Anchor" href="#应用页面"></a> 应用页面</h1>
<p>应用的页面有<strong>登录注册页面</strong>、<strong>数据可视化首页</strong>、<strong>爬虫页面</strong>、<strong>数据柱状图页面</strong>、<strong>关于页面</strong>五个页面。</p>
<h2 id="登录注册页面"><a class="markdownIt-Anchor" href="#登录注册页面"></a> 登录注册页面</h2>
<ul>
<li>在图1中点击注册按钮可切换为图2界面，图2界面点击返回按钮可切换为图1界面。</li>
<li>在<strong>注册登录界面</strong>，对填充的文本内容有长度和字符内容的限制。例如用户名和密码只能为字母和数字组成。</li>
<li>在此界面注册后，密码将以加密后的文本进行存储。</li>
<li><strong>如果还未登录，企图访问其他网页，则会自动跳转至登录注册页面</strong>。反之，若在登录后，访问该登录注册页面，将会自动跳转至首页。</li>
</ul>
<h2 id="数据可视化首页"><a class="markdownIt-Anchor" href="#数据可视化首页"></a> 数据可视化首页</h2>
<ul>
<li>数据可视化首页会在顶部显示<strong>当前的数据库条目数量</strong>。</li>
<li>数据可视化首页显示的手机信息的序列，将是一个<strong>随机序列</strong>。</li>
<li><strong>在刚载入页面时，首页只会显示8条数据。当滚轮被滑到底部时，将会再次载入至多4条数据。实现了动态加载数据的过程，直至数据库的所有数据都已呈现</strong>。
<ul>
<li>每次载入的数据都是从后端被渲染完毕后，以HTML的形式插入的。</li>
</ul>
</li>
<li><strong>每个标签左侧会读取数据库中的基本信息并显示，右侧会以echarts雷达图的形式显示当前的数据和平均的数据。</strong></li>
<li>点击名字可以弹出bilibili的视频。</li>
</ul>
<h2 id="爬虫页面"><a class="markdownIt-Anchor" href="#爬虫页面"></a> 爬虫页面</h2>
<p>在文本框填入要爬取数据的第几页，点击爬虫，即可爬取数据。<br />
数据来源是<strong>ZOL手机报价</strong>。</p>
<ul>
<li>如果选择的页号已经被爬取到数据库中，后端将会拒绝该爬取请求。</li>
<li>如果选择的页号不符合要求，后端也会拒绝该爬取请求。</li>
<li>清空数据库前，需要填入事先在后端设置好的密码。</li>
</ul>
<h2 id="数据柱状图页面"><a class="markdownIt-Anchor" href="#数据柱状图页面"></a> 数据柱状图页面</h2>
<p>该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。</p>
<h2 id="关于页面"><a class="markdownIt-Anchor" href="#关于页面"></a> 关于页面</h2>
<p>关于页面比较简单，仅仅只是显示了本文档的<strong>简介</strong>部分的内容。在此不再赘述。</p>
<h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1>
<p>接口分成两个模块，UserInfo模块和echarts模块。</p>
<h2 id="userinfo"><a class="markdownIt-Anchor" href="#userinfo"></a> UserInfo</h2>
<ul>
<li>index，被请求时，将会返回<strong>登录注册页面</strong>。</li>
<li>user_login，仅能被POST请求，参数为username和password。用于登录。</li>
<li>user_register，仅能被POST请求，参数为username和password及emailAddress。用于注册。</li>
<li>user_activate，能被GET请求，参数为id。用于注册账号的激活。将会返回一个JsonResponse。</li>
<li>is_login，参数为id。被请求时，会检查浏览器的session，查看是否登录。</li>
<li>user_logout，参数为id。被请求时，将会删除浏览器的session。</li>
</ul>
<h2 id="echarts"><a class="markdownIt-Anchor" href="#echarts"></a> echarts</h2>
<ul>
<li>空，被请求时，返回<strong>数据可视化首页</strong>。</li>
<li>run_page，被请求时，返回<strong>爬虫页面</strong>。</li>
<li>hot_page，被请求时，返回<strong>数据柱状图页面</strong>。</li>
<li>about，被请求时，返回<strong>关于页面</strong>。</li>
<li>timenow，被请求时，返回含有系统现行时间信息的JsonResponse。</li>
<li>run，参数为index，仅能被POST请求。被请求后，将会启动爬虫程序。</li>
<li>get_hot_json，被请求时，返回一个字典。字典内容为数据库中所有手机的名称、价格、分数数据。</li>
<li>delete，仅能被POST请求。将会清空数据库数据。</li>
<li>get_data，参数为index，将会从数据库中读取序号为index的手机数据并返回一个JsonResponse。</li>
<li>get_random_dict，以列表的形式产生一个随机的序列。</li>
<li>get_average，被请求时，将以JsonResponse返回数据库中所有数据的评分的平均值。</li>
<li>init_zorua_box，参数为index，将读取数据库中的数据，并对指定的HTML文件进行渲染，然后<strong>将渲染后的HTML文件返回</strong>。</li>
</ul>
<h1 id="数据库结构"><a class="markdownIt-Anchor" href="#数据库结构"></a> 数据库结构</h1>
<ul>
<li>User(id,username,password,is_activate)</li>
<li>Phone(id,name,price,img,score)</li>
<li>config(phone,soc,camera,camera_vice,ram,battery,screen_size,image)</li>
<li>evaluation(phone,cost_performance,performance,endurance,design,photograph)</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 18. 我的项目介绍</title>
    <url>/2020/08/12/training_18/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>今天是8月12日，实训的第18天。实训即将步入尾声。<br />
今天孟老师依然全天给同学们进行答疑。<br />
我整理了一下我的项目的相关信息以准备明天后天的答辩。<br />
整理内容如下。</p>
<h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
<ul>
<li>名称：指上云霄手机信息查阅系统</li>
<li>功能：提供爬虫和数据可视化两部分功能。
<ul>
<li>爬虫：可以在页面上调用后台接口，爬取ZOL手机报价网站上的数据并存储到数据库中。</li>
<li>数据可视化：可以在页面上显示手机的相关数据信息。</li>
</ul>
</li>
<li>开发工具：PyCharm</li>
<li>后台开发语言：Python3</li>
<li>前端开发语言：HTML5+CSS+JavaScript</li>
<li>作者：张仁忠(Zorua) 2018065527</li>
<li>指导老师：孟老师（mzm5466）</li>
</ul>
<h1 id="应用页面"><a class="markdownIt-Anchor" href="#应用页面"></a> 应用页面</h1>
<p>应用的页面有<strong>登录注册页面</strong>、<strong>数据可视化首页</strong>、<strong>爬虫页面</strong>、<strong>数据柱状图页面</strong>、<strong>关于页面</strong>五个页面。</p>
<h2 id="登录注册页面"><a class="markdownIt-Anchor" href="#登录注册页面"></a> 登录注册页面</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240970_20200812210057628_27841.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240972_20200812210113431_24575.png" alt="" /></p>
<ul>
<li>在图1中点击注册按钮可切换为图2界面，图2界面点击返回按钮可切换为图1界面。</li>
<li>在<strong>注册登录界面</strong>，对填充的文本内容有长度和字符内容的限制。例如用户名和密码只能为字母和数字组成。</li>
<li>在此界面注册后，密码将以加密后的文本进行存储。</li>
<li><strong>如果还未登录，企图访问其他网页，则会自动跳转至登录注册页面</strong>。反之，若在登录后，访问该登录注册页面，将会自动跳转至首页。</li>
</ul>
<h2 id="数据可视化首页"><a class="markdownIt-Anchor" href="#数据可视化首页"></a> 数据可视化首页</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240973_20200812210444412_15098.png" alt="" /></p>
<ul>
<li>数据可视化首页会在顶部显示<strong>当前的数据库条目数量</strong>。</li>
<li>数据可视化首页显示的手机信息的序列，将是一个<strong>随机序列</strong>。</li>
<li><strong>在刚载入页面时，首页只会显示8条数据。当滚轮被滑到底部时，将会再次载入至多4条数据。实现了动态加载数据的过程，直至数据库的所有数据都已呈现</strong>。
<ul>
<li>每次载入的数据都是从后端被渲染完毕后，以HTML的形式插入的。</li>
</ul>
</li>
<li><strong>每个标签左侧会读取数据库中的基本信息并显示，右侧会以echarts雷达图的形式显示当前的数据和平均的数据。</strong></li>
</ul>
<h2 id="爬虫页面"><a class="markdownIt-Anchor" href="#爬虫页面"></a> 爬虫页面</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240973_20200812212702692_31578.png" alt="" /><br />
在文本框填入要爬取数据的第几页，点击爬虫，即可爬取数据。<br />
数据来源是<strong>ZOL手机报价</strong>。</p>
<ul>
<li>如果选择的页号已经被爬取到数据库中，后端将会拒绝该爬取请求。</li>
<li>如果选择的页号不符合要求，后端也会拒绝该爬取请求。</li>
<li>清空数据库前，需要填入事先在后端设置好的密码。</li>
</ul>
<h2 id="数据柱状图页面"><a class="markdownIt-Anchor" href="#数据柱状图页面"></a> 数据柱状图页面</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240973_20200812212945780_14328.png" alt="" /><br />
该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。</p>
<h2 id="关于页面"><a class="markdownIt-Anchor" href="#关于页面"></a> 关于页面</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240974_20200812214757439_29652.png" alt="" /><br />
关于页面比较简单，仅仅只是显示了本文档的<strong>简介</strong>部分的内容。在此不再赘述。</p>
<h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1>
<p>接口分成两个模块，UserInfo模块和echarts模块。</p>
<h2 id="userinfo"><a class="markdownIt-Anchor" href="#userinfo"></a> UserInfo</h2>
<ul>
<li>index，被请求时，将会返回<strong>登录注册页面</strong>。</li>
<li>user_login，仅能被POST请求，参数为username和password。用于登录。</li>
<li>user_register，仅能被POST请求，参数为username和password及emailAddress。用于注册。</li>
<li>user_activate，能被GET请求，参数为id。用于注册账号的激活。将会返回一个JsonResponse。</li>
<li>is_login，参数为id。被请求时，会检查浏览器的session，查看是否登录。</li>
<li>user_logout，参数为id。被请求时，将会删除浏览器的session。</li>
</ul>
<h2 id="echarts"><a class="markdownIt-Anchor" href="#echarts"></a> echarts</h2>
<ul>
<li>空，被请求时，返回<strong>数据可视化首页</strong>。</li>
<li>run_page，被请求时，返回<strong>爬虫页面</strong>。</li>
<li>hot_page，被请求时，返回<strong>数据柱状图页面</strong>。</li>
<li>about，被请求时，返回<strong>关于页面</strong>。</li>
<li>timenow，被请求时，返回含有系统现行时间信息的JsonResponse。</li>
<li>run，参数为index，仅能被POST请求。被请求后，将会启动爬虫程序。</li>
<li>get_hot_json，被请求时，返回一个字典。字典内容为数据库中所有手机的名称、价格、分数数据。</li>
<li>delete，仅能被POST请求。将会清空数据库数据。</li>
<li>get_data，参数为index，将会从数据库中读取序号为index的手机数据并返回一个JsonResponse。</li>
<li>get_random_dict，以列表的形式产生一个随机的序列。</li>
<li>get_average，被请求时，将以JsonResponse返回数据库中所有数据的评分的平均值。</li>
<li>init_zorua_box，参数为index，将读取数据库中的数据，并对指定的HTML文件进行渲染，然后<strong>将渲染后的HTML文件返回</strong>。</li>
</ul>
<h1 id="数据库结构"><a class="markdownIt-Anchor" href="#数据库结构"></a> 数据库结构</h1>
<ul>
<li>User(id,username,password,is_activate)</li>
<li>Phone(id,name,price,img,score)</li>
<li>config(phone,soc,camera,camera_vice,ram,battery,screen_size,image)</li>
<li>evaluation(phone,cost_performance,performance,endurance,design,photograph)</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 17. 一些乱七八糟的随笔</title>
    <url>/2020/08/11/training_17/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>今天是8月11日，实训的第17天。实训即将步入尾声。<br />
今天孟老师全程在给同学答疑，但是由于我的大作业已经完成了，基本上没有什么问题需要向孟老师询问。<br />
所以今天的日志就写一写，在答疑过程中，收获的几个比较有意思的知识点吧。</p>
<h1 id="eval"><a class="markdownIt-Anchor" href="#eval"></a> eval()</h1>
<h2 id="描述"><a class="markdownIt-Anchor" href="#描述"></a> 描述</h2>
<p>eval() 函数是python内置函数，用来执行一个字符串表达式，并返回表达式的值。</p>
<h3 id="语法"><a class="markdownIt-Anchor" href="#语法"></a> 语法</h3>
<p>以下是 eval() 方法的语法:<br />
eval(expression[, globals[, locals]])</p>
<h3 id="参数"><a class="markdownIt-Anchor" href="#参数"></a> 参数</h3>
<ul>
<li>expression – 表达式。</li>
<li>globals – 变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。</li>
<li>locals – 变量作用域，局部命名空间，如果被提供，可以是任何映射对象。</li>
</ul>
<h3 id="返回值"><a class="markdownIt-Anchor" href="#返回值"></a> 返回值</h3>
<p>返回表达式计算结果。</p>
<h2 id="实例"><a class="markdownIt-Anchor" href="#实例"></a> 实例</h2>
<p>以下展示了使用 eval() 方法的实例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;x &#x3D; 7</span><br><span class="line">&gt;&gt;&gt; eval( &#39;3 * x&#39; )</span><br><span class="line">21</span><br><span class="line">&gt;&gt;&gt; eval(&#39;pow(2,2)&#39;)</span><br><span class="line">4</span><br><span class="line">&gt;&gt;&gt; eval(&#39;2 + 2&#39;)</span><br><span class="line">4</span><br><span class="line">&gt;&gt;&gt; n&#x3D;81</span><br><span class="line">&gt;&gt;&gt; eval(&quot;n + 4&quot;)</span><br><span class="line">85</span><br></pre></td></tr></table></figure>
<h2 id="感悟"><a class="markdownIt-Anchor" href="#感悟"></a> 感悟</h2>
<p>用这个eval()函数，我可以将一个列表以字符串的形式存储在一个文件中，然后读取文件并把数据作为eval()的函数，就可变成python中的列表对象。<br />
我将这个特性应用在了我的大作业中，体现在可以“对已经爬取过数据的页码进行存档”。</p>
<h1 id="html的for循环"><a class="markdownIt-Anchor" href="#html的for循环"></a> html的for循环</h1>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.top</span>&#123;</span></span><br><span class="line">                float: left;</span><br><span class="line">                margin-left: 22px;</span><br><span class="line">                margin-top: 30px;</span><br><span class="line">                height: 320px;</span><br><span class="line">                width: 240px;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.top</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line">                width: 100%;</span><br><span class="line">                height: 100%;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"tu1"</span> <span class="attr">src</span>=<span class="string">"../pic/1.jpg"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//1、先用js获取到div的内容</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementsByClassName(<span class="string">'top'</span>).innerHTML;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> re = <span class="string">""</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> tu = <span class="number">1</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span></span><br><span class="line">        tu++;</span><br><span class="line"><span class="handlebars"><span class="xml">        re += '<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span>' +</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            '<span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"tu1"</span> <span class="attr">src</span>=<span class="string">"../pic/'+tu+'.jpg"</span>&gt;</span>' +</span></span></span><br><span class="line"><span class="actionscript">            <span class="string">'&lt;/div&gt;'</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.writeln(re);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>就像上面这段代码一样，可以在html里应用“for”循环来重复div元素。<br />
众所周知，html并不被认为是一种编程语言，我也是这么想的，但是html里还有for循环实在让我有些惊讶。<br />
可用来实现画面的渲染。（但是我的大作业中不是以这种方式实现的，而是以后端渲染html页面后，插入到已存在的标签中。）</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 16. 服务器的部署</title>
    <url>/2020/08/10/training_16/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>今天是8月10日，实训的第16天。<br />
上午孟老师演示了如何将Django项目部署在云服务器上。<br />
由于我没有云服务器，因此用装有Centos7的虚拟机来代替。<br />
将项目部署在虚拟机上的过程也不算容易，途中遇到了不少坎坷。例如我的centos在刚开始时连不上网络，rc命令无法上传等等。<br />
靠着不断百度到的CSDN的资料还是艰难地克服了难题，完成了部署。<br />
今天还有部分关于Nginx的还未讲授完，为保证该笔记的一体性，我也加上去了。</p>
<h1 id="ssh设置"><a class="markdownIt-Anchor" href="#ssh设置"></a> SSH设置</h1>
<h2 id="启动ssh服务"><a class="markdownIt-Anchor" href="#启动ssh服务"></a> 启动ssh服务</h2>
<p>在打开centos虚拟机后，先用<code>yum install openssh* -y</code>安装开启SSH必备的程序。<br />
而后用<code>vi /etc/ssh/sshd config</code>命令打开sshd的配置文件。<br />
修改内容为：</p>
<ul>
<li><code>ListenAddress 0.0.0.0</code>和<code>ListenAddress ::</code>的井号去掉。</li>
<li><code>PermitRootLogin</code>前的井号去掉。</li>
</ul>
<p>完成这些操作后，用<code>systemctl restart sshd</code>指令重启sshd服务。</p>
<h2 id="查询ip地址"><a class="markdownIt-Anchor" href="#查询ip地址"></a> 查询IP地址</h2>
<p>接下来使用<code>ifconfig</code>来查询虚拟机的IP地址。<br />
由于我的centos7没有内置ifconfig命令，因此需要进行额外的安装。<br />
通过<code>yum search ifconfig</code>命令发现，ifconfig命令在net-tools.x86_64这个包里。<br />
因此使用<code>yum install net-tools.x86_64</code>命令来进行安装。</p>
<h2 id="建立ssh连接"><a class="markdownIt-Anchor" href="#建立ssh连接"></a> 建立SSH连接</h2>
<p>在配置完SSH服务和获取IP地址后，在本机上的XShell或者其他能SSH连接的shell中输入<code>ssh ip address</code>进行连接。<br />
通过命令<code>sudo apt install lrzsz unzip -y</code>解压缩上传工具，但由于我安装成功后也无法使用<code>rc</code>命令，因此只能采用<code>scp</code>命令。<br />
形如<code>scp a.txt root@ip:/home</code>的命令，来完成文件的上传。</p>
<p>ln -s /usr/local/python3/bin/uwsgi /usr/bin/uwsgi 创建软连接</p>
<h1 id="安装python3"><a class="markdownIt-Anchor" href="#安装python3"></a> 安装python3</h1>
<p>centos自带了一个python2，但是没有python3。因此需要安装一个python3。依照以下步骤即可完成python3的安装。</p>
<ol>
<li>拉取远程包<code>yum install wget -y</code></li>
<li>安装编译时需要的程序<code>yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel python-devel gcc make -y</code></li>
<li>在home创建一个目录<code>mkdir python37</code></li>
<li>切换到目标文件夹 <code>cd python37/</code></li>
<li>获取python的源文件 <code>wget https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz</code>
<ul>
<li>直接从官网获取速度会比较慢，因此也可以使用阿里云的源<code>https://npm.taobao.org/mirrors/python/3.7.2/Python-3.7.2.tar.xz</code></li>
</ul>
</li>
<li>使用tar命令进行解压 <code>tar -xvJf Python-3.7.2.tar.xz</code></li>
<li>进入解压后的目录，指定编译路径 <code>./configure prefix=/usr/local/python3</code></li>
<li>进行文件的编译<code>make &amp;&amp; make install</code>
<ul>
<li>如果报错ModuleNotFoundError: No module named ‘_ctypes’，则<code>yum install libffi-devel –y</code></li>
</ul>
</li>
<li>删除旧的python2 <code>rm -rf /usr/bin/python</code></li>
<li>创建软连接 <code>ln -s /usr/local/python3/bin/python3 /usr/bin/python</code></li>
<li>修改yum vim <code>/usr/bin/yum</code></li>
<li><code>vim /usr/libexec/urlgrabber-ext-down</code></li>
<li>永久换pip源  <code>mkdir ~/.pip</code></li>
<li>vim <code>~/.pip/pip.conf</code></li>
<li>在前一步文件都迁移过来后，安装工程项目所需的包。</li>
</ol>
<pre><code>+ `python -m pip install -r r.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`
+ 其中`r.txt`的内容是，工程项目所需要的包的名字。一行一个。
</code></pre>
<h1 id="uwsgi部署"><a class="markdownIt-Anchor" href="#uwsgi部署"></a> uwsgi部署</h1>
<p>uwsgi --ini uwsgi.ini 前台以http方式启动uwsgi<br />
uwsgi -d --ini uwsgi.ini 以后台运行uwsgi<br />
pkill -f uwsgi -9 杀死uwsgi服务</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line">chdir &#x3D; &#x2F;home&#x2F;qd201909dj #设置项目根目录</span><br><span class="line">module &#x3D; qd201909dj.wsgi:application #设置项目启动器</span><br><span class="line">master &#x3D; true  #设置主节点</span><br><span class="line">processes &#x3D; 1  #设置进程数</span><br><span class="line">http &#x3D; 0.0.0.0:80  #以http形式访问</span><br><span class="line">chmod-socket &#x3D; 644</span><br><span class="line">vacuum &#x3D; true #服务停止杀死pid</span><br><span class="line">logto &#x3D; &#x2F;home&#x2F;qd201909dj&#x2F;test.log  #输出日志</span><br><span class="line">pidfile &#x3D; &#x2F;home&#x2F;qd201909dj&#x2F;uwsgi.pid  #pid文件</span><br><span class="line">static-map &#x3D; &#x2F;static &#x3D;  &#x2F;home&#x2F;qd201909dj&#x2F; 静态文件</span><br><span class="line">py-autoreload &#x3D; 1  #修改后自动重启项目（生产不可用）</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Nginx</span><br><span class="line">server&#123;</span><br><span class="line">    listen        80;</span><br><span class="line">    server_name   39.100.6.138;</span><br><span class="line">    charset       utf-8;</span><br><span class="line"></span><br><span class="line">    client_max_body_size 75M;</span><br><span class="line"></span><br><span class="line">    location &#x2F;static &#123;</span><br><span class="line">        alias &#x2F;home&#x2F;qd201909dj;</span><br><span class="line">    &#125;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        uwsgi_pass 127.0.0.1:8888;</span><br><span class="line">        include     &#x2F;etc&#x2F;nginx&#x2F;uwsgi_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="生成文件服务器"><a class="markdownIt-Anchor" href="#生成文件服务器"></a> 生成文件服务器</h2>
<ol>
<li>yum install httpd-tools -y</li>
<li>htpasswd -bc /home/htpasswd python（用户名） python2019（密码）</li>
<li>配置文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen        9999;</span><br><span class="line">    server_name   39.100.6.138;</span><br><span class="line">    charset       utf-8;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">       auth_basic &quot;input your user name and password&quot;;</span><br><span class="line">       auth_basic_user_file     &#x2F;home&#x2F;htpasswd;#密码文件</span><br><span class="line">       autoindex on;  #自动展示索引文件</span><br><span class="line">       root &#x2F;home&#x2F;;  #显示的目录</span><br><span class="line">    &#125;</span><br><span class="line">    location ^*\.(*)$ &#123;</span><br><span class="line">        add_header Content-Type text&#x2F;plain;</span><br><span class="line">        root &#x2F;home&#x2F;;   ##匹配下载的目录</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 15. Django打分系统示例</title>
    <url>/2020/08/07/training_15/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>今天是8月7日，实训的第15天。<br />
上午孟老师演示了如何用Django做一个打分系统，先是分析需求——<br />
打分系统需要满足：</p>
<ul>
<li>录入学生信息</li>
<li>添加评委账号</li>
<li>企业打分占比50%</li>
<li>校内打分占比50%</li>
<li>成绩汇总显示</li>
<li>导出成绩 查询账号 可查分数 学号</li>
</ul>
<p>下午主要是帮助同学们答疑。由于我的项目已经接近尾声，所以我比较闲，我也就跟着帮助同学了。</p>
<h1 id="打分系统"><a class="markdownIt-Anchor" href="#打分系统"></a> 打分系统</h1>
<h2 id="数据库的建立"><a class="markdownIt-Anchor" href="#数据库的建立"></a> 数据库的建立</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserTeacher</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    username =models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'用户名'</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'密码'</span>)</span><br><span class="line">    nickname =  models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'昵称'</span>)</span><br><span class="line">    kind = models.IntegerField(verbose_name=<span class="string">'是否企业老师'</span>) <span class="comment">#0不是 1 是</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.nickname</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'教师账号'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StundentInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    username = models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'用户名'</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'密码'</span>,default=<span class="string">'123456'</span>)</span><br><span class="line">    nickname =  models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'昵称'</span>)</span><br><span class="line">    score = models.IntegerField(verbose_name=<span class="string">'总得分'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.username+<span class="string">"_"</span>+self.nickname</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'学生账号'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CompanyScore</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    score1 = models.IntegerField(verbose_name=<span class="string">'寻求解决方案的能力'</span>)</span><br><span class="line">    score2 = models.IntegerField(verbose_name=<span class="string">'综合应用分析的能力'</span>)</span><br><span class="line">    score3 = models.IntegerField(verbose_name=<span class="string">'考虑社会等因素'</span>)</span><br><span class="line">    score4 = models.IntegerField(verbose_name=<span class="string">'工具的选择和使用能力'</span>)</span><br><span class="line">    score5 = models.IntegerField(verbose_name=<span class="string">'沟通交流能力'</span>)</span><br><span class="line">    score6 = models.IntegerField(verbose_name=<span class="string">'考勤'</span>)</span><br><span class="line">    student = models.ForeignKey(StundentInfo,on_delete=models.CASCADE,verbose_name=<span class="string">'学生'</span>)</span><br><span class="line">    teacher = models.ForeignKey(UserTeacher,on_delete=models.CASCADE,verbose_name=<span class="string">'老师'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.student.nickname,self.teacher.nickname,self.student.username</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'企业打分'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SchoolScore</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    score1 = models.IntegerField(verbose_name=<span class="string">'实习日志'</span>)</span><br><span class="line">    score2 = models.IntegerField(verbose_name=<span class="string">'实习报告'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="视图的建立"><a class="markdownIt-Anchor" href="#视图的建立"></a> 视图的建立</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,redirect</span><br><span class="line"><span class="keyword">from</span> api.models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.forms.models <span class="keyword">import</span> model_to_dict</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">'POST'</span>:</span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        user_check=UserTeacher.objects.filter(username=username,password=password)</span><br><span class="line">        <span class="keyword">if</span> user_check:</span><br><span class="line">            request.session[<span class="string">'techer_id'</span>]=user_check.first().id</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">'/student_page/'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'登陆失败'</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">'login.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_score_by_company</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">'POST'</span>:</span><br><span class="line">        username=request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        teacher_id=request.session[<span class="string">'techer_id'</span>]</span><br><span class="line">        has_score=CompanyScore.objects.filter(teacher_id=teacher_id)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_score:</span><br><span class="line">            student_id=StundentInfo.objects.get(username=username).id</span><br><span class="line">            systemDict = &#123;&#125;</span><br><span class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> request.POST:</span><br><span class="line">                systemDict[key] = request.POST.get(key)</span><br><span class="line">            <span class="keyword">del</span> systemDict[<span class="string">'username'</span>]</span><br><span class="line">            CompanyScore.objects.create(**systemDict,teacher_id=teacher_id,student_id=student_id).save()</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'打分成功'</span>&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'您已经为该同学打过分了，请勿重复打分'</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'company_score.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_score_by_school</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">'POST'</span>:</span><br><span class="line">        username=request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        teacher_id=request.session[<span class="string">'techer_id'</span>]</span><br><span class="line">        has_score=SchoolScore.objects.filter(teacher_id=teacher_id)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_score:</span><br><span class="line">            student_id=StundentInfo.objects.get(username=username).id</span><br><span class="line">            systemDict = &#123;&#125;</span><br><span class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> request.POST:</span><br><span class="line">                systemDict[key] = request.POST.get(key)</span><br><span class="line">            <span class="keyword">del</span> systemDict[<span class="string">'username'</span>]</span><br><span class="line">            SchoolScore.objects.create(**systemDict,teacher_id=teacher_id,student_id=student_id).save()</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'打分成功'</span>&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'您已经为该同学打过分了，请勿重复打分'</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'shcool_score.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">score_all</span><span class="params">(request)</span>:</span></span><br><span class="line">    username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">    student_id = StundentInfo.objects.get(username=username).id</span><br><span class="line">    cs = CompanyScore.objects.filter(student_id=student_id)</span><br><span class="line">    ss = SchoolScore.objects.filter(student_id=student_id)</span><br><span class="line">    list_cs=[]</span><br><span class="line">    list_ss=[]</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> cs:</span><br><span class="line">        list_cs.append(model_to_dict(c,exclude=[<span class="string">'student_id'</span>,<span class="string">'teacher_id'</span>]))</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> ss:</span><br><span class="line">        list_ss.append(model_to_dict(s,exclude=[<span class="string">'student_id'</span>,<span class="string">'teacher_id'</span>]))</span><br><span class="line">    cs_all=zip(*map(<span class="keyword">lambda</span> x: (x[<span class="string">'score1'</span>], x[<span class="string">'score2'</span>],x[<span class="string">'score3'</span>],x[<span class="string">'score4'</span>],x[<span class="string">'score5'</span>],x[<span class="string">'score6'</span>]), list_cs))</span><br><span class="line">    sum_cs=<span class="number">0</span> <span class="comment">#((1,2),(3,4),(5,6))</span></span><br><span class="line">    <span class="keyword">for</span> index,i <span class="keyword">in</span> enumerate(cs_all):</span><br><span class="line">        sum_cs+=sum(list(i))/len(i)</span><br><span class="line">    ss_all=zip(*map(<span class="keyword">lambda</span> x: (x[<span class="string">'score1'</span>], x[<span class="string">'score2'</span>],x[<span class="string">'score3'</span>]), list_ss))</span><br><span class="line">    sum_ss=<span class="number">0</span> <span class="comment">#((1,2),(3,4),(5,6))</span></span><br><span class="line">    <span class="keyword">for</span> index,i <span class="keyword">in</span> enumerate(ss_all):</span><br><span class="line">        sum_ss+=sum(list(i))/len(i)</span><br><span class="line">    total_score = sum_cs + sum_ss</span><br><span class="line">    StundentInfo.objects.filter(username=username).update(score=total_score)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'成绩核算成功'</span>&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student_list</span><span class="params">(request)</span>:</span></span><br><span class="line">    all_stus=StundentInfo.objects.all()</span><br></pre></td></tr></table></figure>
<h2 id="登录界面"><a class="markdownIt-Anchor" href="#登录界面"></a> 登录界面</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/login/"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登陆"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="学生列表界面"><a class="markdownIt-Anchor" href="#学生列表界面"></a> 学生列表界面</h2>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;学生列表&lt;/title&gt;</span><br><span class="line">    &lt;script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;序号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;学号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;姓名&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;操作&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">'/student_list/'</span>,</span><br><span class="line">        type:<span class="string">'get'</span>,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        success:function (res) &#123;</span><br><span class="line">          <span class="keyword">for</span>(var i = <span class="number">0</span>;i&lt;res.data.length;i++)&#123;</span><br><span class="line">              var htmlStr=<span class="string">'&lt;tr&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;'</span>+(i+<span class="number">1</span>)+<span class="string">'&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;'</span>+res.data[i].username+<span class="string">'&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;'</span>+res.data[i].nickname+<span class="string">'&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;&lt;button class="company"&gt;企业&lt;/button&gt;&lt;button class="school"&gt;学校&lt;/button&gt;&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'    &lt;/tr&gt;'</span></span><br><span class="line">              $(<span class="string">'tbody'</span>).append(htmlStr);</span><br><span class="line">          &#125;</span><br><span class="line">          company();</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    function company()&#123;</span><br><span class="line">        $(<span class="string">".company"</span>).click(function()&#123;</span><br><span class="line">            var username=$(this).parent().parent().find(<span class="string">'td:eq(1)'</span>).text();</span><br><span class="line">            window.location.href=<span class="string">'/msbc/?username='</span>+username+<span class="string">''</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="公司评分界面"><a class="markdownIt-Anchor" href="#公司评分界面"></a> 公司评分界面</h2>
</head>
<body>
<h1></h1>
<div>寻求解决方案的能力<input id="score1" type="text" placeholder="满分：16" value="0"></div>
<div>综合应用分析的能力<input id="score2" type="text" placeholder="满分：23" value="0"></div>
<div>考虑社会等因素<input id="score3" type="text" placeholder="满分：15" value="0"></div>
<div>工具的选择和使用能力<input id="score4" type="text" placeholder="满分：22" value="0"></div>
<div>沟通交流能力<input id="score5" type="text" placeholder="满分：4" value="0"></div>
<div>考勤<input id="score6" type="text" placeholder="满分：20" value="0"></div>
<div><span>目前分</span><span id="score"></span></div>
<button id="submit">提交成绩</button>
</body>
<script>
    function getUrlParam(name) { //a标签跳转获取参数
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if(r != null) return decodeURI(r[2]);
        return null;
    }
    var username = getUrlParam('username');
    $('h1').text(username);
    $("#submit").click(function () {
         $.ajax({
        url:'/msbc/',
        type:'post',
        dataType:'json',
        data:{
            username:username,
            score1:$("#score1").val(),
            score2:$("#score2").val(),
            score3:$("#score3").val(),
            score4:$("#score4").val(),
            score5:$("#score5").val(),
            score6:$("#score6").val(),
        },
        success:function (res) {
            alert(res.data);
        },
    })
    });
    $("input").change(function(){
       $("#score").empty();
       var sum = 0;
       var a=$("input").each(function(){var value = $(this).val();sum+=parseInt(value)});
       $("#score").text(sum);
    });
</script>
</html>
<h2 id="获取上一链接的参数"><a class="markdownIt-Anchor" href="#获取上一链接的参数"></a> 获取上一链接的参数</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function getUrlParam(name) &#123; &#x2F;&#x2F;a标签跳转获取参数</span><br><span class="line">	var reg &#x3D; new RegExp(&quot;(^|&amp;)&quot; + name + &quot;&#x3D;([^&amp;]*)(&amp;|$)&quot;, &quot;i&quot;);</span><br><span class="line">	var r &#x3D; window.location.search.substr(1).match(reg);</span><br><span class="line">	if(r !&#x3D; null) return decodeURI(r[2]);</span><br><span class="line">	return null;</span><br><span class="line">&#125;</span><br><span class="line">var username &#x3D; getUrlParam(&#39;username&#39;);</span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 14. 调用第三方API</title>
    <url>/2020/08/06/training_14/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年8月6日。是实训的第14天。<br />
今天上午孟老师带我们学习了如何将调用第三方的公开API以及如何使用HBuilder将web应用快速打包成安卓可以使用的apk包。<br />
调用第三方的公开API，是以高德地图为例的。说实话，高德地图作为一个成熟的商业地图导航提供商，它的API调用并不算太简单。<br />
老师还演示了如何将其他地方下载过来的数据与高德地图API结合的过程，过程十分繁琐，但也有趣。</p>
<h1 id="调用api"><a class="markdownIt-Anchor" href="#调用api"></a> 调用API</h1>
<h2 id="高德地图"><a class="markdownIt-Anchor" href="#高德地图"></a> 高德地图</h2>
<p>打开<a href="https://lbs.amap.com/" target="_blank" rel="noopener">高德地图开放平台</a>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1596676271_20200806090924741_16028.png" alt="" /><br />
点击注册并完成个人开发者认证。<br />
点击控制台，在我的应用-应用管理中，创建新应用。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806091127.png" alt="" /><br />
点击左上角的添加，选择Web端的服务平台。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806091200.png" alt="" /><br />
注意这个Key，后续会使用到。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806091649.png" alt="" /></p>
<p>点击开发支持，有API文档可供阅读。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806092049.png" alt="" /><br />
复制一个示例到html文件中。点击运行，则可看到地图效果。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806093048.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806093122.png" alt="" /></p>
<h2 id="pandas-to_dict-的用法"><a class="markdownIt-Anchor" href="#pandas-to_dict-的用法"></a> pandas to_dict 的用法</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.test <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_excel(<span class="string">'黑龙江gps.xlsx'</span>)</span><br><span class="line">data_dict=data.to_dict(orient=<span class="string">'split'</span>)</span><br><span class="line">print(data_dict[<span class="string">'data'</span>])</span><br></pre></td></tr></table></figure>
<p>pandas 中的to_dict 可以对DataFrame类型的数据进行转换<br />
可以选择六种的转换类型，分别对应于参数 ‘dict’, ‘list’, ‘series’, ‘split’, ‘records’, ‘index’，下面逐一介绍每种的用法。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Help on method to_dict <span class="keyword">in</span> module pandas.core.frame:</span><br><span class="line"></span><br><span class="line">to_dict(orient=<span class="string">'dict'</span>) method of pandas.core.frame.DataFrame instance</span><br><span class="line">    Convert DataFrame to dictionary.</span><br><span class="line"></span><br><span class="line">    Parameters</span><br><span class="line">    ----------</span><br><span class="line">    orient : str &#123;<span class="string">'dict'</span>, <span class="string">'list'</span>, <span class="string">'series'</span>, <span class="string">'split'</span>, <span class="string">'records'</span>, <span class="string">'index'</span>&#125;</span><br><span class="line">        Determines the type of the values of the dictionary.</span><br><span class="line"></span><br><span class="line">        - dict (default) : dict like &#123;column -&gt; &#123;index -&gt; value&#125;&#125;</span><br><span class="line">        - list : dict like &#123;column -&gt; [values]&#125;</span><br><span class="line">        - series : dict like &#123;column -&gt; Series(values)&#125;</span><br><span class="line">        - split : dict like</span><br><span class="line">          &#123;index -&gt; [index], columns -&gt; [columns], data -&gt; [values]&#125;</span><br><span class="line">        - records : list like</span><br><span class="line">          [&#123;column -&gt; value&#125;, ... , &#123;column -&gt; value&#125;]</span><br><span class="line">        - index : dict like &#123;index -&gt; &#123;column -&gt; value&#125;&#125;</span><br><span class="line"></span><br><span class="line">          .. versionadded:: <span class="number">0.17</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">        Abbreviations are allowed. `s` indicates `series` <span class="keyword">and</span> `sp`</span><br><span class="line">        indicates `split`.</span><br><span class="line"></span><br><span class="line">    Returns</span><br><span class="line">    -------</span><br><span class="line">    result : dict like &#123;column -&gt; &#123;index -&gt; value&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="选择参数orientdict"><a class="markdownIt-Anchor" href="#选择参数orientdict"></a> 选择参数orient=‘dict’</h3>
<p>dict也是默认的参数，下面的data数据类型为DataFrame结构, 会形成 {column -&gt; {index -&gt; value}}这样的结构的字典，可以看成是一种双重字典结构。</p>
<ul>
<li>单独提取每列的值及其索引，然后组合成一个字典</li>
<li>再将上述的列属性作为关键字（key），值（values）为上述的字典</li>
</ul>
<p>查询方式为 ：<code>data_dict[key1][key2]</code></p>
<ul>
<li>data_dict 为参数选择orient=’dict’时的数据名</li>
<li>key1 为列属性的键值（外层）</li>
<li>key2 为内层字典对应的键值</li>
</ul>
<h3 id="选择参数orientlist"><a class="markdownIt-Anchor" href="#选择参数orientlist"></a> 选择参数orient=‘list’</h3>
<p>和1中比较相似，只不过内层变成了一个列表，结构为{column -&gt; [values]}<br />
查询方式为： data_list[keys][index]</p>
<h3 id="选择参数orientseries"><a class="markdownIt-Anchor" href="#选择参数orientseries"></a> 选择参数orient=‘series’</h3>
<p>形成结构**{column -&gt; Series(values)}**<br />
调用格式为：data_series[key1][key2]或data_dict[key1]</p>
<ul>
<li>data_series 为数据对应的名字</li>
<li>key1 为列属性的键值，如本例中的’age’ , ‘embarked’等</li>
<li>key2 使用数据原始的索引（可选）</li>
</ul>
<h3 id="选择参数orientsplit"><a class="markdownIt-Anchor" href="#选择参数orientsplit"></a> 选择参数orient=‘split’</h3>
<p>形成**{index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}**的结构，是将数据、索引、属性名单独脱离出来构成字典<br />
调用方式有 data_split[‘index’],data_split[‘data’],data_split[‘columns’]+ data_list 为关键字orient=‘list’ 时对应的数据名</p>
<ul>
<li>keys 为列属性的键值，如本例中的’age’ , 'embarked’等</li>
<li>index 为整型索引，从0开始到最后</li>
</ul>
<h3 id="选择参数orientrecords时"><a class="markdownIt-Anchor" href="#选择参数orientrecords时"></a> 选择参数orient='records’时</h3>
<p>形成***[{column -&gt; value}, … , {column -&gt; value}]***的结构<br />
整体构成一个列表，内层是将原始数据的每行提取出来形成字典<br />
调用格式为data_records[index][key1]</p>
<h3 id="选择参数orientindex时"><a class="markdownIt-Anchor" href="#选择参数orientindex时"></a> 选择参数orient='index’时</h3>
<p>形成{index -&gt; {column -&gt; value}}的结构，调用格式正好和’dict’对应的反过来，请读者自己思考</p>
<h1 id="django-cors-headers-解决跨域问题"><a class="markdownIt-Anchor" href="#django-cors-headers-解决跨域问题"></a> django-cors-headers 解决跨域问题</h1>
<p>浏览器具有 “同源策略的限制”，导致 <code>发送ajax请求</code> + <code>跨域</code> 存在无法获取数据。</p>
<ul>
<li>简单请求，发送一次请求。</li>
<li>复杂请求，先options请求做预检，然后再发送真正请求</li>
</ul>
<p><strong>1. pip安装</strong><br />
<code>pip install django-cors-headers</code><br />
<strong>2. 添加到setting的app中</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS &#x3D; (</span><br><span class="line">	...</span><br><span class="line">	&#39;corsheaders&#39;,</span><br><span class="line">	...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>3. 添加中间件</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MIDDLEWARE &#x3D; [  # Or MIDDLEWARE_CLASSES on Django &lt; 1.10</span><br><span class="line">	...</span><br><span class="line">	&#39;corsheaders.middleware.CorsMiddleware&#39;,</span><br><span class="line">	&#39;django.middleware.common.CommonMiddleware&#39;,</span><br><span class="line">	...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>4. setting下面添加下面的配置</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CORS_ALLOW_CREDENTIALS &#x3D; True</span><br><span class="line">CORS_ORIGIN_ALLOW_ALL &#x3D; True</span><br><span class="line">CORS_ORIGIN_WHITELIST &#x3D; (</span><br><span class="line">	&#39;*&#39;</span><br><span class="line">)</span><br><span class="line">CORS_ALLOW_METHODS &#x3D; (</span><br><span class="line">	&#39;DELETE&#39;,</span><br><span class="line">	&#39;GET&#39;,</span><br><span class="line">	&#39;OPTIONS&#39;,</span><br><span class="line">	&#39;PATCH&#39;,</span><br><span class="line">	&#39;POST&#39;,</span><br><span class="line">	&#39;PUT&#39;,</span><br><span class="line">	&#39;VIEW&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CORS_ALLOW_HEADERS &#x3D; (</span><br><span class="line">	&#39;XMLHttpRequest&#39;,</span><br><span class="line">	&#39;X_FILENAME&#39;,</span><br><span class="line">	&#39;accept-encoding&#39;,</span><br><span class="line">	&#39;authorization&#39;,</span><br><span class="line">	&#39;content-type&#39;,</span><br><span class="line">	&#39;dnt&#39;,</span><br><span class="line">	&#39;origin&#39;,</span><br><span class="line">	&#39;user-agent&#39;,</span><br><span class="line">	&#39;x-csrftoken&#39;,</span><br><span class="line">	&#39;x-requested-with&#39;,</span><br><span class="line">	&#39;Pragma&#39;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>启动项目时，使用<code>python manage.py runserver 0.0.0.0:8000</code></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 13. Flask的工程化</title>
    <url>/2020/08/05/training_13/</url>
    <content><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年8月5日。是实训的第13天。<br />
今天上午孟老师带我们学习了如何将flask工程化。<s>其实是flask的django化。</s><br />
flask作为一个轻量级的框架，把路由、数据库、项目启动全都放到了一起，虽然这样子一来开发的速度很快，但是内容一旦多起来，在一页代码中寻找会非常的麻烦。而且flask没有现成的数据库迁移工具。<br />
所谓flask工程化，就是将app.py拆分开多个文件。<br />
完成flask工程化后，flask稍微显得不那么轻量了（但是对比于django还是属于轻量水准的），但是工程化能使开发流程更加系统全面。<br />
讲完flask的工程化后，时间还有剩余。孟老师向我们询问还有什么想知道的。我想起他之前说过django的session，便想让他在这时讲解一下。他很豪爽地讲解了。只用了短短10分钟。原来session这么简单啊。</p>
<h1 id="flask工程化"><a class="markdownIt-Anchor" href="#flask工程化"></a> flask工程化</h1>
<h2 id="文件配置"><a class="markdownIt-Anchor" href="#文件配置"></a> 文件配置</h2>
<p>复制app.py的内容，然后粘贴到新建的app_config.py，略加修改，只应用在配置中使用到的包。<br />
将<code>app = Flask(__name__)</code>修改为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">app = Flask(__name__,</span><br><span class="line">template_folder=<span class="string">'templates'</span>,</span><br><span class="line">static_folder=<span class="string">"static"</span>,</span><br><span class="line">            )</span><br></pre></td></tr></table></figure>
<p>同时新建两个文件夹：<code>templates</code>和<code>static</code>。<br />
修改完的app_config.py全文如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_cors <span class="keyword">import</span> CORS</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">app = Flask(__name__,</span><br><span class="line">template_folder=<span class="string">'templates'</span>,</span><br><span class="line">static_folder=<span class="string">"static"</span>,</span><br><span class="line">            )</span><br><span class="line">BASEDIR = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">'sqlite:///'</span>+os.path.join(BASEDIR,<span class="string">'data.sqlite'</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">如果设置成 True (默认情况)，Flask-SQLAlchemy 将会追踪对象的修改并且发送信号。这需要额外的内存， 如果不必要的可以禁用它。</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">CORS(app)</span><br></pre></td></tr></table></figure>
<h2 id="数据库迁移工具"><a class="markdownIt-Anchor" href="#数据库迁移工具"></a> 数据库迁移工具</h2>
<p>先使用<code>pip install flask-migrate</code>和<code>pip install flask-script</code>安装两个包。<br />
安装完毕后，新建一个database.py文件。编写如下代码。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> app_config <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate,MigrateCommand</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line">migrate = Migrate(app,db)</span><br><span class="line"></span><br><span class="line">manager.add_command(<span class="string">'db'</span>,MigrateCommand)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>
<p>接下来在命令行使用<code>python database.py db init</code>命令，就可以初始化数据库。<br />
使用<code>python database.py db migrate</code>命令，就可以生成迁移文件。<br />
使用<code>python database.py db upgrade</code>命令，就可以生成数据表。</p>
<h2 id="模型"><a class="markdownIt-Anchor" href="#模型"></a> 模型</h2>
<p>新建models.py文件。将app.py中关于models的复制到这里，也略加修改。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> app_config <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__=<span class="string">'info2'</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>))</span><br><span class="line">    category = db.Column(db.String(<span class="number">60</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;info.&gt;%s '</span> % self.title</span><br></pre></td></tr></table></figure>
<h2 id="主程序"><a class="markdownIt-Anchor" href="#主程序"></a> 主程序</h2>
<p>新建run.py文件。将app.py关于路由和运行的复制到这里，略加修改。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,jsonify,render_template,request</span><br><span class="line"><span class="keyword">from</span> app_config <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Info,db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#函数和路由不可重复</span></span><br><span class="line"><span class="meta">@app.route('/',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span> <span class="comment">#视图函数</span></span><br><span class="line">    info1 = Info(id=<span class="number">1</span>,title=<span class="string">'新闻1'</span>,category=<span class="string">'娱乐新闻'</span>)</span><br><span class="line">    info2 = Info(id=<span class="number">2</span>,title=<span class="string">'新闻2'</span>,category=<span class="string">'工作新闻'</span>)</span><br><span class="line">    db.session.add_all([info1,info2]) <span class="comment">#将数据添加到会话</span></span><br><span class="line">    db.session.commit() <span class="comment">#提交会话</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:<span class="string">'Zorua'</span>,<span class="string">'age'</span>:<span class="number">20</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/query',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">()</span>:</span></span><br><span class="line">    results=Info.query.all()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> results:</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/update',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).update(&#123;<span class="string">'category'</span>:<span class="string">'改后新闻'</span>&#125;)</span><br><span class="line">    db.session.commit()  <span class="comment"># 提交会话</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/delete',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).delete()</span><br><span class="line">    db.session.commit()  <span class="comment"># 提交会话</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/index',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    name = request.form.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.form.get(<span class="string">'age'</span>)</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:name,<span class="string">'age'</span>:age&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>,host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8888</span>)</span><br></pre></td></tr></table></figure>
<p>接下来运行项目只用在run.py中运行即可。</p>
<h1 id="django的session"><a class="markdownIt-Anchor" href="#django的session"></a> django的session</h1>
<p><code>session</code>就相当于是一个字典。<br />
<code>request.session['user_id'] = User.objects.get(username=username).id</code><br />
就可以在session中新增user_id字段并记录下来。<br />
session中的记录是有有效期的。</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 12. Flask框架</title>
    <url>/2020/08/04/training_12/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年8月4日。是实训的第12天。<br />
今天上午孟老师带我们回顾了过去在Django这一块所学的一些知识，然后开始讲授flask。完成从flask的创建到部署，再是路由、跨域、连接数据库等等任务。</p>
<div class="snote quote">
Flask 是一个微型的 Python 开发的 Web 框架，基于Werkzeug WSGI工具箱和Jinja2模板引擎。 Flask使用BSD授权。 Flask也被称为“microframework”，因为它使用简单的核心，用extension增加其他功能。Flask没有默认使用的数据库、窗体验证工具。然而，Flask保留了扩增的弹性，可以用Flask-extension加入这些功能：ORM、窗体验证工具、文件上传、各种开放式身份验证技术。
</div>
<p>通过今天的学习，我确实感受到了Flask比Django要简单一些。花费较少的精力和时间就能达到和Django同样的效果。但是即便如此，我依然决定在我的大作业上使用Django。因为就我自身而言，我对Django更加熟悉。</p>
<p>今天的知识把握程度还行，基于对Django的理解上再去学习Flask就没有那么难。但是对于ajax嵌套，我仍是有一些不明白的地方。</p>
<p>Flask的优势：</p>
<ul>
<li>Flask是一个轻量级的可定制框架</li>
<li>插件超级多，不用自己造轮子</li>
</ul>
<h1 id="新建flask项目"><a class="markdownIt-Anchor" href="#新建flask项目"></a> 新建Flask项目</h1>
<p>在Pycharm中点击新建，选择Flask项目，即可完成项目的创建。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804092656.png" alt="" /></p>
<p>项目创建完毕后，可以看到如下的文件夹结构。Flask框架确实比Django框架要轻量得多。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804092804.png" alt="" /></p>
<h2 id="运行测试"><a class="markdownIt-Anchor" href="#运行测试"></a> 运行测试</h2>
<p>先来对主要的app.py的代码，作一些注释。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 路由不可重复，函数也不可重复。</span></span><br><span class="line"><span class="meta">@app.route('/') #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span> <span class="comment">#视图函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()  <span class="comment">#会在这里启动。所以Flask不用像Django一样输入命令行启动。直接运行即可。</span></span><br></pre></td></tr></table></figure>
<p>运行的结果如下图所示。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804095707.png" alt="" /></p>
<p>一般，我们想要的数据，是json数据，在此引入一个包。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify</span><br></pre></td></tr></table></figure>
<p>有了这样一个包，</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:<span class="string">'Zorua'</span>,<span class="string">'age'</span>:<span class="number">20</span>&#125;&#125;)</span><br><span class="line"><span class="comment">#等价于之前在Django的JsonResponse</span></span><br></pre></td></tr></table></figure>
<p>测试效果<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804095648.png" alt="" /></p>
<h2 id="部署修改"><a class="markdownIt-Anchor" href="#部署修改"></a> 部署修改</h2>
<p>现在这个站点是部署在本地的，如果部署在云服务器上，或需要修改端口。<br />
可在<code>app.run()</code>中加入参数，如下所示。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">app.run(host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8888</span>)</span><br></pre></td></tr></table></figure>
<p>这个效果不能马上生效，还需要添加新的配置。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804094850.png" alt="" /><br />
选择Python，然后在右侧，名称写为<code>app.py</code>，Script Path为该文件的绝对路径。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804093304.png" alt="" /></p>
<p>最后在命令行键入<code>python app.py</code>即可生效。</p>
<h2 id="debug模式"><a class="markdownIt-Anchor" href="#debug模式"></a> DEBUG模式</h2>
<p>Flask默认是没有开启debug模式的，开启debug模式有很多好处：</p>
<ul>
<li>可以帮助我们查找代码里面的错误</li>
<li>每次修改代码不需要重新运行代码</li>
</ul>
<p>为开启DEBUG模式，只需要在<code>app.run()</code>的参数中增加一个<code>debug=True</code>，或者在其下面加一句<code>app.debug=True</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">app.run(debug=<span class="literal">True</span>,host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8888</span>)</span><br><span class="line">app.debug = <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h1 id="前后端分离"><a class="markdownIt-Anchor" href="#前后端分离"></a> 前后端分离</h1>
<h2 id="添加新的路由"><a class="markdownIt-Anchor" href="#添加新的路由"></a> 添加新的路由</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route('/index') #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line">    <span class="comment">#为使用上面这个语句，需要引入包：</span></span><br><span class="line">    <span class="comment"># from flask import render_template</span></span><br></pre></td></tr></table></figure>
<p>再在templates文件夹中，新建一个<code>index.html</code></p>
<p>运行查看一下效果：<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804095612.png" alt="" /></p>
<h3 id="请求类型"><a class="markdownIt-Anchor" href="#请求类型"></a> 请求类型</h3>
<p>对于路由的请求类型，可以在装饰器的函数里面加一个参数<code>methods=['GET','POST']</code>。<br />
即</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>如果想获取参数的话，需要引入一个包：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    name = request.args.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.args.get(<span class="string">'age'</span>)</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:name,<span class="string">'age'</span>:age&#125;&#125;)</span><br></pre></td></tr></table></figure>
<p>之后和Django类似，使用<code>request.args.get()</code>函数来获取参数。<br />
对于post请求，只需要把上面的args改成form就可以了。<br />
即：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    name = request.form.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.form.get(<span class="string">'age'</span>)</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:name,<span class="string">'age'</span>:age&#125;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="跨域"><a class="markdownIt-Anchor" href="#跨域"></a> 跨域</h2>
<p>引用包<code>flask_cors</code>，然后调用<code>flask_cors.CORS(app)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> flask_cors</span><br><span class="line">flask_cors.CORS(app)</span><br></pre></td></tr></table></figure>
<p>跨域能够实现前后端分离：</p>
<ul>
<li>前端：对json数据进行渲染，ajax请求后台接口</li>
<li>后端：数据打包json，提供可以被调用的api</li>
</ul>
<h2 id="ajax"><a class="markdownIt-Anchor" href="#ajax"></a> ajax</h2>
<p>和之前的Django类似，不同的地方在于url。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>wow<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Wow awesome</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">        url:<span class="string">'http://127.0.0.1:8888/api'</span>,</span></span><br><span class="line"><span class="actionscript">        type:<span class="string">'post'</span>,</span></span><br><span class="line"><span class="actionscript">        dataType:<span class="string">'json'</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="actionscript">          name:<span class="string">'Zorua'</span>,</span></span><br><span class="line">          age:13</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        success:<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(res.data)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="连接数据库"><a class="markdownIt-Anchor" href="#连接数据库"></a> 连接数据库</h2>
<h3 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h3>
<p>先安装一个库。在命令行中键入<code>pip install Flask-SQLAlchemy</code>并按下回车键。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#数据库连接</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">'sqlite:///'</span>+os.path.join(BASEDIR,<span class="string">'data.sqlite'</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">如果设置成 True（默认情况），Flask-SQLAlchemy将会追踪对象的修改并且发送信号 这需要额外的内存 如果不必要的话可以禁用它</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>]=<span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h3 id="创建数据库"><a class="markdownIt-Anchor" href="#创建数据库"></a> 创建数据库</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = SQLAlchemy(app)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>))</span><br><span class="line">    category = db.Column(db.String(<span class="number">60</span>))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;info.&gt;%s '</span> %  self.title</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804145108.png" alt="" /><br />
创建完毕后，再命令行中键入flask shell。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804145346.png" alt="" /></p>
<h3 id="插入数据"><a class="markdownIt-Anchor" href="#插入数据"></a> 插入数据</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">info1 = Info(id=<span class="number">1</span>,title=<span class="string">'新闻1'</span>,category=<span class="string">'娱乐新闻'</span>)</span><br><span class="line">info2 = Info(id=<span class="number">2</span>,title=<span class="string">'新闻2'</span>,category=<span class="string">'工作新闻'</span>)</span><br><span class="line">db.session.add_all([info1,info2]) <span class="comment">#将数据添加到会话</span></span><br><span class="line">db.session.commit() <span class="comment">#提交会话</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804152306.png" alt="" /></p>
<h3 id="查询数据"><a class="markdownIt-Anchor" href="#查询数据"></a> 查询数据</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route('/query',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">()</span>:</span></span><br><span class="line">    results=Info.query.all()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> results:</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804152941.png" alt="" /></p>
<h3 id="更新数据"><a class="markdownIt-Anchor" href="#更新数据"></a> 更新数据</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route('/update',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).update(&#123;<span class="string">'category'</span>:<span class="string">'改后新闻'</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="删除数据"><a class="markdownIt-Anchor" href="#删除数据"></a> 删除数据</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route('/update',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).delete()</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br></pre></td></tr></table></figure>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 11. 数据的可视化</title>
    <url>/2020/08/03/training_11/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年8月3日。到了实训的第三周的第一天。<br />
今天主要讲了如何用echarts实现<strong>数据的可视化</strong>。<br />
主要的活动有：</p>
<ul>
<li>数据打包</li>
<li>echarts远程包</li>
<li>echarts本地包（重点）<br />
数据可视化主要旨在借助于图形化手段，清晰有效地传达与沟通信息。但是，这并不就意味着数据可视化就一定因为要实现其功能用途而令人感到枯燥乏味，或者是为了看上去绚丽多彩而显得极端复杂。为了有效地传达思想概念，美学形式与功能需要齐头并进，通过直观地传达关键的方面与特征，从而实现对于相当稀疏而又复杂的数据集的深入洞察。然而，设计人员往往并不能很好地把握设计与功能之间的平衡，从而创造出华而不实的数据可视化形式，无法达到其主要目的，也就是传达与沟通信息。<br />
因此，我们不仅要掌握数据可视化的办法，也更要懂得如何让组织形式使得传达与沟通的效益最大化。<br />
今天圆满地完成了主要工作，不仅完成了一边听课一边记录笔记，而且课中也没有遇到什么疑难杂症而纠结良久。</li>
</ul>
<p>今天的操作流程，一言以蔽之。对于本地存在的Excel数据、CSV数据等等，可以使用<code>pandas</code>或<code>xlrd</code>来进行提取，而后用<code>echarts</code>把它绘制在网页上。</p>
<div class="snote quote">
ECharts 是一个使用 JavaScript 实现的开源可视化库，涵盖各行业图表，满足各种需求。
ECharts 遵循 Apache-2.0 开源协议，免费商用。
ECharts 兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等）及兼容多种设备，可随时随地任性展示。
</div>
<h1 id="pandasxlrd"><a class="markdownIt-Anchor" href="#pandasxlrd"></a> pandas&amp;xlrd</h1>
<div class="snote quote">
Pandas是一个强大的分析结构化数据的工具集；它的使用基础是Numpy（提供高性能的矩阵运算）；用于数据挖掘和数据分析，同时也提供数据清洗功能。
</div>
<div class="snote quote">
Python中操作excel主要用到xlrd和xlwt这两个库，即xlrd是读excel，xlwt是写excel的库。
</div>
<h2 id="安装流程"><a class="markdownIt-Anchor" href="#安装流程"></a> 安装流程</h2>
<p>在Terminal中键入<code>pip install pandas</code>即可完成pandas的安装（如果没装过numpy和dateutil也会一并装了）。<br />
出现了以下字样的安装成功信息。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Successfully installed numpy-1.19.1 pandas-1.1.0 python-dateutil-2.8.1</span><br></pre></td></tr></table></figure>
<p>再在Terminal中键入<code>pip install xlrd</code>即可完成xlrd的安装。</p>
<h2 id="数据的获取"><a class="markdownIt-Anchor" href="#数据的获取"></a> 数据的获取</h2>
<p>除了可以用爬虫自己获取网页上的数据外，还可以上<a href="https://tianchi.aliyun.com/dataset/" target="_blank" rel="noopener">阿里云-天池</a>来获取数据。<br />
为了方便练习，选择一些数据量不大的数据集。这里老师选择了<a href="http://www.stat-nba.com/" target="_blank" rel="noopener">NBA数据</a>中的球员勒布朗-詹姆斯的数据。<br />
将网页表格复制到Excel中，得到如下结果。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803093457.png" alt="" /></p>
<h2 id="应用伊始"><a class="markdownIt-Anchor" href="#应用伊始"></a> 应用伊始</h2>
<p>键入<code>python manage.py startapp echarts</code>新建一个应用。<br />
将<code>james.xlsx</code>复制到该应用的文件夹下。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803094147.png" alt="" /></p>
<p>在 <code>tests.py</code> 文件中，键入如下代码以进行测试。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.test <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># Create your tests here.</span></span><br><span class="line">data = pd.read_excel(<span class="string">'james.xlsx'</span>)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>
<p>可以看到输出结果为如下所示。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803094359.png" alt="" /></p>
<h2 id="dataframe"><a class="markdownIt-Anchor" href="#dataframe"></a> DataFrame</h2>
<div class="snote quote">
DataFrame是一种表格型数据结构，它含有一组有序的列，每列可以是不同的值。DataFrame既有行索引，也有列索引，它可以看作是由Series组成的字典，不过这些Series公用一个索引。
</div>
<p>DataFrame的创建有多种方式，不过最重要的还是根据dict进行创建，以及读取csv或者txt文件来创建。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>将刚刚的测试代码修改为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.test <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># Create your tests here.</span></span><br><span class="line">data = pd.read_excel(<span class="string">'james.xlsx'</span>)</span><br><span class="line">df = pd.DataFrame(data=data,index=range(<span class="number">1</span>,<span class="number">17</span>)) <span class="comment">#创建了DataFrame, index是行索引, range是列索引</span></span><br><span class="line"><span class="comment"># 输出不同的形式，以便于观察DataFrame。</span></span><br><span class="line">print(list(df[<span class="string">'赛季'</span>])) <span class="comment">#强制转换为list, 方便后续使用。</span></span><br><span class="line">print(type(df[<span class="string">'得分'</span>]))</span><br><span class="line">print(df[<span class="string">'篮板'</span>])</span><br></pre></td></tr></table></figure>
<p>输出结果为：<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803101318.png" alt="" /></p>
<blockquote>
<p>个人觉得用不用DataFrame，区别仅在于会不会去掉NaN数据。</p>
</blockquote>
<h2 id="views的配置"><a class="markdownIt-Anchor" href="#views的配置"></a> views的配置</h2>
<p>按照之前的实训经验，完成views的配置。<br />
为了使列表的数据以赛季递增，在列表后加入<code>[::-1]</code>完成倒装。</p>
<blockquote>
<p>上课时，我以为用<code>list.reverse()</code>，但是<code>reverse()</code>方法是没有返回值的。<br />
这意味着，不能直接将这个方法写在<code>print</code>函数里。<br />
所以为使代码简短，使用<code>[::-1]</code>确实是最佳解。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api_echarts</span><span class="params">(request)</span>:</span></span><br><span class="line">    data = pd.read_excel(<span class="string">'james.xlsx'</span>)  <span class="comment"># 这里还有一个路径的问题，如果是现行的代码，会报错，参考下面的图。</span></span><br><span class="line">    df = pd.DataFrame(data=data,index=range(<span class="number">1</span>,<span class="number">17</span>))</span><br><span class="line">    print(df)</span><br><span class="line">    season = (list(df[<span class="string">'赛季'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    score = (list(df[<span class="string">'得分'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    lanban = (list(df[<span class="string">'篮板'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    zhugong = (list(df[<span class="string">'助攻'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'season'</span>:season,<span class="string">'score'</span>:score,<span class="string">'lanban'</span>:lanban,<span class="string">'zhugong'</span>:zhugong&#125;)</span><br></pre></td></tr></table></figure>
<div class="hide-block"><a class="hide-button button--primary button--animated" style="background-color: red;color: white">出现的错误
    </a><span class="hide-content"><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803104215.png" alt="" /></p></span></div>
<p>为解决这个错误，将代码更改为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">import</span> os   <span class="comment">#新增行</span></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) <span class="comment">#新增行，获取项目的绝对路径</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api_echarts</span><span class="params">(request)</span>:</span></span><br><span class="line">    data = pd.read_excel(os.path.join(BASE_DIR,<span class="string">'echarts'</span>,<span class="string">'james.xlsx'</span>)) <span class="comment">#修改行</span></span><br><span class="line">    df = pd.DataFrame(data=data,index=range(<span class="number">1</span>,<span class="number">17</span>))</span><br><span class="line">    print(df)</span><br><span class="line">    season = (list(df[<span class="string">'赛季'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    score = (list(df[<span class="string">'得分'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    lanban = (list(df[<span class="string">'篮板'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    zhugong = (list(df[<span class="string">'助攻'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'season'</span>:season,<span class="string">'score'</span>:score,<span class="string">'lanban'</span>:lanban,<span class="string">'zhugong'</span>:zhugong&#125;)</span><br></pre></td></tr></table></figure>
<p>这样就可以成功获取数据了。</p>
<div class="snote link blue">
语法：<code>os.path.abspath(__file__)</code>
<p>功能：获取当前运行文件的绝对路径</p>
<p>语法：<code>os.path.dirname(path)</code></p>
<p>功能：去掉文件名，返回目录</p>
</div>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803104638.png" alt="" /></p>
<p>完成后，为了和下文的HTML文件对接，还需要在view.py中加入：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">echarts_page</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">'echarts.html'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="urls的配置"><a class="markdownIt-Anchor" href="#urls的配置"></a> urls的配置</h2>
<p>在项目的路由配置里，加入：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">'echarts/'</span>,include(<span class="string">'echarts.urls'</span>)),</span><br></pre></td></tr></table></figure>
<p>在echarts应用的路由里，加入：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">'api_echarts/'</span>,api_echarts),</span><br><span class="line">path(<span class="string">'echarts_page'</span>,echarts_page),</span><br></pre></td></tr></table></figure>
<h1 id="echarts远程包"><a class="markdownIt-Anchor" href="#echarts远程包"></a> echarts远程包</h1>
<div class="snote quote">
远程包：调用CDN需要请求网络资源。
</div>
<p>在templates文件夹下新建一个<code>echarts.html</code></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803105734.png" alt="" /><br />
在头部，添加对jQuery和echarts的引用。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/echarts/4.8.0/echarts.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接下来，再在body部分建一个容器来使用echarts。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">style</span>=<span class="string">"width:900px;height:500px;background: rgba(106,11,233,0.4)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后，新建一个<code>script</code>标签，在其中键入以下代码。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mycharts = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'box'</span>));   <span class="comment">//mycharts的内容放在box容器里</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">       url: <span class="string">'/echarts/api_echarts/'</span>,</span><br><span class="line">       type: <span class="string">'get'</span>,</span><br><span class="line">       dataType:<span class="string">'json'</span>,</span><br><span class="line">       success:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(res);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>打开<a href="https://echarts.apache.org/examples/zh/index.html?theme=light" target="_blank" rel="noopener">echarts官网</a>获取一个实例的代码。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803112146.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803112219.png" alt="" /><br />
复制左边的代码，到script标签的funtion(res)中，修改数据部分为项目的内容。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: <span class="string">'category'</span>,</span><br><span class="line">        data: res.season,</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        type: <span class="string">'value'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    series: [&#123;</span><br><span class="line">        data: res.score,</span><br><span class="line">        type: <span class="string">'line'</span>,</span><br><span class="line">        smooth: <span class="literal">true</span></span><br><span class="line">    &#125;]</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>然后在之后加入以下代码来绘制图形。结果如下图所示。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mycharts.setOption(option);</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803112915.png" alt="" /></p>
<h2 id="绘制表格"><a class="markdownIt-Anchor" href="#绘制表格"></a> 绘制表格</h2>
<p>在HTML的body部分加入以下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--table是表格标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>&lt;thead&gt;</code>标签定义表格的表头。该标签用于组合 HTML 表格的表头内容。</li>
<li>thead 元素应该与 tbody 和 tfoot 元素结合起来使用。</li>
<li>tbody 元素用于对 HTML 表格中的主体内容进行分组，而 tfoot 元素用于对 HTML 表格中的表注（页脚）内容进行分组。</li>
<li>tr 代表一行；td 代表一列。</li>
<li>table的属性中有一个<code>border</code>，默认<code>border</code>=“0”，为无边框。这里就是无边框。<br />
在Script标签中加入以下代码：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;res.score.length;i++)&#123;</span><br><span class="line">                $(<span class="string">'thead tr'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.season[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加表头</span></span><br><span class="line">                $(<span class="string">'tbody tr:eq(0)'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.score[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加得分</span></span><br><span class="line">                $(<span class="string">'tbody tr:eq(1)'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.lanban[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加篮板</span></span><br><span class="line">                $(<span class="string">'tbody tr:eq(2)'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.zhugong[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加助攻</span></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p>结果如图所示。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803142332.png" alt="" /></p>
<h1 id="echarts本地包"><a class="markdownIt-Anchor" href="#echarts本地包"></a> echarts本地包</h1>
<p>重点。<br />
调用本地资源，不需要网络。<br />
拓展-静态文件的展示、图片或者文件的上传</p>
<h2 id="调用本地图片"><a class="markdownIt-Anchor" href="#调用本地图片"></a> 调用本地图片</h2>
<p>如果直接在网页中写以下代码时，浏览器并不能找到该资源。因此需进行路由配置。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/bg1.jpg"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意到settings.py里有如下内容。因此在项目的根目录新建一个<code>static</code>文件夹。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803144502.png" alt="" /><br />
然后在这句代码的下面，加入下面的代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">STATICFILES_DIRS=[</span><br><span class="line">    os.path.join(BASE_DIR,<span class="string">'static'</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>对于这段代码，援引一段来自Django官方文档的解释。</p>
<div class="snote link">
<p class="p subtitle">提供文件/Serving the files</p>
In addition to these configuration steps, you’ll also need to actually serve the static files.
During development, if you use django.contrib.staticfiles, this will be done automatically by runserver when DEBUG is set to True (see django.contrib.staticfiles.views.serve()).
This method is grossly inefficient and probably insecure, so it is unsuitable for production.
See Deploying static files for proper strategies to serve static files in production environments.
<p>除了这些配置步骤之外，您还需要实际提供静态文件。<br />
在开发过程中，如果使用django.contrib.staticfiles，这将是自动完成的runserver，当DEBUG设置为True（见django.contrib.staticfiles.views.serve()）。<br />
此方法效率极低，并且可能不安全，因此不适合生产。<br />
有关在生产环境中提供静态文件的正确策略，请参阅部署静态文件。</p>
</div class>
<p><strong>然后在urls.py中配置static文件夹资源的路由。</strong><br />
先引入下面这几个包并获取项目绝对路径。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> re_path <span class="comment">#正则表达式路径</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> static</span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))<span class="comment">#项目绝对路径</span></span><br></pre></td></tr></table></figure>
<p>然后配置下面这条路由。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">r'^static/(?&lt;path&gt;.*)$'</span>,static.serve,&#123;<span class="string">'document_root'</span>:os.path.join(BASE_DIR,<span class="string">'static'</span>)&#125;),</span><br></pre></td></tr></table></figure>
<p>完成后，图片就可以正常的访问了。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803150646.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803150731.png" alt="" /></p>
<h2 id="调用本地js或css"><a class="markdownIt-Anchor" href="#调用本地js或css"></a> 调用本地JS或CSS</h2>
<p>在配置完毕上面的路由之后。也可以调用本地的JS或CSS资源。<br />
以jQuery为例，直接打开<a href="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js" target="_blank" rel="noopener">其CDN链接</a>。复制其中的内容到一个本地的js文件中放在static文件夹下即可。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/js/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="echarts增加细节"><a class="markdownIt-Anchor" href="#echarts增加细节"></a> echarts增加细节</h1>
<p>更多的细节可以查询echarts的<a href="https://echarts.apache.org/zh/api.html" target="_blank" rel="noopener">API手册</a>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">                color: [<span class="string">'red'</span>,<span class="string">'orange'</span>],   <span class="comment">//图线颜色</span></span><br><span class="line">                xAxis: &#123;</span><br><span class="line">                    type: <span class="string">'category'</span>,</span><br><span class="line">                    data: res.season,</span><br><span class="line">                &#125;,</span><br><span class="line">                tooltip:&#123;</span><br><span class="line">                  trigger: <span class="string">'axis'</span>,</span><br><span class="line">                  axisPointer:&#123;</span><br><span class="line">                      type:<span class="string">'shadow'</span>         <span class="comment">//当鼠标移动在点上时的提示窗口</span></span><br><span class="line">                  &#125;,</span><br><span class="line">                  show:<span class="literal">true</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                legend:&#123;</span><br><span class="line">                    data:[<span class="string">'篮板'</span>,<span class="string">'助攻'</span>]    <span class="comment">//图例</span></span><br><span class="line">                &#125;,</span><br><span class="line">                yAxis: &#123;</span><br><span class="line">                    type: <span class="string">'value'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                series: [&#123;</span><br><span class="line">                    data: res.lanban,</span><br><span class="line">                    type: <span class="string">'line'</span>,</span><br><span class="line">                    name:<span class="string">'篮板'</span>,    <span class="comment">//系列名称</span></span><br><span class="line">                    smooth: <span class="literal">true</span></span><br><span class="line">                &#125;,&#123;</span><br><span class="line">                    data: res.zhugong,</span><br><span class="line">                    type: <span class="string">'line'</span>,</span><br><span class="line">                    name: <span class="string">'助攻'</span>,    <span class="comment">//系列名称</span></span><br><span class="line">                    smooth: <span class="literal">true</span>,</span><br><span class="line">                &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;;</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803162734.png" alt="" /></p>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>参考资料：<a href="https://www.jianshu.com/p/8024ceef4fe2" target="_blank" rel="noopener">https://www.jianshu.com/p/8024ceef4fe2</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 04. 简单的爬虫</title>
    <url>/2020/07/23/training_3/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年7月22日。今天主要讲的内容有：</p>
<ul>
<li>使用Requests包和BeautifulSoup4进行简单的网页爬虫</li>
</ul>
<h1 id="爬虫"><a class="markdownIt-Anchor" href="#爬虫"></a> 爬虫</h1>
<p>网络爬虫（又称为网页蜘蛛，网络机器人，在FOAF社区中间，更经常的称为网页追逐者），是一种按照一定的规则，自动地抓取万维网信息的程序或者脚本。另外一些不常使用的名字还有蚂蚁、自动索引、模拟程序或者蠕虫。</p>
<p>我们知道，在WWW上我们访问的网页基本上都是用HTML文档来进行描述的。在浏览器按下<code>F12</code>键，可以打开开发者工具，选择<code>Elements</code>页签，即可查看HTML的文档内容。如图所示：</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930202616.png" alt="" /></p>
<p>我们就可以从HTML中获取想要的数据/信息。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930203042.png" alt="" /></p>
<p>如果我们要进行对某个网页的爬虫，需要解决的问题有两个：</p>
<ul>
<li>获取HTML文档的内容</li>
<li>解析这个HTML文档，按照一定规则获取其中的信息/数据</li>
</ul>
<p>对于上面两个问题，进行针对性的解决：</p>
<ul>
<li>用Requests包来获取HTML文档</li>
<li>用BeautifulSoup4来解析HTML文档</li>
</ul>
<h1 id="requests"><a class="markdownIt-Anchor" href="#requests"></a> Requests</h1>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://requests.readthedocs.io/zh_CN/latest/_static/requests-sidebar.png" alt="" /><br />
<a href="https://requests.readthedocs.io/zh_CN/latest/user/quickstart.html" target="_blank" rel="noopener">在线文档</a></p>
<h2 id="简单介绍"><a class="markdownIt-Anchor" href="#简单介绍"></a> 简单介绍</h2>
<p>引用以下来自官方文档的内容：</p>
<blockquote>
<p>Requests 唯一的一个非转基因的 Python HTTP 库，人类可以安全享用。<br />
警告：非专业使用其他 HTTP 库会导致危险的副作用，包括：安全缺陷症、冗余代码症、重新发明轮子症、啃文档症、抑郁、头疼、甚至死亡。<br />
Requests 允许你发送纯天然，植物饲养的 HTTP/1.1 请求，无需手工劳动。你不需要手动为 URL 添加查询字串，也不需要对 POST 数据进行表单编码。Keep-alive 和 HTTP 连接池的功能是 100% 自动化的，一切动力都来自于根植在 Requests 内部的 urllib3。</p>
</blockquote>
<h2 id="简单使用"><a class="markdownIt-Anchor" href="#简单使用"></a> 简单使用</h2>
<p>如果你还没有安装Requests包，可以在命令行使用如下命令进行安装。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>
<p>安装完毕后，键入如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line">print(response.status_code) <span class="comment">#HTTP状态码</span></span><br></pre></td></tr></table></figure>
<p>这是以<code>GET</code>请求方式来访问<code>https://www.baidu.com</code>，然后返回一个HTTP状态码。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930205853.png" alt="" /></p>
<div class="snote guide"><p>复习一下一些常见的HTTP状态码</p>
<p>200 请求成功</p>
<p>301/302 重定向</p>
<p>403 禁止访问  404 找不到资源 405 Method not allow</p>
<p>500 服务器问题  502 Bad Gateway 网关错误</p></div>
<p>上图返回的代码是200，即请求成功了。<br />
请求成功后，可以获取一些其他信息。读者可以自行尝试输出查看内容。<br />
这里主要说明<code>response.text</code>和<code>response.content</code>。<br />
前者这个属性，获取了HTML文档，就解决了我们在前文提出的爬虫的第一个问题。<br />
后者主要被用于存储图片和文件，例如访问的URL为<code>https://zoruasama.gitee.io/img/zorua.png</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(response.text) <span class="comment">#获取HTML文档</span></span><br><span class="line">print(response.url)  <span class="comment">#获取请求的URL</span></span><br><span class="line">print(response.headers)  <span class="comment">#获取请求头</span></span><br><span class="line">print(response.cookies)  <span class="comment">#获取cookies # cookies和session的概念</span></span><br><span class="line">print(response.content)  <span class="comment">#以字节流返回数据 存图片或文件用</span></span><br></pre></td></tr></table></figure>
<p>如图所示是<code>response.text</code>返回的字符串内容。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930210531.png" alt="" /></p>
<p>接下来说明如何使用BeautifulSoup4来获取HTML文档中的信息。</p>
<h1 id="beautifulsoup4"><a class="markdownIt-Anchor" href="#beautifulsoup4"></a> BeautifulSoup4</h1>
<h2 id="简单介绍-2"><a class="markdownIt-Anchor" href="#简单介绍-2"></a> 简单介绍</h2>
<p><a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/" target="_blank" rel="noopener">在线文档</a><br />
Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库。它能够通过你喜欢的转换器实现惯用的文档导航，查找，修改文档的方式。Beautiful Soup会帮你节省数小时甚至数天的工作时间。<br />
HTML 文档本身是<strong>结构化的文本</strong>，有<strong>一定的规则</strong>，通过它的结构可以简化信息提取。于是，就有了lxml、pyquery、BeautifulSoup等网页信息提取库。一般我们会用这些库来提取网页信息。<br />
在下文中BeautifulSoup4将被简称为BS4。</p>
<h2 id="简单使用-2"><a class="markdownIt-Anchor" href="#简单使用-2"></a> 简单使用</h2>
<p>我们引用官方的例子来介绍如何使用BS4来进行工作。<br />
先安装BS4，在命令行键入如下语句：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure>
<p>假如我们已经使用某种方式获取到了某个网页的HTML文档（例如上文介绍的Requests），然后将这个文档字符串存储在<code>html_doc</code>这个变量中。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html_doc = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<p>而后从bs4中引入BeautifulSoup，解析上面的文档，就能得到一个BeautifulSoup对象，并将之赋值给soup变量。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">'html.parser'</span>) <span class="comment">#参数1是解析的文档内容, 参数2是选择的解析器</span></span><br></pre></td></tr></table></figure>
<p>使用对象的<code>prettify()</code>方法可以以标准缩进的形式呈现soup的HTML文档内容。<br />
以下的内容需要一定的<strong>HTML基础</strong>。需要知道什么是<code>标签</code>，<code>ID</code>，<code>Class</code>等知识。<br />
由于这不是本文主要内容，因此不再这里赘述，只会在下文简要说明。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930212424.png" alt="" /></p>
<p>我们再来看看关于<code>BeautifulSoup</code>对象的其他方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(soup.title)        <span class="comment">#获取标题标签</span></span><br><span class="line">print(soup.title.text)   <span class="comment">#获取内容</span></span><br><span class="line">print(soup.title.attrs)   <span class="comment">#获取属性</span></span><br><span class="line">print(soup.title.get(<span class="string">'class'</span>))  <span class="comment">#获取属性的值</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930213035.png" alt="" /></p>
<p>接下来来解释一下上面这些名词。</p>
<h3 id="souptitle"><a class="markdownIt-Anchor" href="#souptitle"></a> soup.title</h3>
<p>我们可以观察一下被解析的这个HTML文档，里面有一行：<code>&lt;title&gt;The Dormouse's story&lt;/title&gt;</code>，两边用<code>title</code>标签裹着的。<br />
因此<code>soup.title</code>就是在<strong>原先的整个文档中截取了这一部分</strong>。<br />
同理，如果选择<code>soup.body</code>，那么就是输出<code>body</code>标签裹着的内容。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930213316.png" alt="" /></p>
<p>进一步再选择<code>soup.body.p</code>，这会输出<code>body</code>标签下的<code>p</code>标签，而<code>p</code>标签有多个，所以只会选择<strong>第一个</strong>并输出。</p>
<h3 id="souptitletext"><a class="markdownIt-Anchor" href="#souptitletext"></a> soup.title.text</h3>
<p>虽然本节的标题是<code>soup.title.text</code>，但是<code>text</code>属性<strong>并不是</strong><code>title</code><strong>独有的</strong>，这一点在接下来的属性或方法介绍也是如此。只要是<code>BeautifulSoup</code>对象，<strong>都有这些方法</strong>。</p>
<p><code>.text</code>属性是用于获取标签内部的“<strong>正文</strong>”，如下图的<strong>橙色部分</strong>。<br />
它没有在<code>&lt; &gt;</code>这对括号内，所以把它视为“正文”。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930214353.png" alt="" /></p>
<p>上面这段字符串，实际是通过<code>soup.body.a</code>来获取的。<br />
接下来获取其中的“正文”。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930214713.png" alt="" /></p>
<h3 id="souptitleattrs"><a class="markdownIt-Anchor" href="#souptitleattrs"></a> soup.title.attrs</h3>
<p>在上文演示这个方法时，输出的是一个空字典。<br />
这是因为<code>soup.title</code>并不具备属性。在本节我们拿上一节的<code>soup.body.a</code>作演示。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930214843.png" alt="" /></p>
<p>可以看到，在<code>&lt; &gt;</code>这对括号里的内容，以字典的形式被返回了。如果读者还没有遗忘如何从字典从取值的方法的话，很容易可以联想到：<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930215000.png" alt="" /></p>
<p>可以这样做，但是事实上，BS4还提供了一个优雅的做法：<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930215116.png" alt="" /></p>
<h3 id="souptitlegetclass"><a class="markdownIt-Anchor" href="#souptitlegetclass"></a> soup.title.get(‘class’)</h3>
<p>接续上节，获取<code>&lt; &gt;</code>内的内容，还可以使用本节标题的形式。<br />
例如：<code>soup.body.a.get('href')</code><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930215334.png" alt="" /></p>
<h2 id="查找标签"><a class="markdownIt-Anchor" href="#查找标签"></a> 查找标签</h2>
<p>大多数情况下，上述的简单使用总是只能获取到<strong>第一个匹配项</strong>，显得有些鸡肋、不够用。<br />
而且对于标签的选择总是不够精准。<br />
因此我们在这里介绍<strong>查找标签</strong>的方法。查找标签的方法主要有两个：<code>.find()</code>和<code>.findall()</code>。<br />
前者也是查找<strong>第一个满足条件</strong>的标签并以字符串的形式返回，后者是查找<strong>所有满足条件</strong>的标签并以列表的形式返回。<br />
除此以外，这两个方法在参数上大同小异。</p>
<ul>
<li><code>name</code>，标签的名字，例如<code>p</code>,<code>a</code>,<code>title</code>等。</li>
<li><code>**kwargs</code>，利用属性键值对来进行过滤。如<code>id</code>和<code>class_</code>等。</li>
<li>其他的参数不再作解释。读者若感兴趣可以自行查阅文档。</li>
</ul>
<h3 id="查找指定id的标签"><a class="markdownIt-Anchor" href="#查找指定id的标签"></a> 查找指定id的标签</h3>
<p>我们再次使用上面的HTML文档为例进行演示。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004133730.png" alt="" /><br />
为了获取其中标为橙色的内容，我们可以<code>soup.find('a',id=&quot;link2&quot;)</code>。</p>
<h3 id="查找指定class的标签"><a class="markdownIt-Anchor" href="#查找指定class的标签"></a> 查找指定class的标签</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004133909.png" alt="" /></p>
<p>为了获取其中所有绿色的内容，我们可以<code>soup.find_all('a',class_='sister')</code><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004134113.png" alt="" /><br />
返回的内容是<strong>一个含有三个元素的列表</strong>。</p>
<h2 id="css选择器"><a class="markdownIt-Anchor" href="#css选择器"></a> CSS选择器</h2>
<p>如果您对CSS有了解的话，您肯定对 id 和 class 选择器不陌生。<br />
使用<code>soup.select()</code>方法就可以像CSS的规则一样进行选择。<br />
此处不再赘述。<br />
例如</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(soup.select(<span class="string">'a'</span>))</span><br><span class="line">print(soup.select(<span class="string">'.sister'</span>))  <span class="comment"># class是用 . 号</span></span><br><span class="line">print(soup.select(<span class="string">'#link1'</span>))   <span class="comment"># id是用 # 号</span></span><br></pre></td></tr></table></figure>
<h1 id="实战演练"><a class="markdownIt-Anchor" href="#实战演练"></a> 实战演练</h1>
<h2 id="爬取百度贴吧帖子中的图片并下载"><a class="markdownIt-Anchor" href="#爬取百度贴吧帖子中的图片并下载"></a> 爬取百度贴吧帖子中的图片并下载</h2>
<p>首先，我们先找一个<strong>百度贴吧帖子</strong>作为目标。<br />
笔者选择了<strong>火影忍者</strong>吧的这一帖子作为目标 <a href="https://tieba.baidu.com/p/6970148254" target="_blank" rel="noopener">链接</a>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004135044.png" alt="" /></p>
<h3 id="获取html文档"><a class="markdownIt-Anchor" href="#获取html文档"></a> 获取HTML文档</h3>
<p>先使用<code>requests</code>获取文档。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">html = requests.get(<span class="string">'https://tieba.baidu.com/p/6970148254'</span>)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br></pre></td></tr></table></figure>
<h3 id="用beautifulsoup解析"><a class="markdownIt-Anchor" href="#用beautifulsoup解析"></a> 用BeautifulSoup解析</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="对网页元素进行选择"><a class="markdownIt-Anchor" href="#对网页元素进行选择"></a> 对网页元素进行选择</h3>
<p>为了方便对HTML文档的阅读，我们使用浏览器的F12工具进行阅读。这个工具只需在浏览器中按下F12键即可打开。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004135639.png" alt="" /></p>
<p>观察文档可知，第一张图片的标签为<code>&lt;img class=&quot;BDE_Image&quot; src=&quot;http://tiebapic.baidu.com/forum/w%3D580/sign=219b01688545d688a302b2ac94c37dab/f3e3241f95cad1c845e0347c683e6709c83d5144.jpg&quot; size=&quot;905080&quot; changedsize=&quot;true&quot; width=&quot;560&quot; height=&quot;817&quot;&gt;</code>。</p>
<blockquote>
<p>您可以把鼠标悬浮在图片上，然后按下<code>Ctrl+Shift+C</code>进行快速定位。</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004135857.png" alt="" /><br />
观察后面几张图片，发现<strong>共性</strong>为img标签，class为<strong>BDE_Image</strong>，而我们只需要获得src链接即可。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20201004140033913_32281.png" alt="" /><br />
橙色是共性，绿色是需要爬取的内容。</p>
<h3 id="查找标签-2"><a class="markdownIt-Anchor" href="#查找标签-2"></a> 查找标签</h3>
<p>由上面的分析易得，我们需要写的代码为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">images = soup.find_all(<span class="string">'img'</span>,class_=<span class="string">'BDE_Image'</span>) <span class="comment">#这将返回含有每个图片元素的一个列表</span></span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">    print(img[<span class="string">'src'</span>])</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20201004140632114_5447.png" alt="" /></p>
<p>可以看到我们获得了大量的链接。<br />
接下来只需要下载这些链接的内容即可。</p>
<h3 id="下载图片"><a class="markdownIt-Anchor" href="#下载图片"></a> 下载图片</h3>
<p>此处先直接贴出代码再做解释。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">    print(<span class="string">'*'</span>*<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">with</span> open(str(int(time.time()))+<span class="string">'.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:  <span class="comment"># 使用with语句打开文件（文件不存在则会创建, 用时间戳命名文件）</span></span><br><span class="line">       f.write(requests.get(img[<span class="string">'src'</span>]).content)    <span class="comment"># 写入字节集</span></span><br><span class="line">       <span class="comment"># requests.get(img['src']) 是用requests访问目标链接 然后用 .content属性去获取二进制内容</span></span><br><span class="line">       time.sleep(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<h3 id="完整代码"><a class="markdownIt-Anchor" href="#完整代码"></a> 完整代码</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">html = requests.get(<span class="string">'https://tieba.baidu.com/p/6970148254'</span>)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br><span class="line">images = soup.find_all(<span class="string">'img'</span>,class_=<span class="string">'BDE_Image'</span>) <span class="comment">#这将返回含有每个图片元素的一个列表</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">    print(<span class="string">'*'</span>*<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">with</span> open(str(int(time.time()))+<span class="string">'.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:  <span class="comment"># 使用with语句打开文件（文件不存在则会创建, 用时间戳命名文件）</span></span><br><span class="line">       f.write(requests.get(img[<span class="string">'src'</span>]).content)    <span class="comment"># 写入字节集</span></span><br><span class="line">       <span class="comment"># requests.get(img['src']) 是用requests访问目标链接 然后用 .content属性去获取二进制内容</span></span><br><span class="line">       time.sleep(<span class="number">4</span>)  <span class="comment"># 等待4秒 以防止来不及下载</span></span><br></pre></td></tr></table></figure>
<h2 id="爬取豆瓣影评"><a class="markdownIt-Anchor" href="#爬取豆瓣影评"></a> 爬取豆瓣影评</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 先引用包</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004193912.png" alt="" /><br />
找到要爬取的目标，我选择了这个《我和我的家乡》的影评。<a href="https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score" target="_blank" rel="noopener">链接</a></p>
<h3 id="获取html文档-2"><a class="markdownIt-Anchor" href="#获取html文档-2"></a> 获取HTML文档</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194033.png" alt="" /><br />
我们可以看到，直接进行GET请求，返回的状态号为418，并没有成功。<br />
这可能是网站检测出非正常访问，所以我们要伪装成真实人物来访问。<br />
这里就涉及一个<code>User-Agent</code>的概念了，简称<code>UA</code>。这里不解释<code>UA</code>是什么。只说明如何利用。<br />
如何找到<code>UA</code>呢？下面介绍两个方法：</p>
<h4 id="方法一"><a class="markdownIt-Anchor" href="#方法一"></a> 方法一</h4>
<p>打开F12工具，刷新一下网页。选择Network页签，在左边的选项中随便点一个，在右边的Headers中找到user-agent字段。<br />
即 <code>Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36</code></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004180427.png" alt="" /></p>
<h4 id="方法二"><a class="markdownIt-Anchor" href="#方法二"></a> 方法二</h4>
<p>打开浏览器，在地址栏输入<code>about://version</code>并回车。可以方便地找到<code>UA</code>字段。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004180711.png" alt="" /></p>
<h3 id="headers"><a class="markdownIt-Anchor" href="#headers"></a> headers</h3>
<p>创建一个字典headers，将刚刚找到的<code>UA</code>，作为字段<code>User-Agent</code>的值写入其中。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">             <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36'</span>,</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p>接下来将之前的</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>)</span><br></pre></td></tr></table></figure>
<p>修改为</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>,headers=headers)</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194227.png" alt="" /></p>
<p>这个时候就可以发现能成功请求了。</p>
<h3 id="用beautifulsoup解析-2"><a class="markdownIt-Anchor" href="#用beautifulsoup解析-2"></a> 用BeautifulSoup解析</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="对网页元素进行选择-2"><a class="markdownIt-Anchor" href="#对网页元素进行选择-2"></a> 对网页元素进行选择</h3>
<p>我们要爬取的目标是，该电影的影评，最好爬取到尽可能多的内容。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194838.png" alt="" /></p>
<p>拟定对图上每一个用户的昵称、评分、时间、评论内容、赞成数进行爬取。</p>
<p>打开F12工具进行分析，我们发现每一个用户的评论和其相关信息都在一个<code>div</code>标签，<code>class</code>为<code>comment-item</code>的容器（共同点）中。<br />
<strong>注：容器是为方便陈述自己拟定的非正式称谓。</strong></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194326.png" alt="" /></p>
<h3 id="查找标签-3"><a class="markdownIt-Anchor" href="#查找标签-3"></a> 查找标签</h3>
<p>思路：我们可以先把页面上所有的<strong>容器</strong>选出来，再从每个容器中选取自己想要的信息。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">boxes = soup.find_all(<span class="string">'div'</span>,class_=<span class="string">'comment-item'</span>)</span><br></pre></td></tr></table></figure>
<p>这样就找到了所有的<strong>容器</strong>，并以列表的形式返回。<br />
然后我们<strong>遍历每个容器</strong>，提取自己想要的信息。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> box <span class="keyword">in</span> boxes:</span><br><span class="line">   <span class="comment"># 在box中提取信息</span></span><br></pre></td></tr></table></figure>
<p>这个时候，每个容器中的内容应类似这样（部分内容被隐去）：</p>
<details green><summary> <p>容器内容</p> </summary>
              <div class='content'>
              <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-item "</span> <span class="attr">data-cid</span>=<span class="string">"2455502478"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-item "</span> <span class="attr">data-cid</span>=<span class="string">"2538318284"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">"Username"</span> <span class="attr">href</span>=<span class="string">"https://www.douban.com/people/0000000/"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://img1.doubanio.com/icon/u0000000-17.jpg"</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-vote"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"votes vote-count"</span>&gt;</span>2217<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"2538318284"</span> <span class="attr">type</span>=<span class="string">"hidden"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">data-id</span>=<span class="string">"2538318284"</span> <span class="attr">class</span>=<span class="string">"j a_show_login"</span> <span class="attr">onclick</span>=<span class="string">""</span>&gt;</span>有用<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 删除短评 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-info"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.douban.com/people/0000000/"</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>看过<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"allstar50 rating"</span> <span class="attr">title</span>=<span class="string">"力荐"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-time "</span> <span class="attr">title</span>=<span class="string">"2020-09-20 20:16:27"</span>&gt;</span></span><br><span class="line">                    2020-09-20</span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">" comment-content"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">class="short"</span>&gt;</span>徐峥的才华确实被低估了。“乡村教师”这个题材的电影展现出他某个程度的细腻——他很擅长从一个小的切角去展开一个宏大叙题，这样的融合不会过于煽情，却分外让人感动。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
              </div>
            </details>
<p>然后我们再对<strong>每个容器</strong>进行分析：<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195144.png" alt="" /></p>
<h4 id="赞成数"><a class="markdownIt-Anchor" href="#赞成数"></a> 赞成数</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195424.png" alt="" /></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'votes'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>注：我们观察到上面的类写的是 class=“votes vote-count”，这不是一个类的名字，而是两个类的名字，也就是说这个span既属于votes也属于vote-count。</strong></p>
<p>为了提取其中的<strong>正文</strong>，我们加上<code>.text</code>属性。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'votes'</span>).text</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195541.png" alt="" /></p>
<h4 id="用户名"><a class="markdownIt-Anchor" href="#用户名"></a> 用户名</h4>
<p>那么如何提取用户名呢？用户名的class为空。和上面提取赞成数类似。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'a'</span>,class_=<span class="string">''</span>).text</span><br></pre></td></tr></table></figure>
<p>但是不建议使用这个方法，似乎是会出现BUG。（这个条件太弱了，满足条件可能不止这一个）<br />
所以我们可以采用连续查找的方式，先查找<code>span</code>,<code>class_=&quot;comment-info&quot;</code>，再在里面查找<code>a</code>标签。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195830.png" alt="" /></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-info'</span>).find(<span class="string">'a'</span>).text</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195944.png" alt="" /></p>
<h4 id="评分"><a class="markdownIt-Anchor" href="#评分"></a> 评分</h4>
<p>关于评分，我们可以在文档中观察到，没有直接的数字或文本来表示，它是用<strong>一个类名来表示</strong>的。<br />
所以我们可以想办法获取到这个类名。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200220.png" alt="" /><br />
在上面那个语句后加一个<code>[0]</code>来获取第一个元素，然后把<code>allstar</code>去掉。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)[<span class="number">0</span>].replace(<span class="string">"allstar"</span>)</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200455.png" alt="" /></p>
<p>通过观察可知，30其实是三颗星。所以我们可以简单地换算一下。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">int(box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)[<span class="number">0</span>].replace(<span class="string">"allstar"</span>,<span class="string">""</span>))//<span class="number">10</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200639.png" alt="" /></p>
<h4 id="评论内容"><a class="markdownIt-Anchor" href="#评论内容"></a> 评论内容</h4>
<p>这个也非常简单。<br />
只需要：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'short'</span>).text</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200810.png" alt="" /></p>
<h4 id="时间"><a class="markdownIt-Anchor" href="#时间"></a> 时间</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-time'</span>).text.strip()</span><br><span class="line"><span class="comment">#不使用strip()的话两边会有空格或换行, 用这个方法来去掉这些我们不要的东西。</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200953.png" alt="" /></p>
<hr />
<p>也可以从属性中取得更详细的时间。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-time'</span>)[<span class="string">'title'</span>]</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004201110.png" alt="" /></p>
<h3 id="完整代码-2"><a class="markdownIt-Anchor" href="#完整代码-2"></a> 完整代码</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">headers = &#123;</span><br><span class="line">             <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36'</span>,</span><br><span class="line">            &#125;</span><br><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>,headers=headers)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br><span class="line">boxes = soup.find_all(<span class="string">'div'</span>,class_=<span class="string">'comment-item'</span>)</span><br><span class="line"><span class="keyword">for</span> box <span class="keyword">in</span> boxes:</span><br><span class="line">    print(<span class="string">"用户名"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-info'</span>).find(<span class="string">'a'</span>).text)</span><br><span class="line">    print(<span class="string">"赞成数"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'votes'</span>).text)</span><br><span class="line">    print(<span class="string">"时间"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-time'</span>).text.strip())</span><br><span class="line">    print(<span class="string">"星数"</span>,int(box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)[<span class="number">0</span>].replace(<span class="string">"allstar"</span>,<span class="string">""</span>))//<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">"评论内容"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'short'</span>).text)</span><br><span class="line">    print(<span class="string">"-"</span>*<span class="number">10</span>) <span class="comment">#分隔符</span></span><br></pre></td></tr></table></figure>
<p>运行效果如下图所示：<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004202132.png" alt="" /></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 03. 函数、包和数据库</title>
    <url>/2020/07/22/training_2/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年7月22日。今天主要讲的内容有：</p>
<ul>
<li><span class="inline-tag yellow">条件与循环</span></li>
<li><span class="inline-tag green">函数的定义</span></li>
<li><span class="inline-tag red">包的引用</span></li>
<li><span class="inline-tag blue">连接MySQL</span></li>
<li><span class="inline-tag yellow">连接MongoDB</span></li>
</ul>
<h1 id="条件与循环"><a class="markdownIt-Anchor" href="#条件与循环"></a> 条件与循环</h1>
<p>注意，以下语句都用到了此前提到过的<strong>代码块</strong>概念，若您已经忘记了，可以查看之前的章节复习。</p>
<h2 id="条件if"><a class="markdownIt-Anchor" href="#条件if"></a> 条件if</h2>
<p>使用类似如下的结构，即可在Python中创建一个条件分歧语句。可以把</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> condition_1:</span><br><span class="line">    statement_block_1 <span class="comment">#当条件表达式1为真值时执行的代码块</span></span><br><span class="line"><span class="keyword">elif</span> condition_2:     <span class="comment">#如果不需要条件2, 可以省略这一块</span></span><br><span class="line">    statement_block_2 <span class="comment">#当条件表达式1为假值时, 条件表达式2为真值执行的代码块</span></span><br><span class="line"><span class="keyword">else</span>:                 <span class="comment">#如果不需要不满足1,2的情况, 可以省略这一块</span></span><br><span class="line">    statement_block_3 <span class="comment">#当条件表达式1为假值时, 条件表达式2为假值执行的代码块</span></span><br></pre></td></tr></table></figure>
<p>例如，要编写一段程序，判断输入的数字是否为1。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num = input()</span><br><span class="line"><span class="keyword">if</span> num.isdigit() == <span class="literal">False</span>:</span><br><span class="line">    print(<span class="string">"输入的含有非数字内容"</span>)</span><br><span class="line"><span class="keyword">elif</span> int(num) == <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"输入的是1"</span>)</span><br><span class="line"><span class="keyword">elif</span> int(num)&gt;<span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"输入的比1大"</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    print(<span class="string">"输入的比1小"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="循环for"><a class="markdownIt-Anchor" href="#循环for"></a> 循环for</h2>
<p><code>for</code>循环在其他编程语言中一般用来写已知循环次数的循环。Python也同样可以这样子做。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<h2 id="循环while"><a class="markdownIt-Anchor" href="#循环while"></a> 循环while</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">astring = <span class="string">"Hello, Python."</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> astring[i] != <span class="string">','</span>:</span><br><span class="line">    print(astring[i])</span><br><span class="line">    i = i + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>输出的内容是<code>Hello</code>。<br />
在Python中没有类似<code>do……while</code>的语句。<br />
如果想创建一个无限循环，可以使用<code>while True:</code>的条件。</p>
<h2 id="循环else"><a class="markdownIt-Anchor" href="#循环else"></a> 循环else</h2>
<p>在上面的<code>for</code>和<code>while</code>循环中，都可以再额外加入一个<code>else:</code>语句。<br />
类似下面的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">astring = <span class="string">"Hello, Python."</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> astring[i] != <span class="string">','</span>:</span><br><span class="line">    print(astring[i])</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(astring[i])</span><br></pre></td></tr></table></figure>
<p><code>else:</code>语句的作用便是，在条件不满足时跳转到该代码块。</p>
<h2 id="循环break"><a class="markdownIt-Anchor" href="#循环break"></a> 循环break</h2>
<p><code>break</code>可以用于终止整个循环。例如在下面的例子中：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span>: <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<p>不过需要注意的是，<code>break</code>仅会终止一个循环，对于嵌套的循环，它只会终止最接近的循环。</p>
<h2 id="循环continue"><a class="markdownIt-Anchor" href="#循环continue"></a> 循环continue</h2>
<p><code>continue</code>可以用于终止当前这次循环，之后会马上进入下一次循环，例如在下面的例子中：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span>: <span class="keyword">continue</span></span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<p>上述代码的结果是，除了5以外的1~9的数字。因为当<code>i</code>的值为5时，剩余的循环体代码被直接跳过了。</p>
<h1 id="函数的定义"><a class="markdownIt-Anchor" href="#函数的定义"></a> 函数的定义</h1>
<p>函数是一个有入口，有出口的程序段。它的作用有：</p>
<ol>
<li>减少代码冗余</li>
<li>代码结构清晰</li>
<li>保持代码一致性</li>
</ol>
<h2 id="定义函数"><a class="markdownIt-Anchor" href="#定义函数"></a> 定义函数</h2>
<p>定义函数使用<code>def</code>关键字即可。和大多数编程语言不同的是，Python在定义函数时不需要指定<strong>函数是否具有返回值/返回值类型/参数类型</strong>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">(param1,param2,param3)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>上例中的<code>pass</code>关键字，是一个<strong>占位符</strong>。即你定义了某个函数，但是你还没有想好这个函数的具体内容时，用一个<code>pass</code>来占位以防止程序出错。<br />
对于<code>pass</code>关键字，前面介绍的<strong>条件与循环</strong>中也是可以使用的。<br />
例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> a == b:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>接下来我们定义函数：输入两个数字，输出这两个数字的平均数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zorua_average</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (a+b)/<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>上例的<code>return</code>关键字，就是用于指示函数的返回值。<strong>在函数返回以后，函数就结束了</strong>。例如下面的例子。</p>
<details blue><summary> <p>栗子</p> </summary>
              <div class='content'>
              <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zorua_average</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (a+b)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">print</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>调用上面这个函数时，只会输出1，而不会输出2。</p>
              </div>
            </details>
<p>当然<strong>返回值</strong>并不是函数必须的。<br />
由于Python在定义函数时做了极简，如果想像其他语言一样<strong>严格限定参数的类型</strong>，则需要进行参数变量的检查。<strong>这样也算是做到了类似函数重载的效果。</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">typeof</span><span class="params">(variate)</span>:</span></span><br><span class="line">    type=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(variate,int):</span><br><span class="line">        type = <span class="string">"int"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,str):</span><br><span class="line">        type = <span class="string">"str"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,float):</span><br><span class="line">        type = <span class="string">"float"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,list):</span><br><span class="line">        type = <span class="string">"list"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,tuple):</span><br><span class="line">        type = <span class="string">"tuple"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,dict):</span><br><span class="line">        type = <span class="string">"dict"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,set):</span><br><span class="line">        type = <span class="string">"set"</span></span><br><span class="line">    <span class="keyword">return</span> type</span><br></pre></td></tr></table></figure>
<h3 id="默认参数"><a class="markdownIt-Anchor" href="#默认参数"></a> 默认参数</h3>
<p>在定义函数时，可以给参数一些缺省值，这样在调用函数，没有给该参数的值时，参数会有一个默认的值。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">(param1=<span class="number">1</span>,param2=<span class="number">2</span>,param3=<span class="number">3</span>)</span>:</span></span><br><span class="line">    print(param1,param2,param3)</span><br></pre></td></tr></table></figure>
<p>调用函数<code>functionname()</code>的结果为<strong>输出了1 2 3</strong>，等价于<code>functionname(1,2,3)</code>；<br />
<code>functionname(4,5)</code>的<strong>结果为输出了4 5 3</strong>，等价于<code>functionname(4,5,3)</code>。</p>
<div class="snote danger"><p>
默认参数应该要在函数定义时靠右写，有缺省值的参数在没有缺省值参数的右边。否则会产生二义性。例如
<code>
def func(param1=1,param2,param3)
</code>的函数定义，那么<code>func(3,4)</code>的3和4到底是赋值给参数1和2，还是2和3呢？
</p></div>
<h3 id="关键字参数"><a class="markdownIt-Anchor" href="#关键字参数"></a> 关键字参数</h3>
<p>对于上例，读者会发现，缺省参数只能依次填充。<br />
如果我想做到<strong>param1,param2使用缺省值，而param3用自定义值</strong>，该如何做呢？<br />
Python提供的方案是：<code>functionname(param3=5)</code>，结果为<strong>结果为输出了1 2 5</strong>，等价于<code>functionname(1,2,5)</code>。<br />
利用关键字参数，还可以改变参数的顺序。例如<code>functionname(param3=5,param2=5,param1=5)</code></p>
<h3 id="可变参数"><a class="markdownIt-Anchor" href="#可变参数"></a> 可变参数</h3>
<p>在编程时，我们可能会出现的需求。<br />
例如，参数数量是变化的一些函数：cal_sum(求和函数)。</p>
<ul>
<li>cal_sum(1,2)→1+2=3</li>
<li>cal_sum(1,2,3,1)→1+2+3+1=7</li>
</ul>
<p>那么，这在Python中该如何实现呢？<br />
只需在这一个接受“多个内容”的参数的参数名前，加一个<code>*</code>即可。<br />
值是以元组的形式传入的<br />
例如下面的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cal_sum</span><span class="params">(*number)</span>:</span></span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> number:</span><br><span class="line">        result += i</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906103611.png" alt="" /></p>
<h3 id="命名关键字参数"><a class="markdownIt-Anchor" href="#命名关键字参数"></a> 命名关键字参数</h3>
<p>对于关键字参数，函数的调用者可以传入任意不受限制的关键字参数。<br />
至于到底传入了哪些，就需要在函数内部通过kw检查。<br />
关键字参数的参数名前有<code>**</code>，值是以字典的形式传入的。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buy_item</span><span class="params">(id, number, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'discount'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># 有discount参数</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'pay'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># 有job参数</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw)</span><br></pre></td></tr></table></figure>
<p>但是这个时候，调用者仍可以传入不受限制的关键字参数。<br />
例如</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">buy_item(<span class="number">233</span>,<span class="number">2333</span>,discount=<span class="number">0.8</span>,pay=<span class="number">12345</span>,name=<span class="string">"Zorua"</span>)</span><br><span class="line"><span class="comment">#传入的关键字参数，名字是任意的</span></span><br></pre></td></tr></table></figure>
<hr />
<p>另外还有一种形式的命名关键字参数，需要一个特殊分隔符<code>*</code>，<code>*</code>后面的参数被视为命名关键字参数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buy_item</span><span class="params">(id, number, *, discount, pay)</span>:</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'discount:'</span>, discount,<span class="string">'pay'</span>,pay)</span><br></pre></td></tr></table></figure>
<p>调用方式如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">buy_item(<span class="number">233</span>,<span class="number">2333</span>,discount=<span class="number">0.8</span>,pay=<span class="number">12345</span>)</span><br><span class="line"><span class="comment">#传入的关键字参数，名字是任意的</span></span><br><span class="line"><span class="comment">#命名关键字参数必须传入参数名，这和位置参数不同。如果没有传入参数名，调用将报错</span></span><br></pre></td></tr></table></figure>
<p>如果函数中有一个<strong>可变参数</strong>，上述的<code>*</code>可以用可变参数来代替。<br />
即<code>def buy_item(id, number, *args, discount, pay):</code></p>
<h3 id="参数顺序"><a class="markdownIt-Anchor" href="#参数顺序"></a> 参数顺序</h3>
<p>在<strong>默认参数</strong>这节中提到了默认参数应该在函数定义时靠右写，如果有更多类型的参数，则应按下面这个顺序从左到右：<br />
<strong>基本参数、默认参数、可变参数、命名关键字参数和关键字参数</strong></p>
<h1 id="包的引入"><a class="markdownIt-Anchor" href="#包的引入"></a> 包的引入</h1>
<div class="snote quote"><p>
Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。<br>
模块让你能够有逻辑地组织你的 Python 代码段。<br>
把相关的代码分配到一个模块里能让你的代码更好用，更易懂。<br>
模块能定义函数，类和变量，模块里也能包含可执行的代码。<br>
</p></div>
一个模块只会被导入一次，不管你执行了多少次import。这样可以防止导入模块被一遍又一遍地执行。
比如要引用模块`math`，就可以在文件最开始的地方用`import math`来引入。在调用`math`模块中的函数时，必须这样引用：`模块名.函数名`
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接引入包</span></span><br><span class="line"><span class="keyword">import</span> os,random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从包中引入功能</span></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time,timezone</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从包中引入所有功能</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入包并取别名</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime <span class="keyword">as</span> dt   <span class="comment"># as 取别名</span></span><br></pre></td></tr></table></figure>
<h2 id="自定义包"><a class="markdownIt-Anchor" href="#自定义包"></a> 自定义包</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906110927.png" alt="" /><br />
创建Python Package后，新建一个py文件，命名为<code>__init__.py</code><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906110447.png" alt="" /><br />
<code>__init__.py</code> 把文件夹变成包。<br />
接下来就可以在其他代码中，使用<code>import wow</code>来引用这个包了。</p>
<h2 id="导入顺序"><a class="markdownIt-Anchor" href="#导入顺序"></a> 导入顺序</h2>
<p>当你导入一个模块，Python 解析器对模块位置的搜索顺序是：</p>
<ul>
<li>当前目录</li>
<li>如果不在当前目录，Python 则搜索在 shell 变量 PYTHONPATH 下的每个目录。</li>
<li>如果都找不到，Python会察看默认路径。UNIX下，默认路径一般为<code>/usr/local/lib/python/</code>。</li>
<li>模块搜索路径存储在 system 模块的 sys.path 变量中。变量里包含当前目录，PYTHONPATH和由安装过程决定的默认目录。</li>
</ul>
<h2 id="pip工具"><a class="markdownIt-Anchor" href="#pip工具"></a> pip工具</h2>
<p>pip 是 Python 包管理工具，该工具提供了对Python 包的查找、下载、安装、卸载的功能。<br />
一般在安装Python后，会自带这个工具。<br />
在本篇文章中，只需要知道可以在命令行中使用<code>pip install</code>来进行包的安装即可。<br />
后续如果有时间的话，我会额外写一篇文章来介绍pip3工具。</p>
<h1 id="连接mysql"><a class="markdownIt-Anchor" href="#连接mysql"></a> 连接MySQL</h1>
<div class="snote quote"><p><b>援引自百度百科。</b></p>
<p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p>
<p>MySQL是一种关系型数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。</p>
<p>MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。</p></div>
<h2 id="引入包"><a class="markdownIt-Anchor" href="#引入包"></a> 引入包</h2>
<p>使用<code>import pymysql</code>语句引入包，如果还没有这个包，可以使用<code>pip3 install pymysql</code>进行安装。</p>
<h2 id="连接数据库"><a class="markdownIt-Anchor" href="#连接数据库"></a> 连接数据库</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = pymysql.connect(host=<span class="string">'152.*.*.*'</span>,user=<span class="string">'root'</span>,password=<span class="string">'abc123456'</span>,database=<span class="string">'Zorua0307'</span>,port=<span class="number">3309</span>)</span><br></pre></td></tr></table></figure>
<p><strong>注：<code>*</code>是须替换的部分，下同。</strong></p>
<p>参数说明：</p>
<ul>
<li>host - 你的数据库地址，如果是本地的话，使用<code>192.168.0.*</code>即可或者<code>localhost</code>。</li>
<li>user -  用户名</li>
<li>password - 密码</li>
<li>database - 数据库名</li>
<li>port - 数据库服务端口</li>
</ul>
<h2 id="创建游标"><a class="markdownIt-Anchor" href="#创建游标"></a> 创建游标</h2>
<p>游标（Cursor）是处理数据的一种方法，为了查看或者处理结果集中的数据，游标提供了在结果集中一次一行或者多行前进或向后浏览数据的能力。<br />
可以简单地把游标认为是<strong>记录的指针</strong>，以如下形式创建的话，默认为元组的形式（如图所示）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cursor = db.cursor()</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906133206.png" alt="" /></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cursor = db.cursor(pymysql.cursors.DictCursor) <span class="comment">#默认是元组 换成字典</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906133336.png" alt="" /></p>
<h2 id="执行sql语句"><a class="markdownIt-Anchor" href="#执行sql语句"></a> 执行SQL语句</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cursor.execute(<span class="string">'select * from students'</span>)</span><br><span class="line">cursor.execute(<span class="string">"update students set Slesson1='Counter Strike' where Sname='Zorua'"</span>)</span><br></pre></td></tr></table></figure>
<p>使用<code>cursor.execute()</code>的方法可以执行类似上述的SQL语句。</p>
<h2 id="获取数据"><a class="markdownIt-Anchor" href="#获取数据"></a> 获取数据</h2>
<p>在执行完SQL的查询后，可以使用<code>cursor.fetchone()</code>将获取查询到的第一条数据。<br />
<code>cursor.fetchall()</code>获取到查询到的所有数据。</p>
<h2 id="更新数据库"><a class="markdownIt-Anchor" href="#更新数据库"></a> 更新数据库</h2>
<p>执行关于更新（插入、修改等）的SQL语句后，需要提交才能完成对数据库的更新。可以参考下面这个代码。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">"insert into student (name,age) values ('app',11)"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    db.commit()   <span class="comment">#提交</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    db.rollback() <span class="comment">#提交失败，对事务进行回滚</span></span><br></pre></td></tr></table></figure>
<h2 id="关闭数据库"><a class="markdownIt-Anchor" href="#关闭数据库"></a> 关闭数据库</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#关闭游标</span></span><br><span class="line">cursor.close()</span><br><span class="line"><span class="comment">#关闭连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<h1 id="连接mongodb"><a class="markdownIt-Anchor" href="#连接mongodb"></a> 连接MongoDB</h1>
<p>上一节简单介绍了，在Python中连接关系数据库MySQL。<br />
这一节再简单介绍一下，连接非关系数据库MongoDB的过程。</p>
<details ><summary> <p>关系数据库与非关系数据库</p> </summary>
              <div class='content'>
              <ul><li>关系型数据库<ul><li>一开始就定义好表的结构</li></ul></li><li>非关系型数据库<ul><li>可以随时增减字段 可以横向扩展</li><li>敏捷性和扩展性</li><li>学习成本低，降低企业费用</li><li>故障率低</li><li>跨平台</li></ul></li></ul>
              </div>
            </details>
<p>由于笔者对MongoDB也不甚熟悉，所以下面仅仅直接举出一些例子，暂时不作详解。<br />
待日后学习，会及时跟进笔记。<s>没错我又挖坑。</s></p>
<h2 id="引入包-2"><a class="markdownIt-Anchor" href="#引入包-2"></a> 引入包</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br></pre></td></tr></table></figure>
<p>使用上述语句引入包，如果没有该包可以使用：<code>pip3 install pymongo</code>进行安装。</p>
<h2 id="连接数据库-2"><a class="markdownIt-Anchor" href="#连接数据库-2"></a> 连接数据库</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">conn = MongoClient(<span class="string">'152.*.*.*'</span>,<span class="number">27019</span>)</span><br></pre></td></tr></table></figure>
<p>如果是本地，可以使用<code>localhost</code>。</p>
<h2 id="建立数据库"><a class="markdownIt-Anchor" href="#建立数据库"></a> 建立数据库</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = conn[<span class="string">'zorua'</span>]</span><br></pre></td></tr></table></figure>
<p>使用上述语句，将创建一个名为<code>zorua</code>的数据库。</p>
<h2 id="创建集合表"><a class="markdownIt-Anchor" href="#创建集合表"></a> 创建集合(表)</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set = db[<span class="string">'zorua_set'</span>]  <span class="comment">#集合相当于表</span></span><br></pre></td></tr></table></figure>
<p>使用上述语句，将创建一个名为<code>zorua_set</code>的集合。</p>
<h2 id="插入一条数据"><a class="markdownIt-Anchor" href="#插入一条数据"></a> 插入一条数据</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set.insert_one(&#123;<span class="string">'name'</span>: <span class="string">'zorua'</span>, <span class="string">'age'</span>: <span class="number">19</span>&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="更新一个数据记录"><a class="markdownIt-Anchor" href="#更新一个数据记录"></a> 更新一个数据记录</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set.update_one(&#123;<span class="string">'name'</span>:<span class="string">'zorua'</span>&#125;,&#123;<span class="string">'$set'</span>:&#123;<span class="string">'age'</span>:<span class="number">5</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="更新多个数据记录"><a class="markdownIt-Anchor" href="#更新多个数据记录"></a> 更新多个数据记录</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set.update_many(&#123;<span class="string">'name'</span>:<span class="string">'zorua'</span>&#125;,&#123;<span class="string">'$set'</span>:&#123;<span class="string">'age'</span>:<span class="number">5</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="删除多个数据记录"><a class="markdownIt-Anchor" href="#删除多个数据记录"></a> 删除多个数据记录</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set.delete_many(&#123;<span class="string">'name'</span>:<span class="string">'zorua'</span>&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="查询记录"><a class="markdownIt-Anchor" href="#查询记录"></a> 查询记录</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = my_set.find()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">result = my_set.find(&#123;<span class="string">'age'</span>:&#123;<span class="string">"$gte"</span>:<span class="number">7</span>&#125;&#125;)</span><br><span class="line">print(<span class="string">"大于等于7岁的有："</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">    print(i)</span><br><span class="line"><span class="comment"># $gt:等于</span></span><br><span class="line"><span class="comment"># $lt:小于</span></span><br><span class="line"><span class="comment"># $gte:大于等于</span></span><br><span class="line"><span class="comment"># $lte:小于等于</span></span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows | 应用程序的Zorua有机分类使用管理办法</title>
    <url>/2020/07/22/windows_0/</url>
    <content><![CDATA[<h1 id="引言"><a class="markdownIt-Anchor" href="#引言"></a> 引言</h1>
<p><code>Windows</code>作为广泛地被使用的个人计算机操作系统，在学习和工作中发挥着举足轻重的作用。但是，就我身边的人而言，大家似乎都是到手即用，而没有事先对其作一番设置让自己使用得更加舒适。本文简要地谈谈，我是怎么样理解并发挥<code>Windows</code>提供的一些功能的，仅供参考。<br />
正如题文的<strong>应用程序的Zorua有机分类使用管理办法</strong>，这是我随意地对这篇见解起的名字，英文名为<strong>Zorua Organic Rating Utilization Administration</strong>，简称<strong>ZORUA</strong>。</p>
<h1 id="应用程序的启动"><a class="markdownIt-Anchor" href="#应用程序的启动"></a> 应用程序的启动</h1>
<p>在我们日常使用计算机的时候，必然是需要启动应用程序的。按照使用频率，我把这些应用程序分成如下几类：</p>
<ul>
<li><strong>强必定启动项</strong>：每次开启计算机，必定会启动的应用程序，但是希望它是自动启动</li>
<li><strong>弱必定启动项</strong>：每次开启计算机，必定会启动的应用程序，但是希望它是手动启动</li>
<li><strong>偶尔启动项</strong>：正在进行工作时，出于一时的需求需要启动的应用程序</li>
<li><strong>非必定启动项</strong>：其他不常使用的应用程序</li>
</ul>
<p>对于不同类别的应用程序，全部都使用桌面快捷方式，是非常不科学高效的。</p>
<ul>
<li>桌面壁纸混搭各种风格的图标，美观度下降</li>
<li>桌面图标过多，难以迅速找到自己需要启动应用程序，尤其是在桌面图标被重新排序后</li>
</ul>
<blockquote>
<p><span class="inline-tag grey">P.S.</span> 笔者的桌面上图标也挺多的，但是主要都是<strong>文件</strong>，而不是<strong>软件</strong>，且这些文件通常具有时间上的<strong>局域性</strong>，会定期清理。<br />
对于常用的软件、游戏等，使用了<strong>Fences+文件夹</strong>的方式进行了管理。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722172753.png" alt="" /></p>
</blockquote>
<p><strong>因此，不同类别就应该使用不同的管理方式。</strong></p>
<h2 id="强必定启动项"><a class="markdownIt-Anchor" href="#强必定启动项"></a> 强必定启动项</h2>
<p><strong>强必定启动项</strong>，或许用术语来称呼，应为<strong>开机启动项</strong>。对于这些程序，我们在启动<code>Windows</code>完毕后，它们就会自动运行，这样可以省去我们每次手动运行的繁琐。<br />
但是，需要注意的是，<strong>过多的开机启动项可能会影响开机时间</strong>，但也<strong>切忌刻意地优化开机时间</strong>，极端地追求过短的开机时间。即使你的计算机能很快的开机并打败了全国99%的用户，这时你也还得花费时间启动软件，得不偿失。除非你是常年不关机。</p>
<h3 id="管理办法"><a class="markdownIt-Anchor" href="#管理办法"></a> 管理办法</h3>
<p>打开任务管理员，切换到<code>启动</code>标签页便可以进行启用/禁用。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722171507.png" alt="" /></p>
<h3 id="示例我的应用"><a class="markdownIt-Anchor" href="#示例我的应用"></a> 示例：我的应用</h3>
<p>在我的计算机上，我设置的该类应用：</p>
<ul>
<li>TrafficMonitor：在任务栏实时显示资源使用情况</li>
<li>坚果云：文件同步网盘</li>
<li>Snipaste：截图工具</li>
<li>火柴：类everything软件</li>
<li>火绒安全软件</li>
<li>Fences：桌面管理软件</li>
</ul>
<h2 id="弱必定启动项"><a class="markdownIt-Anchor" href="#弱必定启动项"></a> 弱必定启动项</h2>
<p>对于这类应用，和前文所述的<strong>强必定启动项</strong>几乎一致，差别只在<strong>希望它是手动启动</strong>。<br />
可能有读者会问了，既然它们也是必定会启动的，为什么不直接归到上一类中，而要<strong>希望它是手动启动</strong>呢？</p>
<p>在回答这个问题前，我们来看下面这张图片。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722173818.png" alt="" /></p>
<p>我相信不少用户对登录QQ时弹出的这个新闻窗口是反感的，上面的新闻你或许偶尔会看，但是大部分时候不看。而它并不懂得迎合，只会每次精准无误地弹出，造成了打扰。</p>
<p>试想一下，<strong>弱必定启动项</strong>一般会有什么呢？</p>
<ul>
<li>每天都会登录的QQ</li>
<li>每天都会登录的微信</li>
<li>每天都会打开的浏览器</li>
<li>每天都会打开的文件资源管理器</li>
<li>……</li>
</ul>
<p>上面提到的频度是每天，而不是每次。</p>
<blockquote>
<p>我某次开机准备拷贝计算机中的一个文件到同学的U盘时，突然弹出QQ登录窗口。<br />
类似上述这样的场景，实质上也是会像那个迷你版新闻弹窗一样充满打扰感的。</p>
</blockquote>
<p>而真正配得开机自运行的，就应该是那种静默运行的应用程序。</p>
<h3 id="管理方法"><a class="markdownIt-Anchor" href="#管理方法"></a> 管理方法</h3>
<p>那么，言归正传。<br />
那么对于这类应用，应该如何管理呢？</p>
<p>我认为，最好就是将其锁定在任务栏中（但是QQ仍然不适合，我会在下文解释原因）。<br />
先分析一下锁定任务栏的优缺点：</p>
<ul>
<li>锁定在任务栏中的优点：除全屏应用外（如游戏、电影），你可以在任何场景下打开这个应用。</li>
<li>锁定在任务栏中的缺点：在未运行时，它将一直占着位置，使得任务栏能容下的应用按钮位置少了。</li>
</ul>
<p>基于上面两点，可以得出的结论是——</p>
<ul>
<li><strong>任务栏锁定应用可以处理场景中的插入事件，例如——</strong>
<ul>
<li><strong>正写着代码，要打开浏览器查一些资料</strong></li>
<li><strong>正聊着天，突然被催促着提交某个报告</strong></li>
</ul>
</li>
<li><strong>任务栏锁定应用尽量不要太多</strong></li>
<li><strong>任务栏锁定应用在运行后，应该是<code>理想状态</code></strong></li>
</ul>
<p>为了表述简洁，上述提到了一个词，叫做<code>理想状态</code>，现在我对它下一个不严谨的定义。<br />
<span class="inline-tag red">定义</span> <strong>理想状态</strong>是指，被锁定在任务栏的应用被运行后，<strong>再次点击任务栏上的图标</strong>，将会出现<strong>已经运行的程序窗口</strong>，而不是另行再运行一次程序的状态。<br />
处于理想状态的好处是，相当于<strong>在运行时，锁定在任务栏的缺点被避免了</strong>。</p>
<p>这是什么意思呢？以腾讯QQ为例，当把腾讯QQ锁定在任务栏上后，点击腾讯QQ，将会运行并打开QQ登录界面。<br />
这时输入账号密码登录，在登录完成后，点击QQ，依然打开的是QQ登录界面。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722175337.png" alt="" /></p>
<p>再以360安全浏览器为例，将360安全浏览器锁定在任务栏上后，点击它，将会运行并打开，当我再次点击时，它打开的是我已经打开的界面。</p>
<p>如果你还是很难明白上面的举例，那只需要知道，在点击运行之后，下方应显示一条亮横线。如图中的蓝色亮横线。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200704212859.png" alt="" /></p>
<h3 id="示例我的应用-2"><a class="markdownIt-Anchor" href="#示例我的应用-2"></a> 示例：我的应用</h3>
<p>在我的计算机上，我设置的该类应用：</p>
<ul>
<li>文件资源管理器</li>
<li>360安全浏览器（其他浏览器当然也可以……）</li>
</ul>
<p>当然，适合这种情况的应用还有很多。你可以根据自己的实际情况来进行配置。</p>
<h2 id="偶尔启动项"><a class="markdownIt-Anchor" href="#偶尔启动项"></a> 偶尔启动项</h2>
<p><strong>偶尔启动项</strong>，我将其描述为<strong>正在进行工作时，出于一时的需求需要启动的应用程序</strong>。这种场景其实也有很多。<br />
例如——</p>
<ul>
<li>正在进行编写文档的工作，为了确定自己的工作节奏，查看一下今天的日程安排。</li>
<li>正在写英语论文，一时需要查询一个单词。</li>
<li>正在浏览网页，看到有价值的内容想记录在word文档中。</li>
<li>正在做PPT的时候，临时对某个图片使用PS进行处理。</li>
<li>正在敲代码，一时需要打开一个word文档查看需求。</li>
<li>正在写markdown文档，为插入图片，打开图床工具。</li>
<li>正在使用PR进行剪辑，一时需要使用AU为音频进行处理。</li>
</ul>
<p>最典型的就是<strong>打开计算器</strong>，<strong>打开画图</strong>，<strong>打开文本文档</strong>了。</p>
<p>对于<strong>偶尔启动项</strong>，通常的情况为 <em>ABA</em>。<br />
即正在进行A任务时，突然进行B任务，待B任务进行完毕后，再恢复A任务。</p>
<p>因此显然，对管理方法有如下要求：</p>
<ul>
<li>实行起来快速且高效</li>
<li>对工作思路的干扰小</li>
</ul>
<p>第一点不难理解。我来着重提一下第二点。因为B的插入对A这个任务产生了中断，如果想让这个中断对A任务的思路延续性影响最小的话，应该做到<strong>进行B任务时前后处理时间短</strong>或<strong>进行B任务时屏幕内容变化不大</strong>。这个B任务往往很少符合前一点，但是对于后一点，我想绝大多数人使用QQ回复聊天时，一定是窗口化的，而不是最大化的。因为窗口化的B界面只需要直接关掉就好了，或者再点击回A界面就能延续任务。</p>
<p>而不少人使用的<strong>切到桌面</strong>→<strong>找到软件并双击运行</strong>→<strong>还原工作界面</strong>，这个流程的前后处理时间不短，而且屏幕内容变化极大，主要就是花在了<strong>还原工作界面</strong>这个过程中。而且鼠标或键盘需要连续操作。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722184308.png" alt="" /></p>
<h3 id="管理方法-2"><a class="markdownIt-Anchor" href="#管理方法-2"></a> 管理方法</h3>
<p>我推荐的是，Windows开始菜单。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722184443.png" alt="" /></p>
<p>首先Windows菜单只需要占用一半不到的屏幕，对<strong>屏幕内容变化</strong>影响极小，其次整个动作只需要<strong>按Win键打开菜单</strong>→<strong>点击程序运行</strong>，鼠标或键盘只需要操作两到三下即可完成。</p>
<h3 id="示例我的应用-3"><a class="markdownIt-Anchor" href="#示例我的应用-3"></a> 示例：我的应用</h3>
<p>在我的计算机上，我设置的该类应用：</p>
<ul>
<li>……</li>
<li>上面都发图了……</li>
<li>自己看吧……</li>
</ul>
<h2 id="非必定启动项"><a class="markdownIt-Anchor" href="#非必定启动项"></a> 非必定启动项</h2>
<p>这些没有什么值得好说的了。<br />
我是把他们放在桌面上或者桌面上的文件夹。<br />
即，下面这张图片。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722172753.png" alt="" /></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>操作系统</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 02. 有趣的数据结构们</title>
    <url>/2020/07/21/training_1/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1>
<p>2020年7月21日。今天主要讲了一些Python比之其他编程语言特有的一些数据结构。<br />
有<span class="inline-tag green">列表</span>  <span class="inline-tag red">元组</span>  <span class="inline-tag blue">字典</span>  <span class="inline-tag yellow">集合</span>。</p>
<p>他们之中有共同点，也有差异。重点把握<strong>列表</strong>和<strong>字典</strong>即可。</p>
<h1 id="列表"><a class="markdownIt-Anchor" href="#列表"></a> 列表</h1>
<div class="snote idea yellow">定义：一个有序的，可修改的，元素以逗号分割的，以中括号包裹的，元素可以是任何数据类型的序列。</div>
<p>创建一个列表，只要把<strong>逗号分隔</strong>的各个数据项使用方括号括起来即可。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = [<span class="string">'Zorua'</span>, <span class="string">'Blog'</span>, <span class="number">2000</span>, <span class="number">2020</span>]</span><br><span class="line">emptylist = [ ] <span class="comment">#空列表</span></span><br></pre></td></tr></table></figure>
<p>除此以外，也可以使用<code>list</code>函数来创建列表。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = list((<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="number">123</span>)) <span class="comment">#参数是元组</span></span><br></pre></td></tr></table></figure>
<p><code>list</code>函数中的参数应是一个<strong>可迭代的对象</strong>，例如字符串、元组等等。<code>list</code>函数将<strong>可迭代对象的元素</strong>重新返回为列表。</p>
<ul>
<li>将字典类型的数据作为参数时，返回的是<strong>字典的键</strong>（后文会提及）。</li>
<li>将<code>range()</code>函数作为参数，返回的是一个整数元素的列表。</li>
<li>无参数时，返回的是一个空列表。</li>
</ul>
<h2 id="访问列表中的值"><a class="markdownIt-Anchor" href="#访问列表中的值"></a> 访问列表中的值</h2>
<p>列表同样也可以像字符串一样使用<strong>索引</strong>/<strong>切片</strong>来访问其中的值。规则大致相同，可以参考<a href="https://zoruasama.gitee.io/2020/07/20/training_0/">前章内容</a>。<br />
以下是示例。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = [<span class="string">'Zorua'</span>,<span class="string">'Blog'</span>,<span class="number">2000</span>,<span class="number">2020</span>]</span><br><span class="line">print(thislist[<span class="number">0</span>])     <span class="comment">#输出结果为 Zorua</span></span><br><span class="line">print(thislist[<span class="number">0</span>:<span class="number">1</span>])   <span class="comment">#输出结果为 ['Zorua']，这是仅有一个元素的列表</span></span><br><span class="line">print(thislist[<span class="number">0</span>:<span class="number">2</span>])   <span class="comment">#输出结果为 ['Zorua','Blog']</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802222219.png" alt="" /><br />
上图的示例是创建了一个0-39整数的列表，然后以<code>step=2</code>来切分出了其中的偶数。</p>
<h2 id="更新列表"><a class="markdownIt-Anchor" href="#更新列表"></a> 更新列表</h2>
<p>列表的数据项可以被修改，或添加删除。</p>
<h3 id="更新列表项"><a class="markdownIt-Anchor" href="#更新列表项"></a> 更新列表项</h3>
<p>接续前文的0-39整数列表示例。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist[<span class="number">0</span>:<span class="number">9</span>:<span class="number">2</span>]=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>] <span class="comment">#thislist[0:9:2]原来是[0,2,4,6,8]</span></span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1, 1, 1, 3, 1, 5, 1, 7, 1, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]</span></span><br><span class="line"><span class="comment">#注意到里面仅修改了其中的五个位置。</span></span><br><span class="line">thislist[<span class="number">39</span>]=<span class="number">1000</span></span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1, 1, 1, 3, 1, 5, 1, 7, 1, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 1000]</span></span><br></pre></td></tr></table></figure>
<h3 id="添加列表项"><a class="markdownIt-Anchor" href="#添加列表项"></a> 添加列表项</h3>
<h4 id="append"><a class="markdownIt-Anchor" href="#append"></a> append</h4>
<p><span class="inline-tag green">作用</span>  在列表的尾端加入一个新的元素。<br />
<span class="inline-tag green">使用方法</span>  <code>listname.append(elem)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">thislist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#注意这里的列表变成了 [1,2,3,[1,2,3,4,5,6]]实际上是列表中嵌套了一个作为元素的列表</span></span><br><span class="line"><span class="comment">#而不是加入了多个元素</span></span><br><span class="line"><span class="comment">#append还是只能加入一个元素</span></span><br><span class="line">thislist.append(<span class="number">1123</span>)</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#在最末尾又添加了一个新的元素，1123。</span></span><br><span class="line"><span class="comment">#输出结果为[1,2,3,[1,2,3,4,5,6],1123]</span></span><br></pre></td></tr></table></figure>
<h4 id="insert"><a class="markdownIt-Anchor" href="#insert"></a> insert</h4>
<p><span class="inline-tag green">作用</span>  在列表的指定位置后加入一个新的元素。<br />
<span class="inline-tag green">使用方法</span>  <code>listname.insert(position,elem)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">thislist.insert(<span class="number">1</span>,<span class="number">123</span>)</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1,2,123,3]</span></span><br></pre></td></tr></table></figure>
<h4 id="extend"><a class="markdownIt-Anchor" href="#extend"></a> extend</h4>
<p>之前在<code>append</code>尝试加入多个元素失败后，其实加入多个元素应该使用<code>extend</code>。<br />
<span class="inline-tag green">作用</span>  在列表的尾端拼接一个列表。<br />
<span class="inline-tag green">使用方法</span>  <code>listname.extend(listname2)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">thislist.extend([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1,2,3,1,2,3,4]</span></span><br></pre></td></tr></table></figure>
<p>除了可以使用<code>extend</code>来拼接列表以外，使用语句<code>thislist = thislist + [1,2,3,4]</code>同样也能达到上述代码的效果。</p>
<h3 id="删除列表项"><a class="markdownIt-Anchor" href="#删除列表项"></a> 删除列表项</h3>
<p>可以使用<code>del</code>函数来删除列表项。<br />
如下示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">del</span> thislist[<span class="number">1</span>]</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为 [1,3]</span></span><br></pre></td></tr></table></figure>
<p>此外，也可以使用list对象的方法<code>pop(index=-1)</code>来删除。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thislist.pop()     <span class="comment">#参数缺省值为-1，因此会删除列表最后一个元素</span></span><br><span class="line">thislist.pop(<span class="number">1</span>)   <span class="comment">#和上面的del示例代码一样，删除第二个元素</span></span><br></pre></td></tr></table></figure>
<h2 id="列表推导式"><a class="markdownIt-Anchor" href="#列表推导式"></a> 列表推导式</h2>
<p>这是Python中很棒的一个语法糖。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<div class="snote msg cyan">语法结构：<code>out_list = [out_express for out_express in input_list if out_express_condition]</code></div>
例如要生成一个偶数的list。由于至此为止，我的实训日志还没有讲解到Python的循环，因此下面我们试着用C语言来实现**外面的循环结构**。
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;= <span class="number">10</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">         thislist.append(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样一来，总是需要一个多行的结构。<br />
而使用列表推导式的话：<code>[i for i in range(10) if i % 2 == 0]</code>，只需要一行。<br />
当然，为了增加代码可读性，可以为上式断行。(Python允许在中括号、花括号之间断行)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = [</span><br><span class="line">    i</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<hr />
<p>其他示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#交换字典的value和key。</span></span><br><span class="line">changed = &#123;value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> input_dict.items()&#125;</span><br><span class="line"><span class="comment">#用一个列表的所有单词的首字母生成一个集合。</span></span><br><span class="line">chars = &#123;w[<span class="number">0</span>] <span class="keyword">for</span> w <span class="keyword">in</span> words_list&#125;</span><br></pre></td></tr></table></figure>
<h2 id="列表常见函数与方法"><a class="markdownIt-Anchor" href="#列表常见函数与方法"></a> 列表常见函数与方法</h2>
<p>以下内容援引自菜鸟教程。</p>
<details red><summary> <p>列表常见函数与方法</p> </summary>
              <div class='content'>
              <table><thead><tr><th>序号</th><th>函数</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.runoob.com/python3/python3-att-list-len.html" target="_blank" rel="noopener">len(list)</a>  列表元素个数</td></tr><tr><td>2</td><td><a href="https://www.runoob.com/python3/python3-att-list-max.html" target="_blank" rel="noopener">max(list)</a>  返回列表元素最大值</td></tr><tr><td>3</td><td><a href="https://www.runoob.com/python3/python3-att-list-min.html" target="_blank" rel="noopener">min(list)</a>  返回列表元素最小值</td></tr><tr><td>4</td><td><a href="https://www.runoob.com/python3/python3-att-list-list.html" target="_blank" rel="noopener">list(seq)</a>  将元组转换为列表</td></tr></tbody></table><table><thead><tr><th>序号</th><th>方法</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.runoob.com/python3/python3-att-list-append.html" target="_blank" rel="noopener">list.append(obj)</a>  在列表末尾添加新的对象</td></tr><tr><td>2</td><td><a href="https://www.runoob.com/python3/python3-att-list-count.html" target="_blank" rel="noopener">list.count(obj)</a>  统计某个元素在列表中出现的次数</td></tr><tr><td>3</td><td><a href="https://www.runoob.com/python3/python3-att-list-extend.html" target="_blank" rel="noopener">list.extend(seq)</a>  在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表）</td></tr><tr><td>4</td><td><a href="https://www.runoob.com/python3/python3-att-list-index.html" target="_blank" rel="noopener">list.index(obj)</a>  从列表中找出某个值第一个匹配项的索引位置</td></tr><tr><td>5</td><td><a href="https://www.runoob.com/python3/python3-att-list-insert.html" target="_blank" rel="noopener">list.insert(index, obj)</a>  将对象插入列表</td></tr><tr><td>6</td><td><a href="https://www.runoob.com/python3/python3-att-list-pop.html" target="_blank" rel="noopener">list.pop([index=-1])</a>  移除列表中的一个元素（默认最后一个元素），并且返回该元素的值</td></tr><tr><td>7</td><td><a href="https://www.runoob.com/python3/python3-att-list-remove.html" target="_blank" rel="noopener">list.remove(obj)</a>  移除列表中某个值的第一个匹配项</td></tr><tr><td>8</td><td><a href="https://www.runoob.com/python3/python3-att-list-reverse.html" target="_blank" rel="noopener">list.reverse()</a>  反向列表中元素</td></tr><tr><td>9</td><td><a href="https://www.runoob.com/python3/python3-att-list-sort.html" target="_blank" rel="noopener">list.sort( key=None, reverse=False)</a>  对原列表进行排序</td></tr><tr><td>10</td><td><a href="https://www.runoob.com/python3/python3-att-list-clear.html" target="_blank" rel="noopener">list.clear()</a>  清空列表</td></tr><tr><td>11</td><td><a href="https://www.runoob.com/python3/python3-att-list-copy.html" target="_blank" rel="noopener">list.copy()</a>  复制列表</td></tr></tbody></table>
              </div>
            </details>
<h1 id="元组"><a class="markdownIt-Anchor" href="#元组"></a> 元组</h1>
<div class="snote idea yellow">定义：一个有序的，不可修改的，元素以逗号分割的，以小括号包裹，元素可以是任何数据类型的序列。</div>
<p>创建一个元组，和创建一个列表差不多。只要把<strong>逗号分隔</strong>的各个数据项使用小括号括起来即可。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thistuple = (<span class="string">'Zorua'</span>, <span class="string">'Blog'</span>, <span class="number">2000</span>, <span class="number">2020</span>)</span><br><span class="line">thistuple = <span class="string">'Zorua'</span>, <span class="string">'Blog'</span>, <span class="number">2000</span>, <span class="number">2020</span> <span class="comment">#其实不需要括号也是可以的哦</span></span><br><span class="line">emptytuple = () <span class="comment">#创建空元组</span></span><br><span class="line">tup1 = (<span class="number">1</span>)   <span class="comment">#注意，这样写的话，tup1是整数型变量。</span></span><br><span class="line">tup2 = (<span class="number">1</span>,)  <span class="comment">#而加了一个逗号，编译器才会认为tup2是只有一个元素的元组</span></span><br></pre></td></tr></table></figure>
<p>除此以外，也可以使用<code>tuple</code>函数来创建元组。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thistuple = tuple((<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="number">123</span>)) <span class="comment">#参数是元组</span></span><br></pre></td></tr></table></figure>
<p><code>tuple</code>函数中的参数应是一个<strong>可迭代的对象</strong>，例如字符串、元组等等。<code>tuple</code>函数将<strong>可迭代对象的元素</strong>重新返回为元组。<br />
<s>类似的话前面说过一次了……</s></p>
<ul>
<li>将字典类型的数据作为参数时，返回的是<strong>字典的键</strong>（后文会提及）。</li>
<li>将<code>range()</code>函数作为参数，返回的是一个整数元素的元组。</li>
<li>无参数时，返回的是一个空元组。</li>
</ul>
<h2 id="访问元组中的值"><a class="markdownIt-Anchor" href="#访问元组中的值"></a> 访问元组中的值</h2>
<p>这块内容和上面<strong>列表</strong>的差不多。不再赘述。</p>
<h2 id="修改元组"><a class="markdownIt-Anchor" href="#修改元组"></a> 修改元组</h2>
<p>前面的定义说了，元组<strong>不给改</strong>的嗷。<br />
但是可以通过类似于列表的<code>+</code>来扩展元组。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">tup1 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">tup2 = (<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>)</span><br><span class="line">tup3 = tup1 + tup2</span><br><span class="line">print(tup3)</span><br><span class="line"><span class="comment">#输出内容为 (1,2,3,'1','2','3')</span></span><br></pre></td></tr></table></figure>
<h2 id="元组常见函数"><a class="markdownIt-Anchor" href="#元组常见函数"></a> 元组常见函数</h2>
<p>以下内容援引自菜鸟教程。</p>
<details red><summary> <p>元组常见函数</p> </summary>
              <div class='content'>
              <table><thead><tr><th>序号</th><th>方法及描述</th></tr></thead><tbody><tr><td>1</td><td>len(tuple)  计算元组元素个数。</td></tr><tr><td>2</td><td>max(tuple)  返回元组中元素最大值。</td></tr><tr><td>3</td><td>min(tuple)  返回元组中元素最小值。</td></tr><tr><td>4</td><td>tuple(iterable)  将可迭代系列转换为元组。</td></tr></tbody></table>
              </div>
            </details>
<h1 id="字典"><a class="markdownIt-Anchor" href="#字典"></a> 字典</h1>
<div class="snote idea yellow">定义：一个无序的，可修改的，元素以键值对呈现，以花括号包裹，键和值可以是任何数据类型的序列。</div>
<ul>
<li>键：就是存的值的编号</li>
<li>值：就是要存放的数据<br />
由上可知，<strong>键肯定是唯一的，且不可变的</strong>。<br />
创建一个字典时，字典的每个键值(key=&gt;value)对用冒号<code>:</code>分割，每个对之间用逗号<code>,</code>分割，整个字典包括在花括号<code>{ }</code>中。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br></pre></td></tr></table></figure>
<h2 id="访问字典里的值"><a class="markdownIt-Anchor" href="#访问字典里的值"></a> 访问字典里的值</h2>
<p>把相应的键放入到方括号中即可访问字典里的值，如下示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line"><span class="keyword">print</span> (dict[<span class="string">'name'</span>])  <span class="comment">#输出 Zorua</span></span><br><span class="line"><span class="keyword">print</span> (dict[<span class="string">'class'</span>]) <span class="comment">#输出 5</span></span><br></pre></td></tr></table></figure>
<h2 id="更新字典"><a class="markdownIt-Anchor" href="#更新字典"></a> 更新字典</h2>
<h3 id="更新字典项"><a class="markdownIt-Anchor" href="#更新字典项"></a> 更新字典项</h3>
<p>在上面<strong>访问字典里的值的基础上，加一个赋值</strong>即可。<br />
即：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line">dict[<span class="string">'hobby'</span>] = <span class="string">'manga'</span></span><br><span class="line"><span class="keyword">print</span> (dict[<span class="string">'hobby'</span>])  <span class="comment">#输出 manga</span></span><br></pre></td></tr></table></figure>
<h3 id="新增字典项"><a class="markdownIt-Anchor" href="#新增字典项"></a> 新增字典项</h3>
<p>虽然说，在<strong>访问字典里的值</strong>里，如果填写的键是不存在的键，则会出错。<br />
但是在新增字典项里，在<strong>刚刚的基础上，加一个赋值</strong>即可。示例如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line">dict[<span class="string">'age'</span>] = <span class="number">20</span></span><br><span class="line"><span class="keyword">print</span> (dict)  <span class="comment">#输出 &#123; 'name':'Zorua','class':5,'hobby':'game','age':20&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="删除字典项"><a class="markdownIt-Anchor" href="#删除字典项"></a> 删除字典项</h3>
<p>删除字典中的一个键值对，可以用<code>del dict[key]</code>来实现。例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line"><span class="keyword">del</span> dict[<span class="string">'class'</span>]</span><br><span class="line"><span class="keyword">print</span> (dict)  <span class="comment">#输出 &#123; 'name':'Zorua','hobby':'game'&#125;</span></span><br></pre></td></tr></table></figure>
<p>如果要删除整个字典，可以用<code>del dict</code>。<br />
如果要清空字典，可以用<code>dict.clear()</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line">dict.clear()</span><br><span class="line"><span class="keyword">print</span> (dict)  <span class="comment">#输出 &#123; &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="字典常见函数与方法"><a class="markdownIt-Anchor" href="#字典常见函数与方法"></a> 字典常见函数与方法</h2>
<p>以下内容援引自菜鸟教程。</p>
<details red><summary> <p>字典常见函数与方法</p> </summary>
              <div class='content'>
              <table><thead><tr><th>序号</th><th>函数及描述</th></tr></thead><tbody><tr><td>1</td><td>len(dict)  计算字典元素个数，即键的总数。</td></tr><tr><td>2</td><td>str(dict)  输出字典，以可打印的字符串表示。</td></tr><tr><td>3</td><td>type(variable)  返回输入的变量类型，如果变量是字典就返回字典类型。</td></tr></tbody></table><table><thead><tr><th>序号</th><th>函数及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-clear.html" target="_blank" rel="noopener">radiansdict.clear()</a>  删除字典内所有元素</td></tr><tr><td>2</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-copy.html" target="_blank" rel="noopener">radiansdict.copy()</a>  返回一个字典的浅复制</td></tr><tr><td>3</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-fromkeys.html" target="_blank" rel="noopener">radiansdict.fromkeys()</a>  创建一个新字典，以序列seq中元素做字典的键，val为字典所有键对应的初始值</td></tr><tr><td>4</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-get.html" target="_blank" rel="noopener">radiansdict.get(key, default=None)</a>  返回指定键的值，如果键不在字典中返回 default 设置的默认值</td></tr><tr><td>5</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-in.html" target="_blank" rel="noopener">key in dict</a>  如果键在字典dict里返回true，否则返回false</td></tr><tr><td>6</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-items.html" target="_blank" rel="noopener">radiansdict.items()</a>  以列表返回可遍历的(键, 值) 元组数组</td></tr><tr><td>7</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-keys.html" target="_blank" rel="noopener">radiansdict.keys()</a>  返回一个迭代器，可以使用 list() 来转换为列表</td></tr><tr><td>8</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-setdefault.html" target="_blank" rel="noopener">radiansdict.setdefault(key, default=None)</a>  和get()类似, 但如果键不存在于字典中，将会添加键并将值设为default</td></tr><tr><td>9</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-update.html" target="_blank" rel="noopener">radiansdict.update(dict2)</a>  把字典dict2的键/值对更新到dict里</td></tr><tr><td>10</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-values.html" target="_blank" rel="noopener">radiansdict.values()</a>  返回一个迭代器，可以使用 list() 来转换为列表</td></tr><tr><td>11</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-pop.html" target="_blank" rel="noopener">pop(key[,default])</a>  删除字典给定键 key 所对应的值，返回值为被删除的值。key值必须给出。 否则，返回default值。</td></tr><tr><td>12</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-popitem.html" target="_blank" rel="noopener">popitem()</a>  随机返回并删除字典中的最后一对键和值。</td></tr></tbody></table>
              </div>
            </details>
<h1 id="集合"><a class="markdownIt-Anchor" href="#集合"></a> 集合</h1>
<div class="snote idea yellow">定义：一个无序的，可修改的，无重复的，以花括号包裹，元素可以是任何数据类型的序列。</div>
<div class="snote error">但是集合中的元素须是可哈希的类型。前面说的列表、字典还有集合本身不能作为元素(元组可以)。</div>
<p>这个定义和数学上对集合的定义差不多，但是Python中当然没有无限集合。<br />
可以使用大括号 <code>{ }</code> 或者 <code>set()</code> 函数创建集合。</p>
<div class="snote error">注意：创建一个空集合必须用<code>set()</code>而不是<code>{ }</code>，因为<code>{ }</code> 是用来创建一个空字典。</div>
<p>例如下面的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">thisset = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">print(thisset) <span class="comment">#输出结果为 &#123;1,2,3,4&#125; 由此可见，集合里的元素不能重复</span></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">thisset = set((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure>
<p><code>set</code>函数中的参数应是一个<strong>可迭代的对象</strong>，例如字符串、元组等等。<code>set</code>函数将<strong>可迭代对象的元素</strong>重新返回为元组。<br />
<s>类似的话前面说过两次了……</s></p>
<p>集合中还可以分为可变集合和<strong>不可变集合(frozenset)</strong>。使用<code>frozenset</code>函数来创建时，会返回一个冻结的集合，冻结后集合不能再添加或删除任何元素。</p>
<h2 id="集合的运算"><a class="markdownIt-Anchor" href="#集合的运算"></a> 集合的运算</h2>
<p>数学上定义的集合可以进行并集、交集、差集等等运算，Python中的集合也可以。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">b = &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line">print(a | b)  <span class="comment">#a或b都包含的元素, 即a并b, 结果为&#123;1,2,3,4,5,6,7&#125;</span></span><br><span class="line">print(a &amp; b)  <span class="comment">#a和b都包含的元素, 即a交b, 结果为&#123;4,5&#125;</span></span><br><span class="line">print(a ^ b)  <span class="comment">#不同时包含于a和b的元素, 即对称差集, 结果为&#123;1,2,3,6,7&#125;</span></span><br><span class="line">print(a - b)  <span class="comment">#在a中但不在b中的元素, 即a对b的差集, 结果为&#123;1,2,3&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="更新集合"><a class="markdownIt-Anchor" href="#更新集合"></a> 更新集合</h2>
<h3 id="添加元素"><a class="markdownIt-Anchor" href="#添加元素"></a> 添加元素</h3>
<p>语法格式为：<code>setname.add(elem)</code><br />
例如下面这个例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lang = &#123;<span class="string">'java'</span>,<span class="string">'python'</span>,<span class="string">'ruby'</span>&#125;</span><br><span class="line">lang.add(<span class="string">'c/c++'</span>)</span><br><span class="line">print(lang)</span><br><span class="line"><span class="comment"># 输出结果为 &#123;'java','python','ruby','c/c++'&#125;</span></span><br></pre></td></tr></table></figure>
<hr />
<p>除了用<code>add()</code>以外，也可以用<code>update()</code>。<br />
语法格式为：<code>setname.update(elem)</code>。update的参数可以为列表，元组，字典等。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lang = &#123;<span class="string">'java'</span>,<span class="string">'python'</span>,<span class="string">'ruby'</span>&#125;</span><br><span class="line">lang.update([<span class="string">'c'</span>,<span class="string">'c++'</span>])</span><br><span class="line">print(lang)</span><br><span class="line"><span class="comment"># 输出结果为 &#123;'java','python','ruby','c','c++'&#125;</span></span><br><span class="line"><span class="comment"># 注意, 这里的结果并不是 &#123;'java','python','ruby',['c','c++']&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="删除元素"><a class="markdownIt-Anchor" href="#删除元素"></a> 删除元素</h3>
<p>语法格式为：<code>setname.remove(elem)</code>，使用这个方法时，如果元素不存在，将发生错误。如果想避免这种情况，可以使用<code>setname.discard(elem)</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lang = &#123;<span class="string">'java'</span>,<span class="string">'python'</span>,<span class="string">'ruby'</span>&#125;</span><br><span class="line">lang.remove(<span class="string">'python'</span>)</span><br><span class="line">print(lang)</span><br><span class="line"><span class="comment"># 输出结果为 &#123;'java','ruby'&#125;</span></span><br></pre></td></tr></table></figure>
<hr />
<p>随机删除一个集合中的元素，可以使用<code>setname.pop()</code></p>
<h2 id="集合常见方法"><a class="markdownIt-Anchor" href="#集合常见方法"></a> 集合常见方法</h2>
<p>以下内容援引自菜鸟教程。</p>
<details red><summary> <p>元组常见函数</p> </summary>
              <div class='content'>
              <table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/python3/ref-set-add.html" target="_blank" rel="noopener">add()</a></td><td>为集合添加元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-clear.html" target="_blank" rel="noopener">clear()</a></td><td>移除集合中的所有元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-copy.html" target="_blank" rel="noopener">copy()</a></td><td>拷贝一个集合</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-difference.html" target="_blank" rel="noopener">difference()</a></td><td>返回多个集合的差集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-difference_update.html" target="_blank" rel="noopener">difference_update()</a></td><td>移除集合中的元素，该元素在指定的集合也存在。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-discard.html" target="_blank" rel="noopener">discard()</a></td><td>删除集合中指定的元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-intersection.html" target="_blank" rel="noopener">intersection()</a></td><td>返回集合的交集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-intersection_update.html" target="_blank" rel="noopener">intersection_update()</a></td><td>返回集合的交集。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-isdisjoint.html" target="_blank" rel="noopener">isdisjoint()</a></td><td>判断两个集合是否包含相同的元素，如果没有返回 True，否则返回 False。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-issubset.html" target="_blank" rel="noopener">issubset()</a></td><td>判断指定集合是否为该方法参数集合的子集。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-issuperset.html" target="_blank" rel="noopener">issuperset()</a></td><td>判断该方法的参数集合是否为指定集合的子集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-pop.html" target="_blank" rel="noopener">pop()</a></td><td>随机移除元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-remove.html" target="_blank" rel="noopener">remove()</a></td><td>移除指定元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-symmetric_difference.html" target="_blank" rel="noopener">symmetric_difference()</a></td><td>返回两个集合中不重复的元素集合。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-symmetric_difference_update.html" target="_blank" rel="noopener">symmetric_difference_update()</a></td><td>移除当前集合中在另外一个指定集合相同的元素，并将另外一个指定集合中不同的元素插入到当前集合中。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-union.html" target="_blank" rel="noopener">union()</a></td><td>返回两个集合的并集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-update.html" target="_blank" rel="noopener">update()</a></td><td>给集合添加元素</td></tr></tbody></table>
              </div>
            </details>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>参考资料：<a href="https://www.cnblogs.com/amiza/p/10159293.html" target="_blank" rel="noopener">https://www.cnblogs.com/amiza/p/10159293.html</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>实训日记 | Day 01. Hello Python.</title>
    <url>/2020/07/20/training_0/</url>
    <content><![CDATA[<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1>
<p>2020年7月20日，实训开始了。<br />
这个日记系列将用于记录我在这一个月内的成长与收获。由于一天的工作量很大，很难再安排时间进行整理😂。<br />
先说说这个实训相关的一些情况叭。</p>
<div class="tabs" id="tab-id"><ul class="nav-tabs"><li class="tab active"><a href="#tab-id-1">日程安排</a></li><li class="tab"><a href="#tab-id-2">使用到的工具</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>7月20日到8月14日，周末正常休息。</p>
<table>
<thead>
<tr>
<th style="text-align:center">节次</th>
<th style="text-align:center">时间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1–2节</td>
<td style="text-align:center">🕣 8:30–10:00</td>
</tr>
<tr>
<td style="text-align:center">3–4节</td>
<td style="text-align:center">🕙 10:15–11:45</td>
</tr>
<tr>
<td style="text-align:center">5–6节</td>
<td style="text-align:center">🕜 13:30–15:00</td>
</tr>
<tr>
<td style="text-align:center">7–8节</td>
<td style="text-align:center">🕞15:15–16:45</td>
</tr>
</tbody>
</table></div><div class="tab-pane" id="tab-id-2"><p><span class="inline-tag green">Python 3.7.4</span><br />
<span class="inline-tag green">Pycharm</span><br />
<span class="inline-tag yellow">Navicat</span><br />
<span class="inline-tag red">腾讯QQ</span><br />
<span class="inline-tag blue">腾讯会议 WeMeet</span></p></div></div></div>
<h1 id="什么是python"><a class="markdownIt-Anchor" href="#什么是python"></a> 什么是Python</h1>
<blockquote>
<p>以下内容援引自<strong>百度百科</strong>。<br />
Python是一种跨平台的计算机程序设计语言。 是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。最初被设计用于编写自动化脚本(shell)，随着版本的不断更新和语言新功能的添加，越多被用于独立的、大型项目的开发。<br />
Python是一种解释型脚本语言，可以应用于以下领域：</p>
<ul>
<li>Web 和 Internet开发</li>
<li>科学计算和统计</li>
<li>人工智能</li>
<li>桌面界面开发</li>
<li>软件开发</li>
<li>后端开发</li>
<li>网络爬虫</li>
</ul>
</blockquote>
<blockquote>
<p>以下内容援引自<strong>菜鸟教程</strong>。<br />
Python 是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。<br />
Python 的设计具有很强的可读性，相比其他语言经常使用英文关键字，其他语言的一些标点符号，它具有比其他语言更有特色语法结构。</p>
<ul>
<li>Python 是一种解释型语言： 这意味着开发过程中没有了编译这个环节。类似于PHP和Perl语言。</li>
<li>Python 是交互式语言： 这意味着，您可以在一个 Python 提示符 <code>&gt;&gt;&gt;</code> 后直接执行代码。</li>
<li>Python 是面向对象语言: 这意味着Python支持面向对象的风格或代码封装在对象的编程技术。</li>
<li>Python 是初学者的语言：Python 对初级程序员而言，是一种伟大的语言，它支持广泛的应用程序开发，从简单的文字处理到 WWW 浏览器再到游戏。</li>
</ul>
</blockquote>
<h2 id="项目新建"><a class="markdownIt-Anchor" href="#项目新建"></a> 项目新建</h2>
<p>按下<code>Alt</code>+<code>INSERT</code>新建项目。<br />
除了可以选择<strong>项目位置</strong>以外，还可以<strong>配置项目的解释器</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802133103.png" alt="" /><br />
在文件夹下右键，<strong>新建-Python File</strong>可创建*.py文件。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802133333.png" alt="" /></p>
<h1 id="python文件的声明"><a class="markdownIt-Anchor" href="#python文件的声明"></a> Python文件的声明</h1>
<p>一般的*.py文件都会以如下的代码开头。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br></pre></td></tr></table></figure>
<p>这是作什么用处的呢？<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="第一行"><a class="markdownIt-Anchor" href="#第一行"></a> 第一行</h2>
<p>通常为<code>#!/usr/bin/env python3</code>或<code>#!/usr/bin/python</code>。<br />
作用为<strong>指定解释器，增强代码可移植性</strong>。<br />
必须处在第一行，用来指定本脚本用什么Interpreter来执行。<br />
那么，刚刚在新建项目时已经指定了Interpreter了，为什么这里还需要呢？<br />
因为有时候，我们执行*.py文件，是直接在shell里使用<code>./</code>来执行。这里的声明，就是为了这种执行提供了解释器位置。</p>
<h2 id="第二行"><a class="markdownIt-Anchor" href="#第二行"></a> 第二行</h2>
<p>通常为以下三种之一：</p>
<ul>
<li><code># coding=utf-8</code></li>
<li><code># coding:utf-8</code></li>
<li><code># -*- coding:utf-8 -*-</code></li>
</ul>
<p>声明Python文件使用UTF-8编码（无此声明时，默认为ASCII编码），以解决python2中有中文字符（包括注释中的）会报错的情况。<br />
必须处在首行或第二行，格式满足正则表达式<code>^[ \t\f]*#.*?coding[:=][ \t]*([-_.a-zA-Z0-9]+)</code>即可。</p>
<h1 id="python语法特点"><a class="markdownIt-Anchor" href="#python语法特点"></a> Python语法特点</h1>
<h2 id="无需结尾符"><a class="markdownIt-Anchor" href="#无需结尾符"></a> 无需结尾符</h2>
<p><code>C/C++</code>和<code>Java</code>等等编程语言，每一条语句都以<code>;</code>进行结尾，Python以换行符结尾。</p>
<h2 id="强调缩进"><a class="markdownIt-Anchor" href="#强调缩进"></a> 强调缩进</h2>
<p>在<code>C/C++</code>中，代码块以<code>{ }</code>分割开，而Python中则以缩进来表示。<br />
同一级的代码，缩进的空格数量应该一致。<br />
例如下面两个代码，执行的结果是不一样的。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Over"</span>) <span class="comment">#这个语句和if判断语句是同级的</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"Over"</span>)<span class="comment">#这个语句和输出false的语句是同级的</span></span><br></pre></td></tr></table></figure>
<h2 id="同一语句多行"><a class="markdownIt-Anchor" href="#同一语句多行"></a> 同一语句多行</h2>
<p>如果一行代码很长，影响阅读或观感，可以使用<code>\</code>来实现多行语句。例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">averylongvariablename = anotherverylongvariablename + \</span><br><span class="line">wowawesomeman + \</span><br><span class="line">thatsmyveryfirsttime</span><br></pre></td></tr></table></figure>
<p>效果等价于<code>averylongvariablename = anotherverylongvariablename + wowawesomeman + thatsmyveryfirsttime</code><br />
在<code>[ ]</code>, <code>{ }</code>,  <code>( )</code> ,<code>''' '''</code>的多行语句，不需要使用<code>\</code>就可以换行，例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dic1 = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br></pre></td></tr></table></figure>
<h2 id="同一行多个语句"><a class="markdownIt-Anchor" href="#同一行多个语句"></a> 同一行多个语句</h2>
<p>由于Python不再使用<code>;</code>而是使用换行符来分割语句，因此如果想在同一行写多个语句的话，应使用<code>;</code>来进行分割。<br />
例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i = <span class="number">100</span>;i = i + <span class="number">100</span>;print(i)</span><br></pre></td></tr></table></figure>
<h2 id="区分大小写"><a class="markdownIt-Anchor" href="#区分大小写"></a> 区分大小写</h2>
<p>python中是区分大小写的，不管是<strong>变量、函数、还是类</strong>，都要严格的区分大小写。<br />
例如，zorua和Zorua是两个不同的变量，name和Name也是完全不同的两个变量。</p>
<h1 id="标识符命名规则"><a class="markdownIt-Anchor" href="#标识符命名规则"></a> 标识符命名规则</h1>
<ul>
<li>可以以<strong>字母</strong>或下划线<code>_</code>打头。</li>
<li>由<strong>字母、数字、下划线</strong>组成。</li>
<li>标识符对大小写敏感。<br />
即使在Python3中，使用中文命名也是可以的，但仍不建议这样使用(因为切换输入法挺麻烦的)。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/Snipaste_2020-08-02_13-57-26.png" alt="" /></li>
</ul>
<h1 id="关键字"><a class="markdownIt-Anchor" href="#关键字"></a> 关键字</h1>
<p>关键字也叫保留字，类似C语言中的<code>for``while</code>等词，不能被用于变量命名的，具有特别意义的标识符。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(keyword.kwlist)</span><br></pre></td></tr></table></figure>
<p>上面的代码可以输出<span class="inline-tag green">Python</span>中的关键字。<br />
输出的结果为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'async'</span>, <span class="string">'await'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></table></figure>
<h1 id="注释"><a class="markdownIt-Anchor" href="#注释"></a> 注释</h1>
<p>不论在何种编程语言中，都有注释这一设计存在。注释可以增加代码的可阅读性；在调试代码时，注释也可被用于阻止某一代码的进行。<br />
Python中的注释以<code>#</code>开头。<br />
在Pycharm中，快速注释/取消注释可以使用<code>Ctrl</code>+<code>/</code>的快捷键。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#可以顶格写注释。</span></span><br><span class="line">print(<span class="string">'Hello, world!'</span>) <span class="comment">#也可以在代码句后写注释。</span></span><br></pre></td></tr></table></figure>
<p>如果需要块注释，可以使用<code>'''</code>或<code>&quot;&quot;&quot;</code>（连续三个单引号或双引号），作用等同于C/C++中的<code>/* */</code></p>
<h1 id="序列解包"><a class="markdownIt-Anchor" href="#序列解包"></a> 序列解包</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i,j = <span class="number">100</span>,<span class="number">50</span></span><br><span class="line">print(i)</span><br><span class="line">print(j)</span><br></pre></td></tr></table></figure>
<p><code>i,j = 100,50</code>等价于<code>i=100 j=50</code><br />
以此类推，还可以实现<code>i,j,k = 1,2,3</code>，<code>i,j,k=[1,2],1,(1,2)</code>等等。需要注意左右的表达式元素数量相同。</p>
<h1 id="输出及输入"><a class="markdownIt-Anchor" href="#输出及输入"></a> 输出及输入</h1>
<ul>
<li>输出 print()</li>
<li>输入 input()</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = input(<span class="string">"Please input your name:"</span>)   <span class="comment">#括号里是提示语</span></span><br><span class="line">print(<span class="string">"&#123;0&#125; &#123;1&#125;"</span>.format(name,<span class="string">"   Hello"</span>))  <span class="comment">#格式化的输出</span></span><br></pre></td></tr></table></figure>
<p>格式化的输出除了可以使用上述形式以外，也可以使用如下形式：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">"%s %s"</span> % (name,<span class="string">"   Hello"</span>))</span><br></pre></td></tr></table></figure>
<p>其中的<code>%s</code>为占位符。占位符的表示形式和C/C++的一样，也就是说，上述语句用C语言写就是：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"%s %s"</span>,name,<span class="string">"  Hello"</span>);</span><br></pre></td></tr></table></figure>
<p>不过，需要注意的是，这些格式化字符串除了能用在print语句以外，也可以在其他场合格式化字符串。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802143329.png" alt="" /><br />
另外，<code>print()</code>函数也能接收多个参数来进行输出，中间会自动添加一个空格(由sep参数来指定)。</p>
<h2 id="不换行的输出"><a class="markdownIt-Anchor" href="#不换行的输出"></a> 不换行的输出</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802143056.png" alt="" /><br />
<code>print()</code> 函数中的<code>end</code>参数，默认为<code>\n</code>。因此每次在输出语句后，它会自动补充一个换行符。<br />
如果想不换行的输出，可以将其改为<code>print(123,end='')</code>。<br />
同理，如果想在每次输出后，自动补充一个空格，可以为<code>print(123,end=' ')</code>。</p>
<h2 id="input函数的其他用法"><a class="markdownIt-Anchor" href="#input函数的其他用法"></a> input函数的其他用法</h2>
<p>当你想实现如同C语言语句中的<code>system(&quot;pause&quot;)</code>（请按任意键继续）的效果时，可以键入：<br />
<code>input('请按回车键继续')</code></p>
<h1 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h1>
<p>运算符号和其他编程语言大同小异。在此简要地说明一些和其他语言所有区别的。</p>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">**</td>
<td style="text-align:center">幂</td>
<td style="text-align:center">3**2 -&gt; 9</td>
</tr>
<tr>
<td style="text-align:center">//</td>
<td style="text-align:center">取整除</td>
<td style="text-align:center">9//4 -&gt; 2</td>
</tr>
<tr>
<td style="text-align:center">in</td>
<td style="text-align:center">如果在指定的序列中找到值返回 True，否则返回 False。</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">is</td>
<td style="text-align:center">is 是判断两个标识符是不是引用自一个对象</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:=</td>
<td style="text-align:center">海象运算符，可在表达式内部为变量赋值。</td>
<td style="text-align:center"><a href="https://www.cnblogs.com/wongbingming/p/12743802.html" target="_blank" rel="noopener">详情可以看这篇文章</a></td>
</tr>
</tbody>
</table>
<h1 id="常见的函数"><a class="markdownIt-Anchor" href="#常见的函数"></a> 常见的函数</h1>
<p>以下内容援引自菜鸟教程。</p>
<h2 id="数学函数"><a class="markdownIt-Anchor" href="#数学函数"></a> 数学函数</h2>
<table>
<thead>
<tr>
<th>函数</th>
<th>返回值 ( 描述 )</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-abs.html" target="_blank" rel="noopener">abs(x)</a></td>
<td>返回数字的绝对值，如abs(-10) 返回 10</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-ceil.html" target="_blank" rel="noopener">ceil(x)</a></td>
<td>返回数字的上入整数，如math.ceil(4.1) 返回 5</td>
</tr>
<tr>
<td>cmp(x, y)</td>
<td>如果 x &lt; y 返回 -1, 如果 x == y 返回 0, 如果 x &gt; y 返回 1。 <strong>Python 3 已废弃，使用 (x&gt;y)-(x&lt;y) 替换</strong>。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-exp.html" target="_blank" rel="noopener">exp(x)</a></td>
<td>返回e的x次幂(e<sup>x</sup>),如math.exp(1) 返回2.718281828459045</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-fabs.html" target="_blank" rel="noopener">fabs(x)</a></td>
<td>返回数字的绝对值，如math.fabs(-10) 返回10.0</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-floor.html" target="_blank" rel="noopener">floor(x)</a></td>
<td>返回数字的下舍整数，如math.floor(4.9)返回 4</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-log.html" target="_blank" rel="noopener">log(x)</a></td>
<td>如math.log(math.e)返回1.0,math.log(100,10)返回2.0</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-log10.html" target="_blank" rel="noopener">log10(x)</a></td>
<td>返回以10为基数的x的对数，如math.log10(100)返回 2.0</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-max.html" target="_blank" rel="noopener">max(x1, x2,…)</a></td>
<td>返回给定参数的最大值，参数可以为序列。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-min.html" target="_blank" rel="noopener">min(x1, x2,…)</a></td>
<td>返回给定参数的最小值，参数可以为序列。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-modf.html" target="_blank" rel="noopener">modf(x)</a></td>
<td>返回x的整数部分与小数部分，两部分的数值符号与x相同，整数部分以浮点型表示。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-pow.html" target="_blank" rel="noopener">pow(x, y)</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-round.html" target="_blank" rel="noopener">round(x [,n])</a></td>
<td>返回浮点数 x 的四舍五入值，如给出 n 值，则代表舍入到小数点后的位数。<strong>其实准确的说是保留值将保留到离上一位更近的一端。</strong></td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-sqrt.html" target="_blank" rel="noopener">sqrt(x)</a></td>
<td>返回数字x的平方根。</td>
</tr>
</tbody>
</table>
<h2 id="随机数函数"><a class="markdownIt-Anchor" href="#随机数函数"></a> 随机数函数</h2>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-choice.html" target="_blank" rel="noopener">choice(seq)</a></td>
<td>从序列的元素中随机挑选一个元素，比如random.choice(range(10))，从0到9中随机挑选一个整数。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-randrange.html" target="_blank" rel="noopener">randrange ([start,] stop [,step])</a></td>
<td>从指定范围内，按指定基数递增的集合中获取一个随机数，基数默认值为 1</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-random.html" target="_blank" rel="noopener">random()</a></td>
<td>随机生成下一个实数，它在[0,1)范围内。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-seed.html" target="_blank" rel="noopener">seed([x])</a></td>
<td>改变随机数生成器的种子seed。如果你不了解其原理，你不必特别去设定seed，Python会帮你选择seed。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-shuffle.html" target="_blank" rel="noopener">shuffle(lst)</a></td>
<td>将序列的所有元素随机排序</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-uniform.html" target="_blank" rel="noopener">uniform(x, y)</a></td>
<td>随机生成下一个实数，它在[x,y]范围内。</td>
</tr>
</tbody>
</table>
<h3 id="三角函数"><a class="markdownIt-Anchor" href="#三角函数"></a> 三角函数</h3>
<h2 id="三角函数-2"><a class="markdownIt-Anchor" href="#三角函数-2"></a> 三角函数</h2>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-acos.html" target="_blank" rel="noopener">acos(x)</a></td>
<td>返回x的反余弦弧度值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-asin.html" target="_blank" rel="noopener">asin(x)</a></td>
<td>返回x的反正弦弧度值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-atan.html" target="_blank" rel="noopener">atan(x)</a></td>
<td>返回x的反正切弧度值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-atan2.html" target="_blank" rel="noopener">atan2(y, x)</a></td>
<td>返回给定的 X 及 Y 坐标值的反正切值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-cos.html" target="_blank" rel="noopener">cos(x)</a></td>
<td>返回x的弧度的余弦值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-hypot.html" target="_blank" rel="noopener">hypot(x, y)</a></td>
<td>返回欧几里德范数 sqrt(x*x + y*y)。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-sin.html" target="_blank" rel="noopener">sin(x)</a></td>
<td>返回的x弧度的正弦值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-tan.html" target="_blank" rel="noopener">tan(x)</a></td>
<td>返回x弧度的正切值。</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-degrees.html" target="_blank" rel="noopener">degrees(x)</a></td>
<td>将弧度转换为角度,如degrees(math.pi/2) ， 返回90.0</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/python3/python3-func-number-radians.html" target="_blank" rel="noopener">radians(x)</a></td>
<td>将角度转换为弧度</td>
</tr>
</tbody>
</table>
<h2 id="数学常量"><a class="markdownIt-Anchor" href="#数学常量"></a> 数学常量</h2>
<table>
<thead>
<tr>
<th>常量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>pi</td>
<td>数学常量 pi（圆周率，一般以π来表示）</td>
</tr>
<tr>
<td>e</td>
<td>数学常量 e，e即自然常数（自然常数）。</td>
</tr>
</tbody>
</table>
<h1 id="字符串"><a class="markdownIt-Anchor" href="#字符串"></a> 字符串</h1>
<p>定义：一个<strong>有序的</strong>，<strong>不可修改的</strong>，<strong>以引号包围</strong>的序列。<br />
可以使用单引号<code>'</code>或<code>&quot;</code>创建字符串。<br />
如果要创建多行的字符串，可以使用<code>'''</code>或<code>&quot;&quot;&quot;</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">strHello1 = <span class="string">'Hello World!'</span></span><br><span class="line">strHello2 = <span class="string">"Hello World!"</span></span><br><span class="line">strHello3 = <span class="string">'''Hello</span></span><br><span class="line"><span class="string">World!'''</span></span><br></pre></td></tr></table></figure>
<h2 id="访问字符串的值"><a class="markdownIt-Anchor" href="#访问字符串的值"></a> 访问字符串的值</h2>
<p>Python中没有类似C语言中的char类型，即使是单个字符，也会被认为是字符串。<br />
可以使用<strong>索引</strong>/<strong>切片</strong>来访问字符串的值。格式为<code>str[start:end:step]</code>，效果是左闭右开 [a,b)。<br />
例如<code>str[0:3:1]</code>会从str的第一个字符取到第二个字符。<br />
可以省略其中的几个参数。</p>
<ul>
<li>start缺省值为0，是起始位置。</li>
<li>end缺省值为字符串长度-1，是终止位置。</li>
<li>step缺省值为1，是间隔字符。</li>
<li>参数为负数时，是从右到左数的索引。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">strAlphaBet7=<span class="string">'abcdefg'</span></span><br><span class="line">print(strAlphaBet7[<span class="number">-1</span>])   <span class="comment">#1</span></span><br><span class="line">print(strAlphaBet7[<span class="number">6</span>])    <span class="comment">#2</span></span><br><span class="line">print(strAlphaBet7[<span class="number">6</span>:<span class="number">7</span>]    <span class="comment">#3</span></span><br><span class="line">print(strAlphaBet7[len(strAlphaBet7)<span class="number">-1</span>])    <span class="comment">#4</span></span><br><span class="line">print(strAlphaBet7[<span class="number">0</span>:<span class="number">3</span>:<span class="number">1</span>])    <span class="comment">#5</span></span><br><span class="line">print(strAlphaBet7[<span class="number">0</span>:<span class="number">3</span>])      <span class="comment">#6</span></span><br><span class="line">print(strAlphaBet7[<span class="number">3</span>:<span class="number">0</span>:<span class="number">-1</span>])   <span class="comment">#7</span></span><br><span class="line">print(strAlphaBet7[<span class="number">-7</span>:<span class="number">-4</span>])    <span class="comment">#8</span></span><br><span class="line">print(strAlphaBet7[<span class="number">0</span>:<span class="number">7</span>:<span class="number">2</span>])    <span class="comment">#9</span></span><br><span class="line">print(strAlphaBet7[:<span class="number">3</span>])        <span class="comment">#10</span></span><br><span class="line">print(strAlphaBet7[<span class="number">2</span>:])        <span class="comment">#11</span></span><br></pre></td></tr></table></figure>
<p>上面的前四行输出语句，全都可以输出字符串<code>g</code>。<br />
5-8条语句，会输出字符串<code>abc</code>。<br />
9-11条语句，会输出不同的内容。感兴趣的读者可以自行测试。</p>
<h2 id="分割字符串"><a class="markdownIt-Anchor" href="#分割字符串"></a> 分割字符串</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'123ab456ab1'</span>.split(<span class="string">'ab'</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>上述语句输出的结果为<code>['123','456','1']</code>。</p>
<ul>
<li>第一个参数是按照什么字符串来分割</li>
<li>第二个参数是分割几次。分割2次，就是分割成3部分。</li>
</ul>
<h2 id="替换字符串"><a class="markdownIt-Anchor" href="#替换字符串"></a> 替换字符串</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'aBcDabcdabcd'</span>.replace(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>上述语句输出的结果为<code>ABcDAbcdabcd</code>。</p>
<ul>
<li>第一个参数是原字符。</li>
<li>第二个参数是替换字符。</li>
<li>第三个参数是替换次数。</li>
</ul>
<h2 id="字符串查找"><a class="markdownIt-Anchor" href="#字符串查找"></a> 字符串查找</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">strFind=<span class="string">"My name is aaabc"</span></span><br><span class="line">print(<span class="string">"the position of bc = %d"</span>%strFind.find(<span class="string">'bc'</span>))</span><br></pre></td></tr></table></figure>
<p>上述语句输出的结果为<code>the position of bc = 14</code>。<br />
<code>find</code>函数将在字符串中找到首个匹配的字符串的起始位置。</p>
<h2 id="字符串计数"><a class="markdownIt-Anchor" href="#字符串计数"></a> 字符串计数</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">strCount=<span class="string">"My name is aaabc"</span></span><br><span class="line">print(<span class="string">"the amount of a = %d"</span>%str5.count(<span class="string">'a'</span>))</span><br><span class="line">print(<span class="string">"the amount of aa = %d"</span>%str5.count(<span class="string">'aa'</span>))</span><br></pre></td></tr></table></figure>
<p>上述语句输出的结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">the amount of a &#x3D; 4</span><br><span class="line">the amount of aa &#x3D; 1</span><br></pre></td></tr></table></figure>
<p>注意，第二条计数，查找<code>aa</code>，并不会认为字符串<code>aaa</code>中存在两个<code>aa</code>。</p>
<h2 id="字符串位置"><a class="markdownIt-Anchor" href="#字符串位置"></a> 字符串位置</h2>
<p>该系列的函数可以通过填充字符来调节原字符串的位置。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'aaa'</span>.center(<span class="number">10</span>))</span><br><span class="line">print(<span class="string">'aaa'</span>.center(<span class="number">10</span>,<span class="string">'0'</span>))   <span class="comment">#居中</span></span><br><span class="line">print(<span class="string">'aaa'</span>.ljust(<span class="number">10</span>,<span class="string">'0'</span>))   <span class="comment">#居左</span></span><br><span class="line">print(<span class="string">'aaa'</span>.rjust(<span class="number">10</span>,<span class="string">'0'</span>))   <span class="comment">#居右</span></span><br></pre></td></tr></table></figure>
<p>输出结果为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">   aaa    </span><br><span class="line">000aaa0000</span><br><span class="line">aaa0000000</span><br><span class="line">0000000aaa</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个参数为参考的长度值。</li>
<li>第二个参数是填充字符。缺省值为空格。</li>
</ul>
<h2 id="去空格"><a class="markdownIt-Anchor" href="#去空格"></a> 去空格</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">strWhitespace=<span class="string">'    abc    '</span></span><br><span class="line">print(strWhitespace.strip())  <span class="comment">#去掉两边空格</span></span><br><span class="line">print(strWhitespace.lstrip()) <span class="comment">#去掉左边空格</span></span><br><span class="line">print(strWhitespace.rstrip()) <span class="comment">#去掉右边空格</span></span><br></pre></td></tr></table></figure>
<h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2>
<p><strong>只例举了一些可能比较常用的。</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>lower</td>
<td>将字符串里的字符全变成小写</td>
</tr>
<tr>
<td>upper</td>
<td>将字符串里的字符全变成大写</td>
</tr>
<tr>
<td>isupper</td>
<td>判断字符串当中的字母是否完全是大写</td>
</tr>
<tr>
<td>islower</td>
<td>判断字符串当中的字母是否完全是小写</td>
</tr>
<tr>
<td>istitle</td>
<td>判断字符申是否满足title格式</td>
</tr>
<tr>
<td>isspace</td>
<td>判断字符串是否完全由空格组成</td>
</tr>
<tr>
<td>startswith</td>
<td>判断字符串的开头字符，也可以截取判断</td>
</tr>
<tr>
<td>endswith</td>
<td>判断字符串的结尾字符，也可以截取判断</td>
</tr>
<tr>
<td>isalnum</td>
<td>判断是否完全由字母和数字组成</td>
</tr>
<tr>
<td>isalpha</td>
<td>判断是否完全由字母组成</td>
</tr>
<tr>
<td>isdigit</td>
<td>判断是否完全由数字组成</td>
</tr>
</tbody>
</table>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>参考资料：<a href="https://blog.csdn.net/u010871448/article/details/96476455" target="_blank" rel="noopener">https://blog.csdn.net/u010871448/article/details/96476455</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>实训日记</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>实训</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络 | 4. 网络层</title>
    <url>/2020/05/21/network_3/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>网络层
<ul>
<li>网络层提供的两种服务
<ul>
<li>虚电路是逻辑连接</li>
<li>因特网采用的设计思路</li>
<li>尽最大努力交付的好处</li>
<li>虚电路服务与数据报服务的对比</li>
</ul>
</li>
<li>网际协议 IP
<ul>
<li>虚拟互连网络
<ul>
<li>网络互相连接起来要使用一些中间设备</li>
<li>网络互连使用路由器</li>
<li>虚拟互连网络的意义</li>
<li>从网络层看 IP 数据报的传送</li>
</ul>
</li>
<li>分类的 IP 地址
<ul>
<li>IP 地址及其表示方法</li>
<li>IP 地址的编址方法</li>
<li>分类 IP 地址</li>
<li>点分十进制记法</li>
<li>常用的三种类别的 IP 地址</li>
<li>IP 地址的一些重要特点</li>
</ul>
</li>
<li>IP 地址与硬件地址</li>
<li>地址解析协议 ARP 与逆地址解析协议 RARP
<ul>
<li>地址解析协议 ARP
<ul>
<li>ARP 高速缓存的作用</li>
<li>应当注意的问题</li>
<li>使用 ARP 的四种典型情况</li>
<li>什么我们不直接使用硬件地址进行通信？</li>
</ul>
</li>
<li>逆地址解析协议 RARP</li>
</ul>
</li>
<li>IP 数据报的格式</li>
<li>IP 层转发分组的流程
<ul>
<li>查找路由表</li>
<li>特定主机路由</li>
<li>默认路由(default route)</li>
<li>必须强调指出</li>
</ul>
</li>
</ul>
</li>
<li>划分子网和构造超网
<ul>
<li>划分子网
<ul>
<li>三级的 IP 地址</li>
<li>划分子网的基本思路</li>
<li>划分子网后变成了三级结构</li>
</ul>
</li>
<li>子网掩码
<ul>
<li>默认子网掩码</li>
<li>子网掩码是一个重要属性</li>
</ul>
</li>
<li>使用子网时分组转发</li>
<li>无分类编址 CIDR（构造超网）
<ul>
<li>网络前缀</li>
<li>IP 编址问题的演进</li>
<li>CIDR 最主要的特点</li>
</ul>
</li>
<li>无分类的两级编址
<ul>
<li>CIDR 地址块</li>
<li>路由聚合</li>
<li>CIDR 记法的其他形式</li>
<li>构成超网</li>
<li>CIDR 地址块划分举例</li>
<li>最长前缀匹配</li>
<li>使用二叉线索查找路由表</li>
</ul>
</li>
</ul>
</li>
<li>网际控制报文协议 ICMP
<ul>
<li>ICMP 报文的种类</li>
<li>ICMP 差错报告报文共有 5 种
<ul>
<li>不应发送 ICMP 差错报告报文的几种情况</li>
<li>ICMP 询问报文有两种</li>
</ul>
</li>
<li>ICMP 的应用举例
<ul>
<li>PING</li>
<li>Traceroute</li>
</ul>
</li>
</ul>
</li>
<li>因特网的路由选择协议
<ul>
<li>有关路由选择协议的几个基本概念
<ul>
<li>关于“最佳路由”</li>
<li>从路由算法的自适应性考虑</li>
<li>分层次的路由选择协议</li>
<li>自治系统 AS
<ul>
<li>因特网有两大类路由选择协议</li>
</ul>
</li>
<li>因特网的路由选择协议</li>
</ul>
</li>
<li>内部网关协议 RIP
<ul>
<li>工作原理
<ul>
<li>距离</li>
</ul>
</li>
<li>RIP 协议的三个要点</li>
<li>路由表的建立
<ul>
<li>距离向量算法</li>
<li>路由器之间交换信息</li>
</ul>
</li>
<li>RIP2 协议的报文格式
<ul>
<li>RIP2 的报文由首部和路由部分组成</li>
<li>RIP 协议的优缺点</li>
</ul>
</li>
</ul>
</li>
<li>内部网关协议 OSPF
<ul>
<li>OSPF 协议的基本特点</li>
<li>三个要点</li>
<li>链路状态数据库
<ul>
<li>OSPF 的区域(area)</li>
<li>划分区域</li>
</ul>
</li>
<li>OSPF 直接用 IP 数据报传送</li>
<li>OSPF 的其他特点</li>
<li>OSPF 的五种分组类型</li>
<li>OSPF的基本操作</li>
<li>OSPF 使用的是可靠的洪泛法</li>
<li>OSPF 的其他特点</li>
<li>指定的路由器(designated router)</li>
</ul>
</li>
<li>外部网关协议 BGP
<ul>
<li>BGP 使用的环境却不同</li>
<li>BGP 发言人</li>
<li>BGP 交换路由信息</li>
<li>BGP 发言人和自治系统 AS 的关系
<ul>
<li>AS 的连通图举例</li>
<li>BGP 发言人交换路径向量</li>
</ul>
</li>
<li>BGP 协议的特点</li>
<li>BGP-4 共使用四种报文</li>
<li>BGP 报文具有通用的首部</li>
</ul>
</li>
<li>路由器的构成
<ul>
<li>“转发”和“路由选择”的区别</li>
<li>输入端口对线路上收到的分组的处理</li>
<li>输出端口将交换结构传送来的分组发送到线路</li>
<li>分组丢弃</li>
<li>交换结构</li>
</ul>
</li>
</ul>
</li>
<li>IP 多播
<ul>
<li>IP 多播的基本概念
<ul>
<li>多播可明显地减少网络中资源的消耗</li>
<li>IP 多播的一些特点</li>
</ul>
</li>
<li>在局域网上进行硬件多播
<ul>
<li>D 类 IP 地址与以太网多播地址的映射关系</li>
</ul>
</li>
<li>因特网组管理协议 IGMP 和多播路由选择协议
<ul>
<li>IP多播需要两种协议</li>
<li>IGMP 使多播路由器知道多播组成员信息</li>
<li>IGMP 的本地使用范围</li>
<li>多播路由选择协议比单播路由选择协议复杂得多</li>
<li>网际组管理协议 IGMP
<ul>
<li>IGMP 是整个网际协议 IP 的一个组成部分</li>
<li>IGMP 可分为两个阶段</li>
<li>IGMP 采用的一些具体措施</li>
</ul>
</li>
<li>多播路由选择</li>
<li>转发多播数据报使用的方法
<ul>
<li>洪泛与剪除
<ul>
<li>RPB 的要点</li>
</ul>
</li>
<li>反向路径广播 RPB 和剪除</li>
<li>隧道技术</li>
<li>基于核心的发现技术</li>
</ul>
</li>
<li>几种多播路由选择协议</li>
</ul>
</li>
</ul>
</li>
<li>虚拟专用网 VPN 和网络地址转换 NAT
<ul>
<li>虚拟专用网 VPN
<ul>
<li>RFC 1918 指明的专用地址(private address)</li>
<li>用隧道技术实现虚拟专用网
<ul>
<li>内联网 intranet 和外联网 extranet（都是基于 TCP/IP 协议）</li>
<li>远程接入VPN</li>
</ul>
</li>
</ul>
</li>
<li>网络地址转换 NAT
<ul>
<li>网络地址转换的过程</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="网络层提供的两种服务"><a class="markdownIt-Anchor" href="#网络层提供的两种服务"></a> 网络层提供的两种服务</h1>
<p>在计算机网络领域，网络层应该向运输层提供怎样的服务（“面向连接”还是“无连接”）曾引起了长期的争论。<br />
争论焦点的实质就是：在计算机通信中，<strong>可靠交付应当由谁来负责</strong>？<strong>是网络还是端系统</strong>？<br />
根据电信网的成功经验，我们选择让网络负责可靠交付。</p>
<ul>
<li><strong>面向连接</strong>的通信方式。</li>
<li>建立<strong>虚电路</strong>(Virtual Circuit)，以保证双方通信所需的一切网络资源。</li>
<li>如果再使用可靠传输的网络协议，就可使所发送的分组无差错按序到达终点。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516190359.png" alt="H1 发送给 H2 的所有分组都沿着同一条虚电路传送" /></li>
</ul>
<h2 id="虚电路是逻辑连接"><a class="markdownIt-Anchor" href="#虚电路是逻辑连接"></a> 虚电路是逻辑连接</h2>
<ul>
<li>虚电路表示这只是一条<strong>逻辑上的连接</strong>，分组都沿着这条逻辑连接按照存储转发方式传送，而并不是真正建立了一条物理连接。</li>
<li>请注意，电路交换的电话通信是先建立了一条<strong>真正的连接</strong>。因此分组交换的虚连接和电路交换的连接只是类似，但并不完全一样。</li>
</ul>
<h2 id="因特网采用的设计思路"><a class="markdownIt-Anchor" href="#因特网采用的设计思路"></a> 因特网采用的设计思路</h2>
<p>网络层向上只提供简单灵活的、<strong>无连接的</strong>、<strong>尽最大努力交付</strong>的<strong>数据报服务</strong>。<br />
网络在发送分组时不需要先建立连接。每一个分组（即 IP 数据报）独立发送，与其前后的分组无关（不进行编号）。<br />
网络层不提供服务质量的承诺。即所传送的分组可能出错、丢失、重复和失序（不按序到达终点），当然也不保证分组传送的时限。</p>
<h2 id="尽最大努力交付的好处"><a class="markdownIt-Anchor" href="#尽最大努力交付的好处"></a> 尽最大努力交付的好处</h2>
<ul>
<li>由于传输网络不提供端到端的可靠传输服务，这就使网络中的路由器可以做得比较简单，而且价格低廉（与电信网的交换机相比较）。</li>
<li>如果主机（即端系统）中的进程之间的通信需要是可靠的，那么就由网络的主机中的运输层负责（包括差错处理、流量控制等）。</li>
<li>采用这种设计思路的好处是：网络的造价大大降低，运行方式灵活，能够适应多种应用。</li>
<li>因特网能够发展到今日的规模，充分证明了当初采用这种设计思路的正确性。</li>
</ul>
<hr />
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516191745.png" alt="H1 发送给 H2 的分组可能沿着不同路径传送" /></p>
<h2 id="虚电路服务与数据报服务的对比"><a class="markdownIt-Anchor" href="#虚电路服务与数据报服务的对比"></a> 虚电路服务与数据报服务的对比</h2>
<table>
<thead>
<tr>
<th></th>
<th><strong>虚电路服务</strong></th>
<th><strong>数据报服务</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>思路</strong></td>
<td>可靠通信应当由网络来保证</td>
<td>可靠通信应当由用户主机来保证</td>
</tr>
<tr>
<td><strong>连接的建立</strong></td>
<td>必须有</td>
<td>不需要</td>
</tr>
<tr>
<td><strong>终点地址</strong></td>
<td>仅在连接建立阶段使用，每个分组使用短的虚电路号</td>
<td>每个分组都有终点的完整地址</td>
</tr>
<tr>
<td><strong>分组的转发</strong></td>
<td>属于同一条虚电路的分组均按照同一路由进行转发</td>
<td>每个分组独立选择路由进行转发</td>
</tr>
<tr>
<td><strong>当结点出故障时</strong></td>
<td>所有通过出故障的结点的虚电路均不能工作</td>
<td>出故障的结点可能会丢失分组，一些路由可能会发生变化</td>
</tr>
<tr>
<td><strong>分组的顺序</strong></td>
<td>总是按发送顺序到达终点</td>
<td>到达终点时不一定按发送顺序</td>
</tr>
<tr>
<td><strong>端到端的差错处理和流量控制</strong></td>
<td>可以由网络负责，也可以由用户主机负责</td>
<td>由用户主机负责</td>
</tr>
</tbody>
</table>
<h1 id="网际协议-ip"><a class="markdownIt-Anchor" href="#网际协议-ip"></a> 网际协议 IP</h1>
<ul>
<li>网际协议 IP 是 TCP/IP 体系中两个最主要的协议之一。与 IP 协议配套使用的还有四个协议：
<ul>
<li>地址解析协议 ARP(Address Resolution Protocol)</li>
<li>逆地址解析协议 RARP(Reverse Address Resolution Protocol)</li>
<li>网际控制报文协议 ICMP(Internet Control Message Protocol)</li>
<li>网际组管理协议 IGMP(Internet Group Management Protocol)<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516192228.png" alt="" /></li>
</ul>
</li>
</ul>
<h2 id="虚拟互连网络"><a class="markdownIt-Anchor" href="#虚拟互连网络"></a> 虚拟互连网络</h2>
<ul>
<li>互连在一起的网络要进行通信，会遇到许多问题需要解决，如：
<ul>
<li>不同的寻址方案</li>
<li>不同的最大分组长度</li>
<li>不同的网络接入机制</li>
<li>不同的超时控制</li>
<li>不同的差错恢复方法</li>
<li>不同的状态报告方法</li>
<li>不同的路由选择技术</li>
<li>不同的用户接入控制</li>
<li>不同的服务（面向连接服务和无连接服务）</li>
<li>不同的管理与控制方式</li>
</ul>
</li>
</ul>
<h3 id="网络互相连接起来要使用一些中间设备"><a class="markdownIt-Anchor" href="#网络互相连接起来要使用一些中间设备"></a> 网络互相连接起来要使用一些中间设备</h3>
<ul>
<li><strong>中间设备</strong>又称为<strong>中间系统</strong>或<strong>中继</strong>(relay)系统。
<ul>
<li>物理层中继系统：<strong>转发器</strong>(repeater)。</li>
<li>数据链路层中继系统：<strong>网桥或桥接器</strong>(bridge)。</li>
<li>网络层中继系统：<strong>路由器</strong>(router)。</li>
<li>网桥和路由器的混合物：<strong>桥路器</strong>(brouter)。</li>
<li>网络层以上的中继系统：<strong>网关</strong>(gateway)。</li>
</ul>
</li>
</ul>
<h3 id="网络互连使用路由器"><a class="markdownIt-Anchor" href="#网络互连使用路由器"></a> 网络互连使用路由器</h3>
<ul>
<li>当中继系统是转发器或网桥时，一般并不称之为网络互连，因为这仅仅是把一个网络扩大了，而这仍然是一个网络。</li>
<li>网关由于比较复杂，目前使用得较少。</li>
<li>互联网都是指用路由器进行互连的网络。</li>
<li>由于历史的原因，许多有关 TCP/IP 的文献将网络层使用的路由器称为<strong>网关</strong>。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516193146.png" alt="互连网络与虚拟互连网络" /></p>
<h3 id="虚拟互连网络的意义"><a class="markdownIt-Anchor" href="#虚拟互连网络的意义"></a> 虚拟互连网络的意义</h3>
<ul>
<li>所谓虚拟互连网络也就是逻辑互连网络，它的意思就是互连起来的各种物理网络的异构性本来是客观存在的，但是我们利用 IP 协议就可以使这些性能各异的网络从用户看起来好像是一个统一的网络。</li>
<li>使用 IP 协议的虚拟互连网络可简称为 IP 网。</li>
<li>使用虚拟互连网络的好处是：当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516194123.png" alt="" /></li>
</ul>
<h3 id="从网络层看-ip-数据报的传送"><a class="markdownIt-Anchor" href="#从网络层看-ip-数据报的传送"></a> 从网络层看 IP 数据报的传送</h3>
<p>如果我们只从网络层考虑问题，那么 IP 数据报就可以想象是在网络层中传送。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516194200.png" alt="" /></p>
<h2 id="分类的-ip-地址"><a class="markdownIt-Anchor" href="#分类的-ip-地址"></a> 分类的 IP 地址</h2>
<h3 id="ip-地址及其表示方法"><a class="markdownIt-Anchor" href="#ip-地址及其表示方法"></a> IP 地址及其表示方法</h3>
<ul>
<li>我们把整个因特网看成为一个单一的、抽象的网络。IP 地址就是给每个连接在因特网上的主机（或路由器）分配一个在全世界范围是唯一的 32 位的标识符。</li>
<li>IP 地址现在由<strong>因特网名字与号码指派公司</strong>ICANN (Internet Corporation for Assigned Names and Numbers)进行分配</li>
</ul>
<h3 id="ip-地址的编址方法"><a class="markdownIt-Anchor" href="#ip-地址的编址方法"></a> IP 地址的编址方法</h3>
<p>分类的 IP 地址。这是最基本的编址方法，在 1981 年就通过了相应的标准协议。<br />
子网的划分。这是对最基本的编址方法的改进，其标准[RFC 950]在 1985 年通过。<br />
构成超网。这是比较新的无分类编址方法。1993 年提出后很快就得到推广应用。</p>
<h3 id="分类-ip-地址"><a class="markdownIt-Anchor" href="#分类-ip-地址"></a> 分类 IP 地址</h3>
<p>每一类地址都由两个固定长度的字段组成，其中一个字段是<strong>网络号 net-id</strong>，它标志主机（或路由器）所连接到的网络，而另一个字段则是<strong>主机号 host-id</strong>，它标志该主机（或路由器）。<br />
两级的 IP 地址可以记为：<code>IP 地址 ::= { &lt;网络号&gt;, &lt;主机号&gt;}</code><br />
<code>::=</code> 代表“定义为”。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516205541.gif" alt="" /></p>
<h3 id="点分十进制记法"><a class="markdownIt-Anchor" href="#点分十进制记法"></a> 点分十进制记法</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516210727.png" alt="" /></p>
<h3 id="常用的三种类别的-ip-地址"><a class="markdownIt-Anchor" href="#常用的三种类别的-ip-地址"></a> 常用的三种类别的 IP 地址</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516210753.png" alt="" /></p>
<h3 id="ip-地址的一些重要特点"><a class="markdownIt-Anchor" href="#ip-地址的一些重要特点"></a> IP 地址的一些重要特点</h3>
<ol>
<li>IP 地址是一种分等级的地址结构。分两个等级的好处是：
<ol>
<li>IP 地址管理机构在分配 IP 地址时只分配网络号，而剩下的主机号则由得到该网络号的单位自行分配。这样就方便了 IP 地址的管理。</li>
<li>路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目的主机号），这样就可以使路由表中的项目数大幅度减少，从而减小了路由表所占的存储空间。</li>
</ol>
</li>
<li>实际上 IP 地址是标志一个主机（或路由器）和一条链路的接口。
<ol>
<li>当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号 net-id 必须是不同的。这种主机称为多归属主机(multihomed host)。</li>
<li>由于一个路由器至少应当连接到两个网络（这样它才能将 IP 数据报从一个网络转发到另一个网络），因此一个路由器至少应当有两个不同的 IP 地址。</li>
</ol>
</li>
<li>用转发器或网桥连接起来的若干个局域网仍为一个网络，因此这些局域网都具有同样的网络号 net-id。</li>
<li>所有分配到网络号 net-id 的网络，范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。</li>
</ol>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516211017.png" alt="" /></p>
<blockquote>
<p>在同一个局域网上的主机或路由器的IP 地址中的网络号必须是一样的。图中的网络号就是 IP 地址中的 net-id。<br />
路由器总是具有两个或两个以上的 IP 地址。路由器的每一个接口都有一个不同网络号的 IP 地址。<br />
两个路由器直接相连的接口处，可指明也可不指明 IP 地址。如指明 IP 地址，则这一段连线就构成了一种只包含一段线路的特殊“网络” 。现在常不指明 IP 地址。</p>
</blockquote>
<h2 id="ip-地址与硬件地址"><a class="markdownIt-Anchor" href="#ip-地址与硬件地址"></a> IP 地址与硬件地址</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516211438.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516211439.gif" alt="" /></p>
<h2 id="地址解析协议-arp-与逆地址解析协议-rarp"><a class="markdownIt-Anchor" href="#地址解析协议-arp-与逆地址解析协议-rarp"></a> 地址解析协议 ARP 与逆地址解析协议 RARP</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516212531.png" alt="" /></p>
<h3 id="地址解析协议-arp"><a class="markdownIt-Anchor" href="#地址解析协议-arp"></a> 地址解析协议 ARP</h3>
<ul>
<li>不管网络层使用的是什么协议，在实际网络的链路上传送数据帧时，最终还是必须使用硬件地址。</li>
<li>每一个主机都设有一个 ARP 高速缓存(ARP cache)，里面有所在的局域网上的各主机和路由器的 IP 地址到硬件地址的映射表。</li>
<li>当主机 A 欲向本局域网上的某个主机 B 发送 IP 数据报时，就先在其 ARP 高速缓存中查看有无主机 B 的 IP 地址。如有，就可查出其对应的硬件地址，再将此硬件地址写入 MAC 帧，然后通过局域网将该 MAC 帧发往此硬件地址。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516212656.png" alt="" /></li>
</ul>
<h4 id="arp-高速缓存的作用"><a class="markdownIt-Anchor" href="#arp-高速缓存的作用"></a> ARP 高速缓存的作用</h4>
<ul>
<li>为了减少网络上的通信量，主机 A 在发送其 ARP 请求分组时，就将自己的 IP 地址到硬件地址的映射写入 ARP 请求分组。</li>
<li>当主机 B 收到 A 的 ARP 请求分组时，就将主机 A 的这一地址映射写入主机 B 自己的 ARP 高速缓存中。这对主机 B 以后向 A 发送数据报时就更方便了。</li>
</ul>
<h4 id="应当注意的问题"><a class="markdownIt-Anchor" href="#应当注意的问题"></a> 应当注意的问题</h4>
<ul>
<li>ARP 是解决同一个局域网上的主机或路由器的 IP 地址和硬件地址的映射问题。</li>
<li>如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。剩下的工作就由下一个网络来做。</li>
<li>从IP地址到硬件地址的解析是自动进行的，主机的用户对这种地址解析过程是不知道的。</li>
<li>只要主机或路由器要和本网络上的另一个已知 IP 地址的主机或路由器进行通信，ARP 协议就会自动地将该 IP 地址解析为链路层所需要的硬件地址。</li>
</ul>
<h4 id="使用-arp-的四种典型情况"><a class="markdownIt-Anchor" href="#使用-arp-的四种典型情况"></a> 使用 ARP 的四种典型情况</h4>
<ul>
<li>发送方是主机，要把IP数据报发送到本网络上的另一个主机。这时用 ARP 找到目的主机的硬件地址。</li>
<li>发送方是主机，要把 IP 数据报发送到另一个网络上的一个主机。这时用 ARP 找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成。</li>
<li>发送方是路由器，要把 IP 数据报转发到本网络上的一个主机。这时用 ARP 找到目的主机的硬件地址。</li>
<li>发送方是路由器，要把 IP 数据报转发到另一个网络上的一个主机。这时用 ARP 找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成。</li>
</ul>
<h4 id="什么我们不直接使用硬件地址进行通信"><a class="markdownIt-Anchor" href="#什么我们不直接使用硬件地址进行通信"></a> 什么我们不直接使用硬件地址进行通信？</h4>
<ul>
<li>由于全世界存在着各式各样的网络，它们使用不同的硬件地址。要使这些异构网络能够互相通信就必须进行非常复杂的硬件地址转换工作，因此几乎是不可能的事。</li>
<li>连接到因特网的主机都拥有统一的 IP 地址，它们之间的通信就像连接在同一个网络上那样简单方便，因为调用 ARP 来寻找某个路由器或主机的硬件地址都是由计算机软件自动进行的，对用户来说是看不见这种调用过程的。</li>
</ul>
<h3 id="逆地址解析协议-rarp"><a class="markdownIt-Anchor" href="#逆地址解析协议-rarp"></a> 逆地址解析协议 RARP</h3>
<ul>
<li>逆地址解析协议 RARP 使只知道自己硬件地址的主机能够知道其 IP 地址。</li>
<li>这种主机往往是无盘工作站。 因此 RARP协议目前已很少使用。</li>
</ul>
<h2 id="ip-数据报的格式"><a class="markdownIt-Anchor" href="#ip-数据报的格式"></a> IP 数据报的格式</h2>
<ul>
<li>一个 IP 数据报由首部和数据两部分组成。</li>
<li>首部的前一部分是固定长度，共 20 字节，是所有 IP 数据报必须具有的。</li>
<li>在首部的固定部分的后面是一些可选字段，其长度是可变的。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516213028.png" alt="" /></li>
<li>版本——占 4 位，指 IP 协议的版本。目前的 IP 协议版本号为 4 (即 IPv4)</li>
<li>首部长度——占 4 位，可表示的最大数值是 15 个单位(一个单位为 4 字节)。因此 IP 的首部长度的最大值是 60 字节。</li>
<li>区分服务——占 8 位，用来获得更好的服务在旧标准中叫做服务类型，但实际上一直未被使用过。1998 年这个字段改名为区分服务。只有在使用区分服务（DiffServ）时，这个字段才起作用。在一般的情况下都不使用这个字段。</li>
<li>总长度——占 16 位，指首部和数据之和的长度，单位为字节，因此数据报的最大长度为 65535 字节。总长度必须不超过最大传送单元 MTU。</li>
<li>标识(identification) ——占 16 位，它是一个计数器，用来产生数据报的标识。</li>
<li>标志(flag) ——占 3 位，目前只有前两位有意义。标志字段的最低位是 MF (More Fragment)。
<ul>
<li>MF =1 表示后面“还有分片”。MF = 0 表示最后一个分片。</li>
<li>标志字段中间的一位是 DF (Don’t Fragment) 。</li>
<li>只有当 DF = 0 时才允许分片。</li>
</ul>
</li>
<li>片偏移——占13位，指出较长的分组在分片后某片在原分组中的相对位置。片偏移以 8 个字节为偏移单位。<a href="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516214248.png" target="_blank" rel="noopener">IP 数据报分片</a></li>
<li>生存时间——占8位，记为 TTL (Time To Live)。数据报在网络中可通过的路由器数的最大值。</li>
<li>协议——占8位，字段指出此数据报携带的数据使用何种协议，以便目的主机的 IP 层将数据部分上交给哪个处理过程。<a href="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516214435.png" target="_blank" rel="noopener">协议字段示意图</a></li>
<li>首部检验和(16 位)字段只检验数据报的首部，不检验数据部分。这里不采用 CRC 检验码而采用简单的计算方法。<a href="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516214826.png" target="_blank" rel="noopener">检验算法</a></li>
<li>源地址和目的地址——各占 4 字节</li>
<li>IP 首部的可变部分就是一个选项字段，用来支持排错、测量以及安全等措施，内容很丰富。
<ul>
<li>选项字段的长度可变，从 1 个字节到 40 个字节不等，取决于所选择的项目。</li>
<li>增加首部的可变部分是为了增加 IP 数据报的功能，但这同时也使得 IP 数据报的首部长度成为可变的。这就增加了每一个路由器处理数据报的开销。</li>
<li>实际上这些选项很少被使用。</li>
</ul>
</li>
</ul>
<h2 id="ip-层转发分组的流程"><a class="markdownIt-Anchor" href="#ip-层转发分组的流程"></a> IP 层转发分组的流程</h2>
<ul>
<li>有四个 A 类网络通过三个路由器连接在一起。每一个网络上都可能有成千上万个主机。</li>
<li>可以想像，若按目的主机号来制作路由表，则所得出的路由表就会过于庞大。</li>
<li>但若按主机所在的<strong>网络地址</strong>来制作路由表，那么每一个路由器中的路由表就只包含 4 个项目。这样就可使路由表大大简化。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516220101.png" alt="" /></li>
</ul>
<h3 id="查找路由表"><a class="markdownIt-Anchor" href="#查找路由表"></a> 查找路由表</h3>
<p>根据目的网络地址就能确定下一跳路由器，这样做的结果是：</p>
<ul>
<li>IP 数据报最终一定可以找到目的主机所在目的网络上的路由器（可能要通过多次的间接交付）。</li>
<li>只有到达最后一个路由器时，才试图向目的主机进行直接交付。</li>
</ul>
<h3 id="特定主机路由"><a class="markdownIt-Anchor" href="#特定主机路由"></a> 特定主机路由</h3>
<ul>
<li>这种路由是为特定的目的主机指明一个路由。</li>
<li>采用特定主机路由可使网络管理人员能更方便地控制网络和测试网络，同时也可在需要考虑某种安全问题时采用这种特定主机路由。</li>
</ul>
<h3 id="默认路由default-route"><a class="markdownIt-Anchor" href="#默认路由default-route"></a> 默认路由(default route)</h3>
<ul>
<li>路由器还可采用<strong>默认路由</strong>以减少路由表所占用的空间和搜索路由表所用的时间。</li>
<li>这种转发方式在一个网络只有很少的对外连接时是很有用的。</li>
<li>默认路由在主机发送 IP 数据报时往往更能显示出它的好处。</li>
<li>如果一个主机连接在一个小网络上，而这个网络只用一个路由器和因特网连接，那么在这种情况下使用默认路由是非常合适的。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516225536.png" alt="" /></li>
</ul>
<h3 id="必须强调指出"><a class="markdownIt-Anchor" href="#必须强调指出"></a> 必须强调指出</h3>
<ul>
<li>IP 数据报的首部中没有地方可以用来指明“下一跳路由器的 IP 地址”。</li>
<li>当路由器收到待转发的数据报，不是将下一跳路由器的 IP 地址填入 IP 数据报，而是送交下层的网络接口软件。</li>
<li>网络接口软件使用 ARP 负责将下一跳路由器的 IP 地址转换成硬件地址，并将此硬件地址放在链路层的 MAC 帧的首部，然后根据这个硬件地址找到下一跳路由器。</li>
</ul>
<h1 id="划分子网和构造超网"><a class="markdownIt-Anchor" href="#划分子网和构造超网"></a> 划分子网和构造超网</h1>
<h2 id="划分子网"><a class="markdownIt-Anchor" href="#划分子网"></a> 划分子网</h2>
<p>从两级 IP 地址到三级 IP 地址。</p>
<ul>
<li>在 ARPANET 的早期，IP 地址的设计确实不够合理。
<ul>
<li>IP 地址空间的利用率有时很低。</li>
<li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。</li>
<li>两级的 IP 地址不够灵活。</li>
</ul>
</li>
</ul>
<h3 id="三级的-ip-地址"><a class="markdownIt-Anchor" href="#三级的-ip-地址"></a> 三级的 IP 地址</h3>
<ul>
<li>从 1985 年起在 IP 地址中又增加了一个“子网号字段”，使两级的 IP 地址变成为<strong>三级的 IP 地址</strong>。</li>
<li>这种做法叫作<strong>划分子网</strong>(subnetting) 。划分子网已成为因特网的正式标准协议。</li>
</ul>
<h3 id="划分子网的基本思路"><a class="markdownIt-Anchor" href="#划分子网的基本思路"></a> 划分子网的基本思路</h3>
<ul>
<li>划分子网纯属<strong>一个单位内部的事情</strong>。单位对外仍然表现为没有划分子网的网络。</li>
<li>从主机号<strong>借用</strong>若干个位作为<strong>子网号</strong> subnet-id，而主机号 host-id 也就相应减少了若干个位。
<ul>
<li><code>IP地址 ::= {&lt;网络号&gt;, &lt;子网号&gt;, &lt;主机号&gt;}</code></li>
</ul>
</li>
<li>凡是从其他网络发送给本单位某个主机的 IP 数据报，仍然是根据 IP 数据报的目的网络号 net-id，先找到连接在本单位网络上的路由器。</li>
<li>然后此路由器在收到 IP 数据报后，再按目的网络号 net-id 和子网号 subnet-id 找到目的子网。</li>
<li>最后就将 IP 数据报直接交付目的主机。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164156.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164214.png" alt="" /></li>
</ul>
<h3 id="划分子网后变成了三级结构"><a class="markdownIt-Anchor" href="#划分子网后变成了三级结构"></a> 划分子网后变成了三级结构</h3>
<ul>
<li>当没有划分子网时，IP 地址是两级结构。</li>
<li>划分子网后 IP 地址就变成了<strong>三级结构</strong>。</li>
<li>划分子网只是把 IP 地址的主机号 host-id 这部分进行再划分，而不改变 IP 地址原来的网络号 net-id。</li>
</ul>
<h2 id="子网掩码"><a class="markdownIt-Anchor" href="#子网掩码"></a> 子网掩码</h2>
<ul>
<li>从一个 IP 数据报的首部并无法判断源主机或目的主机所连接的网络是否进行了子网划分。</li>
<li>使用子网掩码(subnet mask)可以找出 IP 地址中的子网部分。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164439.png" alt="" /></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164522.png" alt="" /></p>
<h3 id="默认子网掩码"><a class="markdownIt-Anchor" href="#默认子网掩码"></a> 默认子网掩码</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164543.png" alt="" /></p>
<h3 id="子网掩码是一个重要属性"><a class="markdownIt-Anchor" href="#子网掩码是一个重要属性"></a> 子网掩码是一个重要属性</h3>
<ul>
<li>子网掩码是一个网络或一个子网的重要属性。</li>
<li>路由器在和相邻路由器交换路由信息时，必须把自己所在网络（或子网）的子网掩码告诉相邻路由器。</li>
<li>路由器的路由表中的每一个项目，除了要给出目的网络地址外，还必须同时给出该网络的子网掩码。</li>
<li>若一个路由器连接在两个子网上就拥有两个网络地址和两个子网掩码。</li>
</ul>
<blockquote>
<p><strong>【例】已知 IP 地址是 141.14.72.24，子网掩码是 255.255.192.0。试求网络地址。</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517165035.png" alt="" /><br />
<strong>【例】在上例中，若子网掩码改为255.255.224.0。试求网络地址，讨论所得结果。</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517165116.png" alt="" /></p>
</blockquote>
<h2 id="使用子网时分组转发"><a class="markdownIt-Anchor" href="#使用子网时分组转发"></a> 使用子网时分组转发</h2>
<ul>
<li>在不划分子网的两级 IP 地址下，从 IP 地址得出网络地址是个很简单的事。</li>
<li>但在划分子网的情况下，从 IP 地址却不能唯一地得出网络地址来，这是因为网络地址取决于那个网络所采用的子网掩码，但数据报的首部并没有提供子网掩码的信息。</li>
<li>因此分组转发的算法也必须做相应的改动。</li>
</ul>
<hr />
<ol>
<li>从收到的分组的首部提取目的 IP 地址 D。</li>
<li>先用各网络的子网掩码和 D 逐位相“与”，看是否和否则就是间接交付，执行(3)。</li>
<li>若路由表中有目的地址为 D 的特定主机路由，则将分组传送给指明的下一跳路由器；否则，执行(4)。</li>
<li>对路由表中的每一行的子网掩码和 D 逐位相“与”，若其结果与该行的目的网络地址匹配，则将分组传送给该行指明的下一跳路由器；否则，执行(5)。</li>
<li>若路由表中有一个默认路由，则将分组传送给路由表中所指明的默认路由器；否则，执行(6)。</li>
<li>报告转发分组出错。</li>
</ol>
<h2 id="无分类编址-cidr构造超网"><a class="markdownIt-Anchor" href="#无分类编址-cidr构造超网"></a> 无分类编址 CIDR（构造超网）</h2>
<blockquote>
<p><strong>【例】已知互联网和路由器 R1 中的路由表。主机 H1 向 H2 发送分组。试讨论 R1 收到 H1 向 H2 发送的分组后查找路由表的过程。</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517165438.png" alt="" /><br />
因此 H1 首先检查主机 128.30.33.138 是否连接在本网络上。如果是，则直接交付；否则，就送交路由器 R1，并逐项查找路由表。<br />
主机 H1 首先将本子网的子网掩码 255.255.255.128与分组的 IP 地址 128.30.33.138 逐比特相“与”(AND 操作) 。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517170116.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517170148.png" alt="" /></p>
</blockquote>
<h3 id="网络前缀"><a class="markdownIt-Anchor" href="#网络前缀"></a> 网络前缀</h3>
<ul>
<li>划分子网在一定程度上缓解了因特网在发展中遇到的困难。然而在 1992 年因特网仍然面临三个必须尽早解决的问题，这就是：
<ul>
<li>B 类地址在 1992 年已分配了近一半，眼看就要在 1994 年 3 月全部分配完毕！</li>
<li>因特网主干网上的路由表中的项目数急剧增长（从几千个增长到几万个）。</li>
<li>整个 IPv4 的地址空间最终将全部耗尽。</li>
</ul>
</li>
</ul>
<h3 id="ip-编址问题的演进"><a class="markdownIt-Anchor" href="#ip-编址问题的演进"></a> IP 编址问题的演进</h3>
<ul>
<li>1987 年，RFC 1009 就指明了在一个划分子网的网络中可同时使用几个不同的子网掩码。使用<strong>变长子网掩码 VLSM</strong> (Variable Length Subnet Mask)可进一步提高 IP 地址资源的利用率。</li>
<li>在 VLSM 的基础上又进一步研究出无分类编址方法，它的正式名字是<strong>无分类域间路由选择</strong> CIDR (Classless Inter-Domain Routing)。</li>
</ul>
<h3 id="cidr-最主要的特点"><a class="markdownIt-Anchor" href="#cidr-最主要的特点"></a> CIDR 最主要的特点</h3>
<ul>
<li>CIDR 消除了传统的 A 类、B 类和 C 类地址以及划分子网的概念，因而可以更加有效地分配 IPv4 的地址空间。</li>
<li>CIDR使用各种长度的“<strong>网络前缀</strong>”(network-prefix)来代替分类地址中的网络号和子网号。</li>
<li>IP 地址从三级编址（使用子网掩码）又回到了两级编址。</li>
</ul>
<h2 id="无分类的两级编址"><a class="markdownIt-Anchor" href="#无分类的两级编址"></a> 无分类的两级编址</h2>
<ul>
<li>无分类的两级编址的记法是：
<ul>
<li><code>IP地址 ::= {&lt;网络前缀&gt;, &lt;主机号&gt;}</code></li>
</ul>
</li>
<li>CIDR 还使用“<strong>斜线记法</strong>”(slash notation)，它又称为<strong>CIDR记法</strong>，即在 IP 地址面加上一个斜线“/”，然后写上网络前缀所占的位数（这个数值对应于三级编址中子网掩码中 1 的个数）。</li>
<li>CIDR 把网络前缀都相同的连续的 IP 地址组成“<strong>CIDR 地址块</strong>”。</li>
</ul>
<h3 id="cidr-地址块"><a class="markdownIt-Anchor" href="#cidr-地址块"></a> CIDR 地址块</h3>
<ul>
<li>128.14.32.0/20 表示的地址块共有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup><mn>2</mn></mrow><annotation encoding="application/x-tex">2^12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord">2</span></span></span></span> 个地址（因为<strong>斜线后面的 20 是网络前缀的位数，所以这个地址的主机号是 12 位</strong>）。</li>
<li>这个地址块的起始地址是 128.14.32.0。</li>
<li>在不需要指出地址块的起始地址时，也可将这样的地址块简称为“<strong>/20 地址块</strong>”。</li>
<li>128.14.32.0/20 地址块的最小地址：128.14.32.0</li>
<li>128.14.32.0/20 地址块的最大地址：128.14.47.255</li>
<li>全 0 和全 1 的主机号地址一般不使用。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200518133738.png" alt="" /></li>
</ul>
<h3 id="路由聚合"><a class="markdownIt-Anchor" href="#路由聚合"></a> 路由聚合</h3>
<ul>
<li>一个 CIDR 地址块可以表示很多地址，这种地址的聚合常称为<strong>路由聚合</strong>，它使得路由表中的一个项目可以表示很多个（例如上千个）原来传统分类地址的路由。</li>
<li>路由聚合也称为<strong>构成超网</strong>(supernetting)。</li>
<li>CIDR 虽然不使用子网了，但仍然使用“<strong>掩码</strong>”这一名词（但不叫子网掩码）。</li>
<li>对于 /20  地址块，它的掩码是 20 个连续的 1。 斜线记法中的数字就是掩码中1的个数。</li>
</ul>
<h3 id="cidr-记法的其他形式"><a class="markdownIt-Anchor" href="#cidr-记法的其他形式"></a> CIDR 记法的其他形式</h3>
<ul>
<li>10.0.0.0/10 可简写为 10/10，也就是把点分十进制中低位连续的 0 省略。</li>
<li>10.0.0.0/10 隐含地指出 IP 地址 10.0.0.0 的<strong>掩码</strong>是 255.192.0.0。此掩码可表示为<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234340.png" alt="" /></li>
<li>10.0.0.0/10 可简写为 10/10，也就是将点分十进制中低位连续的 0 省略。</li>
<li>10.0.0.0/10 相当于指出 IP 地址 10.0.0.0 的掩码是 255.192.0.0，即
<ul>
<li>11111111 11000000 00000000 00000000</li>
</ul>
</li>
<li>网络前缀的后面加一个星号 * 的表示方法
<ul>
<li>如 00001010 00*，在星号 * 之前是网络前缀，而星号 * 表示 IP 地址中的主机号，可以是任意值。</li>
</ul>
</li>
</ul>
<h3 id="构成超网"><a class="markdownIt-Anchor" href="#构成超网"></a> 构成超网</h3>
<ul>
<li>前缀长度不超过 23 位的 CIDR 地址块都包含了多个 C 类地址。</li>
<li>这些 C 类地址合起来就构成了超网。</li>
<li>CIDR 地址块中的地址数一定是 2 的整数次幂。</li>
<li>网络前缀越短，其地址块所包含的地址数就越多。而在三级结构的IP地址中，划分子网是使网络前缀变长。</li>
</ul>
<h3 id="cidr-地址块划分举例"><a class="markdownIt-Anchor" href="#cidr-地址块划分举例"></a> CIDR 地址块划分举例</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234448.png" alt="" /><br />
这个 ISP 共有 64 个 C 类网络。如果不采用 CIDR 技术，则在与该 ISP 的路由器交换路由信息的每一个路由器的路由表中，就需要有 64 个项目。但采用地址聚合后，只需用路由聚合后的 1 个项目 206.0.64.0/18 就能找到该 ISP。</p>
<h3 id="最长前缀匹配"><a class="markdownIt-Anchor" href="#最长前缀匹配"></a> 最长前缀匹配</h3>
<ul>
<li>使用 CIDR 时，路由表中的每个项目由“网络前缀”和“下一跳地址”组成。在查找路由表时可能会得到不止一个匹配结果。</li>
<li>应当从匹配结果中选择具有最长网络前缀的路由：<strong>最长前缀匹配</strong>(longest-prefix matching)。</li>
<li>网络前缀越长，其地址块就越小，因而路由就越具体(more specific) 。</li>
<li>最长前缀匹配又称为<strong>最长匹配或最佳匹配</strong>。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234607.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234629.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234643.png" alt="" /></p>
<ul>
<li>D AND (11111111 11111111 11111100 00000000) = 206.0.68.0/22             <strong>匹配</strong></li>
<li>D AND (11111111 11111111 11111111 10000000) = 206.0.71.128/25         <strong>匹配</strong></li>
<li>选择两个匹配的地址中更具体的一个，即选择最长前缀的地址。</li>
</ul>
<h3 id="使用二叉线索查找路由表"><a class="markdownIt-Anchor" href="#使用二叉线索查找路由表"></a> 使用二叉线索查找路由表</h3>
<ul>
<li>当路由表的项目数很大时，怎样设法减小路由表的查找时间就成为一个非常重要的问题。</li>
<li>为了进行更加有效的查找，通常是将无分类编址的路由表存放在一种层次的数据结构中，然后自上而下地按层次进行查找。这里最常用的就是<strong>二叉线索</strong>(binary trie)。</li>
<li>IP 地址中从左到右的比特值决定了从根结点逐层向下层延伸的路径，而二叉线索中的各个路径就代表路由表中存放的各个地址。</li>
<li>为了提高二叉线索的查找速度，广泛使用了各种压缩技术。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235029.png" alt="" /></li>
</ul>
<h1 id="网际控制报文协议-icmp"><a class="markdownIt-Anchor" href="#网际控制报文协议-icmp"></a> 网际控制报文协议 ICMP</h1>
<ul>
<li>为了提高 IP 数据报交付成功的机会，在网际层使用了网际控制报文协议 ICMP (Internet Control Message Protocol)。</li>
<li>ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告。</li>
<li>ICMP 不是高层协议，而是 IP 层的协议。</li>
<li>ICMP 报文作为 IP 层数据报的数据，加上数据报的首部，组成 IP 数据报发送出去。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235109.png" alt="" /></li>
</ul>
<h2 id="icmp-报文的种类"><a class="markdownIt-Anchor" href="#icmp-报文的种类"></a> ICMP 报文的种类</h2>
<ul>
<li>ICMP 报文的种类有两种，即 ICMP <strong>差错报告报文</strong>和 ICMP <strong>询问报文</strong>。</li>
<li>ICMP 报文的前 4 个字节是统一的格式，共有三个字段：即<strong>类型、代码和检验和</strong>。接着的 4 个字节的内容与 ICMP 的类型有关。</li>
</ul>
<h2 id="icmp-差错报告报文共有-5-种"><a class="markdownIt-Anchor" href="#icmp-差错报告报文共有-5-种"></a> ICMP 差错报告报文共有 5 种</h2>
<ul>
<li>终点不可达</li>
<li>源点抑制(Source quench)</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由（重定向）(Redirect)<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235343.png" alt="" /></li>
</ul>
<h3 id="不应发送-icmp-差错报告报文的几种情况"><a class="markdownIt-Anchor" href="#不应发送-icmp-差错报告报文的几种情况"></a> 不应发送 ICMP 差错报告报文的几种情况</h3>
<ul>
<li>对 ICMP 差错报告报文不再发送 ICMP 差错报告报文。</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送 ICMP 差错报告报文。</li>
<li>对具有多播地址的数据报都不发送 ICMP 差错报告报文。</li>
<li>对具有特殊地址（如127.0.0.0 或 0.0.0.0）的数据报不发送 ICMP 差错报告报文。</li>
</ul>
<h3 id="icmp-询问报文有两种"><a class="markdownIt-Anchor" href="#icmp-询问报文有两种"></a> ICMP 询问报文有两种</h3>
<ul>
<li>回送请求和回答报文</li>
<li>时间戳请求和回答报文</li>
<li>下面的几种 ICMP 报文不再使用
<ul>
<li>信息请求与回答报文</li>
<li>掩码地址请求和回答报文</li>
<li>路由器询问和通告报文</li>
</ul>
</li>
</ul>
<h2 id="icmp-的应用举例"><a class="markdownIt-Anchor" href="#icmp-的应用举例"></a> ICMP 的应用举例</h2>
<h3 id="ping"><a class="markdownIt-Anchor" href="#ping"></a> PING</h3>
<p>PING 用来测试两个主机之间的连通性。<br />
PING 使用了 ICMP 回送请求与回送回答报文。<br />
PING 是应用层直接使用网络层 ICMP 的例子，它没有通过运输层的 TCP 或UDP。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235522.png" alt="" /></p>
<h3 id="traceroute"><a class="markdownIt-Anchor" href="#traceroute"></a> Traceroute</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235542.png" alt="" /></p>
<h1 id="因特网的路由选择协议"><a class="markdownIt-Anchor" href="#因特网的路由选择协议"></a> 因特网的路由选择协议</h1>
<h2 id="有关路由选择协议的几个基本概念"><a class="markdownIt-Anchor" href="#有关路由选择协议的几个基本概念"></a> 有关路由选择协议的几个基本概念</h2>
<ul>
<li>理想的路由算法
<ul>
<li>算法必须是正确的和完整的。</li>
<li>算法在计算上应简单。</li>
<li>算法应能适应通信量和网络拓扑的变化，这就是说，要有自适应性。</li>
<li>算法应具有稳定性。</li>
<li>算法应是公平的。</li>
<li>算法应是最佳的。</li>
</ul>
</li>
</ul>
<h3 id="关于最佳路由"><a class="markdownIt-Anchor" href="#关于最佳路由"></a> 关于“最佳路由”</h3>
<ul>
<li>不存在一种绝对的最佳路由算法。</li>
<li>所谓“最佳”只能是相对于某一种特定要求下得出的较为合理的选择而已。</li>
<li>实际的路由选择算法，应尽可能接近于理想的算法。</li>
<li>路由选择是个非常复杂的问题
<ul>
<li>它是网络中的所有结点共同协调工作的结果。</li>
<li>路由选择的环境往往是不断变化的，而这种变化有时无法事先知道。</li>
</ul>
</li>
</ul>
<h3 id="从路由算法的自适应性考虑"><a class="markdownIt-Anchor" href="#从路由算法的自适应性考虑"></a> 从路由算法的自适应性考虑</h3>
<ul>
<li><strong>静态</strong>路由选择策略——即非自适应路由选择，其特点是简单和开销较小，但不能及时适应网络状态的变化。</li>
<li><strong>动态</strong>路由选择策略——即自适应路由选择，其特点是能较好地适应网络状态的变化，但实现起来较为复杂，开销也比较大。</li>
</ul>
<h3 id="分层次的路由选择协议"><a class="markdownIt-Anchor" href="#分层次的路由选择协议"></a> 分层次的路由选择协议</h3>
<ul>
<li>因特网采用分层次的路由选择协议。</li>
<li>因特网的规模非常大。如果让所有的路由器知道所有的网络应怎样到达，则这种路由表将非常大，处理起来也太花时间。而所有这些路由器之间交换路由信息所需的带宽就会使因特网的通信链路饱和。</li>
<li>许多单位不愿意外界了解自己单位网络的布局细节和本部门所采用的路由选择协议（这属于本部门内部的事情），但同时还希望连接到因特网上。</li>
</ul>
<h3 id="自治系统-as"><a class="markdownIt-Anchor" href="#自治系统-as"></a> 自治系统 AS</h3>
<ul>
<li>在单一的技术管理下的一组路由器，而这些路由器使用一种 AS 内部的路由选择协议和共同的度量以确定分组在该 AS 内的路由，同时还使用一种 AS 之间的路由选择协议用以确定分组在 AS之间的路由。</li>
<li>现在对自治系统 AS 的定义是强调下面的事实：尽管一个 AS 使用了多种内部路由选择协议和度量，但重要的是一个 AS 对其他 AS 表现出的是一个<strong>单一的和一致的路由选择策略</strong>。</li>
</ul>
<h4 id="因特网有两大类路由选择协议"><a class="markdownIt-Anchor" href="#因特网有两大类路由选择协议"></a> 因特网有两大类路由选择协议</h4>
<ul>
<li>内部网关协议 IGP (Interior Gateway Protocol)    即在一个自治系统内部使用的路由选择协议。目前这类路由选择协议使用得最多，如 RIP 和 OSPF 协议。</li>
<li>外部网关协议EGP (External Gateway Protocol)    若源站和目的站处在不同的自治系统中，当数据报传到一个自治系统的边界时，就需要使用一种协议将路由选择信息传递到另一个自治系统中。这样的协议就是外部网关协议 EGP。在外部网关协议中目前使用最多的是 BGP-4。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521000034.png" alt="" /></li>
</ul>
<hr />
<ul>
<li>因特网的早期 RFC 文档中未使用“路由器”而是使用“网关”这一名词。但是在新的 RFC 文档中又使用了“路由器”这一名词。应当把这两个属于当作同义词。</li>
<li>IGP 和 EGP 是协议类别的名称。但 RFC 在使用 EGP 这个名词时出现了一点混乱，因为最早的一个外部网关协议的协议名字正好也是 EGP。因此 遇到名词 EGP 时，应弄清它是指旧的协议 EGP 还是指外部网关协议 EGP 这个类别。</li>
</ul>
<h3 id="因特网的路由选择协议-2"><a class="markdownIt-Anchor" href="#因特网的路由选择协议-2"></a> 因特网的路由选择协议</h3>
<ul>
<li>内部网关协议 IGP：具体的协议有多种，如 RIP 和 OSPF 等。</li>
<li>外部网关协议 EGP：目前使用的协议就是 BGP。</li>
</ul>
<h2 id="内部网关协议-rip"><a class="markdownIt-Anchor" href="#内部网关协议-rip"></a> 内部网关协议 RIP</h2>
<h3 id="工作原理"><a class="markdownIt-Anchor" href="#工作原理"></a> 工作原理</h3>
<ul>
<li>路由信息协议 RIP 是内部网关协议 IGP中最先得到广泛使用的协议。</li>
<li>RIP 是一种分布式的基于<strong>距离向量</strong>的路由选择协议。</li>
<li>RIP 协议要求网络中的每一个路由器都要维护从它自己到其他每一个目的网络的距离记录。</li>
</ul>
<h4 id="距离"><a class="markdownIt-Anchor" href="#距离"></a> 距离</h4>
<ul>
<li>从一路由器到直接连接的网络的距离定义为 1。</li>
<li>从一个路由器到非直接连接的网络的距离定义为所经过的路由器数加 1。</li>
<li>RIP 协议中的“距离”也称为“跳数”(hop count)，因为每经过一个路由器，跳数就加 1。</li>
<li>这里的“距离”实际上指的是“最短距离”。</li>
<li>RIP 认为一个好的路由就是它通过的路由器的数目少，即“距离短”。</li>
<li>RIP 允许一条路径最多只能包含 15 个路由器。</li>
<li>“距离”的最大值为16 时即相当于不可达。可见 RIP 只适用于小型互联网。</li>
<li>RIP 不能在两个网络之间同时使用多条路由。RIP 选择一个具有最少路由器的路由（即最短路由），哪怕还存在另一条高速(低时延)但路由器较多的路由。</li>
</ul>
<h3 id="rip-协议的三个要点"><a class="markdownIt-Anchor" href="#rip-协议的三个要点"></a> RIP 协议的三个要点</h3>
<ul>
<li>仅和相邻路由器交换信息。</li>
<li>交换的信息是当前本路由器所知道的全部信息，即自己的路由表。</li>
<li>按固定的时间间隔交换路由信息，例如，每隔 30 秒。</li>
</ul>
<h3 id="路由表的建立"><a class="markdownIt-Anchor" href="#路由表的建立"></a> 路由表的建立</h3>
<ul>
<li>路由器在刚刚开始工作时，只知道到直接连接的网络的距离（此距离定义为1）。</li>
<li>以后，每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息。</li>
<li>经过若干次更新后，所有的路由器最终都会知道到达本自治系统中任何一个网络的最短距离和下一跳路由器的地址。</li>
<li>RIP 协议的<strong>收敛</strong>(convergence)过程较快，即在自治系统中所有的结点都得到正确的路由选择信息的过程。</li>
</ul>
<h4 id="距离向量算法"><a class="markdownIt-Anchor" href="#距离向量算法"></a> 距离向量算法</h4>
<ul>
<li>收到相邻路由器（其地址为 X）的一个 RIP 报文：
<ol>
<li>先修改此 RIP 报文中的所有项目：把“下一跳”字段中的地址都改为 X，并把所有的“距离”字段的值加 1。</li>
<li>对修改后的 RIP 报文中的每一个项目，重复以下步骤：
<ul>
<li>若项目中的目的网络不在路由表中，则把该项目加到路由表中。</li>
<li>否则
<ul>
<li>若下一跳字段给出的路由器地址是同样的，则把收到的项目替换原路由表中的项目。</li>
</ul>
</li>
<li>否则
<ul>
<li>若收到项目中的距离小于路由表中的距离，则进行更新，</li>
</ul>
</li>
<li>否则，什么也不做。</li>
</ul>
</li>
<li>若 3 分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达路由器，即将距离置为16（距离为16表示不可达）。</li>
<li>返回。</li>
</ol>
</li>
</ul>
<h4 id="路由器之间交换信息"><a class="markdownIt-Anchor" href="#路由器之间交换信息"></a> 路由器之间交换信息</h4>
<ul>
<li>RIP协议让互联网中的所有路由器都和自己的相邻路由器不断交换路由信息，并不断更新其路由表，使得从每一个路由器到每一个目的网络的路由都是最短的（即跳数最少）。</li>
<li>虽然所有的路由器最终都拥有了整个自治系统的全局路由信息，但由于每一个路由器的位置不同，它们的路由表当然也应当是不同的。</li>
</ul>
<h3 id="rip2-协议的报文格式"><a class="markdownIt-Anchor" href="#rip2-协议的报文格式"></a> RIP2 协议的报文格式</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521151211.png" alt="" /></p>
<h4 id="rip2-的报文由首部和路由部分组成"><a class="markdownIt-Anchor" href="#rip2-的报文由首部和路由部分组成"></a> RIP2 的报文由首部和路由部分组成</h4>
<ul>
<li>RIP2 报文中的路由部分由若干个路由信息组成。每个路由信息需要用 20 个字节。地址族标识符（又称为地址类别）字段用来标志所使用的地址协议。</li>
<li>路由标记填入自治系统的号码，这是考虑使RIP 有可能收到本自治系统以外的路由选择信息。再后面指出某个网络地址、该网络的子网掩码、下一跳路由器地址以及到此网络的距离。</li>
</ul>
<h4 id="rip-协议的优缺点"><a class="markdownIt-Anchor" href="#rip-协议的优缺点"></a> RIP 协议的优缺点</h4>
<ul>
<li>RIP 存在的一个问题是当网络出现故障时，要经过比较长的时间才能将此信息传送到所有的路由器。</li>
<li>RIP 协议最大的优点就是实现简单，开销较小。</li>
<li>RIP 限制了网络的规模，它能使用的最大距离为 15（16 表示不可达）。</li>
<li>路由器之间交换的路由信息是路由器中的完整路由表，因而随着网络规模的扩大，开销也就增加。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152340.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152505.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152706.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152716.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152726.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152737.png" alt="" /></li>
</ul>
<h2 id="内部网关协议-ospf"><a class="markdownIt-Anchor" href="#内部网关协议-ospf"></a> 内部网关协议 OSPF</h2>
<h3 id="ospf-协议的基本特点"><a class="markdownIt-Anchor" href="#ospf-协议的基本特点"></a> OSPF 协议的基本特点</h3>
<ul>
<li>“开放”表明 OSPF 协议不是受某一家厂商控制，而是公开发表的。</li>
<li>“最短路径优先”是因为使用了 Dijkstra 提出的最短路径算法SPF</li>
<li>OSPF 只是一个协议的名字，它并不表示其他的路由选择协议不是“最短路径优先”。</li>
<li>是分布式的<strong>链路状态协议</strong>。</li>
</ul>
<h3 id="三个要点"><a class="markdownIt-Anchor" href="#三个要点"></a> 三个要点</h3>
<ul>
<li><strong>向本自治系统中所有路由器发送信息</strong>，这里使用的方法是洪泛法。</li>
<li>发送的信息就是与本路由器<strong>相邻</strong>的所有路由器的链路状态，但这只是路由器所知道的<strong>部分信息</strong>。
<ul>
<li>“链路状态”就是说明本路由器都和哪些路由器相邻，以及该链路的“<strong>度量</strong>”(metric)。</li>
</ul>
</li>
<li>只有当链路状态<strong>发生变化</strong>时，路由器才用洪泛法向所有路由器发送此信息。</li>
</ul>
<h3 id="链路状态数据库"><a class="markdownIt-Anchor" href="#链路状态数据库"></a> 链路状态数据库</h3>
<ul>
<li>由于各路由器之间频繁地交换链路状态信息，因此所有的路由器最终都能建立一个链路状态数据库。</li>
<li>这个数据库实际上就是<strong>全网的拓扑结构图</strong>，它在全网范围内是一致的（这称为链路状态数据库的同步）。</li>
<li>OSPF 的链路状态数据库能较快地进行更新，使各个路由器能及时更新其路由表。OSPF 的更新过程收敛得快是其重要优点。</li>
</ul>
<h4 id="ospf-的区域area"><a class="markdownIt-Anchor" href="#ospf-的区域area"></a> OSPF 的区域(area)</h4>
<ul>
<li>为了使 OSPF 能够用于规模很大的网络，OSPF 将一个自治系统再划分为若干个更小的范围，叫作<strong>区域</strong>。</li>
<li>每一个区域都有一个 32 位的区域标识符（用点分十进制表示）。</li>
<li>区域也不能太大，在一个区域内的路由器最好不超过 200 个。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521153011.png" alt="" /></li>
</ul>
<h4 id="划分区域"><a class="markdownIt-Anchor" href="#划分区域"></a> 划分区域</h4>
<ul>
<li>划分区域的好处就是将利用洪泛法交换链路状态信息的范围局限于每一个区域而不是整个的自治系统，这就减少了整个网络上的通信量。</li>
<li>在一个区域内部的路由器只知道本区域的完整网络拓扑，而不知道其他区域的网络拓扑的情况。</li>
<li>OSPF 使用层次结构的区域划分。在上层的区域叫作<strong>主干区域</strong>(backbone area)。主干区域的标识符规定为0.0.0.0。主干区域的作用是用来连通其他在下层的区域。</li>
</ul>
<h3 id="ospf-直接用-ip-数据报传送"><a class="markdownIt-Anchor" href="#ospf-直接用-ip-数据报传送"></a> OSPF 直接用 IP 数据报传送</h3>
<ul>
<li>OSPF 不用 UDP 而是直接用 IP 数据报传送。</li>
<li>OSPF 构成的数据报很短。这样做可减少路由信息的通信量。</li>
<li>数据报很短的另一好处是可以不必将长的数据报分片传送。分片传送的数据报只要丢失一个，就无法组装成原来的数据报，而整个数据报就必须重传。</li>
</ul>
<h3 id="ospf-的其他特点"><a class="markdownIt-Anchor" href="#ospf-的其他特点"></a> OSPF 的其他特点</h3>
<ul>
<li>OSPF 对不同的链路可根据 IP 分组的不同服务类型 TOS 而设置成不同的代价。因此，OSPF 对于不同类型的业务可计算出不同的路由。</li>
<li>如果到同一个目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径。这叫作多路径间的负载平衡。</li>
<li>所有在 OSPF 路由器之间交换的分组都具有鉴别的功能。</li>
<li>支持可变长度的子网划分和无分类编址 CIDR。<br />
+每一个链路状态都带上一个 32 位的序号，序号越大状态就越新。</li>
</ul>
<h3 id="ospf-的五种分组类型"><a class="markdownIt-Anchor" href="#ospf-的五种分组类型"></a> OSPF 的五种分组类型</h3>
<ul>
<li>类型1，问候(Hello)分组。</li>
<li>类型2，数据库描述(Database Description)分组。</li>
<li>类型3，链路状态请求(Link State Request)分组。</li>
<li>类型4，链路状态更新(Link State Update)分组，用洪泛法对全网更新链路状态。</li>
<li>类型5，链路状态确认(Link State Acknowledgment)分组。</li>
</ul>
<h3 id="ospf的基本操作"><a class="markdownIt-Anchor" href="#ospf的基本操作"></a> OSPF的基本操作</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521153920.png" alt="" /></p>
<h3 id="ospf-使用的是可靠的洪泛法"><a class="markdownIt-Anchor" href="#ospf-使用的是可靠的洪泛法"></a> OSPF 使用的是可靠的洪泛法</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521154002.png" alt="" /></p>
<h3 id="ospf-的其他特点-2"><a class="markdownIt-Anchor" href="#ospf-的其他特点-2"></a> OSPF 的其他特点</h3>
<ul>
<li>OSPF 还规定每隔一段时间，如 30 分钟，要刷新一次数据库中的链路状态。</li>
<li>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当互联网规模很大时，OSPF 协议要比距离向量协议 RIP 好得多。</li>
<li>OSPF 没有“坏消息传播得慢”的问题，据统计，其响应网络变化的时间小于 100 ms。</li>
</ul>
<h3 id="指定的路由器designated-router"><a class="markdownIt-Anchor" href="#指定的路由器designated-router"></a> 指定的路由器(designated router)</h3>
<ul>
<li>多点接入的局域网采用了指定的路由器的方法，使广播的信息量大大减少。</li>
<li>指定的路由器代表该局域网上所有的链路向连接到该网络上的各路由器发送状态信息。</li>
</ul>
<h2 id="外部网关协议-bgp"><a class="markdownIt-Anchor" href="#外部网关协议-bgp"></a> 外部网关协议 BGP</h2>
<ul>
<li>BGP 是不同自治系统的路由器之间交换路由信息的协议。</li>
<li>BGP 较新版本是 2006 年 1 月发表的 BGP-4（BGP 第 4 个版本），即 RFC 4271 ~ 4278。</li>
<li>可以将 BGP-4 简写为 BGP。</li>
</ul>
<h3 id="bgp-使用的环境却不同"><a class="markdownIt-Anchor" href="#bgp-使用的环境却不同"></a> BGP 使用的环境却不同</h3>
<ul>
<li>因特网的规模太大，使得自治系统之间路由选择非常困难。对于自治系统之间的路由选择，要寻找最佳路由是很不现实的。
<ul>
<li>当一条路径通过几个不同 AS 时，要想对这样的路径计算出有意义的代价是不太可能的。</li>
<li>比较合理的做法是在 AS 之间交换“可达性”信息。</li>
</ul>
</li>
<li>自治系统之间的路由选择必须考虑有关策略。</li>
<li>因此，边界网关协议 BGP 只能是力求寻找一条能够到达目的网络且<strong>比较好的路由</strong>（不能兜圈子），而<strong>并非要寻找一条最佳路由</strong>。</li>
</ul>
<h3 id="bgp-发言人"><a class="markdownIt-Anchor" href="#bgp-发言人"></a> BGP 发言人</h3>
<ul>
<li>每一个自治系统的管理员要选择至少一个路由器作为该自治系统的“ <strong>BGP 发言人</strong>” 。</li>
<li>一般说来，两个 BGP 发言人都是通过一个共享网络连接在一起的，而 BGP 发言人往往就是 BGP 边界路由器，但也可以不是 BGP 边界路由器。</li>
</ul>
<h3 id="bgp-交换路由信息"><a class="markdownIt-Anchor" href="#bgp-交换路由信息"></a> BGP 交换路由信息</h3>
<ul>
<li>一个 BGP 发言人与其他自治系统中的 BGP 发言人要交换路由信息，就要先建立 TCP 连接，然后在此连接上交换 BGP 报文以建立 BGP <strong>会话</strong>(session)，利用 BGP 会话交换路由信息。</li>
<li>使用 TCP 连接能提供可靠的服务，也简化了路由选择协议。</li>
<li>使用 TCP 连接交换路由信息的两个 BGP 发言人，彼此成为对方的邻站或对等站。</li>
</ul>
<h3 id="bgp-发言人和自治系统-as-的关系"><a class="markdownIt-Anchor" href="#bgp-发言人和自治系统-as-的关系"></a> BGP 发言人和自治系统 AS 的关系</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521154300.png" alt="" /></p>
<h4 id="as-的连通图举例"><a class="markdownIt-Anchor" href="#as-的连通图举例"></a> AS 的连通图举例</h4>
<p>BGP 所交换的网络可达性的信息就是要到达某个网络所要经过的一系列 AS。<br />
当 BGP 发言人互相交换了网络可达性的信息后，各 BGP 发言人就根据所采用的策略从收到的路由信息中找出到达各 AS 的较好路由。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521154334.png" alt="" /></p>
<h4 id="bgp-发言人交换路径向量"><a class="markdownIt-Anchor" href="#bgp-发言人交换路径向量"></a> BGP 发言人交换路径向量</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200521155322726_12178.png" alt="20200521154704" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200521155335430_10835.png" alt="20200521154723" /></p>
<h3 id="bgp-协议的特点"><a class="markdownIt-Anchor" href="#bgp-协议的特点"></a> BGP 协议的特点</h3>
<ul>
<li>BGP 协议交换路由信息的结点数量级是<strong>自治系统数的量级</strong>，这要比这些自治系统中的网络数少很多。</li>
<li>每一个自治系统中 BGP 发言人（或边界路由器）的数目是很少的。这样就使得自治系统之间的路由选择不致过分复杂。</li>
<li><strong>BGP 支持 CIDR</strong>，因此 BGP 的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</li>
<li>在BGP 刚刚运行时，BGP 的邻站是交换整个的 BGP 路由表。但以后只需要在发生变化时<strong>更新有变化的部分</strong>。这样做对节省网络带宽和减少路由器的处理开销方面都有好处。</li>
</ul>
<h3 id="bgp-4-共使用四种报文"><a class="markdownIt-Anchor" href="#bgp-4-共使用四种报文"></a> BGP-4 共使用四种报文</h3>
<ol>
<li>打开(OPEN)报文，用来与相邻的另一个BGP发言人建立关系。</li>
<li>更新(UPDATE)报文，用来发送某一路由的信息，以及列出要撤消的多条路由。</li>
<li>保活(KEEPALIVE)报文，用来确认打开报文和周期性地证实邻站关系。</li>
<li>通知(NOTIFICATION)报文，用来发送检测到的差错。<br />
在 RFC 2918 中增加了 ROUTE-REFRESH 报文，用来请求对等端重新通告。</li>
</ol>
<h3 id="bgp-报文具有通用的首部"><a class="markdownIt-Anchor" href="#bgp-报文具有通用的首部"></a> BGP 报文具有通用的首部</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155512.png" alt="" /></p>
<h2 id="路由器的构成"><a class="markdownIt-Anchor" href="#路由器的构成"></a> 路由器的构成</h2>
<ul>
<li>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。也就是说，将路由器某个输入端口收到的分组，按照分组要去的目的地（即目的网络），把该分组从路由器的某个合适的输出端口转发给下一跳路由器。</li>
<li>下一跳路由器也按照这种方法处理分组，直到该分组到达终点为止。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155648.png" alt="" /></li>
</ul>
<h3 id="转发和路由选择的区别"><a class="markdownIt-Anchor" href="#转发和路由选择的区别"></a> “转发”和“路由选择”的区别</h3>
<ul>
<li>“转发”(forwarding)就是路由器根据转发表将用户的 IP 数据报从合适的端口转发出去。</li>
<li>“路由选择”(routing)则是按照分布式算法，根据从各相邻路由器得到的关于网络拓扑的变化情况，动态地改变所选择的路由。</li>
<li>路由表是根据路由选择算法得出的。而转发表是从路由表得出的。</li>
<li>在讨论路由选择的原理时，往往不去区分转发表和路由表的区别。</li>
</ul>
<h3 id="输入端口对线路上收到的分组的处理"><a class="markdownIt-Anchor" href="#输入端口对线路上收到的分组的处理"></a> 输入端口对线路上收到的分组的处理</h3>
<p>数据链路层剥去帧首部和尾部后，将分组送到网络层的队列中排队等待处理。这会产生一定的时延。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155820.png" alt="" /></p>
<h3 id="输出端口将交换结构传送来的分组发送到线路"><a class="markdownIt-Anchor" href="#输出端口将交换结构传送来的分组发送到线路"></a> 输出端口将交换结构传送来的分组发送到线路</h3>
<p>当交换结构传送过来的分组先进行缓存。数据链路层处理模块将分组加上链路层的首部和尾部，交给物理层后发送到外部线路。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155901.png" alt="" /></p>
<h3 id="分组丢弃"><a class="markdownIt-Anchor" href="#分组丢弃"></a> 分组丢弃</h3>
<ul>
<li>若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃。</li>
<li>路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。</li>
</ul>
<h3 id="交换结构"><a class="markdownIt-Anchor" href="#交换结构"></a> 交换结构</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160021.png" alt="" /></p>
<h1 id="ip-多播"><a class="markdownIt-Anchor" href="#ip-多播"></a> IP 多播</h1>
<h2 id="ip-多播的基本概念"><a class="markdownIt-Anchor" href="#ip-多播的基本概念"></a> IP 多播的基本概念</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160300.png" alt="" /></p>
<h3 id="多播可明显地减少网络中资源的消耗"><a class="markdownIt-Anchor" href="#多播可明显地减少网络中资源的消耗"></a> 多播可明显地减少网络中资源的消耗</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160335.png" alt="" /></p>
<h3 id="ip-多播的一些特点"><a class="markdownIt-Anchor" href="#ip-多播的一些特点"></a> IP 多播的一些特点</h3>
<ol>
<li>多播使用组地址—— IP 使用 D 类地址支持多播。多播地址只能用于目的地址，而不能用于源地址。</li>
<li>永久组地址——由因特网号码指派管理局 IANA 负责指派。</li>
<li>动态的组成员</li>
<li>使用硬件进行多播</li>
</ol>
<h2 id="在局域网上进行硬件多播"><a class="markdownIt-Anchor" href="#在局域网上进行硬件多播"></a> 在局域网上进行硬件多播</h2>
<ul>
<li>因特网号码指派管理局 IANA 拥有的以太网地址块的高 24 位为 00-00-5E。</li>
<li>因此 TCP/IP 协议使用的以太网多播地址块的范围是：从 00-00-5E-00-00-00 到 00-00-5E-FF-FF-FF</li>
<li>D 类 IP 地址可供分配的有 28 位，在这 28 位中的前 5 位不能用来构成以太网硬件地址。</li>
</ul>
<h3 id="d-类-ip-地址与以太网多播地址的映射关系"><a class="markdownIt-Anchor" href="#d-类-ip-地址与以太网多播地址的映射关系"></a> D 类 IP 地址与以太网多播地址的映射关系</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160436.png" alt="" /></p>
<h2 id="因特网组管理协议-igmp-和多播路由选择协议"><a class="markdownIt-Anchor" href="#因特网组管理协议-igmp-和多播路由选择协议"></a> 因特网组管理协议 IGMP 和多播路由选择协议</h2>
<h3 id="ip多播需要两种协议"><a class="markdownIt-Anchor" href="#ip多播需要两种协议"></a> IP多播需要两种协议</h3>
<ul>
<li>为了使路由器知道多播组成员的信息，<strong>需要利用网际组管理协议 IGMP</strong> (Internet Group Management Protocol)。</li>
<li>连接在局域网上的多播路由器还必须和因特网上的其他多播路由器协同工作，以便把多播数据报用最小代价传送给所有的组成员。这就需要使用<strong>多播路由选择协议</strong>。</li>
</ul>
<h3 id="igmp-使多播路由器知道多播组成员信息"><a class="markdownIt-Anchor" href="#igmp-使多播路由器知道多播组成员信息"></a> IGMP 使多播路由器知道多播组成员信息</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160528.png" alt="" /></p>
<h3 id="igmp-的本地使用范围"><a class="markdownIt-Anchor" href="#igmp-的本地使用范围"></a> IGMP 的本地使用范围</h3>
<ul>
<li>IGMP <strong>并非</strong>在因特网范围内对所有多播组成员进行管理的协议。</li>
<li>IGMP <strong>不知道</strong> IP 多播组包含的成员数，<strong>也不知道</strong>这些成员都分布在哪些网络上。</li>
<li>IGMP 协议是让连接在<strong>本地局域网</strong>上的多播路由器知道本局域网上是否有主机（严格讲，是主机上的某个进程）参加或退出了某个多播组。</li>
</ul>
<h3 id="多播路由选择协议比单播路由选择协议复杂得多"><a class="markdownIt-Anchor" href="#多播路由选择协议比单播路由选择协议复杂得多"></a> 多播路由选择协议比单播路由选择协议复杂得多</h3>
<ul>
<li>多播转发必须<strong>动态地</strong>适应多播组成员的变化（这时网络拓扑并未发生变化）。请注意，单播路由选择通常是在网络拓扑发生变化时才需要更新路由。</li>
<li>多播路由器在转发多播数据报时，不能仅仅根据多播数据报中的目的地址，而是还要考虑这个多播数据报从什么地方来和要到什么地方去。</li>
<li>多播数据报可以由没有加入多播组的主机发出，也可以通过没有组成员接入的网络。</li>
</ul>
<h3 id="网际组管理协议-igmp"><a class="markdownIt-Anchor" href="#网际组管理协议-igmp"></a> 网际组管理协议 IGMP</h3>
<ul>
<li>1989 年公布的 RFC 1112（IGMPv1）早已成为了因特网的标准协议。</li>
<li>1997 年公布的 RFC 2236（IGMPv2，建议标准）对 IGMPv1 进行了更新。</li>
<li>2002 年 10 月公布了 RFC 3376（IGMPv3，建议标准），宣布 RFC 2236（IGMPv2）是陈旧的。</li>
</ul>
<h4 id="igmp-是整个网际协议-ip-的一个组成部分"><a class="markdownIt-Anchor" href="#igmp-是整个网际协议-ip-的一个组成部分"></a> IGMP 是整个网际协议 IP 的一个组成部分</h4>
<ul>
<li>和 ICMP 相似，IGMP 使用 IP 数据报传递其报文（即 IGMP 报文加上 IP 首部构成 IP 数据报），但它也向 IP 提供服务。</li>
<li>因此，我们不把 IGMP 看成是一个单独的协议，而是属于整个网际协议 IP 的一个组成部分。</li>
</ul>
<h4 id="igmp-可分为两个阶段"><a class="markdownIt-Anchor" href="#igmp-可分为两个阶段"></a> IGMP 可分为两个阶段</h4>
<ul>
<li>第一阶段：当某个主机加入新的多播组时，该主机应向多播组的多播地址发送IGMP 报文，声明自己要成为该组的成员。本地的多播路由器收到 IGMP 报文后，将组成员关系转发给因特网上的其他多播路由器。</li>
<li>第二阶段：因为组成员关系是<strong>动态</strong>的，因此本地多播路由器要<strong>周期性地探询</strong>本地局域网上的主机，以便知道这些主机是否还继续是组的成员。</li>
<li>只要对某个组有一个主机响应，那么多播路由器就认为这个组是活跃的。</li>
<li>但一个组在经过几次的探询后仍然没有一个主机响应，则不再将该组的成员关系转发给其他的多播路由器。</li>
</ul>
<h4 id="igmp-采用的一些具体措施"><a class="markdownIt-Anchor" href="#igmp-采用的一些具体措施"></a> IGMP 采用的一些具体措施</h4>
<ul>
<li>在主机和多播路由器之间的所有通信都是使用 IP 多播。</li>
<li>多播路由器在探询组成员关系时，只需要对所有的组发送一个请求信息的询问报文，而不需要对每一个组发送一个询问报文。默认的询问速率是每 125 秒发送一次。</li>
<li>当同一个网络上连接有几个多播路由器时，它们能够迅速和有效地选择其中的一个来探询主机的成员关系。</li>
<li>在 IGMP 的询问报文中有一个数值 N，它指明一个最长响应时间（默认值为 10秒）。当收到询问时，主机在 0 到 N 之间随机选择发送响应所需经过的时延。对应于最小时延的响应最先发送。</li>
<li>同一个组内的每一个主机都要监听响应，只要有本组的其他主机先发送了响应，自己就可以不再发送响应了。</li>
</ul>
<h3 id="多播路由选择"><a class="markdownIt-Anchor" href="#多播路由选择"></a> 多播路由选择</h3>
<ul>
<li>多播路由选择协议尚未标准化。</li>
<li>一个多播组中的成员是动态变化的，随时会有主机加入或离开这个多播组。</li>
<li>多播路由选择实际上就是要找出以源主机为根结点的多播转发树。</li>
<li>在多播转发树上的路由器不会收到重复的多播数据报。</li>
<li>对不同的多播组对应于不同的多播转发树。同一个多播组，对不同的源点也会有不同的多播转发树。</li>
</ul>
<h3 id="转发多播数据报使用的方法"><a class="markdownIt-Anchor" href="#转发多播数据报使用的方法"></a> 转发多播数据报使用的方法</h3>
<h4 id="洪泛与剪除"><a class="markdownIt-Anchor" href="#洪泛与剪除"></a> 洪泛与剪除</h4>
<ul>
<li>这种方法适合于较小的多播组，而所有的组成员接入的局域网也是相邻接的。</li>
<li>一开始，路由器转发多播数据报使用洪泛的方法（这就是广播）。为了避免兜圈子，采用了叫做<strong>反向路径广播</strong> RPB (Reverse Path Broadcasting)的策略。</li>
</ul>
<h5 id="rpb-的要点"><a class="markdownIt-Anchor" href="#rpb-的要点"></a> RPB 的要点</h5>
<ul>
<li>路由器收到多播数据报时，先检查是否从源点经最短路径传送来的。</li>
<li>若是，就向所有其他方向转发刚才收到的多播数据报（但进入的方向除外），否则就丢弃而不转发。</li>
<li>如果存在几条同样长度的最短路径），那么只能选择一条最短路径，选择的准则就是看这几条最短路径中的相邻路由器谁的 IP 地址最小。</li>
</ul>
<h4 id="反向路径广播-rpb-和剪除"><a class="markdownIt-Anchor" href="#反向路径广播-rpb-和剪除"></a> 反向路径广播 RPB 和剪除</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160952.png" alt="" /></p>
<h4 id="隧道技术"><a class="markdownIt-Anchor" href="#隧道技术"></a> 隧道技术</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521161029.png" alt="" /></p>
<h4 id="基于核心的发现技术"><a class="markdownIt-Anchor" href="#基于核心的发现技术"></a> 基于核心的发现技术</h4>
<ul>
<li>这种方法对于多播组的大小在较大范围内变化时都适合。</li>
<li>这种方法是对每一个多播组 G 指定一个<strong>核心</strong>(core)路由器，给出它的 IP 单播地址。</li>
<li>核心路由器按照前面讲过的方法创建出对应于多播组 G 的转发树。</li>
</ul>
<h3 id="几种多播路由选择协议"><a class="markdownIt-Anchor" href="#几种多播路由选择协议"></a> 几种多播路由选择协议</h3>
<ul>
<li>距离向量多播路由选择协议 DVMRP (Distance Vector Multicast Routing Protocol)</li>
<li>基于核心的转发树 CBT (Core Based Tree)</li>
<li>开放最短通路优先的多播扩展 MOSPF (Multicast Extensions to OSPF)</li>
<li>协议无关多播-稀疏方式 PIM-SM (Protocol Independent Multicast-Sparse Mode)</li>
<li>协议无关多播-密集方式 PIM-DM (Protocol Independent Multicast-Dense Mode)</li>
</ul>
<h1 id="虚拟专用网-vpn-和网络地址转换-nat"><a class="markdownIt-Anchor" href="#虚拟专用网-vpn-和网络地址转换-nat"></a> 虚拟专用网 VPN 和网络地址转换 NAT</h1>
<h2 id="虚拟专用网-vpn"><a class="markdownIt-Anchor" href="#虚拟专用网-vpn"></a> 虚拟专用网 VPN</h2>
<ul>
<li>本地地址——仅在机构内部使用的 IP 地址，可以由本机构自行分配，而不需要向因特网的管理机构申请。</li>
<li>全球地址——全球唯一的IP地址，必须向因特网的管理机构申请。</li>
</ul>
<h3 id="rfc-1918-指明的专用地址private-address"><a class="markdownIt-Anchor" href="#rfc-1918-指明的专用地址private-address"></a> RFC 1918 指明的专用地址(private address)</h3>
<ul>
<li>10.0.0.0 到 10.255.255.255</li>
<li>172.16.0.0 到 172.31.255.255</li>
<li>192.168.0.0 到 192.168.255.255</li>
<li>这些地址只能用于一个机构的内部通信，而不能用于和因特网上的主机通信。</li>
<li>专用地址只能用作本地地址而不能用作全球地址。在因特网中的所有路由器对目的地址是专用地址的数据报一律不进行转发。</li>
</ul>
<h3 id="用隧道技术实现虚拟专用网"><a class="markdownIt-Anchor" href="#用隧道技术实现虚拟专用网"></a> 用隧道技术实现虚拟专用网</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521161756.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521161814.png" alt="" /></p>
<h4 id="内联网-intranet-和外联网-extranet都是基于-tcpip-协议"><a class="markdownIt-Anchor" href="#内联网-intranet-和外联网-extranet都是基于-tcpip-协议"></a> 内联网 intranet 和外联网 extranet（都是基于 TCP/IP 协议）</h4>
<ul>
<li>由部门 A 和 B 的内部网络所构成的虚拟专用网 VPN 又称为<strong>内联网</strong>(intranet)，表示部门 A 和 B 都是<strong>在同一个机构</strong>的内部。</li>
<li>一个机构和某些<strong>外部机构</strong>共同建立的虚拟专用网 VPN 又称为<strong>外联网</strong>(extranet)。</li>
</ul>
<h4 id="远程接入vpn"><a class="markdownIt-Anchor" href="#远程接入vpn"></a> 远程接入VPN</h4>
<ul>
<li>有的公司可能没有分布在不同场所的部门，但有很多流动员工在外地工作。公司需要和他们保持联系，远程接入 VPN 可满足这种需求。</li>
<li>在外地工作的员工拨号接入因特网，而驻留在员工 PC 机中的 VPN 软件可在员工的 PC 机和公司的主机之间建立 VPN 隧道，因而外地员工与公司通信的内容是保密的，员工们感到好像就是使用公司内部的本地网络。</li>
</ul>
<h2 id="网络地址转换-nat"><a class="markdownIt-Anchor" href="#网络地址转换-nat"></a> 网络地址转换 NAT</h2>
<p>网络地址转换 NAT  方法于1994年提出。<br />
需要在专用网连接到因特网的路由器上安装 NAT 软件。装有 NAT 软件的路由器叫做 NAT路由器，它至少有一个有效的外部全球地址 IPG。<br />
所有使用本地地址的主机在和外界通信时都要在 NAT 路由器上将其本地地址转换成 IPG 才能和因特网连接。</p>
<h3 id="网络地址转换的过程"><a class="markdownIt-Anchor" href="#网络地址转换的过程"></a> 网络地址转换的过程</h3>
<ul>
<li>内部主机 X 用本地地址 IPX 和因特网上主机 Y 通信所发送的数据报必须经过 NAT 路由器。</li>
<li>NAT 路由器将数据报的源地址 IPX 转换成全球地址 IPG，但目的地址 IPY 保持不变，然后发送到因特网。</li>
<li>NAT 路由器收到主机 Y 发回的数据报时，知道数据报中的源地址是 IPY 而目的地址是 IPG。</li>
<li>根据 NAT 转换表，NAT 路由器将目的地址 IPG 转换为 IPX，转发给最终的内部主机 X。</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>网络</tag>
        <tag>互联网</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 6. 关系查询处理和查询优化</title>
    <url>/2020/05/13/database_5/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>关系查询处理和查询优化
<ul>
<li>关系查询优化
<ul>
<li>查询优化概述
<ul>
<li>由DBMS进行查询优化的好处</li>
<li>查询优化目标</li>
<li>代价模型</li>
</ul>
</li>
<li>查询优化的一般准则</li>
<li>关系代数等价变换规则
<ul>
<li>连接、笛卡尔积交换律</li>
<li>连接、笛卡尔积的结合律</li>
<li>投影的串接定律</li>
<li>选择的串接定律</li>
<li>选择与投影的交换律</li>
<li>选择与笛卡尔积的交换律</li>
<li>选择与并的交换</li>
<li>选择与差运算的交换</li>
<li>投影与笛卡尔积的交换</li>
<li>投影与并的交换</li>
</ul>
</li>
<li>关系代数表达式的优化算法
<ul>
<li>详细流程</li>
</ul>
</li>
<li>优化的一般步骤
<ul>
<li>把查询转换成某种内部表示</li>
<li>代数优化</li>
<li>物理优化</li>
<li>生成查询计划</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200513104301.png" alt="" /></p>
<h1 id="关系查询优化"><a class="markdownIt-Anchor" href="#关系查询优化"></a> 关系查询优化</h1>
<h2 id="查询优化概述"><a class="markdownIt-Anchor" href="#查询优化概述"></a> 查询优化概述</h2>
<ul>
<li>查询优化的必要性
<ul>
<li>查询优化极大地影响RDBMS的性能。</li>
</ul>
</li>
<li>查询优化的可能性
<ul>
<li>关系数据语言的级别很高，使DBMS可以从关系表达式中分析查询语义。</li>
<li>级别越高，越接近自然语言。</li>
</ul>
</li>
</ul>
<h3 id="由dbms进行查询优化的好处"><a class="markdownIt-Anchor" href="#由dbms进行查询优化的好处"></a> 由DBMS进行查询优化的好处</h3>
<p>用户不必考虑如何最好地表达查询以获得较好的效率，<br />
系统可以比用户程序的优化做得更好。</p>
<ol>
<li>优化器可以从数据字典中获取许多统计信息，而用户程序则难以获得这些信息</li>
<li>如果数据库的物理统计信息改变了，系统可以自动对查询重新优化以选择相适应的执行计划。在非关系系统中必须重写程序，而重写程序在实际应用中往往是不太可能的。</li>
<li>优化器可以考虑数百种不同的执行计划，而程序员一般只能考虑有限的几种可能性。</li>
<li>优化器中包括了很多复杂的优化技术</li>
</ol>
<h3 id="查询优化目标"><a class="markdownIt-Anchor" href="#查询优化目标"></a> 查询优化目标</h3>
<ul>
<li>查询优化的总目标
<ul>
<li>选择有效策略，求得给定关系表达式的值</li>
</ul>
</li>
<li>实际系统的查询优化步骤
<ol>
<li>将查询转换成某种内部表示，通常是语法树</li>
<li>根据一定的等价变换规则把语法树转换成标准（优化）形式</li>
<li>选择低层的操作算法
<ul>
<li>对于语法树中的每一个操作
<ul>
<li>计算各种执行算法的执行代价</li>
<li>选择代价小的执行算法</li>
</ul>
</li>
</ul>
</li>
<li>生成查询计划(查询执行方案)
<ul>
<li>查询计划是由一系列内部操作组成的。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="代价模型"><a class="markdownIt-Anchor" href="#代价模型"></a> 代价模型</h3>
<ul>
<li>集中式数据库
<ul>
<li>单用户系统
<ul>
<li>总代价 = I/O代价 + CPU代价</li>
</ul>
</li>
<li>多用户系统
<ul>
<li>总代价 = I/O代价 + CPU代价 + 内存代价</li>
</ul>
</li>
</ul>
</li>
<li>分布式数据库
<ul>
<li>总代价 = I/O代价 + CPU代价[+ 内存代价] + 通信代价</li>
</ul>
</li>
</ul>
<h2 id="查询优化的一般准则"><a class="markdownIt-Anchor" href="#查询优化的一般准则"></a> 查询优化的一般准则</h2>
<ul>
<li>选择运算应尽可能先做
<ul>
<li>目的：减小中间关系</li>
</ul>
</li>
<li>在执行连接操作前对关系适当进行预处理
<ul>
<li>按连接属性排序</li>
<li>在连接属性上建立索引</li>
</ul>
</li>
<li>投影运算和选择运算同时做
<ul>
<li>目的：避免重复扫描关系</li>
</ul>
</li>
<li>将投影运算与其前面或后面的双目运算结合
<ul>
<li>目的：减少扫描关系的遍数</li>
</ul>
</li>
<li>某些选择运算＋在其前面执行的笛卡尔积</li>
<li>提取公共子表达式</li>
</ul>
<h2 id="关系代数等价变换规则"><a class="markdownIt-Anchor" href="#关系代数等价变换规则"></a> 关系代数等价变换规则</h2>
<ul>
<li>关系代数表达式等价
<ul>
<li>指用相同的关系代替两个表达式中相应的关系所得到的结果是相同的</li>
<li>上面的优化策略大部分都涉及到代数表达式的变换</li>
</ul>
</li>
</ul>
<hr />
<p>设E1、E2等是关系代数表达式，F是条件表达式</p>
<h3 id="连接-笛卡尔积交换律"><a class="markdownIt-Anchor" href="#连接-笛卡尔积交换律"></a> 连接、笛卡尔积交换律</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo>≡</mo><msub><mi>E</mi><mn>2</mn></msub><mo>×</mo><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1 \times E_2 \equiv E_2 \times E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub><mo>⋈</mo><msub><mi>E</mi><mn>2</mn></msub><mo>≡</mo><msub><mi>E</mi><mn>2</mn></msub><mo>⋈</mo><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1 \bowtie E_2 \equiv E_2 \bowtie E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub><munder><mo><mo>⋈</mo></mo><mi>F</mi></munder><msub><mi>E</mi><mn>2</mn></msub><mo>≡</mo><msub><mi>E</mi><mn>2</mn></msub><munder><mo><mo>⋈</mo></mo><mi>F</mi></munder><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1 \mathop{\bowtie}\limits_{F} E_2 \equiv E_2 \mathop{\bowtie}\limits_{F} E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.432661em;vertical-align:-0.749331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.432661em;vertical-align:-0.749331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<h3 id="连接-笛卡尔积的结合律"><a class="markdownIt-Anchor" href="#连接-笛卡尔积的结合律"></a> 连接、笛卡尔积的结合律</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mi>E</mi><mn>3</mn></msub><mo>≡</mo><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo>×</mo><msub><mi>E</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(E_1 \times E_2) \times E_3\equiv E_1 \times (E_2 \times  E_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>⋈</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>⋈</mo><msub><mi>E</mi><mn>3</mn></msub><mo>≡</mo><msub><mi>E</mi><mn>1</mn></msub><mo>⋈</mo><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo>⋈</mo><msub><mi>E</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(E_1 \bowtie E_2) \bowtie E_3\equiv E_1 \bowtie (E_2 \bowtie  E_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><munder><mo><mo>⋈</mo></mo><mi>F</mi></munder><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><munder><mo><mo>⋈</mo></mo><mi>F</mi></munder><msub><mi>E</mi><mn>3</mn></msub><mo>≡</mo><msub><mi>E</mi><mn>1</mn></msub><munder><mo><mo>⋈</mo></mo><mi>F</mi></munder><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><munder><mo><mo>⋈</mo></mo><mi>F</mi></munder><msub><mi>E</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(E_1 \mathop{\bowtie}\limits_{F} E_2) \mathop{\bowtie}\limits_{F} E_3\equiv E_1 \mathop{\bowtie}\limits_{F} (E_2 \mathop{\bowtie}\limits_{F}  E_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.499331em;vertical-align:-0.749331em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.499331em;vertical-align:-0.749331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<h3 id="投影的串接定律"><a class="markdownIt-Anchor" href="#投影的串接定律"></a> 投影的串接定律</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(\mathop{\Pi}_{B_1,B_2,\cdots,B_n}(E))\equiv\mathop{\Pi}_{A_1,A_2,\cdots,A_n}(E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></p>
<ul>
<li>假设：</li>
<li>E是关系代数表达式</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>B</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>j</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_i(i=1,2,…,n), B_j(j=1,2,…,m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span>是属性名</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{A_1, A_2, \cdots, A_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>构成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>m</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{B_1,B_2,\cdots,B_m\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>的子集</li>
</ul>
<h3 id="选择的串接定律"><a class="markdownIt-Anchor" href="#选择的串接定律"></a> 选择的串接定律</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><msub><mi>F</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><msub><mi>F</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><mrow><msub><mi>F</mi><mn>1</mn></msub><mo>∧</mo><msub><mi>F</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">\sigma_{F_1}(\sigma_{F_2}(E))\equiv \sigma_{F_1\wedge F_2(E)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7857599999999999em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">∧</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>选择的串接律说明选择条件可以合并</li>
<li>这样一次就可检查全部条件。</li>
</ul>
<h3 id="选择与投影的交换律"><a class="markdownIt-Anchor" href="#选择与投影的交换律"></a> 选择与投影的交换律</h3>
<ul>
<li>假设: 选择条件F只涉及属性<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A_1,A_2,\cdots ,A_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{F}(\mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(E))\equiv \mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(\sigma_{F}(E))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
<li>假设: F中有不属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A_1,A_2,\cdots ,A_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的属性<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">B_1,B_2,\cdots,B_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≡</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>m</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(\sigma_{F}(E)) \equiv \mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(\sigma_{F}(\mathop{\Pi}_{A_1,A_2,\cdots ,A_n,B_1,B_2,\cdots,B_m}(E)))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="选择与笛卡尔积的交换律"><a class="markdownIt-Anchor" href="#选择与笛卡尔积的交换律"></a> 选择与笛卡尔积的交换律</h3>
<ul>
<li>假设：F中涉及的属性都是E1中的属性<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\sigma_F(E_1 \times E_2)\equiv \sigma_F(E_1)\times E_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>假设：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><msub><mi>F</mi><mn>1</mn></msub><mo>∧</mo><msub><mi>F</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">F=F_1 \wedge F_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，并且F1只涉及E1中的属性，F2只涉及E2中的属性，则由上面的等价变换规则1,4,6可推出：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><msub><mi>F</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mi>σ</mi><msub><mi>F</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_F(E_1 \times E_2)\equiv \sigma_{F_1}(E_1)\times \sigma_{F_2}(E_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
<li>假设： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><msub><mi>F</mi><mn>1</mn></msub><mo>∧</mo><msub><mi>F</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">F=F_1 \wedge F_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>， F1只涉及E1中的属性，F2涉及E1和E2两者的属性<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><msub><mi>F</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><msub><mi>F</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_F(E_1 \times E_2)\equiv \sigma_{F_2}(\sigma_{F_1}(E_1)\times E_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>
<ul>
<li>它使部分选择在笛卡尔积前先做</li>
</ul>
</li>
</ul>
<h3 id="选择与并的交换"><a class="markdownIt-Anchor" href="#选择与并的交换"></a> 选择与并的交换</h3>
<ul>
<li>假设：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>=</mo><msub><mi>E</mi><mn>1</mn></msub><mo>∪</mo><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">E=E_1 \cup E_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，E1，E2有相同的属性名<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>∪</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>∪</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_F(E_1 \cup E_2) \equiv \sigma_F(E_1) \cup  \sigma_F(E_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="选择与差运算的交换"><a class="markdownIt-Anchor" href="#选择与差运算的交换"></a> 选择与差运算的交换</h3>
<ul>
<li>假设：E1与E2有相同的属性名<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>−</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>−</mo><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_F(E_1 - E_2) \equiv \sigma_F(E_1) -  \sigma_F(E_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="投影与笛卡尔积的交换"><a class="markdownIt-Anchor" href="#投影与笛卡尔积的交换"></a> 投影与笛卡尔积的交换</h3>
<ul>
<li>假设：E1和E2是两个关系表达式，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A_1,A_2,\cdots ,A_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是E1的属性，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">B_1,B_2,\cdots,B_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是E2的属性<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>m</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>×</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>B</mi><mi>m</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathop{\Pi}_{A_1,A_2,\cdots ,A_n,B_1,B_2,\cdots,B_m}(E_1 \times E_2)\equiv \mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(E_1) \times \mathop{\Pi}_{B_1,B_2,\cdots,B_m}(E_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="投影与并的交换"><a class="markdownIt-Anchor" href="#投影与并的交换"></a> 投影与并的交换</h3>
<ul>
<li>假设：E1和E2 有相同的属性名<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo>∪</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>≡</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>∪</mo><msub><mo><mi mathvariant="normal">Π</mi></mo><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><msub><mi>E</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(E_1 \cup E_2)\equiv \mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(E_1) \cup \mathop{\Pi}_{A_1,A_2,\cdots ,A_n}(E_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mop"><span class="mop" style="position:relative;top:0.091665em;">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
<hr />
<table>
<thead>
<tr>
<th>序号</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>1-2</td>
<td><strong>连接、笛卡尔积</strong>的交换律、结合律</td>
</tr>
<tr>
<td>3</td>
<td>合并或分解<strong>投影</strong>运算</td>
</tr>
<tr>
<td>4</td>
<td>合并或分解<strong>选择</strong>运算</td>
</tr>
<tr>
<td>5-8</td>
<td>选择运算与其他运算交换</td>
</tr>
<tr>
<td>5,9,10</td>
<td>投影运算与其他运算交换</td>
</tr>
</tbody>
</table>
<h2 id="关系代数表达式的优化算法"><a class="markdownIt-Anchor" href="#关系代数表达式的优化算法"></a> 关系代数表达式的优化算法</h2>
<ul>
<li>算法：关系表达式的优化</li>
<li>输入：一个关系表达式的语法树。</li>
<li>输出：计算该表达式的程序。</li>
</ul>
<h3 id="详细流程"><a class="markdownIt-Anchor" href="#详细流程"></a> 详细流程</h3>
<ul>
<li>分解选择运算</li>
<li>交换选择运算，将其尽可能移到叶端
<ul>
<li>对每一个选择，利用规则4～8尽可能把它移到树的叶端。</li>
</ul>
</li>
<li>交换投影运算，将其尽可能移到叶端
<ul>
<li>对每一个投影利用规则3，9，10，5中的一般形式尽可能把它移向树的叶端。</li>
</ul>
</li>
<li>合并串接的选择和投影，以便能同时执行或在一次扫描中完成
<ul>
<li>利用规则3～5把选择和投影的串接合并成单个选择、单个投影或一个选择后跟一个投影。</li>
<li>使多个选择或投影能同时执行，或在一次扫描中全部完成</li>
<li>尽管这种变换似乎违背“投影尽可能早做”的原则，但这样做效率更高。</li>
</ul>
</li>
<li>对内结点分组
<ul>
<li>把上述得到的语法树的内节点分组。</li>
<li>每一双目运算和它所有的直接祖先为一组(这些直接祖先是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>σ</mi><mo separator="true">,</mo><mi mathvariant="normal">Π</mi></mrow><annotation encoding="application/x-tex">\sigma,\Pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Π</span></span></span></span>运算)。</li>
<li>如果其后代直到叶子全是单目运算，则也将它们并入该组，但当双目运算是笛卡尔积(×)，而且其后的选择不能与它结合为等值连接时除外。把这些单目运算单独分为一组。</li>
</ul>
</li>
<li>生成程序
<ul>
<li>生成一个程序，每组结点的计算是程序中的一步。</li>
<li>各步的顺序是任意的，只要保证任何一组的计算不会在它的后代组之前计算。</li>
</ul>
</li>
</ul>
<h2 id="优化的一般步骤"><a class="markdownIt-Anchor" href="#优化的一般步骤"></a> 优化的一般步骤</h2>
<ol>
<li>把查询转换成某种内部表示</li>
<li>代数优化：把语法树转换成标准（优化）形式</li>
<li>物理优化：选择低层的存取路径</li>
<li>生成查询计划，选择代价最小的</li>
</ol>
<h3 id="把查询转换成某种内部表示"><a class="markdownIt-Anchor" href="#把查询转换成某种内部表示"></a> 把查询转换成某种内部表示</h3>
<p><strong>例：求选修了课程C2的学生姓名</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.Sname</span><br><span class="line"><span class="keyword">FROM</span>    Student, SC</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno=SC.Sno</span><br><span class="line"><span class="keyword">AND</span>     SC.Cno=<span class="string">'2'</span>;</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200513113528.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200513113543.png" alt="" /></p>
<h3 id="代数优化"><a class="markdownIt-Anchor" href="#代数优化"></a> 代数优化</h3>
<p>利用优化算法把语法树转换成标准（优化）形式。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200513113617.png" alt="" /></p>
<h3 id="物理优化"><a class="markdownIt-Anchor" href="#物理优化"></a> 物理优化</h3>
<ul>
<li>优化器查找数据字典获得当前数据库状态信息
<ul>
<li>选择字段上是否有索引</li>
<li>连接的两个表是否有序</li>
<li>连接字段上是否有索引</li>
</ul>
</li>
<li>然后根据一定的优化规则选择存取路径
<ul>
<li>如本例中若SC表上建有Cno的索引，则应该利用这个索引，而不必顺序扫描SC表。</li>
</ul>
</li>
</ul>
<h3 id="生成查询计划"><a class="markdownIt-Anchor" href="#生成查询计划"></a> 生成查询计划</h3>
<ul>
<li>在作连接运算时，若两个表(设为R1，R2)均无序，连接属性上也没有索引，则可以有下面几种查询计划：
<ul>
<li>对两个表作排序预处理</li>
<li>对R1在连接属性上建索引</li>
<li>对R2在连接属性上建索引</li>
<li>在R1，R2的连接属性上均建索引</li>
</ul>
</li>
<li>对不同的查询计划计算代价，选择代价最小的一个。</li>
<li>在计算代价时主要考虑磁盘读写的I/O数，内存CPU处理时间在粗略计算时可不考虑。</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 5. 数据库完整性</title>
    <url>/2020/05/13/database_4/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>数据库完整性
<ul>
<li>完整性约束条件
<ul>
<li>完整性约束条件作用的对象</li>
</ul>
</li>
<li>完整性控制
<ul>
<li>DBMS的完整性控制机制
<ul>
<li>定义功能</li>
<li>检查功能</li>
<li>违约反应</li>
<li>完整性规则</li>
</ul>
</li>
<li>关系系统三类完整性的实现</li>
<li>参照完整性的实现</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>
<p>什么是数据库的完整性</p>
<ul>
<li><strong>指数据的正确性和相容性</strong></li>
<li>防止不符合语义的数据进入数据库。</li>
</ul>
</li>
<li>
<p>例:  学生的年龄必须是整数，取值范围为14~29；</p>
<ul>
<li>学生的性别只能是男或女；</li>
<li>学生的学号一定是唯一的；</li>
<li>学生所在的系必须是学校开设的系；</li>
</ul>
</li>
<li>
<p>完整性：是否真实地反映现实世界</p>
</li>
</ul>
<ol>
<li>完整性约束条件定义机制
<ul>
<li>数据模型的组成部分约束数据库中数据的语义</li>
<li>DBMS应提供定义数据库完整性约束条件，并把它们作为模式的一部分存入数据库中</li>
</ul>
</li>
<li>完整性检查机制<br />
检查用户发出的操作请求是否违背了完整性约束条件</li>
<li>违约反应</li>
</ol>
<h1 id="完整性约束条件"><a class="markdownIt-Anchor" href="#完整性约束条件"></a> 完整性约束条件</h1>
<h2 id="完整性约束条件作用的对象"><a class="markdownIt-Anchor" href="#完整性约束条件作用的对象"></a> 完整性约束条件作用的对象</h2>
<ul>
<li>列：对属性的取值类型、范围、精度等的约束条件</li>
<li>元组：对元组中各个属性列间的联系的约束</li>
<li>关系：对若干元组间、关系集合上以及关系之间的联系的约束</li>
</ul>
<hr />
<ul>
<li>静态
<ul>
<li>对静态对象的约束是反映数据库状态合理性的约束</li>
</ul>
</li>
<li>动态
<ul>
<li>对动态对象的约束是反映数据库状态变迁的约束</li>
</ul>
</li>
</ul>
<h1 id="完整性控制"><a class="markdownIt-Anchor" href="#完整性控制"></a> 完整性控制</h1>
<h2 id="dbms的完整性控制机制"><a class="markdownIt-Anchor" href="#dbms的完整性控制机制"></a> DBMS的完整性控制机制</h2>
<h3 id="定义功能"><a class="markdownIt-Anchor" href="#定义功能"></a> 定义功能</h3>
<p>一个完善的完整性控制机制应该允许用户定义各类完整性约束条件。</p>
<h3 id="检查功能"><a class="markdownIt-Anchor" href="#检查功能"></a> 检查功能</h3>
<ul>
<li>立即执行的约束(Immediate constraints)语句执行完后立即检查是否违背完整性约束</li>
<li>延迟执行的约束(Deferred constrainsts)完整性检查延迟到整个事务执行结束后进行</li>
</ul>
<h3 id="违约反应"><a class="markdownIt-Anchor" href="#违约反应"></a> 违约反应</h3>
<ul>
<li>拒绝该操作</li>
<li>其他处理方法</li>
</ul>
<h3 id="完整性规则"><a class="markdownIt-Anchor" href="#完整性规则"></a> 完整性规则</h3>
<ul>
<li>完整性规则五元组表示:
<ul>
<li>(D，O，A，C，P)</li>
</ul>
</li>
<li>D（Data） 约束作用的数据对象；</li>
<li>O（Operation） 触发完整性检查的数据库操作；
<ul>
<li>当用户发出什么操作请求时需要检查该完整性规则</li>
<li>是立即检查还是延迟检查；</li>
</ul>
</li>
<li>A（Assertion） 数据对象必须满足的断言或语义约束这是规则的主体；</li>
<li>C（Condition） 选择A作用的数据对象值的谓词；</li>
<li>P（Procedure） 违反完整性规则时触发的过程。</li>
</ul>
<h2 id="关系系统三类完整性的实现"><a class="markdownIt-Anchor" href="#关系系统三类完整性的实现"></a> 关系系统三类完整性的实现</h2>
<ul>
<li>关系数据库系统都提供了定义和检查<strong>实体完整性、参照完整性和用户定义的完整性</strong>的功能</li>
<li>违反实体完整性规则和用户定义的完整性规则的操作：
<ul>
<li>一般是拒绝执行</li>
</ul>
</li>
<li>违反参照完整性的操作：
<ul>
<li>拒绝执行</li>
<li>接受这个操作，同时执行一些附加的操作，以保证数据库的状态正确</li>
</ul>
</li>
</ul>
<h2 id="参照完整性的实现"><a class="markdownIt-Anchor" href="#参照完整性的实现"></a> 参照完整性的实现</h2>
<ul>
<li>参照完整性指的是什么？
<ul>
<li>可以防止数据丢失或者无意义的数据；</li>
<li>可以禁止在从表中插入被参照表中不存在的关键字的记录。</li>
</ul>
</li>
<li>参照完整性的常见实现机制包括：
<ul>
<li>外键（Foreign Key）、触发器（Trigger）；</li>
</ul>
</li>
<li>外码
<ul>
<li>设F是基本关系R的一个或一组属性， 但不是关系R的码。如果F与基本关系S的主码Ks相对应，则称F是基本关系R的外码（Foreign Key）</li>
<li>基本关系R称为<strong>参照关系</strong>（Referencing Relation）</li>
<li>基本关系S称为<strong>被参照关系</strong>（Referenced Relation）或目标关系（Target Relation）</li>
</ul>
</li>
<li>若属性（或属性组）F是基本关系R的外码，它与基本关系S的主码Ks相对应（基本关系R和S不一定是不同的关系），则对于R中每个元组在F上的值必须为：
<ul>
<li>或者取空值（F的每个属性值均为空值）</li>
<li>或者等于S中某个元组的主码值。</li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200513102212.png" alt="" /></p>
<hr />
<blockquote>
<p><strong>例:职工－部门数据库包含职工表EMP和部门表DEPT</strong><br />
DEPT关系的主码为部门号Deptno；<br />
EMP关系的主码为职工号Empno, 外码为部门号Deptno；<br />
称DEPT为被参照关系或目标关系，EMP为参照关系。</p>
</blockquote>
<hr />
<ul>
<li>RDBMS实现参照完整性时需要考虑以下4方面：</li>
<li>违约操作
<ul>
<li>要<strong>修改被参照关系</strong>中某些元组的主码值，而参照关系中有些元组的外码值正好等于被参照关系要修改的主码值</li>
<li>要<strong>修改参照关系</strong>中某些元组的主码值，而被参照关系中没有任何元组的外码值等于被参照关系修改后的主码值</li>
</ul>
</li>
<li>违约反应
<ul>
<li>修改的关系是被参照关系：与删除类似
<ul>
<li>级联修改<code>ON UPDATE CASCADE</code>
<ul>
<li>修改被参照关系中主码值同时，用相同的方法修改参照关系中相应的外码值。</li>
</ul>
</li>
<li>受限修改<code>ON UPDATE NO ACTION</code>
<ul>
<li>拒绝此修改操作。只当参照关系中没有任何元组的外码值等于被参照关系中某个元组的主码值时，这个元组的主码值才能被修改。</li>
</ul>
</li>
<li>置空值修改<code>ON UPDATE SET NULL</code>
<ul>
<li>修改被参照关系中主码值，同时将参照关系中相应的外码值置为空值。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>需要向用户提供定义主码、外码的机制</li>
<li>向用户提供按照自己的应用要求选择处理依赖关系中对应的元组的方法</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL | 1. 数据库的创建</title>
    <url>/2020/05/13/mysql_1/</url>
    <content><![CDATA[<h1 id="任务内容"><a class="markdownIt-Anchor" href="#任务内容"></a> 任务内容</h1>
<ol>
<li>创建一个数据库</li>
<li>创建对应的数据库对象</li>
<li>以学生、课程、选课关系构成的数据库为例
<ol>
<li>运用SQL语言创建数据库S-C</li>
<li>运用SQL语言创建S-C中的关系</li>
<li>运用SQL语言完成关系各属性定义，及主码、外码的定义</li>
</ol>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Student(Sno,Sname,Ssex,Sage,Sdept)</span><br><span class="line">Course(Cno,Cname,Ccredit,Cpno)</span><br><span class="line">SC(Sno,Cno,Grade)</span><br></pre></td></tr></table></figure>
<hr />
<h1 id="创建一个数据库"><a class="markdownIt-Anchor" href="#创建一个数据库"></a> 创建一个数据库</h1>
<h2 id="显示数据库列表"><a class="markdownIt-Anchor" href="#显示数据库列表"></a> 显示数据库列表</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>
<p>使用这个语句可以看已有的数据库列表。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427231946.png" alt="" /></p>
<h2 id="创建数据库"><a class="markdownIt-Anchor" href="#创建数据库"></a> 创建数据库</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database databasename;</span><br></pre></td></tr></table></figure>
<p>使用这个语句创建一个新的数据库。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427232110.png" alt="" /></p>
<p>然后用<code>show databases;</code>可以看到这个新创建的数据库。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427232312.png" alt="" /></p>
<h2 id="指定数据库"><a class="markdownIt-Anchor" href="#指定数据库"></a> 指定数据库</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">use databasename;</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427232513.png" alt="" /></p>
<h2 id="创建基本表"><a class="markdownIt-Anchor" href="#创建基本表"></a> 创建基本表</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;表名&gt;</span><br><span class="line">(&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt; ]</span><br><span class="line">      [,&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt;] ] …      [,&lt;表级完整性约束条件&gt; ]);</span><br></pre></td></tr></table></figure>
<p>根据要求：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Student(Sno，Sname，Ssex，Sage，Sdept)</span><br><span class="line">Course(Cno，Cname，Ccredit，Cpno)</span><br><span class="line">SC(Sno，Cno，Grade)</span><br></pre></td></tr></table></figure>
<p>设计的SQL语句为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table student</span><br><span class="line">(</span><br><span class="line">    Sno    varchar(20) not null UNIQUE,</span><br><span class="line">    Sname  varchar(20),</span><br><span class="line">    Ssex   varchar(10),</span><br><span class="line">    Sage   int,</span><br><span class="line">    Sdept  varchar(100),</span><br><span class="line">    PRIMARY KEY(Sno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table course</span><br><span class="line">(</span><br><span class="line">    Cno       varchar(20) not null UNIQUE,</span><br><span class="line">    Cname     varchar(20),</span><br><span class="line">    Ccredit   int,</span><br><span class="line">    Cpno      varchar(10),</span><br><span class="line">    PRIMARY KEY(Cno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table sc</span><br><span class="line">(</span><br><span class="line">    Sno     varchar(20),</span><br><span class="line">    Cno     varchar(20),</span><br><span class="line">    Grade   int,</span><br><span class="line">    FOREIGN KEY(&#96;Sno&#96;) references student(&#96;Sno&#96;),</span><br><span class="line">    FOREIGN KEY(&#96;Cno&#96;) references course(&#96;Cno&#96;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="查看基本表结构"><a class="markdownIt-Anchor" href="#查看基本表结构"></a> 查看基本表结构</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">desc databasename;</span><br></pre></td></tr></table></figure>
<p>使用这个语句可以查看基本表的结构。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427233617.png" alt="" /></p>
<hr />
<h1 id="一点吐槽"><a class="markdownIt-Anchor" href="#一点吐槽"></a> 一点吐槽</h1>
<p>在建立外键的那个部分磨蹭了我半个小时多，查阅各种资料无果。<br />
最后才发现<code>Linux</code>下的MySQL是区分<strong>表名</strong>的大小写的！</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/664a90c0f91a4fd468d63f66a12b2bf3_1-1P224050129-50.jpg" alt="" /></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
        <tag>SQL</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 4. 数据库安全性</title>
    <url>/2020/05/13/database_3/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>数据库安全性
<ul>
<li>计算机安全性概论
<ul>
<li>计算机安全涉及问题</li>
<li>计算机系统的三类安全性问题</li>
<li>可信计算机系统评测标准
<ul>
<li>TDI/TCSEC标准的基本内容
<ul>
<li>R1 安全策略（Security Policy）</li>
<li>R2 责任（Accountability）</li>
<li>R3 保证（Assurance）</li>
<li>R4 文档（Documentation）</li>
</ul>
</li>
<li>TCSEC/TDI安全级别划分</li>
</ul>
</li>
</ul>
</li>
<li>数据库安全性控制
<ul>
<li>数据库安全性控制概述
<ul>
<li>非法使用数据库的情况</li>
<li>数据库安全性控制的常用方法</li>
</ul>
</li>
<li>用户标识与鉴别
<ul>
<li>基本方法
<ul>
<li>用户标识自己的名字或身份</li>
</ul>
</li>
</ul>
</li>
<li>存取控制
<ul>
<li>存取控制机制的功能</li>
<li>常用存取控制方法
<ul>
<li>自主存取控制</li>
<li>强制存取控制方法</li>
</ul>
</li>
</ul>
</li>
<li>自主存取控制方法
<ul>
<li>检查存取权限</li>
<li>授权粒度</li>
<li>优缺点</li>
</ul>
</li>
<li>强制存取控制方法
<ul>
<li>主体与客体</li>
<li>敏感度标记</li>
<li>强制存取控制规则
<ul>
<li>强制存取控制的特点</li>
</ul>
</li>
</ul>
</li>
<li>授权与回收
<ul>
<li>安全性</li>
<li>完整性</li>
<li>并发控制</li>
<li>恢复</li>
<li>GRANT
<ul>
<li>操作权限</li>
<li>用户的权限</li>
<li>WITH GRANT OPTION子句</li>
</ul>
</li>
<li>REVOKE</li>
<li>SQL灵活的授权机制</li>
<li>数据库角色</li>
</ul>
</li>
<li>视图机制</li>
<li>审计
<ul>
<li>什么是审计</li>
<li>审计功能的可选性</li>
<li>强制性机制</li>
<li>预防监测手段</li>
</ul>
</li>
<li>数据加密
<ul>
<li>加密方法</li>
<li>DBMS中的数据加密</li>
</ul>
</li>
</ul>
</li>
<li>统计数据库安全性
<ul>
<li>统计数据库的特点</li>
<li>统计数据库中特殊的安全性问题</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<div class="note warning">
            <ul><li>数据库的一大特点是数据可以<strong>共享</strong><ul><li>数据库中数据的共享是在DBMS统一的严格的控制之下的共享，即只允许有合法使用<strong>权限</strong>的用户访问<strong>允许他存取</strong>的数据</li></ul></li><li>但数据共享必然带来数据库的安全性问题</li><li>数据库系统中的数据共享不能是无条件的共享</li></ul><blockquote><p>例：军事秘密、国家机密、新产品实验数据、市场需求分析、市场营销策略、销售计划、 客户档案、医疗档案、银行储蓄数据</p></blockquote><ul><li>什么是数据库的安全性<ul><li>数据库的安全性是指<strong>保护数据库，防止因用户非法使用数据库造成数据泄露、更改或破坏</strong>。</li></ul></li><li>什么是数据的保密<ul><li>数据保密是指用户合法地访问到机密数据后能否对这些数据保密。</li><li>通过制订法律道德准则和政策法规来保证。</li></ul></li><li>数据库系统的安全保护措施是否有效是数据库系统主要的性能指标之一</li></ul>
          </div>
<h1 id="计算机安全性概论"><a class="markdownIt-Anchor" href="#计算机安全性概论"></a> 计算机安全性概论</h1>
<h2 id="计算机安全涉及问题"><a class="markdownIt-Anchor" href="#计算机安全涉及问题"></a> 计算机安全涉及问题</h2>
<ul>
<li><strong>计算机系统本身的技术问题</strong>
<ul>
<li>计算机安全理论与策略，计算机安全技术</li>
</ul>
</li>
<li><strong>管理问题</strong>
<ul>
<li>安全管理，安全评价，安全产品</li>
</ul>
</li>
<li><strong>法学</strong>
<ul>
<li>计算机安全法律</li>
</ul>
</li>
<li><strong>犯罪学</strong>
<ul>
<li>计算机犯罪与侦察，安全监察</li>
</ul>
</li>
<li><strong>心理学</strong></li>
</ul>
<h2 id="计算机系统的三类安全性问题"><a class="markdownIt-Anchor" href="#计算机系统的三类安全性问题"></a> 计算机系统的三类安全性问题</h2>
<p>为计算机系统建立和采取的各种安全保护措施，以保护计算机系统中的<strong>硬件、软件及数据</strong>，防止其因偶然或恶意的原因使系统遭到破坏，数据遭到更改或泄露等。</p>
<ul>
<li><strong>技术安全类</strong>
<ul>
<li>指计算机系统中采用具有一定安全性的硬件、软件来实现对计算机系统及其所存数据的安全保护</li>
</ul>
</li>
<li><strong>管理安全类</strong>
<ul>
<li>软硬件意外故障、场地的意外事故、管理不善导致的</li>
</ul>
</li>
<li><strong>政策法律类</strong>
<ul>
<li>有关计算机犯罪、数据安全保密的法律道德准则和政策法规、法令</li>
</ul>
</li>
</ul>
<h2 id="可信计算机系统评测标准"><a class="markdownIt-Anchor" href="#可信计算机系统评测标准"></a> 可信计算机系统评测标准</h2>
<ul>
<li>为降低进而消除对系统的安全攻击，各国引用或制定了一系列安全标准</li>
<li>TCSEC，桔皮书
<ul>
<li>《 DoD可信计算机系统评估标准》</li>
<li>1985年，美国国防部DoD</li>
</ul>
</li>
<li>TDI ，紫皮书
<ul>
<li>《可信计算机系统评估标准关于可信数据库系统的解释》</li>
<li>1991年，美国国家计算机安全中心NCSC</li>
</ul>
</li>
<li>CC V2.1
<ul>
<li>1999年ISO采用为国际标准</li>
<li>2001年我国采用为国家标准</li>
<li>取代TCSEC</li>
</ul>
</li>
</ul>
<h3 id="tditcsec标准的基本内容"><a class="markdownIt-Anchor" href="#tditcsec标准的基本内容"></a> TDI/TCSEC标准的基本内容</h3>
<ul>
<li>TDI与TCSEC一样，从四个方面来描述安全性级别划分的指标
<ul>
<li>安全策略</li>
<li>责任</li>
<li>保证</li>
<li>文档</li>
</ul>
</li>
</ul>
<h4 id="r1-安全策略security-policy"><a class="markdownIt-Anchor" href="#r1-安全策略security-policy"></a> R1 安全策略（Security Policy）</h4>
<ul>
<li>R1.1 自主存取控制 （Discretionary Access Control， 简记为DAC）</li>
<li>R1.2 客体重用（Object Reuse）</li>
<li>R1.3 标记（Labels）</li>
<li>R1.4 强制存取控制（Mandatory Access Control，简记为MAC）</li>
</ul>
<h4 id="r2-责任accountability"><a class="markdownIt-Anchor" href="#r2-责任accountability"></a> R2 责任（Accountability）</h4>
<ul>
<li>R2.1 标识与鉴别（Identification &amp; Authentication）</li>
<li>R2.2 审计（Audit）</li>
</ul>
<h4 id="r3-保证assurance"><a class="markdownIt-Anchor" href="#r3-保证assurance"></a> R3 保证（Assurance）</h4>
<ul>
<li>R3.1 操作保证（Operational Assurance）</li>
<li>R3.2 生命周期保证（Life Cycle Assurance）</li>
</ul>
<h4 id="r4-文档documentation"><a class="markdownIt-Anchor" href="#r4-文档documentation"></a> R4 文档（Documentation）</h4>
<ul>
<li>R4.1 安全特性用户指南（Security Features User’s Guide）</li>
<li>R4.2 可信设施手册（Trusted Facility Manual）</li>
<li>R4.3 测试文档（Test Documentation）</li>
<li>R4.4 设计文档（Design Documentation）</li>
</ul>
<h3 id="tcsectdi安全级别划分"><a class="markdownIt-Anchor" href="#tcsectdi安全级别划分"></a> TCSEC/TDI安全级别划分</h3>
<table>
<thead>
<tr>
<th style="text-align:center">安全级别</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A1</td>
<td>验证设计（Verified Design）</td>
</tr>
<tr>
<td style="text-align:center">B3</td>
<td>安全域（Security Domains）</td>
</tr>
<tr>
<td style="text-align:center">B2</td>
<td>结构化保护（Structural Protection）</td>
</tr>
<tr>
<td style="text-align:center">B1</td>
<td>标记安全保护（Labeled Security Protection）</td>
</tr>
<tr>
<td style="text-align:center">C2</td>
<td>受控的存取保护（Controlled Access Protection）</td>
</tr>
<tr>
<td style="text-align:center">C1</td>
<td>自主安全保护（Discretionary Security Protection）</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td>最小保护（Minimal Protection）</td>
</tr>
</tbody>
</table>
<ul>
<li>四组(division)七个等级</li>
<li>D</li>
<li>C（C1，C2）</li>
<li>B（B1，B2，B3）</li>
<li>A（A1）</li>
<li>按系统可靠或可信程度逐渐增高</li>
<li>各安全级别之间具有一种偏序向下兼容的关系，即较高安全性级别提供的安全保护要包含较低级别的所有保护要求，同时提供更多或更完善的保护能力。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200507201842.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200507202024.png" alt="" /></li>
</ul>
<h1 id="数据库安全性控制"><a class="markdownIt-Anchor" href="#数据库安全性控制"></a> 数据库安全性控制</h1>
<h2 id="数据库安全性控制概述"><a class="markdownIt-Anchor" href="#数据库安全性控制概述"></a> 数据库安全性控制概述</h2>
<h3 id="非法使用数据库的情况"><a class="markdownIt-Anchor" href="#非法使用数据库的情况"></a> 非法使用数据库的情况</h3>
<ul>
<li>用户编写一段合法的程序绕过DBMS及其授权机制，通过操作系统直接存取、修改或备份数据库中的数据；</li>
<li>直接或编写应用程序执行非授权操作；</li>
<li>通过多次合法查询数据库从中推导出一些保密数据
<ul>
<li>例：某数据库应用系统禁止查询单个人的工资，但允许查任意一组人的平均工资。用户甲想了解张三的工资，于是他：
<ul>
<li>首先查询包括张三在内的一组人的平均工资</li>
<li>然后查用自己替换张三后这组人的平均工资</li>
<li>从而推导出张三的工资</li>
</ul>
</li>
</ul>
</li>
<li>破坏安全性的行为可能是无意的，故意的，恶意的。</li>
</ul>
<h3 id="数据库安全性控制的常用方法"><a class="markdownIt-Anchor" href="#数据库安全性控制的常用方法"></a> 数据库安全性控制的常用方法</h3>
<ul>
<li>用户标识和鉴定</li>
<li>存取控制</li>
<li>视图</li>
<li>审计</li>
<li>密码存储</li>
</ul>
<h2 id="用户标识与鉴别"><a class="markdownIt-Anchor" href="#用户标识与鉴别"></a> 用户标识与鉴别</h2>
<p>系统提供的最外层安全保护措施。</p>
<h3 id="基本方法"><a class="markdownIt-Anchor" href="#基本方法"></a> 基本方法</h3>
<ul>
<li>系统提供一定的方式让用户标识自己的名字或身份；</li>
<li>系统内部记录着所有合法用户的标识；</li>
<li>每次用户要求进入系统时，由系统核对用户提供的身份标识；</li>
<li>通过鉴定后才提供机器使用权。</li>
<li>用户标识和鉴定可以重复多次</li>
</ul>
<h4 id="用户标识自己的名字或身份"><a class="markdownIt-Anchor" href="#用户标识自己的名字或身份"></a> 用户标识自己的名字或身份</h4>
<ul>
<li>用户名/口令
<ul>
<li>简单易行，容易被人窃取</li>
</ul>
</li>
<li>每个用户预先约定好一个<strong>计算过程</strong>或者<strong>函数</strong>
<ul>
<li>系统提供一个随机数</li>
<li>用户根据自己预先约定的计算过程或者函数进行计算</li>
<li>系统根据用户计算结果是否正确鉴定用户身份</li>
</ul>
</li>
</ul>
<h2 id="存取控制"><a class="markdownIt-Anchor" href="#存取控制"></a> 存取控制</h2>
<h3 id="存取控制机制的功能"><a class="markdownIt-Anchor" href="#存取控制机制的功能"></a> 存取控制机制的功能</h3>
<ul>
<li>存取控制机制的组成
<ul>
<li><strong>定义存取权限</strong>：在数据库系统中，为了保证用户只能访问他有权存取的数据，必须预先对每个用户定义存取权限。</li>
<li><strong>检查存取权限</strong>：对于通过鉴定获得上机权的用户（即合法用户），系统根据他的存取权限定义对他的各种操作请求进行控制，确保他只执行合法操作。</li>
</ul>
</li>
<li>用户权限定义和合法权检查机制一起组成了DBMS的安全子系统</li>
</ul>
<h3 id="常用存取控制方法"><a class="markdownIt-Anchor" href="#常用存取控制方法"></a> 常用存取控制方法</h3>
<ul>
<li>自主存取控制（Discretionary Access Control，简称DAC）
<ul>
<li>C2级</li>
<li>灵活</li>
</ul>
</li>
<li>强制存取控制（Mandatory Access Control，简称 MAC）
<ul>
<li>B1级</li>
<li>严格</li>
</ul>
</li>
</ul>
<h4 id="自主存取控制"><a class="markdownIt-Anchor" href="#自主存取控制"></a> 自主存取控制</h4>
<ul>
<li>同一用户对于不同的数据对象有不同的存取权限</li>
<li>不同的用户对同一对象也有不同的权限</li>
<li>用户还可将其拥有的存取权限转授给其他用户</li>
</ul>
<h4 id="强制存取控制方法"><a class="markdownIt-Anchor" href="#强制存取控制方法"></a> 强制存取控制方法</h4>
<ul>
<li>每一个数据对象被标以一定的密级</li>
<li>每一个用户也被授予某一个级别的许可证</li>
<li>对于任意一个对象，只有具有合法许可证的用户才可以存取</li>
</ul>
<h2 id="自主存取控制方法"><a class="markdownIt-Anchor" href="#自主存取控制方法"></a> 自主存取控制方法</h2>
<ul>
<li>存取权限由两个要素组成
<ul>
<li>数据对象</li>
<li>操作类型</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>用户名</th>
<th>数据对象名</th>
<th>允许的操作类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>王  平</td>
<td>关系Student</td>
<td>SELECT</td>
</tr>
<tr>
<td>张明霞</td>
<td>关系Student</td>
<td>UPDATE</td>
</tr>
<tr>
<td>张明霞</td>
<td>关系Course</td>
<td>ALL</td>
</tr>
<tr>
<td>张明霞</td>
<td>SC. Grade</td>
<td>UPDATE</td>
</tr>
<tr>
<td>张明霞</td>
<td>SC. Sno</td>
<td>SELECT</td>
</tr>
<tr>
<td>张明霞</td>
<td>SC. Cno</td>
<td>SELECT</td>
</tr>
</tbody>
</table>
<h3 id="检查存取权限"><a class="markdownIt-Anchor" href="#检查存取权限"></a> 检查存取权限</h3>
<ul>
<li>对于获得上机权后又进一步发出存取数据库操作的用户
<ul>
<li>DBMS查找数据字典，根据其存取权限对操作的合法性进行检查</li>
<li>若用户的操作请求超出了定义的权限，系统将拒绝执行此操作</li>
</ul>
</li>
</ul>
<h3 id="授权粒度"><a class="markdownIt-Anchor" href="#授权粒度"></a> 授权粒度</h3>
<ul>
<li>授权粒度是指可以定义的数据对象的范围
<ul>
<li>它是衡量授权机制是否灵活的一个重要指标。</li>
<li>授权定义中数据对象的粒度越细，即可以定义的数据对象的范围越小，授权子系统就越灵活。</li>
</ul>
</li>
</ul>
<h3 id="优缺点"><a class="markdownIt-Anchor" href="#优缺点"></a> 优缺点</h3>
<ul>
<li>优点
<ul>
<li>能够通过授权机制有效地控制其他用户对敏感数据的存取</li>
</ul>
</li>
<li>缺点
<ul>
<li>可能存在数据的“无意泄露”</li>
<li>原因：这种机制仅仅通过对数据的存取权限来进行安全控制，而数据本身并无安全性标记。</li>
<li>解决：对系统控制下的所有主客体实施强制存取控制策略</li>
</ul>
</li>
</ul>
<h2 id="强制存取控制方法-2"><a class="markdownIt-Anchor" href="#强制存取控制方法-2"></a> 强制存取控制方法</h2>
<ul>
<li>什么是强制存取控制
<ul>
<li>强制存取控制(MAC)是指系统为保证更高程度的安全性，按照TDI/TCSEC标准中安全策略的要求，所采取的强制存取检查手段。</li>
</ul>
</li>
<li>MAC不是用户能直接感知或进行控制的。</li>
<li>MAC适用于对数据有严格而固定密级分类的部门
<ul>
<li>军事部门</li>
<li>政府部门</li>
</ul>
</li>
</ul>
<h3 id="主体与客体"><a class="markdownIt-Anchor" href="#主体与客体"></a> 主体与客体</h3>
<ul>
<li>在MAC中，DBMS所管理的全部实体被分为主体和客体两大类</li>
<li><strong>主体</strong>是系统中的活动实体
<ul>
<li>DBMS所管理的实际用户</li>
<li>代表用户的各进程</li>
</ul>
</li>
<li><strong>客体</strong>是系统中的被动实体，是受主体操纵的
<ul>
<li>文件</li>
<li>基表</li>
<li>索引</li>
<li>视图</li>
</ul>
</li>
</ul>
<h3 id="敏感度标记"><a class="markdownIt-Anchor" href="#敏感度标记"></a> 敏感度标记</h3>
<ul>
<li>对于主体和客体，DBMS为它们每个实例（值）指派一个敏感度标记（Label）</li>
<li>敏感度标记分成若干级别
<ul>
<li>绝密（Top Secret）</li>
<li>机密（Secret）</li>
<li>可信（Confidential）</li>
<li>公开（Public）</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>主体的敏感度标记称为<strong>许可证级别</strong>（Clearance Level）</li>
<li>客体的敏感度标记称为<strong>密级</strong>（Classification Level）</li>
<li>MAC机制就是通过对比主体的Label和客体的Label，最终确定主体是否能够存取客体</li>
</ul>
<h3 id="强制存取控制规则"><a class="markdownIt-Anchor" href="#强制存取控制规则"></a> 强制存取控制规则</h3>
<ul>
<li>当某一用户（或某一主体）以标记label注册入系统时，系统要求他对任何客体的存取必须遵循下面两条规则：
<ol>
<li>仅当主体的许可证级别<strong>大于或等于</strong>客体的密级时，该主体才能<strong>读取</strong>相应的客体；</li>
<li>仅当主体的许可证级别<strong>等于</strong>客体的密级时，该主体才能<strong>写</strong>相应的客体。</li>
</ol>
</li>
<li>规则（2）的修正规则：
<ul>
<li>主体的许可证级别 &lt;=客体的密级，主体能写客体
<ul>
<li>用户可为写入的数据对象赋予高于自己的许可证级别的密级</li>
</ul>
</li>
<li>一旦数据被写入，该用户自己也不能再读该数据对象了。</li>
</ul>
</li>
<li>规则的共同点
<ul>
<li>禁止了拥有<strong>高许可证级别</strong>的主体<strong>更新低密级</strong>的数据对象，以防止敏感数据泄露。</li>
</ul>
</li>
</ul>
<h4 id="强制存取控制的特点"><a class="markdownIt-Anchor" href="#强制存取控制的特点"></a> 强制存取控制的特点</h4>
<ul>
<li>MAC是对数据本身进行密级标记</li>
<li>无论数据如何复制，标记与数据是一个不可分的整体</li>
<li>只有符合密级标记要求的用户才可以操纵数据</li>
<li>从而提供了更高级别的安全性</li>
</ul>
<hr />
<h2 id="授权与回收"><a class="markdownIt-Anchor" href="#授权与回收"></a> 授权与回收</h2>
<ul>
<li>谁定义？
<ul>
<li>DBA和表的建立者（即表的属主）</li>
</ul>
</li>
<li>如何定义？
<ul>
<li>SQL语句，SQL语言提供了数据控制功能，能够在一定程度上保证数据库中数据的完全性、完整性，并提供了一定的并发控制及恢复能力。
<ul>
<li>GRANT</li>
<li>REVOKE</li>
</ul>
</li>
</ul>
</li>
<li>数据控制亦称为数据保护，包括数据的：
<ul>
<li>安全性控制</li>
<li>完整性控制</li>
<li>并发控制</li>
<li>恢复</li>
</ul>
</li>
</ul>
<h3 id="安全性"><a class="markdownIt-Anchor" href="#安全性"></a> 安全性</h3>
<ul>
<li>安全性：保护数据库，防止不合法的使用所造成的数据泄露和破坏。</li>
<li>保证数据安全性的主要措施
<ul>
<li>存取控制：控制用户只能存取他有权存取的数据</li>
<li>规定不同用户对于不同数据对象所允许执行的操作</li>
</ul>
</li>
</ul>
<h3 id="完整性"><a class="markdownIt-Anchor" href="#完整性"></a> 完整性</h3>
<ul>
<li>数据库的完整性是指数据库中数据的正确性与相容性。</li>
<li>SQL语言定义完整性约束条件
<ul>
<li>CREATE TABLE语句</li>
<li>ALTER TABLE语句
<ul>
<li>码</li>
<li>取值唯一的列</li>
<li>参照完整性</li>
<li>其他约束条件</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="并发控制"><a class="markdownIt-Anchor" href="#并发控制"></a> 并发控制</h3>
<ul>
<li>并发控制：当多个用户并发地对数据库进行操作时，对他们加以控制、协调，以保证并发操作正确执行，保持数据库的一致性。</li>
<li>SQL语言并发控制能力：提供事务、事务开始、事务结束、提交等概念</li>
</ul>
<h3 id="恢复"><a class="markdownIt-Anchor" href="#恢复"></a> 恢复</h3>
<ul>
<li>恢复: 当发生各种类型的故障导致数据库处于不一致状态时，将数据库恢复到一致状态的功能。</li>
<li>SQL语言恢复功能：提供事务回滚、重做等概念（UNDO、REDO）</li>
</ul>
<h3 id="grant"><a class="markdownIt-Anchor" href="#grant"></a> GRANT</h3>
<ul>
<li>GRANT语句的一般格式：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> &lt;权限&gt;[,&lt;权限&gt;]...</span><br><span class="line">[<span class="keyword">ON</span> &lt;对象类型&gt; &lt;对象名&gt;]</span><br><span class="line"><span class="keyword">TO</span> &lt;用户&gt;[,&lt;用户&gt;]...</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li>谁定义？DBA和表的建立者（即表的属主）</li>
<li>功能：将对指定操作对象的指定操作权限授予指定的用户。</li>
</ul>
<h4 id="操作权限"><a class="markdownIt-Anchor" href="#操作权限"></a> 操作权限</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200507212515.png" alt="" /></p>
<h4 id="用户的权限"><a class="markdownIt-Anchor" href="#用户的权限"></a> 用户的权限</h4>
<ul>
<li>建表（CREATETAB）的权限：属于DBA</li>
<li>DBA授予-&gt;普通用户</li>
<li>基本表或视图的属主拥有对该表或视图的一切操作权限</li>
<li>接受权限的用户：
<ul>
<li>一个或多个具体用户</li>
<li>PUBLIC（全体用户）</li>
</ul>
</li>
</ul>
<h4 id="with-grant-option子句"><a class="markdownIt-Anchor" href="#with-grant-option子句"></a> WITH GRANT OPTION子句</h4>
<ul>
<li>指定了WITH GRANT OPTION子句:
<ul>
<li>获得某种权限的用户还可以把这种权限<strong>再授予别的用户</strong>。</li>
</ul>
</li>
<li>没有指定WITH GRANT OPTION子句:
<ul>
<li>获得某种权限的用户只能使用该权限，<strong>不能传播该权限</strong>。</li>
</ul>
</li>
</ul>
<hr />
<blockquote>
<p><strong>例1:把查询Student表权限授给用户U1</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span>   <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span>   <span class="keyword">TABLE</span>   Student</span><br><span class="line"><span class="keyword">TO</span>   U1;</span><br></pre></td></tr></table></figure>
<p><strong>例2:把对Student表和Course表的全部权限授予用户U2和U3</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILIGES</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student, Course</span><br><span class="line"><span class="keyword">TO</span> U2, U3;</span><br></pre></td></tr></table></figure>
<p><strong>例3:把对表SC的查询权限授予所有用户</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> <span class="keyword">PUBLIC</span>;</span><br></pre></td></tr></table></figure>
<p><strong>例4:把查询Student表和修改学生学号的权限授给用户U4</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(Sno), <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> U4;</span><br></pre></td></tr></table></figure>
<p><strong>例5:把对表SC的INSERT权限授予U5用户，并允许他再将此权限授予其他用户</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> U5</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure>
<p><strong>例6:DBA把在数据库S_C中建立表的权限授予用户U8</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> CREATETAB</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">DATABASE</span> S_C</span><br><span class="line"><span class="keyword">TO</span> U8;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="revoke"><a class="markdownIt-Anchor" href="#revoke"></a> REVOKE</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;权限&gt;[,&lt;权限&gt;]...</span><br><span class="line">[<span class="keyword">ON</span> &lt;对象类型&gt; &lt;对象名&gt;]</span><br><span class="line"><span class="keyword">FROM</span> &lt;用户&gt;[,&lt;用户&gt;]...;</span><br></pre></td></tr></table></figure>
<ul>
<li>功能：从指定用户那里收回对指定对象的指定权。</li>
</ul>
<blockquote>
<p><strong>例8:收回所有用户对表SC的查询权限</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">PUBLIC</span>;</span><br></pre></td></tr></table></figure>
<p><strong>例9:把用户U5对SC表的INSERT权限收回</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> U5 <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>
<p>系统将收回直接或间接从U5处获得的对SC表的INSERT权限:<br />
–&gt;U5–&gt; U6–&gt; U7<br />
收回U5、U6、U7获得的对SC表的INSERT权限:<br />
&lt;–U5&lt;-- U6&lt;-- U7<br />
<strong>例10 把用户U4修改学生学号的权限收回</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">UPDATE</span>(Sno)</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">FROM</span> U4;</span><br></pre></td></tr></table></figure>
</blockquote>
<hr />
<h3 id="sql灵活的授权机制"><a class="markdownIt-Anchor" href="#sql灵活的授权机制"></a> SQL灵活的授权机制</h3>
<ul>
<li>DBA拥有对数据库中所有对象的所有权限，并可以根据应用的需要将不同的权限授予不同的用户。</li>
<li>用户对自己建立的基本表和视图拥有全部的操作权限，并且可以用GRANT语句把其中某些权限授予其他用户。</li>
<li>被授权的用户如果有“继续授权”的许可，还可以把获得的权限再授予其他用户。</li>
<li>所有授予出去的权力在必要时又都可以用REVOKE语句收回。</li>
</ul>
<h3 id="数据库角色"><a class="markdownIt-Anchor" href="#数据库角色"></a> 数据库角色</h3>
<ul>
<li>定义
<ul>
<li>数据库角色是被命名的一组与数据库操作相关的权限，<strong>角色是权限的集合</strong>。</li>
</ul>
</li>
<li>可简化授权的过程</li>
<li>先用<code>CREATE ROLE</code>创建角色，再用<code>GRANT</code>给角色授权</li>
<li>角色的创建
<ul>
<li><code>CREATE ROLE &lt;角色名&gt;</code></li>
</ul>
</li>
<li>例：创建一个角色R1
<ul>
<li><code>CREATE ROLE R1;</code></li>
</ul>
</li>
</ul>
<h2 id="视图机制"><a class="markdownIt-Anchor" href="#视图机制"></a> 视图机制</h2>
<ul>
<li>视图机制把要保密的数据对无权存取这些数据的用户隐藏起来，</li>
<li>视图机制更主要的功能在于提供数据独立性，其安全保护功能太不精细，往往远不能达到应用系统的要求。</li>
<li>视图机制与授权机制配合使用:
<ul>
<li>首先用视图机制屏蔽掉一部分保密数据</li>
<li>视图上面再进一步定义存取权限</li>
<li>间接实现了支持存取谓词的用户权限定义</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>例：王平只能检索计算机系学生的信息</strong><br />
先建立计算机系学生的视图CS_Student</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> CS_Student</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">FROM</span>   Student</span><br><span class="line"><span class="keyword">WHERE</span>  Sdept=<span class="string">'CS’;</span></span><br><span class="line"><span class="string">GRANT  SELECT</span></span><br><span class="line"><span class="string">ON  CS_Student</span></span><br><span class="line"><span class="string">TO 王平;   //在视图上进一步定义存取权限</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="审计"><a class="markdownIt-Anchor" href="#审计"></a> 审计</h2>
<h3 id="什么是审计"><a class="markdownIt-Anchor" href="#什么是审计"></a> 什么是审计</h3>
<ul>
<li>启用一个专用的审计日志（Audit Log）将用户对数据库的所有操作记录在上面</li>
<li>DBA可以利用审计日志中的追踪信息找出非法存取数据的人</li>
<li>C2以上安全级别的DBMS必须具有审计功能</li>
</ul>
<h3 id="审计功能的可选性"><a class="markdownIt-Anchor" href="#审计功能的可选性"></a> 审计功能的可选性</h3>
<ul>
<li>审计很费时间和空间</li>
<li>DBA可以根据应用对安全性的要求，灵活地打开或关闭审计功能。</li>
</ul>
<h3 id="强制性机制"><a class="markdownIt-Anchor" href="#强制性机制"></a> 强制性机制</h3>
<ul>
<li>用户识别和鉴定、存取控制、视图</li>
</ul>
<h3 id="预防监测手段"><a class="markdownIt-Anchor" href="#预防监测手段"></a> 预防监测手段</h3>
<ul>
<li>审计技术</li>
</ul>
<h2 id="数据加密"><a class="markdownIt-Anchor" href="#数据加密"></a> 数据加密</h2>
<ul>
<li>数据加密
<ul>
<li>防止数据库中数据在存储和传输中失密的有效手段</li>
</ul>
</li>
<li>加密的基本思想
<ul>
<li>根据一定的算法将原始数据（术语为明文，Plain text）变换为不可直接识别的格式（术语为密文，Cipher text）</li>
<li>不知道解密算法的人无法获知数据的内容</li>
</ul>
</li>
</ul>
<h3 id="加密方法"><a class="markdownIt-Anchor" href="#加密方法"></a> 加密方法</h3>
<ul>
<li>替换方法
<ul>
<li>使用密钥（Encryption Key）将明文中的每一个字符转换为密文中的一个字符</li>
</ul>
</li>
<li>置换方法
<ul>
<li>将明文的字符按不同的顺序重新排列</li>
</ul>
</li>
<li>混合方法
<ul>
<li>如：美国1977年制定的官方加密标准：数据加密标准（Data Encryption Standard，简称DES）</li>
</ul>
</li>
</ul>
<h3 id="dbms中的数据加密"><a class="markdownIt-Anchor" href="#dbms中的数据加密"></a> DBMS中的数据加密</h3>
<p>有些数据库产品提供了数据加密例行程序<br />
有些数据库产品本身未提供加密程序，但提供了接口</p>
<ul>
<li>数据加密功能通常也作为可选特征，允许用户自由选择
<ul>
<li>数据加密与解密是比较费时的操作</li>
<li>数据加密与解密程序会占用大量系统资源</li>
<li>应该只对高度机密的数据加密</li>
</ul>
</li>
</ul>
<h1 id="统计数据库安全性"><a class="markdownIt-Anchor" href="#统计数据库安全性"></a> 统计数据库安全性</h1>
<h2 id="统计数据库的特点"><a class="markdownIt-Anchor" href="#统计数据库的特点"></a> 统计数据库的特点</h2>
<ul>
<li>允许用户查询聚集类型的信息（例如合计、平均值等）</li>
<li>不允许查询单个记录信息</li>
</ul>
<blockquote>
<p><strong>例：允许查询“程序员的平均工资是多少？”不允许查询“程序员张勇的工资？”</strong></p>
</blockquote>
<h2 id="统计数据库中特殊的安全性问题"><a class="markdownIt-Anchor" href="#统计数据库中特殊的安全性问题"></a> 统计数据库中特殊的安全性问题</h2>
<ul>
<li>隐蔽的信息通道</li>
<li>从合法的查询中推导出不合法的信息</li>
</ul>
<blockquote>
<p>例1：下面两个查询都是合法的：</p>
<ol>
<li>本公司共有多少女高级程序员？</li>
<li>本公司女高级程序员的工资总额是多少？<br />
如果第一个查询的结果是“1”，<br />
那么第二个查询的结果显然就是这个程序员的工资数。<br />
<strong>规则1：任何查询至少要涉及N(N足够大)个以上的记录</strong><br />
例2：用户A发出下面两个合法查询：</li>
<li>用户A和其他N个程序员的工资总额是多少？</li>
<li>用户B和其他N个程序员的工资总额是多少？<br />
若第一个查询的结果是X，第二个查询的结果是Y，<br />
由于用户A知道自己的工资是Z，<br />
那么他可以计算出用户B的工资=Y-(X-Z)。<br />
原因：两个查询之间有很多重复的数据项<br />
<strong>规则2：任意两个查询的相交数据项不能超过M个</strong><br />
可以证明，在上述两条规定下，如果想获知用户B的工资额<br />
A至少需要进行1+(N-2)/M次查询<br />
<strong>规则3：任一用户的查询次数不能超过1+(N-2)/M</strong><br />
但是如果两个用户合作查询就可以使这一规定失效。<br />
所以，数据库安全机制的设计目标：<strong>试图破坏安全的人所花费的代价  &gt;&gt; 得到的利益</strong></li>
</ol>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 3. 关系数据库标准语言SQL</title>
    <url>/2020/05/12/database_2/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>关系数据库标准语言SQL
<ul>
<li>SQL概述
<ul>
<li>SQL的特点</li>
</ul>
</li>
<li>数据定义
<ul>
<li>创建基本表</li>
<li>删除基本表</li>
<li>修改基本表</li>
</ul>
</li>
<li>查询
<ul>
<li>概述</li>
<li>单表查询
<ul>
<li>查询所有字段</li>
<li>查询指定列</li>
<li>查询满足条件的元组
<ul>
<li>比较大小</li>
<li>确定范围</li>
<li>确定集合</li>
<li>字符匹配</li>
<li>空值</li>
<li>多重条件</li>
</ul>
</li>
<li>对查询结果排序</li>
<li>使用集函数</li>
<li>对查询结果分组
<ul>
<li>使用HAVING短语筛选最终输出结果</li>
</ul>
</li>
<li>限制查询结果数量</li>
</ul>
</li>
<li>连接查询
<ul>
<li>广义笛卡尔积</li>
<li>等值与非等值连接查询
<ul>
<li>等值连接</li>
<li>自然连接</li>
<li>自身连接</li>
</ul>
</li>
<li>外连接</li>
</ul>
</li>
<li>嵌套查询
<ul>
<li>嵌套查询概述</li>
<li>嵌套查询分类及求解方法
<ul>
<li>不相关子查询</li>
<li>相关子查询</li>
</ul>
</li>
<li>引出子查询的谓词
<ul>
<li>带有IN谓词的子查询</li>
<li>带有比较运算符的子查询
<ul>
<li>带有EXISTS谓词的子查询</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>集合查询
<ul>
<li>并操作</li>
<li>交操作</li>
<li>差操作</li>
<li>对集合操作结果的排序</li>
</ul>
</li>
</ul>
</li>
<li>数据更新
<ul>
<li>插入数据
<ul>
<li>插入单个元组</li>
<li>插入子查询结果</li>
</ul>
</li>
<li>修改数据
<ul>
<li>修改某一个元组的值</li>
<li>修改多个元组的值</li>
<li>带子查询的修改语句</li>
</ul>
</li>
<li>删除数据
<ul>
<li>删除某一个元组的值</li>
<li>删除多个元组的值</li>
<li>带子查询的删除语句</li>
</ul>
</li>
</ul>
</li>
<li>视图
<ul>
<li>定义视图</li>
<li>删除视图</li>
<li>查询视图</li>
<li>更新视图
<ul>
<li>更新视图的限制</li>
</ul>
</li>
<li>视图的作用
<ul>
<li>简化用户的操作</li>
<li>使用户能以多种角度看待同一数据</li>
<li>对重构数据库提供了一定程度的逻辑独立性</li>
<li>对机密数据提供安全保护</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="sql概述"><a class="markdownIt-Anchor" href="#sql概述"></a> SQL概述</h1>
<ul>
<li>SQL是英文（Structured Query Language）的缩写，意思为结构化查询语言，它包括了数据定义、查询、操纵和控制四种功能。</li>
<li>本章介绍了SQL语言的一些基本操作命令，包括数据定义语句（DDL）、数据操纵语句（DML）及权限的操作，重点和难点是数据操纵语句中的查询操作。</li>
</ul>
<h2 id="sql的特点"><a class="markdownIt-Anchor" href="#sql的特点"></a> SQL的特点</h2>
<ol>
<li>综合统一</li>
<li>高度非过程化</li>
<li>面向集合的操作方式</li>
<li>以同一种语法结构提供两种使用方法</li>
<li>语言简洁，易学易用</li>
</ol>
<h1 id="数据定义"><a class="markdownIt-Anchor" href="#数据定义"></a> 数据定义</h1>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200422130327.png" alt="" /></p>
<h2 id="创建基本表"><a class="markdownIt-Anchor" href="#创建基本表"></a> 创建基本表</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;表名&gt;</span><br><span class="line">(&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt; ]</span><br><span class="line">      [,&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt;] ] …      [,&lt;表级完整性约束条件&gt; ]);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>&lt;表名&gt;</strong>：所要定义的基本表的名字</li>
<li><strong>&lt;列名&gt;</strong>：组成该表的各个属性（列）</li>
<li><strong>&lt;列级完整性约束条件&gt;</strong>：涉及相应属性列的完整性约束条件</li>
<li><strong>&lt;表级完整性约束条件&gt;</strong>：涉及一个或多个属性列的完整性约束条件</li>
</ul>
<blockquote>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> BookRecord (</span><br><span class="line">  BookNo  <span class="built_in">char</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">  BookName <span class="built_in">char</span>(<span class="number">200</span>),</span><br><span class="line">  Publisher <span class="built_in">Char</span>(<span class="number">100</span>),</span><br><span class="line">  Author   <span class="built_in">Char</span>(<span class="number">30</span>),</span><br><span class="line">  SalesPrice  Money,</span><br><span class="line">  Quantity  <span class="built_in">Int</span>,</span><br><span class="line">  Discount  <span class="built_in">Decimal</span>(<span class="number">2</span>,<span class="number">2</span>),</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>(BookNo),</span><br><span class="line">  <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(<span class="keyword">ID</span>) <span class="keyword">references</span> Book(<span class="keyword">ID</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>其中<code>NOT NULL</code>指的是该列的值不能为空值。</li>
<li><code>UNIQUE</code> 指的是不能重复。</li>
<li><code>PRIMARY KEY</code>是主码。</li>
<li><code>FOREIGN KEY……references</code>是外码。</li>
</ul>
</blockquote>
<h2 id="删除基本表"><a class="markdownIt-Anchor" href="#删除基本表"></a> 删除基本表</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> &lt;表名&gt; <span class="keyword">CASCADE</span>/RESTRICT;</span><br></pre></td></tr></table></figure>
<ul>
<li>基本表删除。数据、表上的索引都删除表上的视图往往仍然保留，但无法引用。</li>
<li>删除基本表时，系统会从数据字典中删去有关该基本表及其索引的描述</li>
</ul>
<h2 id="修改基本表"><a class="markdownIt-Anchor" href="#修改基本表"></a> 修改基本表</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &lt;表名&gt;</span><br><span class="line">[ <span class="keyword">ADD</span> &lt;新列名&gt; &lt;数据类型&gt; [ 完整性约束 ] ]</span><br><span class="line">[ <span class="keyword">DROP</span> &lt;完整性约束名&gt; ]</span><br><span class="line">[ <span class="keyword">MODIFY</span>/<span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> &lt;列名&gt; &lt;数据类型&gt; ];</span><br></pre></td></tr></table></figure>
<ul>
<li>&lt;表名&gt;：要修改的基本表</li>
<li><code>ADD</code>子句：增加新列和新的完整性约束条件</li>
<li><code>DROP</code>子句：删除指定的完整性约束条件</li>
<li><code>MODIFY</code>子句：用于修改列名和数据类型</li>
</ul>
<blockquote>
<p><strong>【例】 向BookRecord表增加一个“出版日期”的PublishiDate列。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> BookRecord <span class="keyword">ADD</span> PublishiDate datetime <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>不论基本表中原来是否已有数据，新增加的列一律为空值。</p>
<p><strong>【例】 将折扣的数据类型改为整数</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> BookRecord <span class="keyword">MODIFY</span> Discount <span class="built_in">int</span>;</span><br></pre></td></tr></table></figure>
<p>修改原有的列定义有可能会破坏已有数据。</p>
</blockquote>
<blockquote>
<p><strong>【例】 删除字段“出版日期” PublishiDate列</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> BookRecord <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> PublishiDate;</span><br></pre></td></tr></table></figure>
<p><strong>【例】 删除关于书号必须取唯一值的约束</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> BookRecord <span class="keyword">DROP</span>   <span class="keyword">UNIQUE</span>(BookNo);</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="查询"><a class="markdownIt-Anchor" href="#查询"></a> 查询</h1>
<h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span>|<span class="keyword">DISTINCT</span>] &lt;目标列表达式&gt;</span><br><span class="line">                                                [，&lt;目标列表达式&gt;] …</span><br><span class="line"><span class="keyword">FROM</span> &lt;表名或视图名&gt;[, &lt;表名或视图名&gt; ] …</span><br><span class="line">[ <span class="keyword">WHERE</span> &lt;条件表达式&gt; ]</span><br><span class="line">[ <span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;列名<span class="number">1</span>&gt; [ <span class="keyword">HAVING</span> &lt;条件表达式&gt; ] ]</span><br><span class="line">[ <span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;列名<span class="number">2</span>&gt; [ <span class="keyword">ASC</span>|<span class="keyword">DESC</span> ] ];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span>  [ <span class="keyword">All</span> | DINSTINCT]  &lt;目标列表达式&gt; [别名]  [ , &lt;目标列表达式&gt; [别      名] ]  . . .</span><br><span class="line"><span class="keyword">FROM</span> &lt;表名或视图名&gt;  [别名] [ , &lt;表名或视图名&gt;[别名] ] . . .</span><br><span class="line">[<span class="keyword">WHERE</span> &lt;条件表达式&gt;]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;列名<span class="number">1</span>&gt; ]</span><br><span class="line">[<span class="keyword">HAVING</span> &lt;条件表达式&gt; ]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;列名<span class="number">2</span>&gt; [ <span class="keyword">ASC</span>| <span class="keyword">DESC</span> ]]</span><br><span class="line">[<span class="keyword">LIMIT</span> 字句]</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> [<span class="keyword">straight_join</span>][<span class="keyword">sql_small_result</span>][<span class="keyword">sql_big_result</span></span><br><span class="line">[<span class="keyword">high_priority</span>]</span><br><span class="line">[ <span class="keyword">distinct</span> | <span class="keyword">distinctrow</span> | <span class="keyword">all</span> ]</span><br><span class="line">select_expression, . . .</span><br><span class="line">[ <span class="keyword">into</span> &#123;<span class="keyword">outfile</span> | <span class="keyword">dumpfile</span>&#125; ‘file_name’ export_options ]</span><br><span class="line">[ <span class="keyword">from</span> table_references</span><br><span class="line">[ <span class="keyword">where</span> where_definition]</span><br><span class="line">[ <span class="keyword">group</span> <span class="keyword">by</span> col_name, . . . ]</span><br><span class="line">[ <span class="keyword">having</span> where_definition]</span><br><span class="line">[ <span class="keyword">order</span> <span class="keyword">by</span> &#123; unsigned_integer | col_name | formula &#125; [ <span class="keyword">ASC</span> | <span class="keyword">DESC</span>] , . . . ]</span><br><span class="line">[<span class="keyword">limit</span> [ <span class="keyword">offset</span>, ] <span class="keyword">rows</span>]</span><br><span class="line">[<span class="keyword">procedure</span> procedure_name] ]</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>SELECT子句</strong>：指定要显示的属性列</li>
<li><strong>FROM子句</strong>：指定查询对象(基本表或视图)</li>
<li><strong>WHERE子句</strong>：指定查询条件</li>
<li><strong>GROUP BY子句</strong>：对查询结果按指定列的值分组，该属性列值相等的元组为一个组。通常会在每组中作用集函数。</li>
<li><strong>HAVING短语</strong>：筛选出只有满足指定条件的组</li>
<li><strong>ORDER BY子句</strong>：对查询结果表按指定列值的升序或降序排序</li>
<li><strong>SELECT子句的&lt;目标列表达式&gt;为表达式</strong>
<ul>
<li>算术表达式</li>
<li>字符串常量</li>
<li>函数</li>
<li>列别名</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span></li>
</ul>
</li>
</ul>
<h2 id="单表查询"><a class="markdownIt-Anchor" href="#单表查询"></a> 单表查询</h2>
<p>查询仅涉及一个表，是一种最简单的查询操作</p>
<ol>
<li>选择表中的若干列</li>
<li>选择表中的若干元组</li>
<li>对查询结果排序</li>
<li>使用集函数</li>
<li>对查询结果分组</li>
</ol>
<h3 id="查询所有字段"><a class="markdownIt-Anchor" href="#查询所有字段"></a> 查询所有字段</h3>
<p>查询所有字段是指查询表中的所有字段的数据，有两种方式：一种是列出表中的所有字段，另一种是使用通配符<code>*</code>来查询。</p>
<blockquote>
<p>技巧：通过使用通配符<code>*</code>，可以查询表中所有字段的数据，这种方式<strong>比较简单</strong>，尤其是数据库表中的字段很多时，这种方式更加明显。但是从显示结果顺序的角度 来讲，使用<strong>通配符<code>*</code>不够灵活</strong>。如果要改变显示字段的顺序，可以选择使用第一种方式。</p>
</blockquote>
<h3 id="查询指定列"><a class="markdownIt-Anchor" href="#查询指定列"></a> 查询指定列</h3>
<blockquote>
<p><strong>[例]  查询全体学生的学号与姓名。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname</span><br><span class="line"><span class="keyword">FROM</span> Student;</span><br></pre></td></tr></table></figure>
<p><strong>[例]  查询全体学生的姓名、学号、所在系。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sno,Sdept</span><br><span class="line"><span class="keyword">FROM</span> Student;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="查询满足条件的元组"><a class="markdownIt-Anchor" href="#查询满足条件的元组"></a> 查询满足条件的元组</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200422130407.png" alt="" /></p>
<h4 id="比较大小"><a class="markdownIt-Anchor" href="#比较大小"></a> 比较大小</h4>
<p>在<code>WHERE</code>子句的&lt;比较条件&gt;中使用比较运算符</p>
<ul>
<li><code>=,&gt;,&lt;,&gt;=,&lt;=,!=</code> 或 <code>&lt;&gt;,!&gt;,!&lt;,</code></li>
<li>逻辑运算符<code>NOT</code>  +  <code>比较运算符</code></li>
</ul>
<blockquote>
<p><strong>[例]  查询所有年龄在20岁以下的学生姓名及其年龄。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span>    Student</span><br><span class="line"><span class="keyword">WHERE</span> Sage &lt; <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span>    Student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> Sage &gt;= <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="确定范围"><a class="markdownIt-Anchor" href="#确定范围"></a> 确定范围</h4>
<p>使用谓词<code>BETWEEN … AND …</code> <code>NOT BETWEEN … AND …</code></p>
<blockquote>
<p><strong>[例]  查询年龄在20~23岁（包括20岁和23岁）之间的学生的姓名、系别和年龄。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sdept,Sage</span><br><span class="line"><span class="keyword">FROM</span>   Student</span><br><span class="line"><span class="keyword">WHERE</span> Sage <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="确定集合"><a class="markdownIt-Anchor" href="#确定集合"></a> 确定集合</h4>
<ul>
<li>使用谓词<code>IN &lt;值表&gt;, NOT IN &lt;值表&gt;</code></li>
<li>&lt;值表&gt;：用逗号分隔的一组取值</li>
</ul>
<blockquote>
<p><strong>[例]查询信息系（IS）、数学系（MA）和计算机科学系（CS）学生的姓名和性别。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Ssex</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span> (<span class="string">'IS'</span>,<span class="string">'MA'</span>,<span class="string">'CS'</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="字符匹配"><a class="markdownIt-Anchor" href="#字符匹配"></a> 字符匹配</h4>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[NOT] LIKE  ‘&lt;匹配串&gt;’  [ESCAPE ‘&lt;换码字符&gt;’]</span><br></pre></td></tr></table></figure>
<ul>
<li>&lt;匹配串&gt;：指定匹配模板</li>
<li>匹配模板：固定字符串或含通配符的字符串。当匹配模板为固定字符串时，可以用<code>=</code> 运算符取代 LIKE 谓词,用 <code>!=</code> 或 <code>&lt; &gt;</code>运算符取代 NOT LIKE 谓词</li>
</ul>
<blockquote>
<p>使用LIKE关键字和使用“＝”的效果是一样的。但是，这只对匹配一个完整的字符串这种情况有效。如果字符串中包含了通配符，就不能这样进行替换了。</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">通配符</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">%</td>
<td style="text-align:center">替代一个或多个字符</td>
</tr>
<tr>
<td style="text-align:center">_</td>
<td style="text-align:center">仅替代一个字符</td>
</tr>
<tr>
<td style="text-align:center">[charlist]</td>
<td style="text-align:center">字符列中的任何单一字符</td>
</tr>
<tr>
<td style="text-align:center">[^charlist]或者[!charlist]</td>
<td style="text-align:center">不在字符列中</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>[例]  查询所有不姓刘的学生姓名、学号和性别。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sno,Ssex</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sname <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">'刘%'</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="空值"><a class="markdownIt-Anchor" href="#空值"></a> 空值</h4>
<ul>
<li>使用谓词 <code>IS NULL</code> 或 <code>IS NOT NULL</code>
<ul>
<li><code>IS NULL</code> 不能用 <code>= NULL</code> 代替</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  某些学生选修课程后没有参加考试，所以有选课记录，但没有考试成绩。查询缺少成绩的学生的学号和相应的课程号。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Cno</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Grade <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="多重条件"><a class="markdownIt-Anchor" href="#多重条件"></a> 多重条件</h4>
<ul>
<li>用逻辑运算符<code>AND</code>和<code>OR</code>来联结多个查询条件
<ul>
<li><code>AND</code>的优先级高于<code>OR</code></li>
<li>可以用括号改变优先级</li>
</ul>
</li>
<li>可用来实现多种其他谓词
<ul>
<li><code>[NOT] IN</code></li>
<li><code>[NOT] BETWEEN … AND …</code></li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  查询计算机系年龄在20岁以下的学生姓名。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept= ‘CS’ <span class="keyword">AND</span> Sage&lt;<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p><strong>[例]  查询年龄在20~23岁（包括20岁和23岁）之间的学生的姓名、系别和年龄。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sdept,Sage</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span>  Sage&gt;=<span class="number">20</span> <span class="keyword">AND</span> Sage&lt;=<span class="number">23</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="对查询结果排序"><a class="markdownIt-Anchor" href="#对查询结果排序"></a> 对查询结果排序</h3>
<ul>
<li>使用<code>ORDER BY</code>子句
<ul>
<li>可以按一个或多个属性列排序</li>
<li>升序：<code>ASC</code>；降序：<code>DESC</code>；缺省值为升序</li>
</ul>
</li>
<li>当排序列含空值时
<ul>
<li><code>ASC</code>：排序列为空值的元组最后显示</li>
<li><code>DESC</code>：排序列为空值的元组最先显示</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  查询选修了3号课程的学生的学号及其成绩，查询结果按分数降序排列。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Grade</span><br><span class="line"><span class="keyword">FROM</span>  SC</span><br><span class="line"><span class="keyword">WHERE</span> Cno = <span class="string">'3'</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Grade <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Sno</th>
<th>Grade</th>
</tr>
</thead>
<tbody>
<tr>
<td>95010</td>
<td></td>
</tr>
<tr>
<td>95024</td>
<td></td>
</tr>
<tr>
<td>95007</td>
<td>92</td>
</tr>
<tr>
<td>95003</td>
<td>82</td>
</tr>
<tr>
<td>95010</td>
<td>82</td>
</tr>
<tr>
<td>95009</td>
<td>75</td>
</tr>
<tr>
<td>95014</td>
<td>61</td>
</tr>
<tr>
<td>95002</td>
<td>55</td>
</tr>
</tbody>
</table>
</blockquote>
<blockquote>
<p><strong>[例]  查询全体学生情况，查询结果按所在系的系号升序排列，同一系中的学生按年龄降序排列。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  *</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Sdept,Sage <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="使用集函数"><a class="markdownIt-Anchor" href="#使用集函数"></a> 使用集函数</h3>
<ul>
<li>5类主要集函数</li>
<li>计数
<ul>
<li>COUNT([DISTINCT|ALL] *)</li>
<li>COUNT([DISTINCT|ALL] &lt;列名&gt;)
<ul>
<li><code>DISTINCT</code>取消重复值，<code>ALL</code>是全部值。缺省是<code>ALL</code>。</li>
</ul>
</li>
</ul>
</li>
<li>计算总和
<ul>
<li>SUM([DISTINCT|ALL] &lt;列名&gt;)</li>
</ul>
</li>
<li>计算平均值
<ul>
<li>AVG([DISTINCT|ALL] &lt;列名&gt;)</li>
</ul>
</li>
<li>求最大值
<ul>
<li>MAX([DISTINCT|ALL] &lt;列名&gt;)</li>
</ul>
</li>
<li>求最小值
<ul>
<li>MIN([DISTINCT|ALL] &lt;列名&gt;)</li>
</ul>
</li>
</ul>
<h3 id="对查询结果分组"><a class="markdownIt-Anchor" href="#对查询结果分组"></a> 对查询结果分组</h3>
<p>使用GROUP BY子句分组<br />
细化集函数的作用对象</p>
<ul>
<li>未对查询结果分组，集函数将作用于整个查询结果</li>
<li>对查询结果分组后，集函数将分别作用于每个组</li>
</ul>
<blockquote>
<p><strong>[例]  求各个课程号及相应的选课人数。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Cno,<span class="keyword">COUNT</span>(Sno)</span><br><span class="line"><span class="keyword">FROM</span>    SC</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<table>
<thead>
<tr>
<th>Cno</th>
<th>COUNT(Sno)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>22</td>
</tr>
<tr>
<td>2</td>
<td>34</td>
</tr>
<tr>
<td>3</td>
<td>44</td>
</tr>
<tr>
<td>4</td>
<td>33</td>
</tr>
<tr>
<td>5</td>
<td>48</td>
</tr>
</tbody>
</table>
</blockquote>
<h4 id="使用having短语筛选最终输出结果"><a class="markdownIt-Anchor" href="#使用having短语筛选最终输出结果"></a> 使用HAVING短语筛选最终输出结果</h4>
<ul>
<li>只有满足HAVING短语指定条件的组才输出</li>
<li>HAVING短语与WHERE子句的区别：作用对象不同
<ul>
<li>WHERE子句作<strong>用于基表或视图</strong>，从中选择满足条件的元组。</li>
<li>HAVING短语<strong>作用于组</strong>，从中选择满足条件的组。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  查询选修了3门以上课程的学生学号。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno</span><br><span class="line"><span class="keyword">FROM</span>  SC</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</span><br><span class="line"><span class="keyword">HAVING</span>  <span class="keyword">COUNT</span>(*) &gt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p><strong>[例]  查询有3门以上课程是90分以上的学生的学号及（90分以上的）课程数。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,<span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Grade&gt;=<span class="number">90</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="限制查询结果数量"><a class="markdownIt-Anchor" href="#限制查询结果数量"></a> 限制查询结果数量</h3>
<p>当使用SELECT语句返回的结果集中行数很多时，为了便于用户对结果数据的浏览和操作，可以使用LIMIT子句来限制被SELECT语句返回的行数。<br />
语法格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LIMIT &#123;[offset,] row_count | row_count OFFSET offset&#125;</span><br></pre></td></tr></table></figure>
<p>其中，offset为可选项，<strong>默认为数字0</strong>，用于指定返回数据的第一行在SELECT语句结果集中的偏移量，其必须是非负的整数常量。注意，SELECT语句结果集中<strong>第一行（初始行）的偏移量为0而不是1</strong>。row_count用于指定返回数据的行数，其也必须是非负的整数常量。若这个指定行数大于实际能返回的行数时，MySQL将只返回它能返回的数据行。<br />
row_count OFFSET offset是MySQL5.0开始支持的另外一种语法，即从第offset+1行开始，取row_count行。</p>
<blockquote>
<p>例：在student表中查找前3位同学的信息(按学号从小到大排序）。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> STUDENT <span class="keyword">ORDER</span> <span class="keyword">BY</span> sno <span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>例：在student表中查找从第3位同学开始的3位学生的信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> sno <span class="keyword">LIMIT</span> <span class="number">2</span>,<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="连接查询"><a class="markdownIt-Anchor" href="#连接查询"></a> 连接查询</h2>
<ul>
<li>同时涉及多个表的查询称为连接查询</li>
<li>用来连接两个表的条件称为连接条件或连接谓词</li>
<li>一般格式：</li>
<li>[&lt;表名1&gt;.]&lt;列名1&gt;  &lt;比较运算符&gt;  [&lt;表名2&gt;.]&lt;列名2&gt;
<ul>
<li>比较运算符：=、&gt;、&lt;、&gt;=、&lt;=、!=</li>
</ul>
</li>
<li>[&lt;表名1&gt;.]&lt;列名1&gt; <strong>BETWEEN</strong> [&lt;表名2&gt;.]&lt;列名2&gt; <strong>AND</strong> [&lt;表名2&gt;.]&lt;列名3&gt;</li>
<li>连接字段
<ul>
<li>连接谓词中的列名称为连接字段</li>
<li>连接条件中的各连接字段类型必须是可比的，但不必是相同的</li>
</ul>
</li>
<li>SQL中连接查询的主要类型
<ul>
<li>广义笛卡尔积</li>
<li>等值连接(含自然连接)</li>
<li>非等值连接查询</li>
<li>自身连接查询</li>
<li>外连接查询</li>
<li>复合条件连接查询</li>
</ul>
</li>
</ul>
<h3 id="广义笛卡尔积"><a class="markdownIt-Anchor" href="#广义笛卡尔积"></a> 广义笛卡尔积</h3>
<ul>
<li>不带连接谓词的连接</li>
<li>很少使用</li>
</ul>
<blockquote>
<p><strong>例：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.* ,SC.*</span><br><span class="line"><span class="keyword">FROM</span>     Student, SC;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="等值与非等值连接查询"><a class="markdownIt-Anchor" href="#等值与非等值连接查询"></a> 等值与非等值连接查询</h3>
<p>等值连接、自然连接、非等值连接</p>
<blockquote>
<p><strong>[例]  查询每个学生及其选修课程的情况。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.*,SC.*</span><br><span class="line"><span class="keyword">FROM</span>     Student,SC</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno = SC.Sno;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="等值连接"><a class="markdownIt-Anchor" href="#等值连接"></a> 等值连接</h4>
<ul>
<li>连接运算符为 = 的连接操作
<ul>
<li>[&lt;表名1&gt;.]&lt;列名1&gt;  =  [&lt;表名2&gt;.]&lt;列名2&gt;</li>
<li>任何子句中引用表1和表2中同名属性时，都必须加表名前缀。引用唯一属性名时可以加也可以省略表名前缀。</li>
</ul>
</li>
</ul>
<h4 id="自然连接"><a class="markdownIt-Anchor" href="#自然连接"></a> 自然连接</h4>
<p>等值连接的一种特殊情况，把目标列中重复的属性列去掉。</p>
<blockquote>
<p><strong>[例]  对上例中查询条件用自然连接完成。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.Sno, Sname, Ssex, Sage, Sdept, Cno, Grade</span><br><span class="line"><span class="keyword">FROM</span>    Student,SC</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno = SC.Sno;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="自身连接"><a class="markdownIt-Anchor" href="#自身连接"></a> 自身连接</h4>
<ul>
<li>一个表与其自己进行连接，称为表的自身连接</li>
<li>需要给表起别名以示区别</li>
<li>由于所有属性名都是同名属性，因此必须使用别名前缀</li>
</ul>
<blockquote>
<p><strong>[例]  查询每一门课的间接先修课（即先修课的先修课）</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  FIRST.Cno,SECOND.Cpno</span><br><span class="line"><span class="keyword">FROM</span>  Course  <span class="keyword">FIRST</span>,Course  <span class="keyword">SECOND</span></span><br><span class="line"><span class="keyword">WHERE</span> FIRST.Cpno = SECOND.Cno;</span><br></pre></td></tr></table></figure>
<p>FIRST和SECOND表</p>
<table>
<thead>
<tr>
<th>Cno</th>
<th>Cname</th>
<th>Cpno</th>
<th>Ccredit</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>数据库</td>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>数学</td>
<td></td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>信息系统</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>4</td>
<td>操作系统</td>
<td>6</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>数据结构</td>
<td>7</td>
<td>4</td>
</tr>
<tr>
<td>6</td>
<td>数据处理</td>
<td></td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>PASCAL语言</td>
<td>6</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>结果</p>
<table>
<thead>
<tr>
<th>Cno</th>
<th>Cpno</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>7</td>
</tr>
<tr>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>5</td>
<td>6</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="外连接"><a class="markdownIt-Anchor" href="#外连接"></a> 外连接</h3>
<ul>
<li>外连接与普通连接的区别
<ul>
<li>普通连接操作只输出满足连接条件的元组</li>
<li>外连接操作以指定表为连接主体，将主体表中不满足连接条件的元组一并输出</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例] 查询每个学生及其选修课程的情况包括没有选修课程的学生——用外连接操作</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Student.Sno, Sname, Ssex, Sage, Sdept, Cno, Grade</span><br><span class="line"><span class="keyword">FROM</span>    Student, SC</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno = SC.Sno(*);</span><br><span class="line">from  表1 left out join 表2 on (正常连接条件)</span><br><span class="line">               right</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>在表名后面加外连接操作符(*)或(+)指定非主体表</li>
<li>非主体表有一“万能”的虚行，该行全部由空值组成</li>
<li>虚行可以和主体表中所有不满足连接条件的元组进行连接</li>
<li>由于虚行各列全部是空值，因此与虚行连接的结果中，来自非主体表的属性值全部是空值</li>
<li>左外连接
<ul>
<li>外连接符出现在连接条件的左边</li>
</ul>
</li>
<li>右外连接
<ul>
<li>外连接符出现在连接条件的右边</li>
</ul>
</li>
</ul>
<h2 id="嵌套查询"><a class="markdownIt-Anchor" href="#嵌套查询"></a> 嵌套查询</h2>
<h3 id="嵌套查询概述"><a class="markdownIt-Anchor" href="#嵌套查询概述"></a> 嵌套查询概述</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname    //外层查询/父查询</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="keyword">IN</span></span><br><span class="line">(<span class="keyword">SELECT</span> Sno     //内层查询/子查询</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Cno= <span class="string">' 2 '</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>子查询的限制
<ul>
<li>不能使用ORDER BY子句</li>
</ul>
</li>
<li>层层嵌套方式反映了 SQL语言的结构化</li>
<li>有些嵌套查询可以用连接运算替代</li>
<li>不相关子查询
<ul>
<li>子查询的查询条件不依赖于父查询</li>
</ul>
</li>
<li>相关子查询
<ul>
<li>子查询的查询条件依赖于父查询</li>
</ul>
</li>
</ul>
<h3 id="嵌套查询分类及求解方法"><a class="markdownIt-Anchor" href="#嵌套查询分类及求解方法"></a> 嵌套查询分类及求解方法</h3>
<h4 id="不相关子查询"><a class="markdownIt-Anchor" href="#不相关子查询"></a> 不相关子查询</h4>
<p>是由里向外逐层处理。即每个子查询在上一级查询处理之前求解，子查询的结果用于建立其父查询的查找条件。</p>
<h4 id="相关子查询"><a class="markdownIt-Anchor" href="#相关子查询"></a> 相关子查询</h4>
<p>首先取外层查询中表的第一个元组，根据它与内层查询相关的属性值处理内层查询，若WHERE子句返回值为真，则取此元组放入结果表；然后再取外层表的下一个元组；重复这一过程，直至外层表全部检查完为止。</p>
<h3 id="引出子查询的谓词"><a class="markdownIt-Anchor" href="#引出子查询的谓词"></a> 引出子查询的谓词</h3>
<h4 id="带有in谓词的子查询"><a class="markdownIt-Anchor" href="#带有in谓词的子查询"></a> 带有IN谓词的子查询</h4>
<blockquote>
<p><strong>[例]  查询与“刘晨”在同一个系学习的学生。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Sdept</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept  <span class="keyword">IN</span></span><br><span class="line">&gt;(<span class="keyword">SELECT</span> Sdept</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sname= ‘ 刘晨 ’);</span><br></pre></td></tr></table></figure>
<p>此查询为不相关子查询。DBMS求解该查询时也是分步去做的。<br />
父查询和子查询中的表均可以定义别名，把两个<code>FROM</code>的参数改成<code>Student S1/S2</code>。</p>
</blockquote>
<blockquote>
<p><strong>[例]查询选修了课程名为“信息系统”的学生学号和姓名</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname</span><br><span class="line"><span class="keyword">FROM</span>    Student</span><br><span class="line"><span class="keyword">WHERE</span> Sno  <span class="keyword">IN</span></span><br><span class="line">         (<span class="keyword">SELECT</span> Sno</span><br><span class="line">          <span class="keyword">FROM</span>    SC</span><br><span class="line">          <span class="keyword">WHERE</span>  Cno <span class="keyword">IN</span></span><br><span class="line">              (<span class="keyword">SELECT</span> Cno</span><br><span class="line">              <span class="keyword">FROM</span> Course</span><br><span class="line">              <span class="keyword">WHERE</span> Cname= ‘信息系统’));</span><br></pre></td></tr></table></figure>
<p>上述过程也可以用连接查询。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname</span><br><span class="line">     <span class="keyword">FROM</span>    Student,SC,Course</span><br><span class="line">     <span class="keyword">WHERE</span> Student.Sno = SC.Sno  <span class="keyword">AND</span></span><br><span class="line">                     SC.Cno = Course.Cno <span class="keyword">AND</span></span><br><span class="line">                     Course.Cname=‘信息系统’;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="带有比较运算符的子查询"><a class="markdownIt-Anchor" href="#带有比较运算符的子查询"></a> 带有比较运算符的子查询</h4>
<ul>
<li>当能确切知道内层查询返回单值时，可用比较运算符（&gt;，&lt;，=，&gt;=，&lt;=，!=或&lt; &gt;）。</li>
<li>与ANY或ALL谓词配合使用
<ul>
<li>ANY：任意一个值</li>
<li>ALL：所有值</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>例：假设一个学生只可能在一个系学习，并且必须属于一个系，则在上例中可以用 = 代替IN ：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Sdept</span><br><span class="line"><span class="keyword">FROM</span>    Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept =(</span><br><span class="line"><span class="keyword">SELECT</span> Sdept</span><br><span class="line"><span class="keyword">FROM</span>   Student</span><br><span class="line"><span class="keyword">WHERE</span> Sname= <span class="string">'刘晨'</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<table>
<thead>
<tr>
<th>组合</th>
<th>效果 <br></th>
</tr>
</thead>
<tbody>
<tr>
<td>=ANY</td>
<td>和IN等价</td>
</tr>
<tr>
<td>&lt;&gt;ALL</td>
<td>和NOT IN等价</td>
</tr>
<tr>
<td>&gt;ANY</td>
<td>大于最小的(&gt;MIN)</td>
</tr>
<tr>
<td>&lt;ANY</td>
<td>小于最大的(&lt;MAX)</td>
</tr>
<tr>
<td>&gt;ALL</td>
<td>大于最大的(&gt;MAX)</td>
</tr>
<tr>
<td>&lt;ALL</td>
<td>小于最小的(&lt;MIN)</td>
</tr>
<tr>
<td>=ALL</td>
<td>很少使用，若返回值唯一，则和“=”相等，若不唯一，结果为空</td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://www.cnblogs.com/CareySon/archive/2011/07/18/2109406.html" target="_blank" rel="noopener">表格来源</a></p>
</blockquote>
<h5 id="带有exists谓词的子查询"><a class="markdownIt-Anchor" href="#带有exists谓词的子查询"></a> 带有EXISTS谓词的子查询</h5>
<ul>
<li>EXISTS谓词
<ul>
<li>存在量词 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∃</mi></mrow><annotation encoding="application/x-tex">\exists</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∃</span></span></span></span></li>
<li>带有EXISTS谓词的子查询不返回任何数据，只产生逻辑真值“true”或逻辑假值“false”。
<ul>
<li>若内层查询结果非空，则返回真值</li>
<li>若内层查询结果为空，则返回假值</li>
</ul>
</li>
<li>由EXISTS引出的子查询，其目标列表达式通常都用* ，因为带EXISTS的子查询只返回真值或假值，给出列名无实际意义</li>
</ul>
</li>
<li>NOT EXISTS谓词</li>
</ul>
<blockquote>
<p><strong>[例]  用嵌套查询查询所有选修了1号课程的学生姓名。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span></span><br><span class="line">(<span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> SC          <span class="comment">/*相关子查询*/</span></span><br><span class="line"><span class="keyword">WHERE</span> Sno=Student.Sno <span class="keyword">AND</span>  Cno= <span class="string">' 1 '</span>);</span><br></pre></td></tr></table></figure>
<p><strong>思路分析：</strong><br />
本查询涉及Student和SC关系。<br />
在Student中依次取每个元组的Sno值，用此值去检查SC关系。<br />
若SC中存在这样的元组，其Sno值等于此Student.Sno值，并且其Cno= ‘1’，则取此Student.Sname送入结果关系。</p>
</blockquote>
<blockquote>
<p><strong>[例]  查询没有选修1号课程的学生姓名。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">(<span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Sno = Student.Sno  <span class="keyword">AND</span> Cno=<span class="string">'1'</span>);</span><br><span class="line">//此例用连接运算难于实现</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><strong>一些</strong>带EXISTS或NOT EXISTS谓词的子查询不能被其他形式的子查询等价替换</li>
<li><strong>所有</strong>带IN谓词、比较运算符、ANY和ALL谓词的子查询都能用带EXISTS谓词的子查询等价替换。</li>
<li>用EXISTS/NOT EXISTS实现全称量词(难点)
<ul>
<li>SQL语言中没有全称量词<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∀</mi></mrow><annotation encoding="application/x-tex">\forall</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∀</span></span></span></span> （For all）</li>
<li>可以把带有全称量词的谓词转换为等价的带有存在量词的谓词：</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="normal">∀</mi><mi>x</mi><mo stretchy="false">)</mo><mi>P</mi><mo>≡</mo><mi mathvariant="normal">¬</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∃</mi><mi>x</mi><mo stretchy="false">(</mo><mi mathvariant="normal">¬</mi><mi>P</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\forall x) P \equiv \neg(\exists x(\neg P))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">∀</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">¬</span><span class="mopen">(</span><span class="mord">∃</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord">¬</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
<li>用EXISTS/NOT EXISTS实现逻辑蕴函(难点)
<ul>
<li>SQL语言中没有蕴函(Implication)逻辑运算</li>
<li>可以利用谓词演算将逻辑蕴函谓词等价转换为：</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>→</mo><mi>q</mi><mo>≡</mo><mi mathvariant="normal">¬</mi><mi>p</mi><mo>∨</mo><mi>q</mi></mrow><annotation encoding="application/x-tex">p\rightarrow q \equiv \neg p \vee q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.65819em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.75em;vertical-align:-0.19444em;"></span><span class="mord">¬</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span></li>
</ul>
</li>
</ul>
<h2 id="集合查询"><a class="markdownIt-Anchor" href="#集合查询"></a> 集合查询</h2>
<ul>
<li>标准SQL直接支持的集合操作种类
<ul>
<li>并操作(UNION)</li>
</ul>
</li>
<li>一般商用数据库支持的集合操作种类
<ul>
<li>并操作(UNION)</li>
<li>交操作(INTERSECT)</li>
<li>差操作(MINUS)</li>
</ul>
</li>
</ul>
<h3 id="并操作"><a class="markdownIt-Anchor" href="#并操作"></a> 并操作</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;查询块&gt;</span><br><span class="line">UNION</span><br><span class="line">&lt;查询块&gt;</span><br></pre></td></tr></table></figure>
<p>参加<code>UNION</code>操作的各结果表的列数必须相同；对应项的数据类型也必须相同。<br />
等价于：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">DISTINCT</span>  *</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept= <span class="string">'CS'</span>  <span class="keyword">OR</span>  Sage&lt;=<span class="number">19</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>[例]  查询选修了课程1或者选修了课程2的学生。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Cno=<span class="string">' 1 '</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Cno= <span class="string">' 2 '</span>;</span><br></pre></td></tr></table></figure>
<p>等价于：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">DISTINCT</span>  Sno</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Cno=<span class="string">' 1 '</span>  <span class="keyword">OR</span>  Cno= <span class="string">' 2 '</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="交操作"><a class="markdownIt-Anchor" href="#交操作"></a> 交操作</h3>
<p>标准SQL中用<code>INTERSECT</code>实现交操作，也可用其他方法间接实现。</p>
<blockquote>
<p><strong>[例]  查询计算机科学系的学生与年龄不大于19岁的学生的交集</strong><br />
本例实际上就是查询计算机科学系中年龄不大于19岁的学生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept= <span class="string">'CS'</span> <span class="keyword">AND</span> Sage&lt;=<span class="number">19</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="差操作"><a class="markdownIt-Anchor" href="#差操作"></a> 差操作</h3>
<p>标准SQL中用<code>EXCEPT</code>实现差操作，也可用其他方法间接实现。</p>
<blockquote>
<p>[例]  查询计算机科学系的学生与年龄不大于19岁的学生的差集。<br />
本例实际上是查询计算机科学系中年龄大于19岁的学生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept= <span class="string">'CS'</span> <span class="keyword">AND</span></span><br><span class="line">Sage&gt;<span class="number">19</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="对集合操作结果的排序"><a class="markdownIt-Anchor" href="#对集合操作结果的排序"></a> 对集合操作结果的排序</h3>
<ul>
<li>ORDER BY子句只能用于对最终查询结果排序，不能对中间结果排序</li>
<li>任何情况下，ORDER BY子句只能出现在最后</li>
<li>对集合操作结果排序时，ORDER BY子句中用数字指定排序属性</li>
</ul>
<h1 id="数据更新"><a class="markdownIt-Anchor" href="#数据更新"></a> 数据更新</h1>
<h2 id="插入数据"><a class="markdownIt-Anchor" href="#插入数据"></a> 插入数据</h2>
<h3 id="插入单个元组"><a class="markdownIt-Anchor" href="#插入单个元组"></a> 插入单个元组</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span> &lt;表名&gt; [(&lt;属性列<span class="number">1</span>&gt;[,&lt;属性列<span class="number">2</span> &gt;…)]</span><br><span class="line"><span class="keyword">VALUES</span> (&lt;常量<span class="number">1</span>&gt; [,&lt;常量<span class="number">2</span>&gt;]    …           )</span><br></pre></td></tr></table></figure>
<p>功能：将新元组插入指定表中。</p>
<blockquote>
<p><strong>[例]  将一个新学生记录（学号：95020；姓名：陈冬；性别：男；所在系：IS；年龄：18岁）插入到Student表中。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span> Student</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'95020'</span>,<span class="string">'陈冬'</span>,<span class="string">'男'</span>,<span class="string">'IS'</span>,<span class="number">18</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="插入子查询结果"><a class="markdownIt-Anchor" href="#插入子查询结果"></a> 插入子查询结果</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT</span><br><span class="line">INTO &lt;表名&gt;  [(&lt;属性列1&gt; [,&lt;属性列2&gt;…  )]</span><br><span class="line">子查询;</span><br></pre></td></tr></table></figure>
<p>功能：将子查询结果插入指定表中。</p>
<blockquote>
<p><strong>[例]  对每一个系，求学生的平均年龄，并把结果存入数据库。</strong></p>
<p>第一步：建表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  Deptage</span><br><span class="line">(Sdept  <span class="built_in">CHAR</span>(<span class="number">15</span>)           <span class="comment">/* 系名*/</span></span><br><span class="line">Avgage <span class="built_in">SMALLINT</span>);  <span class="comment">/*学生平均年龄*/</span></span><br></pre></td></tr></table></figure>
<p>第二步：插入数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span>  Deptage(Sdept,Avgage)</span><br><span class="line"><span class="keyword">SELECT</span>  Sdept,<span class="keyword">AVG</span>(Sage)</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sdept；</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="修改数据"><a class="markdownIt-Anchor" href="#修改数据"></a> 修改数据</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  &lt;表名&gt;</span><br><span class="line"><span class="keyword">SET</span>  &lt;列名&gt;=&lt;表达式&gt;[，&lt;列名&gt;=&lt;表达式&gt;]…</span><br><span class="line">[<span class="keyword">WHERE</span> &lt;条件&gt;]；</span><br></pre></td></tr></table></figure>
<p>功能：修改指定表中满足WHERE子句条件的元组</p>
<h3 id="修改某一个元组的值"><a class="markdownIt-Anchor" href="#修改某一个元组的值"></a> 修改某一个元组的值</h3>
<blockquote>
<p><strong>[例]  将学生95001的年龄改为22岁。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  Student</span><br><span class="line"><span class="keyword">SET</span> Sage=<span class="number">22</span></span><br><span class="line"><span class="keyword">WHERE</span>  Sno=<span class="string">' 95001 '</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="修改多个元组的值"><a class="markdownIt-Anchor" href="#修改多个元组的值"></a> 修改多个元组的值</h3>
<blockquote>
<p><strong>[例]  将所有学生的年龄增加1岁。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> Student</span><br><span class="line"><span class="keyword">SET</span> Sage= Sage+<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="带子查询的修改语句"><a class="markdownIt-Anchor" href="#带子查询的修改语句"></a> 带子查询的修改语句</h3>
<blockquote>
<p><strong>[例]  将计算机科学系全体学生的成绩置100。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> SC</span><br><span class="line"><span class="keyword">SET</span>  Grade=<span class="number">100</span></span><br><span class="line"><span class="keyword">WHERE</span>  <span class="string">'CS'</span>=</span><br><span class="line">(SELETE Sdept</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span>  Student.Sno = SC.Sno);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="删除数据"><a class="markdownIt-Anchor" href="#删除数据"></a> 删除数据</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span>   &lt;表名&gt;</span><br><span class="line">[<span class="keyword">WHERE</span> &lt;条件&gt;]；</span><br></pre></td></tr></table></figure>
<p>功能：删除指定表中满足WHERE子句条件的元组</p>
<p>WHERE子句：</p>
<ul>
<li>指定要删除的元组</li>
<li>缺省表示要修改表中的所有元组</li>
</ul>
<h3 id="删除某一个元组的值"><a class="markdownIt-Anchor" href="#删除某一个元组的值"></a> 删除某一个元组的值</h3>
<blockquote>
<p><strong>[例]  删除学号为95019的学生记录。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sno=<span class="string">'95019'</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="删除多个元组的值"><a class="markdownIt-Anchor" href="#删除多个元组的值"></a> 删除多个元组的值</h3>
<blockquote>
<p><strong>[例]  删除2号课程的所有选课记录。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> SC；</span><br><span class="line"><span class="keyword">WHERE</span> Cno=<span class="string">'2'</span>;</span><br></pre></td></tr></table></figure>
<p><strong>[例]  删除所有的学生选课记录。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> SC;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="带子查询的删除语句"><a class="markdownIt-Anchor" href="#带子查询的删除语句"></a> 带子查询的删除语句</h3>
<blockquote>
<p><strong>[例]  删除计算机科学系所有学生的选课记录。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span>  <span class="string">'CS'</span>=</span><br><span class="line">(SELETE Sdept</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Student.Sno=SC.Sno);</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="视图"><a class="markdownIt-Anchor" href="#视图"></a> 视图</h1>
<ul>
<li>视图的特点
<ul>
<li>虚表，是从一个或几个基本表（或视图）导出的表</li>
<li>只存放视图的定义，不会出现数据冗余</li>
<li>基表中的数据发生变化，从视图中查询出的数据也随之改变</li>
</ul>
</li>
<li>基于视图的操作
<ul>
<li>定义</li>
<li>查询</li>
<li>删除</li>
<li>受限更新</li>
<li>定义基于该视图的新视图</li>
</ul>
</li>
</ul>
<h2 id="定义视图"><a class="markdownIt-Anchor" href="#定义视图"></a> 定义视图</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">VIEW</span></span><br><span class="line">&lt;视图名&gt;  [(&lt;列名&gt;  [,&lt;列名&gt;]…)]</span><br><span class="line"><span class="keyword">AS</span>  &lt;子查询&gt;</span><br><span class="line">[<span class="keyword">WITH</span>  <span class="keyword">CHECK</span>  <span class="keyword">OPTION</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>[例]  建立信息系学生的视图。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_Student</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span>   Student</span><br><span class="line"><span class="keyword">WHERE</span>  Sdept= <span class="string">'IS'</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>从单个基本表导出，只是去掉了基本表的某些行和某些列，保留了码。把这样的视图叫做<strong>行列子集视图</strong>。</p>
<ul>
<li><code>WITH CHECK OPTION</code>
<ul>
<li>透过视图进行增删改操作时，不得破坏视图定义中的谓词条件（即子查询中的条件表达式）</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  建立信息系选修了1号课程的学生视图。这是一个基于多个基表的视图。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_S1(Sno,Sname,Grade)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Student.Sno,Sname,Grade</span><br><span class="line"><span class="keyword">FROM</span>  Student,SC</span><br><span class="line"><span class="keyword">WHERE</span>  Sdept= <span class="string">'IS'</span> <span class="keyword">AND</span></span><br><span class="line">Student.Sno=SC.Sno <span class="keyword">AND</span></span><br><span class="line">SC.Cno= <span class="string">'1'</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>[例]  建立信息系选修了1号课程且成绩在90分以上的学生的视图。这是一个基于视图的视图。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_S2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Grade</span><br><span class="line"><span class="keyword">FROM</span>  IS_S1</span><br><span class="line"><span class="keyword">WHERE</span>  Grade&gt;=<span class="number">90</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>[例]  定义一个反映学生出生年份的视图。这是一个带表达式的视图。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">VIEW</span> BT_S(Sno,Sname,Sbirth)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno,Sname,<span class="number">2020</span>-Sage  //<span class="number">2020</span>-Sage就等于出生年份</span><br><span class="line"><span class="keyword">FROM</span>  Student;</span><br></pre></td></tr></table></figure>
<p>设置一些派生属性列, 也称为虚拟列——Sbirth，带表达式的视图必须明确定义组成视图的各个属性列名</p>
</blockquote>
<blockquote>
<p><strong>[例]  将学生的学号及他的平均成绩定义为一个视图。这是一个分组视图。</strong><br />
假设SC表中“成绩”列Grade为数字型</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CREAT  VIEW S_G(Sno,Gavg)</span><br><span class="line">AS</span><br><span class="line"><span class="keyword">SELECT</span> Sno,<span class="keyword">AVG</span>(Grade)</span><br><span class="line"><span class="keyword">FROM</span>  SC</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="删除视图"><a class="markdownIt-Anchor" href="#删除视图"></a> 删除视图</h2>
<ul>
<li><code>DROP VIEW &lt;视图名&gt;</code>；
<ul>
<li>该语句从数据字典中删除指定的视图定义</li>
<li>由该视图导出的其他视图定义仍在数据字典中，但已不能使用，必须显式删除</li>
<li>删除基表时，由该基表导出的所有视图定义都必须显式删除</li>
</ul>
</li>
</ul>
<h2 id="查询视图"><a class="markdownIt-Anchor" href="#查询视图"></a> 查询视图</h2>
<ul>
<li>从用户角度：<strong>查询视图与查询基本表相同</strong></li>
<li>DBMS<strong>实现</strong>视图查询的方法
<ul>
<li>实体化视图（View Materialization）
<ul>
<li>有效性检查：检查所查询的视图是否存在</li>
<li>执行视图定义，将视图临时实体化，生成临时表</li>
<li>查询视图转换为查询临时表</li>
<li>查询完毕删除被实体化的视图(临时表)</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  在信息系学生的视图中找出年龄小于20岁的学生。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>   Sno,Sage</span><br><span class="line"><span class="keyword">FROM</span>      IS_Student</span><br><span class="line"><span class="keyword">WHERE</span>   Sage&lt;<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>IS_Student视图的定义 (视图定义例1)：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_Student</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">WHERE</span>  Sdept= <span class="string">'IS'</span>;</span><br></pre></td></tr></table></figure>
<p><strong>[例]  查询信息系选修了1号课程的学生</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname</span><br><span class="line"><span class="keyword">FROM</span>   IS_Student,SC</span><br><span class="line"><span class="keyword">WHERE</span>  IS_Student.Sno = SC.Sno <span class="keyword">AND</span> SC.Cno = <span class="string">'1'</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="更新视图"><a class="markdownIt-Anchor" href="#更新视图"></a> 更新视图</h2>
<ul>
<li>用户角度：更新视图与更新基本表相同</li>
<li>DBMS实现视图更新的方法
<ul>
<li>视图实体化法（View Materialization）
<ul>
<li>先实例化视图，也就是从基本表中查出一个临时表，然后再根据查询条件在临时表中查找数据。</li>
</ul>
</li>
<li>视图消解法（View Resolution）
<ul>
<li>将查询语句与视图的定义相结合，生成对基本表的查询语句，再到基本表中查出数据。<a href="https://www.jianshu.com/p/d3fb1636016c" target="_blank" rel="noopener">来源</a></li>
</ul>
</li>
</ul>
</li>
<li>指定<code>WITH CHECK OPTION</code>子句后
<ul>
<li>DBMS在更新视图时会进行检查，防止用户通过视图对不属于视图范围内的基本表数据进行更新</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>[例]  将信息系学生视图IS_Student中学号95002 的学生姓名改为“刘辰”。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  IS_Student</span><br><span class="line"><span class="keyword">SET</span>  Sname= <span class="string">'刘辰'</span></span><br><span class="line"><span class="keyword">WHERE</span>  Sno= <span class="string">'95002'</span>;</span><br></pre></td></tr></table></figure>
<p>转换后的语句：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  Student</span><br><span class="line"><span class="keyword">SET</span> Sname= <span class="string">'刘辰'</span></span><br><span class="line"><span class="keyword">WHERE</span> Sno= <span class="string">'95002'</span> <span class="keyword">AND</span> Sdept= <span class="string">'IS'</span>;</span><br><span class="line">//因为在定义视图时，有Sdept= 'IS'语句</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="更新视图的限制"><a class="markdownIt-Anchor" href="#更新视图的限制"></a> 更新视图的限制</h3>
<p>一些视图是不可更新的，因为对这些视图的更新不能唯一地有意义地转换成对相应基本表的更新(对两类方法均如此)</p>
<blockquote>
<p><strong>例：视图S_G为不可更新视图。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> S_G (Sno,Gavg)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span>  Sno,<span class="keyword">AVG</span>(Grade)</span><br><span class="line"><span class="keyword">FROM</span>    SC</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno;</span><br><span class="line">//不能直接修改平均分</span><br></pre></td></tr></table></figure>
<p>对于如下更新语句：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> S_G</span><br><span class="line"><span class="keyword">SET</span>    Gavg=<span class="number">90</span></span><br><span class="line"><span class="keyword">WHERE</span>  Sno= <span class="string">'95001'</span>;</span><br></pre></td></tr></table></figure>
<p>无论实体化法还是消解法都无法将其转换成对基本表SC的更新。</p>
</blockquote>
<hr />
<p><strong>实际系统对视图更新的限制</strong></p>
<ul>
<li>允许对行列子集视图进行更新</li>
<li>对其他类型视图的更新不同系统有不同限制</li>
<li>DB2对视图更新的限制：
<ul>
<li>若视图是由<strong>两个以上基本表</strong>导出的，则此视图不允许更新。</li>
<li>若视图的字段来自<strong>字段表达式或常数</strong>，则不允许对此视图执行INSERT和UPDATE操作，但允许执行DELETE操作。</li>
<li>若视图的字段来自<strong>集函数</strong>，则此视图不允许更新。</li>
<li>若视图定义中含有<strong>GROUP BY子句</strong>，则此视图不允许更新。</li>
<li>若视图定义中含有<strong>DISTINCT短语</strong>，则此视图不允许更新。</li>
<li>若视图定义中有<strong>嵌套查询</strong>，并且<strong>内层查询</strong>的FROM子句中涉及的表也是导出该视图的基本表，则此视图不允许更新。</li>
<li>一个<strong>不允许更新的视图上</strong>定义的视图也不允许更新</li>
</ul>
</li>
</ul>
<h2 id="视图的作用"><a class="markdownIt-Anchor" href="#视图的作用"></a> 视图的作用</h2>
<h3 id="简化用户的操作"><a class="markdownIt-Anchor" href="#简化用户的操作"></a> 简化用户的操作</h3>
<ul>
<li>当视图中数据不是直接来自基本表时，定义视图能够简化用户的操作
<ul>
<li>基于多张表连接形成的视图</li>
<li>基于复杂嵌套查询的视图</li>
<li>含导出属性的视图</li>
</ul>
</li>
</ul>
<h3 id="使用户能以多种角度看待同一数据"><a class="markdownIt-Anchor" href="#使用户能以多种角度看待同一数据"></a> 使用户能以多种角度看待同一数据</h3>
<p>视图机制能使不同用户以不同方式看待同一数据，适应数据库共享的需要</p>
<h3 id="对重构数据库提供了一定程度的逻辑独立性"><a class="markdownIt-Anchor" href="#对重构数据库提供了一定程度的逻辑独立性"></a> 对重构数据库提供了一定程度的逻辑独立性</h3>
<ul>
<li>物理独立性与逻辑独立性的概念【<a href="/2020/04/13/database_0/">数据库原理 | 1. 概述</a>】
<ul>
<li>物理独立性是指用户的应用程序与存储在磁盘上的数据库中数据是相互独立的。即，数据在磁盘上怎样存储由DBMS管理，用户程序不需要了解，应用程序要处理的只是数据的逻辑结构，这样当数据的物理存储改变了，应用程序不用改变。</li>
<li>逻辑独立性是指用户的应用程序与数据库的逻辑结构是相互独立的，即，当数据的逻辑结构改变时，用户程序也可以不变。</li>
</ul>
</li>
<li>视图在一定程度上保证了数据的逻辑独立性</li>
<li>视图只能在一定程度上提供数据的逻辑独立性
<ul>
<li>由于对视图的更新是有条件的，因此应用程序中修改数据的语句可能仍会因基本表结构的改变而改变。</li>
</ul>
</li>
</ul>
<h3 id="对机密数据提供安全保护"><a class="markdownIt-Anchor" href="#对机密数据提供安全保护"></a> 对机密数据提供安全保护</h3>
<ul>
<li>对不同用户定义不同视图，使每个用户只能看到他有权看到的数据</li>
<li>通过<code>WITH CHECK OPTION</code>对关键数据定义操作时间限制</li>
</ul>
<blockquote>
<p><strong>[例]  建立1号课程的选课视图，并要求透过该视图进行的更新操作只涉及1号课程，同时对该视图的任何操作只能在工作时间进行。</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_SC</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno，Cno，Grade</span><br><span class="line"><span class="keyword">FROM</span>  SC</span><br><span class="line"><span class="keyword">WHERE</span>  Cno= <span class="string">'1'</span></span><br><span class="line"><span class="keyword">AND</span>  TO_CHAR(<span class="keyword">SYSDATE</span>,<span class="string">'HH24'</span>)  <span class="keyword">BETWEEN</span>  <span class="number">9</span>  <span class="keyword">AND</span>  <span class="number">17</span></span><br><span class="line"><span class="keyword">AND</span>  TO_CHAR(<span class="keyword">SYSDATE</span>,<span class="string">'D'</span>)  <span class="keyword">BETWEEN</span>  <span class="number">2</span>  <span class="keyword">AND</span>  <span class="number">6</span></span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure></blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>操作系统 | 2. 进程管理</title>
    <url>/2020/05/05/operating_system_1/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>进程管理
<ul>
<li>进程的基本概念
<ul>
<li>程序的顺序执行及其特征</li>
<li>前趋图</li>
<li>程序的并发执行及其特征
<ul>
<li>程序并发执行的条件</li>
</ul>
</li>
<li>进程概念</li>
<li>进程的特征与状态
<ul>
<li>进程的特征</li>
<li>进程和程序的区别</li>
<li>进程的三种基本状态</li>
<li>挂起状态</li>
<li>转换</li>
</ul>
</li>
<li>进程控制块
<ul>
<li>进程控制块中的信息
<ul>
<li>进程标识符</li>
<li>处理机状态</li>
<li>进程调度信息</li>
<li>进程控制信息</li>
</ul>
</li>
<li>进程控制块的组织方式
<ul>
<li>链接方式</li>
<li>索引方式</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>进程控制
<ul>
<li>操作系统内核
<ul>
<li>支撑功能</li>
<li>资源管理功能</li>
</ul>
</li>
<li>进程的创建
<ul>
<li>引起创建进程的事件</li>
<li>创建流程</li>
</ul>
</li>
<li>进程的终止
<ul>
<li>正常结束</li>
<li>异常结束</li>
<li>外界干预</li>
<li>进程的终止过程</li>
</ul>
</li>
<li>进程的阻塞与唤醒
<ul>
<li>引起进程阻塞和唤醒的事件</li>
<li>进程阻塞过程</li>
<li>进程唤醒过程</li>
</ul>
</li>
<li>进程的挂起与激活
<ul>
<li>进程的挂起
<ul>
<li>挂起原语的执行过程</li>
</ul>
</li>
<li>进程的激活
<ul>
<li>激活原语执行过程</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>进程同步
<ul>
<li>进程同步的基本概念
<ul>
<li>进程同步的原因</li>
<li>临界资源(Critical Resouce)
<ul>
<li>生产者-消费者(producer-consumer)问题</li>
</ul>
</li>
<li>临界区（critical section）</li>
<li>同步机制应遵循的规则</li>
</ul>
</li>
<li>信号量机制
<ul>
<li>整型信号量</li>
<li>记录型信号量</li>
<li>AND型信号量</li>
<li>信号量集</li>
</ul>
</li>
<li>信号量的应用
<ul>
<li>实现进程互斥</li>
<li>实现前趋关系</li>
</ul>
</li>
</ul>
</li>
<li>经典进程的同步问题
<ul>
<li>生产者—消费者问题
<ul>
<li>利用AND信号量解决生产者—消费者问题</li>
</ul>
</li>
<li>哲学家进餐问题</li>
<li>读者—写者问题
<ul>
<li>利用信号量集机制解决读者-写者问题</li>
</ul>
</li>
<li>独木桥问题</li>
</ul>
</li>
<li>管程机制
<ul>
<li>管程的引入</li>
<li>管程的基本概念
<ul>
<li>管程的语法
<ul>
<li>条件变量</li>
</ul>
</li>
</ul>
</li>
<li>利用管程解决生产者—消费者问题</li>
</ul>
</li>
<li>进程通信
<ul>
<li>进程通信的类型
<ul>
<li>共享存储器系统(Shared-Memory System)</li>
<li>消息传递系统(Message passing system)</li>
<li>管道(Pipe)通信（共享文件方式）</li>
</ul>
</li>
<li>消息传递通信的实现方法
<ul>
<li>直接通信方式</li>
<li>间接通信方式</li>
</ul>
</li>
<li>消息传递系统实现中的若干问题
<ul>
<li>通信链路(communication link)</li>
<li>消息的格式</li>
<li>进程同步方式</li>
</ul>
</li>
<li>消息缓冲队列通信机制
<ul>
<li>发送原语</li>
</ul>
</li>
</ul>
</li>
<li>线程
<ul>
<li>线程的基本概念
<ul>
<li>进程的两个基本属性</li>
<li>线程的引入</li>
<li>线程</li>
<li>线程的属性</li>
<li>线程的状态</li>
<li>线程的创建和终止</li>
<li>多线程OS中的进程</li>
<li>线程和进程的关系</li>
<li>引入线程的好处</li>
<li>线程与进程的比较</li>
</ul>
</li>
<li>线程间的同步和通信
<ul>
<li>互斥锁(mutex)</li>
<li>条件变量</li>
<li>信号量机制
<ul>
<li>私用信号量(private samephore)</li>
<li>公用信号量(public semaphore)</li>
</ul>
</li>
</ul>
</li>
<li>内核支持线程和用户级线程
<ul>
<li>内核支持线程(Kernel-Support Threads)
<ul>
<li>核心级线程的优点和缺点</li>
</ul>
</li>
<li>用户级线程(User-Level Threads)
<ul>
<li>用户级线程的优点和缺点</li>
</ul>
</li>
</ul>
</li>
<li>线程控制
<ul>
<li>内核支持线程的实现</li>
<li>用户级线程的实现
<ul>
<li>运行时系统(Runtime System)</li>
<li>内核控制线程</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="进程的基本概念"><a class="markdownIt-Anchor" href="#进程的基本概念"></a> 进程的基本概念</h1>
<h2 id="程序的顺序执行及其特征"><a class="markdownIt-Anchor" href="#程序的顺序执行及其特征"></a> 程序的顺序执行及其特征</h2>
<p>是单道批处理系统的执行方式，也用于简单的单片机系统.</p>
<ul>
<li>顺序执行的特征
<ul>
<li>顺序性：按照程序结构所指定的次序（可能有分支或循环）</li>
<li>封闭性：独占全部资源，计算机的状态只由于该程序的控制逻辑所决定</li>
<li>可再现性：初始条件相同则结果相同。如：可通过空指令控制时间关系</li>
</ul>
</li>
<li>仅当前一操作(程序段)执行完后，才能执行后继操作。例如，在进行计算时，总须先输入用户的程序和数据，然后进行计算，最后才能打印计算结果。例如语句s1,s2,s3必须按顺序执行。</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">S1:  a∶=x+y;</span><br><span class="line">S2:  b∶=a-<span class="number">5</span>;</span><br><span class="line">S3:  c∶=b+<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502170526.png" alt="" /></p>
<h2 id="前趋图"><a class="markdownIt-Anchor" href="#前趋图"></a> 前趋图</h2>
<ul>
<li>前趋图(Precedence Graph)是一个有向无循环图，记为DAG(Directed Acyclic Graph)，用于描述进程之间执行的前后关系。图中的每个结点可用于描述一个程序段或进程，乃至一条语句；结点间的有向边则用于表示两个结点之间存在的偏序(Partial Order)或前趋关系(Precedence Relation)“<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span>”</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msub><mi>P</mi><mi>i</mi></msub><mtext> </mtext><mi>m</mi><mi>u</mi><mi>s</mi><mi>t</mi><mtext> </mtext><mi>c</mi><mi>o</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>t</mi><mi>e</mi><mtext> </mtext><mi>b</mi><mi>e</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>P</mi><mi>j</mi></msub><mtext> </mtext><mi>m</mi><mi>a</mi><mi>y</mi><mtext> </mtext><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\rightarrow = \{(P_i, P_j)|P_i\ must\  complete\  before\   P_j \  may \  start\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace"> </span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mspace"> </span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord mathdefault">b</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace"> </span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace"> </span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mclose">}</span></span></span></span>, 如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>∈</mo><mo>→</mo></mrow><annotation encoding="application/x-tex">(P_i, P_j)\in \rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span>,可写成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>→</mo><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_i \rightarrow P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>的直接前趋，而称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>的直接后继。在前趋图中，把没有前趋的结点称为初始结点(Initial Node)，把没有后继的结点称为终止结点(Final Node)</li>
<li>每个结点还具有一个重量(Weight, <strong>权值</strong>)，用于表示该结点所含有的程序量或结点的执行时间</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502171742.png" alt="" /></p>
<h2 id="程序的并发执行及其特征"><a class="markdownIt-Anchor" href="#程序的并发执行及其特征"></a> 程序的并发执行及其特征</h2>
<p>在现在的操作系统应用，具有许多新的特征。引入并发执行的目的是为了提高资源利用率。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502171820.png" alt="并发执行时的前趋图" /></p>
<blockquote>
<ul>
<li>
<p>例如有两个循环程序A和B，它们共享一个变量N</p>
<ul>
<li><strong>A:</strong> N:=N+1;</li>
<li><strong>B:</strong> Print(N); N:=0;</li>
</ul>
</li>
<li>
<p>程序A和B以不同的速度运行(失去封闭性，导致不可再现性）</p>
</li>
<li>
<p>N∶=N+1在Print(N)和N∶=0之前，此时得到的N值分别为<strong>n+1, n+1, 0</strong></p>
</li>
<li>
<p>N∶=N+1在Print(N)和N∶=0之后，此时得到的N值分别为<strong>n, 0, 1</strong></p>
</li>
<li>
<p>N∶=N+1在Print(N)和N∶=0之间，此时得到的N值分别为<strong>n, n+1, 0</strong><br />
注意：A、B程序得到的共享变量结果不同，失去封闭性、不可再现性；要得到良好的控制，系统必须要进行管理——进程控制管理</p>
</li>
</ul>
</blockquote>
<ul>
<li>并发执行的特征
<ul>
<li>间断(异步)性
<ul>
<li>“走走停停”，一个程序可能走到中途停下来，失去原有的时序关系；</li>
</ul>
</li>
<li>失去封闭性
<ul>
<li>共享资源，受其他程序的控制逻辑的影响。如：一个程序写到存储器中的数据可能被另一个程序修改，失去原有的不变特征。</li>
</ul>
</li>
<li>失去可再现性
<ul>
<li>失去封闭性 -&gt; 失去可再现性；外界环境在程序的两次执行期间发生变化，失去原有的可重复特征</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="程序并发执行的条件"><a class="markdownIt-Anchor" href="#程序并发执行的条件"></a> 程序并发执行的条件</h3>
<ul>
<li>并发执行失去封闭性的原因是共享资源的影响，去掉这种影响就行了。1966年，由Bernstein给出并发执行的条件。（这里没有考虑执行速度的影响。）</li>
<li>程序 P(i) 针对<strong>共享变量的读集和写集</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span></li>
<li>条件：任意两个程序<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>，有：
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">R(i) \cap W(j)=\emptyset;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.94444em;vertical-align:-0.19444em;"></span><span class="mord">∅</span><span class="mpunct">;</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>R</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">W(i) \cap R(j)=\emptyset;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.94444em;vertical-align:-0.19444em;"></span><span class="mord">∅</span><span class="mpunct">;</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">W(i) \cap W(j)=\emptyset;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.94444em;vertical-align:-0.19444em;"></span><span class="mord">∅</span><span class="mpunct">;</span></span></span></span></li>
</ul>
</li>
<li>前两条保证一个程序的两次读之间数据不变化；最后一条保证写的结果不丢掉</li>
</ul>
<hr />
<p>若两个程序<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>满足下述条件，便能并发执行且有可再现性：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>∪</mo><mi>R</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>∪</mo><mi>W</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mtext> </mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R(P_1)\cap W(P_2) \cup R(P_2)\cap W(P_1) \cup W(P_1)\cap W(P_2)=\{\ \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mspace"> </span><span class="mclose">}</span></span></span></span><br />
就是不能<code>同时写</code>和<code>一读一写</code>。</p>
<ul>
<li>“读集” <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(P_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 为程序 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 在执行期间所需参考的所有变量的集合。</li>
<li>“写集” <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W(P_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>为程序 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 在执行期间所需改变的所有变量的集合。</li>
</ul>
<h2 id="进程概念"><a class="markdownIt-Anchor" href="#进程概念"></a> 进程概念</h2>
<ul>
<li>进程（Process）
<ul>
<li>描述性定义：计算机中的所有程序（软件），按照某种顺序运行，这种运行的过程称之为进程。</li>
</ul>
</li>
<li>进程的核心思想
<ul>
<li>进程是某种类型的一个活动，它有程序、输入、输出和状态。在分时操作系统中，单个CPU被若干进程共享，它使用某种调度算法决定何时停止一个进程的运行，转而为其他进程提供服务。</li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502175206.png" alt="" /></p>
<ul>
<li>较典型的进程定义有：
<ul>
<li>进程是程序的一次执行</li>
<li>进程是一个程序及其数据在处理机上顺序执行时所发生的活动</li>
<li>进程是程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位</li>
</ul>
</li>
</ul>
<h2 id="进程的特征与状态"><a class="markdownIt-Anchor" href="#进程的特征与状态"></a> 进程的特征与状态</h2>
<h3 id="进程的特征"><a class="markdownIt-Anchor" href="#进程的特征"></a> 进程的特征</h3>
<ul>
<li><strong>动态性</strong>：进程具有<strong>动态的地址空间</strong>（数量和内容），地址空间上包括：
<ul>
<li><strong>代码</strong>（指令执行和CPU状态的改变）</li>
<li><strong>数据</strong>（变量的生成和赋值）</li>
<li>系统<strong>控制信息</strong>（进程控制块的建立和系统收回）</li>
</ul>
</li>
<li><strong>独立性</strong>：各进程的<strong>地址空间相互独立</strong>，除非采用进程间通信手段；</li>
<li><strong>并发性</strong>：多个<strong>进程实体</strong>同存于内存中，且能在一段时间内同时运行；引入进程实体的目的就是并发执行</li>
<li><strong>异步性</strong>：各进程按各自独立的、不可预知的速度向前推进</li>
<li><strong>结构性</strong>：<strong>程序段、数据段和PCB</strong>；程序文件中通常也划分了代码段和数据段，进程的创建与撤消就是PCB的创建与撤消</li>
</ul>
<p>通常的程序是不能并发执行的。应为之配置进程控制块，即PCB；<strong>而由程序段、相关的数据段和PCB三部分便构成了进程实体</strong>。在许多情况下所说的进程，实际上是指进程实体。所谓创建进程，实质上是创建进程实体中的PCB；而撤销进程，实质上是撤销进程的PCB。</p>
<p>在引入了进程实体的概念后，我们可以把传统OS中的进程定义为：“<strong>进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位</strong>”。</p>
<h3 id="进程和程序的区别"><a class="markdownIt-Anchor" href="#进程和程序的区别"></a> 进程和程序的区别</h3>
<ul>
<li><strong>进程是动态的，程序是静态的</strong>：程序是有序代码的集合；进程是程序的执行。通常进程不可在计算机之间迁移；而程序通常对应着文件、静态和可以复制</li>
<li><strong>进程是暂时的，程序的永久的</strong>：进程是一个状态变化的过程，程序可长久保存</li>
<li><strong>进程与程序的组成不同</strong>：进程的组成包括程序、数据和进程控制块（即进程状态信息）</li>
<li><strong>进程与程序的对应关系</strong>：通过多次执行，一个程序可对应多个进程；通过调用关系，一个进程可包括多个程序</li>
</ul>
<h3 id="进程的三种基本状态"><a class="markdownIt-Anchor" href="#进程的三种基本状态"></a> 进程的三种基本状态</h3>
<ul>
<li>就绪(Ready)状态
<ul>
<li>可运行，已获得除<strong>CPU</strong>外的所需资源，等待分配CPU</li>
<li>一个系统中多个处于就绪状态的进程排成<strong>就绪队列</strong></li>
</ul>
</li>
<li>执行(Running)状态
<ul>
<li>占用<strong>CPU运行</strong>；处于此状态的进程的数目&lt;=CPU的数目</li>
<li>没有其它进程可以执行时（如所有进程都在阻塞状态），通常会自动执行系统的idle进程（相当于空操作）</li>
</ul>
</li>
<li>阻塞(Blocked)状态
<ul>
<li>等待某种条件（如I/O操作或进程同步），在条件满足之前<strong>无法继续执行</strong>。该事件发生前即使把处理机分配给该进程，也无法运行</li>
<li>通常阻塞进程也排成一个<strong>阻塞队列</strong></li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502181839.png" alt="" /></p>
<ul>
<li>创建状态
<ul>
<li>进程刚建立，还未进入就绪队列。</li>
</ul>
</li>
<li>终止状态
<ul>
<li>进程已（正常或异常）结束，已从就绪队列中移出，但尚未撤销。</li>
<li>暂留，以便其他进程收集该进程的有关信息。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502182014.png" alt="" /></li>
</ul>
</li>
</ul>
<h3 id="挂起状态"><a class="markdownIt-Anchor" href="#挂起状态"></a> 挂起状态</h3>
<ul>
<li>这个问题的出现是由于进程优先级的引入，一些低优先级进程可能等待较长时间，从而被对换至外存。这样做的目的是：
<ul>
<li><strong>提高处理机效率</strong>：就绪进程表为空时，要提交新进程，以提高处理机效率；</li>
<li><strong>为运行进程提供足够内存</strong>：资源紧张时，暂停某些进程，如：CPU繁忙（或实时任务执行），内存紧张</li>
<li><strong>用于调试</strong>：在调试时，挂起<strong>被调试进程</strong>（从而对其地址空间进行读写）</li>
</ul>
</li>
<li>引起进程挂起的原因有以下几种
<ul>
<li><strong>终端用户的请求</strong>
<ul>
<li>当终端用户在自己的程序运行期间发现有可疑问题时，希望暂时将自己的程序静止下来</li>
</ul>
</li>
<li><strong>父进程请求</strong>
<ul>
<li>父进程需要考查和修改子进程</li>
</ul>
</li>
<li><strong>负荷调节的需要</strong>
<ul>
<li>在实时系统中为了调整工作负荷可将不重要的进程挂起</li>
</ul>
</li>
<li><strong>操作系统的需要</strong>
<ul>
<li>如检查运行中的资源使用情况</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>挂起（Suspend）：进程从内存转到外存
<ul>
<li><strong>就绪挂起</strong>：活动就绪到静止就绪，当有<strong>高优先级阻塞</strong>（系统认为会很快就绪的）进程和低优先级就绪进程时，系统会选择挂起低优先级就绪进程</li>
<li><strong>阻塞挂起</strong>：活动阻塞到静止阻塞，无进程处于<strong>就绪进程</strong>要求更多内存资源时，会进行这种转换，以提交新进程或运行就绪进程</li>
<li><strong>运行到就绪挂起</strong>：对抢占式分时系统，当有高优先级阻塞挂起进程因事件出现而进入就绪挂起时，系统可能会把运行进程转到就绪挂起状态</li>
</ul>
</li>
<li>激活（Activate）：进程从外存转到内存
<ul>
<li><strong>就绪激活</strong>：静止就绪到活动就绪，<strong>没有就绪进程</strong>或<strong>挂起就绪进程优先级高于就绪进程</strong>时，会进行这种转换；</li>
<li><strong>阻塞激活</strong>：静止阻塞到活动阻塞，<strong>当一个进程释放足够内存时</strong>，系统会把一个高优先级阻塞挂起（系统认为会很快出现所等待的事件）进程激活；</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>执行的进程暂停</li>
<li>就绪的进程暂不调度</li>
<li>阻塞的进程即使引起阻塞的事件消失也不调度</li>
</ul>
<h3 id="转换"><a class="markdownIt-Anchor" href="#转换"></a> 转换</h3>
<ul>
<li><strong>事件出现</strong>(Event Occurs) ：进程等待的事件出现，如：操作完成、申请成功等；</li>
<li>可能的情况有：
<ul>
<li>阻塞到就绪：针对内存进程的事件出现；</li>
<li>阻塞挂起到就绪挂起：针对外存进程的事件出现；</li>
</ul>
</li>
<li><strong>收容</strong>(Admit)：收容一个新进程，进入就绪状态或就绪挂起状态。进入就绪挂起的原因是系统希望<strong>保持一个大的就绪进程表</strong>（挂起和非挂起）；<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502182726.png" alt="" /></li>
</ul>
<h2 id="进程控制块"><a class="markdownIt-Anchor" href="#进程控制块"></a> 进程控制块</h2>
<ul>
<li>进程控制块的作用
<ul>
<li>是使一个在多道程序环境下不能独立运行的程序(含数据)，成为一个能独立运行的基本单位，一个能与其它进程并发执行的进程。或者说，OS是根据PCB来对并发执行的进程进行控制和管理的。</li>
<li>是系统感知进程存在的惟一标志。</li>
</ul>
</li>
<li>进程控制块中的信息有：
<ul>
<li>进程标识符</li>
<li>处理机状态</li>
<li>进程调度信息</li>
<li>进程控制信息</li>
</ul>
</li>
</ul>
<h3 id="进程控制块中的信息"><a class="markdownIt-Anchor" href="#进程控制块中的信息"></a> 进程控制块中的信息</h3>
<h4 id="进程标识符"><a class="markdownIt-Anchor" href="#进程标识符"></a> 进程标识符</h4>
<ul>
<li><strong>进程标识符</strong>用于惟一地<strong>标识</strong>一个进程。一个进程通常有两种标识符：
<ul>
<li><strong>内部标识符</strong>——在所有的操作系统中，都为每一个进程赋予一个惟一的数字标识符，它通常是一个进程的序号。设置内部标识符主要是为了方便系统使用。</li>
<li><strong>外部标识符</strong>——它由创建者提供，通常是由字母、数字组成，往往是由用户(进程)在访问该进程时使用。为了描述进程的家族关系， 还应设置父进程标识及子进程标识。此外，还可设置用户标识，以指示拥有该进程的用户。</li>
</ul>
</li>
</ul>
<h4 id="处理机状态"><a class="markdownIt-Anchor" href="#处理机状态"></a> 处理机状态</h4>
<ul>
<li>处理机状态（CPU现场保护区）</li>
<li>主要是由CPU的各种<strong>寄存器</strong>中的内容组成的：
<ul>
<li><strong>通用寄存器</strong>——又称为用户可视寄存器，是用户程序可以访问的，用于暂存信息， 在大多数处理机中，有 8~32 个通用寄存器，在RISC结构的计算机中可超过 100 个；</li>
<li><strong>指令计数器</strong>——其中存放了要访问的下一条指令的地址；</li>
<li><strong>程序状态字PSW</strong>——其中含有状态信息，如条件码、执行方式、中断屏蔽标志等；</li>
<li><strong>用户栈指针</strong>——指每个用户进程都有一个或若干个与之相关的系统栈，用于存放过程和系统调用参数及调用地址。栈指针指向该栈的栈顶</li>
</ul>
</li>
</ul>
<h4 id="进程调度信息"><a class="markdownIt-Anchor" href="#进程调度信息"></a> 进程调度信息</h4>
<ul>
<li>存放与进程调度和进程对换有关的信息，包括:
<ul>
<li><strong>进程状态</strong>——指明进程的当前状态， 作为进程调度和对换时的依据；</li>
<li><strong>进程优先级</strong>——用于描述进程使用处理机的优先级别的一个整数，调度的依据，高者优先获得处理机；</li>
<li><strong>进程调度所需的其它信息</strong>——它们与所采用的进程调度算法有关，比如，进程已等待CPU的时间总和、 进程已执行的时间总和等；</li>
<li><strong>事件</strong>——是指进程由执行状态转变为阻塞状态所等待发生的事件，即阻塞原因</li>
</ul>
</li>
</ul>
<h4 id="进程控制信息"><a class="markdownIt-Anchor" href="#进程控制信息"></a> 进程控制信息</h4>
<ul>
<li><strong>程序和数据的地址</strong>——是指进程的程序和数据所在的内存或外存地(首)址，以便再调度到该进程执行时，能从PCB中找到其程序和数据；</li>
<li><strong>进程同步和通信机制</strong>——指实现进程同步和进程通信时必需的机制， 如消息队列指针、信号量等，它们可能全部或部分地放在PCB中；</li>
<li><strong>占用资源清单</strong>——列出了除CPU以外的、进程所需的全部资源及已经分配到该进程的资源的清单；</li>
<li><strong>链接指针</strong>——它给出了本进程(PCB)所在队列中的下一个进程的PCB的首地址</li>
<li><strong>家族联系</strong>—— 指明本进程与家族的关系，如它的子进程与父进程的标识</li>
</ul>
<h3 id="进程控制块的组织方式"><a class="markdownIt-Anchor" href="#进程控制块的组织方式"></a> 进程控制块的组织方式</h3>
<h4 id="链接方式"><a class="markdownIt-Anchor" href="#链接方式"></a> 链接方式</h4>
<p>把具有同一状态的PCB用其中的链接字链接成一个队列，可以形成<strong>就绪队列</strong>、若干个<strong>阻塞队列</strong>和<strong>空白队列</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502191523.png" alt="" /></p>
<h4 id="索引方式"><a class="markdownIt-Anchor" href="#索引方式"></a> 索引方式</h4>
<p>系统根据所有进程的状态建立几张索引表，如<strong>就绪索引表、阻塞索引表</strong>等，并把各索引表在内存的首地址记录在专用单元中。索引表中记录的是PCB在PCB表中的地址。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502191614.png" alt="" /></p>
<h1 id="进程控制"><a class="markdownIt-Anchor" href="#进程控制"></a> 进程控制</h1>
<ul>
<li>职责是对系统中全部进程实施有效管理，包括
<ul>
<li>创建新进程</li>
<li>终止已结束进程</li>
<li>终止由于某事件而无法运行下去的进程</li>
<li>负责进程的状态转换</li>
</ul>
</li>
<li>这些功能一般由操作系统的<strong>内核</strong>实现，操作系统的内核是基于硬件的第一次扩充。把与硬件紧密相关的模块、运行频率较高的模块及一些公用的基本操作安排在靠近硬件的软件层次中，并<strong>常驻内存</strong>，以提高系统运行效率。</li>
</ul>
<blockquote>
<p>这些进程控制功能是通过执行各种原语实现的。</p>
</blockquote>
<h2 id="操作系统内核"><a class="markdownIt-Anchor" href="#操作系统内核"></a> 操作系统内核</h2>
<ul>
<li>OS内核是计算机硬件的第一层软件扩充，常驻内存。</li>
<li>例：中断处理程序、设备驱动程序以及时钟管理、进程调度等。</li>
</ul>
<h3 id="支撑功能"><a class="markdownIt-Anchor" href="#支撑功能"></a> 支撑功能</h3>
<ul>
<li><strong>中断处理</strong>：最基本的功能，是OS的基础。</li>
<li><strong>时钟管理</strong>：为基本功能，如分时系统的时间片，实时系统的时间控制。</li>
<li><strong>原语操作</strong>：是原子操作（是不可分割的操作），用来执行基本操作。创建、撤销、阻塞、唤醒、挂起、激活。</li>
</ul>
<h3 id="资源管理功能"><a class="markdownIt-Anchor" href="#资源管理功能"></a> 资源管理功能</h3>
<ul>
<li>进程管理：放在内核。例：调度、分派、创建、撤销、同步、通信。运行频率高。</li>
<li>存储器管理：内存分配、回收、保护、对换等放在内核，保证运行速度高。</li>
<li>设备管理：驱动程序、缓冲管理、设备分配等。</li>
</ul>
<hr />
<ul>
<li>原语(primitive)
<ul>
<li>由若干条指令构成的“原子操作(atomic operation)”过程，作为一个整体而不可分割——要么全都做，要么全不做</li>
<li>系统调用并不都是原语  进程A调用read()，因无数据而阻塞，在read()里未返回。然后进程B调用read()，此时read()被重入。系统调用不一定一次执行完并返回该进程，有可能在特定的点暂停，而转入到其他进程</li>
</ul>
</li>
<li>处理机的执行状态——<strong>保护系统程序</strong>
<ul>
<li>核心态（管态、系统态）系统管理程序执行时的状态。具有较高的特权，能执行一切指令，访问所有的寄存器和存储区</li>
<li>用户态（目态）以后程序执行时的状态。具有较低的特权，只能执行规定指令，访问指定的寄存器和存储区</li>
</ul>
</li>
</ul>
<h2 id="进程的创建"><a class="markdownIt-Anchor" href="#进程的创建"></a> 进程的创建</h2>
<ul>
<li>进程图(Process Graph)
<ul>
<li>是用于描述一个进程的家族关系的有向树，树中的结点表示进程</li>
<li>在进程<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>创建了进程<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>之后称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>的父进程(Parent Process)，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的子进程(Progeny Process)。创建父进程的进程称为祖先进程，把树的根结点称为进程家族的祖先进程(Ancestor)。</li>
</ul>
</li>
<li>子进程可以<strong>继承</strong>(Inherit)父进程的<strong>资源</strong></li>
<li><strong>撤消</strong>父进程时必须同时<strong>撤消</strong>子进程</li>
</ul>
<h3 id="引起创建进程的事件"><a class="markdownIt-Anchor" href="#引起创建进程的事件"></a> 引起创建进程的事件</h3>
<ul>
<li>在多道程序环境中，要运行程序，必须为其创建进程</li>
<li>用户登录
<ul>
<li>分时系统的用户在终端登录后，如是合法用户，系统将为其创建一个进程，并插入就绪队列</li>
</ul>
</li>
<li>作业调度
<ul>
<li>在批处理系统中，当作业调度程序调度到某作业时，将该作业装入内存，为它分配资源并创建进程</li>
</ul>
</li>
<li>提供服务
<ul>
<li>当运行中的用户进程提出某种请求后，系统将专门创建一个进程来提供服务，如打印</li>
</ul>
</li>
<li>应用请求
<ul>
<li>由应用程序为自己创建进程，以便能并发执行，如输入、计算、输出程序</li>
</ul>
</li>
</ul>
<h3 id="创建流程"><a class="markdownIt-Anchor" href="#创建流程"></a> 创建流程</h3>
<ol>
<li>申请空白PCB  为新进程申请惟一的数字标识符，并从PCB集合中索取一个空白PCB</li>
<li>为新进程<strong>分配资源</strong>  为新进程的程序和数据<strong>分配内存</strong>。对于<strong>批处理</strong>型作业，可在用户提出创建进程时要求提供所需内存大小。对于<strong>交互型</strong>作业可以由系统来分配一定的空间</li>
<li>初始化进程控制块
<ol>
<li><strong>初始化标识信息</strong>——将系统标识信息写入新PCB</li>
<li><strong>初始化处理机状态信息</strong>——使程序计数器指向程序的入口地址，栈指针指向栈顶</li>
<li><strong>初始化处理机控制信息</strong>——将进程的状态设为就绪状态或静止就绪状态</li>
</ol>
</li>
<li>将新进程<strong>插入就绪队列</strong>   如果进程就绪队列能够接纳新进程，便将新进程插入就绪队列</li>
</ol>
<h2 id="进程的终止"><a class="markdownIt-Anchor" href="#进程的终止"></a> 进程的终止</h2>
<ul>
<li>引起进程终止(Termination of Process)的事件
<ul>
<li>正常结束</li>
<li>异常结束</li>
<li>外界干预</li>
</ul>
</li>
</ul>
<h3 id="正常结束"><a class="markdownIt-Anchor" href="#正常结束"></a> 正常结束</h3>
<p>应有一个通知OS进程已经运行完成的指令。如，在批处理系统中，通常在程序最后安排一条<strong>Halt指令</strong>或<strong>终止的系统调用</strong>。当程序执行Halt指令时，将产生一个中断，通知OS本进程已经完成。 在分时系统中，用户可利用<strong>Logs off</strong>去表示进程运行完毕， 此时同样产生一个中断，告知OS进程已运行完毕。</p>
<h3 id="异常结束"><a class="markdownIt-Anchor" href="#异常结束"></a> 异常结束</h3>
<p>在进程运行期间，由于出现某些错误和故障而迫使进程终止。</p>
<ul>
<li>越界错误——这是指程序所访问的存储区，已越出该进程的区域。</li>
<li>保护错——进程试图访问一不允许访问的资源或文件，或者以不适当的方式进行访问，如进程试图去写一个只读文件。</li>
<li>非法指令——程序试图去执行一条不存在的指令。出现该错误的原因，可能是程序错误地转移到数据区，把数据当成了指令。</li>
<li>特权指令错——用户进程试图去执行一条只允许OS执行的指令。</li>
<li>运行超时——进程的执行时间超过了指定的最大值；</li>
<li>等待超时——进程等待某事件的时间， 超过了规定的最大值；</li>
<li>算术运算错——进程试图去执行一个被禁止的运算，如被0除；</li>
<li>I/O故障——这是指在I/O过程中发生了错误等。</li>
</ul>
<h3 id="外界干预"><a class="markdownIt-Anchor" href="#外界干预"></a> 外界干预</h3>
<ul>
<li>外界干预并非指在本进程运行中出现了异常事件，而是指进程应外界的请求而终止运行
<ul>
<li>操作员或操作系统干预——由于某种原因，例如，发生了死锁，由操作员或操作系统终止该进程</li>
<li>父进程请求——由于父进程具有终止自己的任何子孙进程的权利， 因而当父进程提出请求时，系统将终止该进程；</li>
<li>父进程终止——当父进程终止时，OS也将他的所有子孙进程终止</li>
</ul>
</li>
</ul>
<h3 id="进程的终止过程"><a class="markdownIt-Anchor" href="#进程的终止过程"></a> 进程的终止过程</h3>
<ol>
<li>根据被终止进程的标识符，从PCB集合中检索出该进程的PCB，从中读出该进程的状态</li>
<li>若被终止进程<strong>正处于执行状态</strong>，应立即终止该进程的执行，并置调度标志为<strong>真</strong>，以便进程撤消后将处理机分配给其他进程</li>
<li>若该进程还有<strong>子孙进程</strong>，还应将其所有子孙进程予以终止，以防他们成为不可控的进程</li>
<li>将被终止进程所拥有的<strong>全部资源</strong>，或者归还给其父进程， 或者归还给系统</li>
<li>撤消PCB</li>
</ol>
<h2 id="进程的阻塞与唤醒"><a class="markdownIt-Anchor" href="#进程的阻塞与唤醒"></a> 进程的阻塞与唤醒</h2>
<h3 id="引起进程阻塞和唤醒的事件"><a class="markdownIt-Anchor" href="#引起进程阻塞和唤醒的事件"></a> 引起进程阻塞和唤醒的事件</h3>
<ul>
<li>请求系统服务
<ul>
<li>如请求打印机时，若<strong>已被</strong>其他进程<strong>占用</strong>，此时只能<strong>阻塞</strong>，等其他进程<strong>释放</strong>后再将请求进程<strong>唤醒</strong></li>
</ul>
</li>
<li>启动某种操作
<ul>
<li>当进程启动某种操作后，如果该进程<strong>必须在该操作完成后才能继续执行</strong>，则必须先使进程阻塞，以等待该操作完成。如启动I/O设备</li>
</ul>
</li>
<li>新数据尚未到达
<ul>
<li>对于相互合作的进程，如果一个进程需要另一合作进程提供的数据，则在<strong>数据到达之前只能阻塞</strong></li>
</ul>
</li>
<li>无新工作可做
<ul>
<li>系统中的一些特殊功能进程，在完成了任务之后，<strong>等待新任务到来</strong>。如系统中的发送进程</li>
</ul>
</li>
</ul>
<h3 id="进程阻塞过程"><a class="markdownIt-Anchor" href="#进程阻塞过程"></a> 进程阻塞过程</h3>
<ul>
<li><strong>正在执行的进程</strong>，当发现上述某事件时，因无法继续执行，进程便通过调用<strong>阻塞原语</strong>block()把自己阻塞。可见，进程的<strong>阻塞是</strong>进程<strong>自身</strong>的一种<strong>主动行为</strong></li>
<li>进入block过程后，由于此时该进程还处于执行状态，所以应<strong>先立即停止执行</strong>，把进程控制块中的现行状态由“执行”改为阻塞，并将PCB插入阻塞队列</li>
<li>若系统中设置了因不同事件而阻塞的多个<strong>阻塞队列</strong>，则将本进程插入到具有相同事件的阻塞(等待)队列</li>
<li>调度程序进行<strong>重新调度</strong>，将处理机分配给另一就绪进程，并进行切换，亦即，保留被阻塞进程的处理机状态(在PCB中)，再按新进程的PCB中的处理机状态设置CPU的环境</li>
</ul>
<h3 id="进程唤醒过程"><a class="markdownIt-Anchor" href="#进程唤醒过程"></a> 进程唤醒过程</h3>
<ul>
<li>当被阻塞进程<strong>所期待的事件出现</strong>时，如I/O完成或其所期待的数据已经到达，则由有关进程(比如，用完并释放了该I/O设备的进程)调用<strong>唤醒原语</strong>wakeup()，将等待该事件的进程唤醒</li>
<li>唤醒原语执行的过程是
<ol>
<li>把被阻塞的进程从等待该事件的阻塞队列中移出</li>
<li>将其PCB中的现行状态由<strong>阻塞</strong>改为<strong>就绪</strong></li>
<li>将该PCB插入到就绪队列中</li>
</ol>
</li>
</ul>
<hr />
<blockquote>
<p>应当指出，<strong>block原语</strong>和<strong>wakeup原语</strong>是一对作用刚好相反的原语。因此，如果在某进程中调用了阻塞原语，则必须在与之相合作的另一进程中或其他相关的进程中，安排唤醒原语，以能唤醒阻塞进程；否则，被阻塞进程将会因不能被唤醒而长久的处于阻塞状态，从而再无机会继续运行。</p>
</blockquote>
<h2 id="进程的挂起与激活"><a class="markdownIt-Anchor" href="#进程的挂起与激活"></a> 进程的挂起与激活</h2>
<h3 id="进程的挂起"><a class="markdownIt-Anchor" href="#进程的挂起"></a> 进程的挂起</h3>
<ul>
<li>当<strong>出现引起进程挂起的事件</strong>时，比如，用户进程请求将自己挂起，或父进程请求将自己的某个子进程挂起，系统将利用<strong>挂起原语</strong>suspend( )将指定进程或处于阻塞状态的进程挂起。</li>
</ul>
<ol>
<li>执行的进程暂停</li>
<li>就绪的进程暂不调度</li>
<li>阻塞的进程即使引起阻<br />
塞的事件消失也不调度</li>
</ol>
<h4 id="挂起原语的执行过程"><a class="markdownIt-Anchor" href="#挂起原语的执行过程"></a> 挂起原语的执行过程</h4>
<ol>
<li>得到挂起进程的内部标识符</li>
<li>首先检查被挂起进程的状态，若处于<strong>活动就绪</strong>状态，便将其改为<strong>静止就绪</strong>；对于<strong>活动阻塞</strong>状态的进程，则将之改为<strong>静止阻塞</strong></li>
<li>为了方便用户或父进程考查该进程的运行情况而把该进程的PCB复制到某指定的内存区域</li>
<li>若被挂起的进程正在执行，则转向调度程序重新调度</li>
</ol>
<h3 id="进程的激活"><a class="markdownIt-Anchor" href="#进程的激活"></a> 进程的激活</h3>
<ul>
<li>当发生激活进程的事件时，如，父进程或用户进程请求激活指定进程，若该进程驻留在外存而内存中已有足够的空间时，则可将在外存上处于静止就绪状态的进程换入内存。这时，系统将利用<strong>激活原语</strong>active( )将指定进程激活</li>
</ul>
<h4 id="激活原语执行过程"><a class="markdownIt-Anchor" href="#激活原语执行过程"></a> 激活原语执行过程</h4>
<ul>
<li>激活原语先将进程从外存<strong>调入内存</strong>，检查该进程的现行状态，若是<strong>静止就绪</strong>，便将之改为<strong>活动就绪</strong>；若为<strong>静止阻塞</strong>便将之改为<strong>活动阻塞</strong>。</li>
<li>若采用抢占调度策略，则每当有<strong>新进程</strong>（激活）进入就绪队列时，应<strong>检查</strong>是否要进行重新调度，即由调度程序将被激活进程与当前进程进行优先级的比较，如果被激活进程的优先级更低，就不必重新调度；否则，<strong>立即剥夺</strong>当前进程的运行，把处理机分配给刚被激活的进程。</li>
</ul>
<h1 id="进程同步"><a class="markdownIt-Anchor" href="#进程同步"></a> 进程同步</h1>
<p>进程同步的主要任务，是使并发执行的诸进程之间能有效的<strong>共享资源</strong>和<strong>相互合作</strong>，从而使程序的执行具有可再现性。</p>
<h2 id="进程同步的基本概念"><a class="markdownIt-Anchor" href="#进程同步的基本概念"></a> 进程同步的基本概念</h2>
<ul>
<li>两种形式的制约关系
<ul>
<li>在多道程序环境下，当程序并发执行时，由于<strong>资源共享</strong>和<strong>进程合作</strong>，使同处于系统中的诸进程之间存在两种形式的制约关系</li>
</ul>
</li>
<li>间接相互制约关系
<ul>
<li>同处于一个系统中的进程必然<strong>共享某种资源</strong>，如CPU、I/O设备等，间接相互制约即源于资源共享。如A、B共享打印机，若A申请打印时，打印机已分配给B，则A只能阻塞，等B释放后再改为就绪，又称为&quot;<strong>互斥</strong>&quot;</li>
</ul>
</li>
<li>直接相互制约关系
<ul>
<li>这种制约源于<strong>进程之间的合作</strong>关系。如进程A向B提供数据，当输入缓冲空时，B不能得到数据而阻塞；反之当缓冲满时，A无法写入而阻塞，又称为&quot;<strong>同步</strong>&quot;。</li>
</ul>
</li>
</ul>
<h3 id="进程同步的原因"><a class="markdownIt-Anchor" href="#进程同步的原因"></a> 进程同步的原因</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200503234523.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200503234847.png" alt="" /></p>
<table>
<thead>
<tr>
<th>相互感知的程度</th>
<th>相互关系</th>
<th>一个进程对其他进程的影响</th>
<th>潜在的控制问题</th>
</tr>
</thead>
<tbody>
<tr>
<td>相互不感知(完全不了解其它进程的存在)</td>
<td>竞争(competition)</td>
<td>一个进程的操作对其他进程的结果无影响</td>
<td>互斥，死锁（可释放的资源），饥饿</td>
</tr>
<tr>
<td>间接感知(双方都与第三方交互，如共享资源)</td>
<td>通过共享进行协作</td>
<td>一个进程的结果依赖于从其他进程获得的信息</td>
<td>互斥，死锁（可释放的资源），饥饿，数据一致性</td>
</tr>
<tr>
<td>直接感知(双方直接交互，如通信)</td>
<td>通过通信进行协作</td>
<td>一个进程的结果依赖于从其他进程获得的信息</td>
<td>死锁，饥饿</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>互斥</strong>，指多个进程不能同时使用同一个资源；</li>
<li><strong>死锁</strong>，指多个进程互不相让，都得不到足够的资源；</li>
<li><strong>饥饿</strong>，指一个进程一直得不到资源（其他进程可能轮流占用资源）</li>
</ul>
<h3 id="临界资源critical-resouce"><a class="markdownIt-Anchor" href="#临界资源critical-resouce"></a> 临界资源(Critical Resouce)</h3>
<ul>
<li>临界资源(Critical Resouce)</li>
<li><strong>一次仅允许一个</strong>进程使用的资源</li>
<li>系统中许多硬件如打印机等，诸进程之间只能用互斥的方式进行访问</li>
</ul>
<h4 id="生产者-消费者producer-consumer问题"><a class="markdownIt-Anchor" href="#生产者-消费者producer-consumer问题"></a> 生产者-消费者(producer-consumer)问题</h4>
<ul>
<li>有一群生产者进程在生产产品，并将这些产品提供给消费者进程去消费。为使生产者进程与消费者进程能并发执行，在两者之间设置了一个具有n个<strong>缓冲区的缓冲池</strong>，生产者进程将它所生产的产品放入一个缓冲区中；消费者进程可从一个缓冲区中取走产品去消费。尽管所有的生产者进程和消费者进程都是以<strong>异步</strong>方式运行的，但它们之间必须保持<strong>同步</strong>，即不允许消费者进程到一个空缓冲区去取产品；也不允许生产者进程向一个已装满产品且尚未被取走的缓冲区中投放产品</li>
<li>生产者-消费者问题——解决思路
<ul>
<li>利用一个数组来表示上述的具有n个(0，1，…，n-1)缓冲区的缓冲池。用输入指针in来指示下一个可投放产品的缓冲区，每当生产者进程生产并投放一个产品后，输入指针加1；用一个输出指针out来指示下一个可从中获取产品的缓冲区，每当消费者进程取走一个产品后，输出指针加1。</li>
<li>设缓冲池的组织是循环缓冲，故应把输入指针加1表示成 in:=(in+1)mod n；输出指针加1表示成out:=(out+1) mod n</li>
<li>当(in+1) mod n=out时表示缓冲池满；in=out则表示缓冲池空</li>
<li>引入了一个整型变量counter, 其初始值为0。每当生产者进程向缓冲池中投放一个产品后，使counter加1；反之，每当消费者进程从中取走一个产品时， 使counter减1</li>
</ul>
</li>
<li>生产者-消费者问题——解决思路</li>
<li>生产者和消费者两进程共享下面的变量</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Var</span> n : integer;</span><br><span class="line"><span class="keyword">type</span> item=…;   <span class="comment">//定义缓冲区的类型</span></span><br><span class="line"><span class="keyword">var</span> buffer:<span class="keyword">array</span>［<span class="number">0</span>, <span class="number">1</span>, …, n-<span class="number">1</span>］ <span class="keyword">of</span> item; <span class="comment">//分配缓冲区</span></span><br><span class="line"><span class="keyword">in</span>, <span class="keyword">out</span>: <span class="number">0</span>, <span class="number">1</span>, …, n-<span class="number">1</span>;  <span class="comment">//定义指针</span></span><br><span class="line">counter: <span class="number">0</span>, <span class="number">1</span>, …, n; <span class="comment">//定义计数器</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200504001050.png" alt="" /></p>
<ul>
<li>指针in和out初始化为1
<ul>
<li>设no-op是一条空操作指令，则对于生产者当counter=n时，应执行 no-op ，而对于消费者进程当counter=0时应执行no-op</li>
<li>在生产者进程中设一局部变量nextp，用于暂时存放每次刚生产出来的产品；而在消费者进程中，则设一个局部变量nextc，用于存放每次要消费的产品</li>
</ul>
</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">producer: <span class="keyword">repeat</span>                       <span class="comment">//*生产者进程</span></span><br><span class="line">           …</span><br><span class="line">           produce an item <span class="keyword">in</span> nextp;   <span class="comment">//生产一个产品</span></span><br><span class="line">           …</span><br><span class="line">           <span class="keyword">while</span> counter=n <span class="keyword">do</span> no-op;</span><br><span class="line">           buffer［<span class="keyword">in</span>］∶=nextp;   <span class="comment">//将产品存入缓冲区</span></span><br><span class="line">           <span class="keyword">in</span>∶=<span class="keyword">in</span>+<span class="number">1</span> <span class="keyword">mod</span> n;            <span class="comment">//修改缓冲区指针</span></span><br><span class="line">           counter∶=counter+<span class="number">1</span>;    <span class="comment">//修改计数器</span></span><br><span class="line">           <span class="keyword">until</span> false;</span><br><span class="line">consumer: <span class="keyword">repeat</span>                      <span class="comment">//*消费者进程</span></span><br><span class="line">           <span class="keyword">while</span> counter=<span class="number">0</span> <span class="keyword">do</span> no-op;</span><br><span class="line">           nextc∶ =buffer［<span class="keyword">out</span>］;</span><br><span class="line">			<span class="keyword">out</span>∶= (<span class="keyword">out</span>+<span class="number">1</span>) <span class="keyword">mod</span> n;</span><br><span class="line">           counter∶ =counter-<span class="number">1</span>;</span><br><span class="line">           consume the item <span class="keyword">in</span> nextc;</span><br><span class="line">           <span class="keyword">until</span> false;</span><br></pre></td></tr></table></figure>
<p>虽然上面的生产者程序和消费者程序，在分别看时都是正确的，而且两者在顺序执行时其结果也会是正确的，但若并发执行时，就会出现差错，问题就在于这两个进程共享变量counter。生产者对它做加1操作，消费者对它做减1操作，这两个操作在用机器语言实现时， 常可用下面的形式描述</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="comment">//生产者：                        消费者：</span></span><br><span class="line"> register1:=counter;              register2:=counter;</span><br><span class="line"> register1:=register1+<span class="number">1</span>;         register2:=register2-<span class="number">1</span>;</span><br><span class="line"> counter:=register1;              counter:=register2;</span><br><span class="line"> ...                              ...</span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200504001632.png" alt="" /></p>
<h3 id="临界区critical-section"><a class="markdownIt-Anchor" href="#临界区critical-section"></a> 临界区（critical section）</h3>
<ul>
<li>不论是<strong>硬件临界资源</strong>还是<strong>软件临界资源</strong>，多个进程必须互斥地对它进行访问</li>
<li>在每个进程中访问临界资源的那段代码称为<strong>临界区</strong>(critical section)</li>
<li>每个进程进入临界区之前应先对<strong>欲访问的临界资源进行检查</strong>，看是否正在被访问。如果此刻该临界资源未被访问，该进程可进入临界区，并设置它正在被访问的标志，在临界区<strong>之前</strong>执行的这段代码称为<strong>进入区</strong>（entry section）</li>
<li>在临界区<strong>之后</strong>也要加上一段代码，用于将临界区被访问的标志恢复为未被访问的标志，称为<strong>退出区</strong>（exit section）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200504001746.png" alt="" /></li>
</ul>
<h3 id="同步机制应遵循的规则"><a class="markdownIt-Anchor" href="#同步机制应遵循的规则"></a> 同步机制应遵循的规则</h3>
<ul>
<li>空闲让进
<ul>
<li>当无进程处于临界区时，应允许一个进程进入临界区</li>
</ul>
</li>
<li>忙则等待
<ul>
<li>当已有进程进入临界区时，其他进程必须等待</li>
</ul>
</li>
<li>有限等待
<ul>
<li>对要求访问临界资源的进程，应保证在有限时间内进入自己的临界区，防止&quot;死等&quot;</li>
</ul>
</li>
<li>让权等待
<ul>
<li>当进程不能进入自己的临界区时，应立即释放处理机，防止&quot;忙等&quot;</li>
</ul>
</li>
</ul>
<h2 id="信号量机制"><a class="markdownIt-Anchor" href="#信号量机制"></a> 信号量机制</h2>
<ul>
<li>1965年，荷兰学者Dijkstra提出的信号量（Semaphores）机制是一种有效的进程同步工具,所以P、V分别是荷兰语的test(proberen)和increment(verhogen)</li>
<li>信号量机制已从整型信号量发展为记录型信号量，又进一步发展为信号量集</li>
<li>目前，信号量机制已广泛应用于单处理机、多处理机以及计算机网络中</li>
<li><strong>信号量</strong>就是OS提供的管理公有资源的有效手段</li>
<li><strong>信号量代表可用资源实体的数量</strong></li>
</ul>
<h3 id="整型信号量"><a class="markdownIt-Anchor" href="#整型信号量"></a> 整型信号量</h3>
<ul>
<li>最初由Dijkstra把整型信号量定义为一个整型量，除初始化外，仅能通过两个标准的原子操作wait(S)和signal(S)来访问。这两个操作一直被分别称为P、V操作。 wait和signal操作可描述为：</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">wait(S):    <span class="keyword">while</span> S≤<span class="number">0</span> <span class="keyword">do</span> no-op</span><br><span class="line">    S∶=S-<span class="number">1</span>;</span><br><span class="line">signal(S):  S∶=S+<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>wait(S)和signal(S)是<strong>原子操作</strong>，执行时是不可中断的。另外，在wait操作中，对S的测试和做S∶=S-1操作时都不可中断，<strong>信号量只能通过原语操作来访问</strong>，不能被进程调度所打断</li>
<li>缺点：信号量S≤0时“<strong>忙等</strong>”，未遵循“<strong>让权等待</strong>”</li>
</ul>
<h3 id="记录型信号量"><a class="markdownIt-Anchor" href="#记录型信号量"></a> 记录型信号量</h3>
<ul>
<li><strong>采取了“让权等待”的策略</strong>，是一种不存在“忙等”现象的进程同步机制。</li>
<li>在采取了“让权等待”的策略后，又会出现多个进程等待访问同一临界资源的情况。为此，在记录型信号量机制中，除了需要一个用于代表<strong>资源数目</strong>的整型变量value外，还应增加一个<strong>进程链表L</strong>，用于链接上述的所有等待进程。</li>
<li>记录型信号量是由于它采用了记录型的数据结构而得名的，定义如下：</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> semaphore=<span class="keyword">record</span></span><br><span class="line">     value:integer;</span><br><span class="line">     L:list <span class="keyword">of</span> process;</span><br></pre></td></tr></table></figure>
<ul>
<li>相应地，wait(S)和signal(S)操作可描述为：</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">wait</span><span class="params">(S)</span></span></span><br><span class="line"><span class="function">      <span class="title">var</span> <span class="title">S</span>:</span> semaphore;</span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">         S.value:=S.value-<span class="number">1</span>;        <span class="comment">// 请求一个该类资源</span></span><br><span class="line">         <span class="keyword">if</span> S.value＜<span class="number">0</span> <span class="keyword">then</span> block(S.L);   <span class="comment">//该类资源已分配完毕,调用block原语，进行自我阻塞并放弃处理机、插入到信号量链表S.L中</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">signal</span><span class="params">(S)</span></span></span><br><span class="line"><span class="function">      <span class="title">var</span> <span class="title">S</span>:</span> semaphore;</span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">         S.value:=S.value+<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">if</span> S.value≤<span class="number">0</span> <span class="keyword">then</span> wakeup(S.L);</span><br><span class="line">      <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在记录型信号量机制中，S.value的初值表示系统中某类资源的数目， 因而又称为资源信号量</li>
<li>对信号量S.value每次wait操作，<code>·S.value:=S.value-1</code>
<ul>
<li><code>S.value&gt;0</code>时，有该类资源</li>
<li><code>S.value＜0</code>时，该类资源已分配完毕，|S.value|=该信号量链表中<strong>已阻塞进程的数目</strong></li>
</ul>
</li>
<li>对信号量的每次signal操作，<code>S.value:=S.value+1</code>
<ul>
<li>若加1后仍是S.value≤0，表示在该信号量链表中仍有等待该资源的进程被阻塞，则应调用wakeup原语，将S.L链表中的第一个等待进程唤醒。</li>
<li>若S.value的初值为1，表示只允许一个进程访问临界资源，此时的信号量转化为<strong>互斥信号量</strong></li>
</ul>
</li>
</ul>
<h3 id="and型信号量"><a class="markdownIt-Anchor" href="#and型信号量"></a> AND型信号量</h3>
<ul>
<li>在有些任务中，一个进程先要获得多个共享资源后才能执行，若进程A和B都要访问共享数据D和E，设信号量Dmutex和Emutex (MUTual Exclusion)的初值均为1</li>
<li>在两个进程中都要包含两个对<code>Dmutex</code>和<code>Emutex</code>的操作， 即</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="comment">//process A:        	 process B:</span></span><br><span class="line">wait(Dmutex); 	     wait(Emutex);</span><br><span class="line">wait(Emutex);  	     wait(Dmutex);</span><br></pre></td></tr></table></figure>
<ul>
<li>若进程A和B按下述次序交替执行wait操作：</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">process A: wait(Dmutex); <span class="comment">//于是Dmutex=0</span></span><br><span class="line">process B: wait(Emutex); <span class="comment">//于是Emutex=0</span></span><br><span class="line">process A: wait(Emutex); <span class="comment">//于是Emutex=-1 A阻塞</span></span><br><span class="line">process B: wait(Dmutex); <span class="comment">//于是Dmutex=-1 B阻塞</span></span><br></pre></td></tr></table></figure>
<ul>
<li>AND同步机制的基本思想是
<ul>
<li>将进程在整个运行过程中需要的所有资源，<strong>一次性全部地分配给进程</strong>，待进程使用完后再一起释放。只要尚有一个资源未能分配给进程，其它所有可能为之分配的资源，也不分配给他。亦即，对若干个临界资源的分配，采取原子操作方式：要么全部分配到进程，要么一个也不分配。 由死锁理论可知，这样就可避免上述死锁情况的发生。为此，在wait操作中，增加了一个“AND”条件，故称为AND同步，或称为同时wait操作， 即</li>
</ul>
</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">Swait(Simultaneous wait)</span><br><span class="line"> Swait(S1, S2, …, Sn)</span><br><span class="line">     <span class="keyword">if</span> S1≥<span class="number">1</span> <span class="keyword">and</span> … <span class="keyword">and</span> Sn≥<span class="number">1</span> <span class="keyword">then</span>   <span class="comment">// 每个资源都可用</span></span><br><span class="line">         <span class="keyword">for</span>  i: =<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></span><br><span class="line">                Si:=Si-<span class="number">1</span>; <span class="comment">// 分配所有资源</span></span><br><span class="line">         endfor</span><br><span class="line">     <span class="keyword">else</span>         <span class="comment">//否则，将进程放到等待资源Si的队列中</span></span><br><span class="line">       <span class="comment">//place the process in the waiting queue associated with the first Si found with Si＜1, and set the program count of this process to the beginning of Swait operation</span></span><br><span class="line">     endif</span><br><span class="line"> Ssignal(S1, S2, …, Sn)</span><br><span class="line">       <span class="keyword">for</span>  i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></span><br><span class="line">              Si=Si+<span class="number">1</span>;                  <span class="comment">//释放所有资源</span></span><br><span class="line">          <span class="comment">//Remove all the process waiting in the queue associated with Si into the ready queue.</span></span><br><span class="line">       endfor;</span><br></pre></td></tr></table></figure>
<h3 id="信号量集"><a class="markdownIt-Anchor" href="#信号量集"></a> 信号量集</h3>
<ul>
<li>在记录型信号量机制中，wait(S)和signal(S)操作仅能对信号量施以加1或减1操作，意味着每次只能获得或释放一个单位的临界资源，效率较低。</li>
<li>在有些情况下，当<strong>资源数量低于某下限值时便不予分配</strong>。因而，在每次分配之前，都必须测试该资源的数量，看其是否大于等于下限值。</li>
<li>在对AND型信号量机制扩充的基础上，形成一般化的“信号量集”机制。</li>
<li>Swait(S1, t1, d1, …, Sn, tn, dn)</li>
<li>Ssignal(S1, d1, …, Sn, dn)</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">Swait(S1, t1, d1, …, Sn, tn, dn)</span><br><span class="line">    <span class="keyword">if</span> Si≥t1 <span class="keyword">and</span> … <span class="keyword">and</span> Sn≥tn <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">for</span>  i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></span><br><span class="line">              Si:=Si-di;          <span class="comment">//一次分配d个资源</span></span><br><span class="line">        endfor</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">              <span class="comment">//Place the executing process in the waiting queue of the first Si</span></span><br><span class="line">             <span class="comment">//with Si＜ti and set its program counter to the beginning of the</span></span><br><span class="line">             <span class="comment">//Swait Operation.</span></span><br><span class="line">    endif</span><br><span class="line">Ssignal(S1, d1, …, Sn, dn)</span><br><span class="line">    <span class="keyword">for</span>  i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></span><br><span class="line">          Si :=Si+di; <span class="comment">//释放所有资源</span></span><br><span class="line">	      <span class="comment">//Remove all the process waiting in the queue associated with</span></span><br><span class="line">          <span class="comment">//Si into the ready queue</span></span><br><span class="line">    endfor;</span><br></pre></td></tr></table></figure>
<ul>
<li>一般“信号量集”的几种特殊情况
<ul>
<li>Swait(S, d, d)。 此时在信号量集中只有一个信号量S， 但允许它每次申请d个资源，当现有资源数少于d时，不予分配</li>
<li>Swait(S, 1, 1)。 此时的信号量集已蜕化为一般的记录型信号量(S＞1时)或互斥信号量(S=1时)</li>
<li>Swait(S, 1, 0)。这是一种很特殊且很有用的信号量操作。当S≥1时，允许多个进程进入某特定区；当S变为0后，将阻止任何进程进入特定区。换言之，它相当于一个可控开关</li>
</ul>
</li>
</ul>
<h2 id="信号量的应用"><a class="markdownIt-Anchor" href="#信号量的应用"></a> 信号量的应用</h2>
<h3 id="实现进程互斥"><a class="markdownIt-Anchor" href="#实现进程互斥"></a> 实现进程互斥</h3>
<p>mutex作为互斥锁使用</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Var</span> mutex:semaphore:=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">    parbegin</span><br><span class="line">     process <span class="number">1</span>: <span class="keyword">begin</span></span><br><span class="line">           		  <span class="keyword">repeat</span></span><br><span class="line">            		    wait(mutex);</span><br><span class="line">            		    critical section</span><br><span class="line">            		    signal(mutex);</span><br><span class="line">            		    remainder seetion</span><br><span class="line">           		  <span class="keyword">until</span> false;</span><br><span class="line">           		<span class="keyword">end</span></span><br><span class="line">     process <span class="number">2</span>: <span class="keyword">begin</span></span><br><span class="line">	              <span class="keyword">repeat</span></span><br><span class="line">	                    wait(mutex);</span><br><span class="line">	                    critical section</span><br><span class="line">	                    signal(mutex);</span><br><span class="line">	                    remainder section</span><br><span class="line">	               <span class="keyword">until</span> false;</span><br><span class="line">	            <span class="keyword">end</span></span><br><span class="line">    parend</span><br><span class="line">    <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="实现前趋关系"><a class="markdownIt-Anchor" href="#实现前趋关系"></a> 实现前趋关系</h3>
<ul>
<li>设有两个并发进程P1和P2。P1中有语句S1，P2中有语句S2，希望在执行完S1后执行S2</li>
<li>为实现这种前趋关系，可让进程P1和P2共享一个公用信号量S，并赋初值为0，将signal(S)操作放在语句S1后面；而在S2语句前插入wait(S)操作</li>
<li>进程P1， S1;signal(S);</li>
<li>进程P2， wait(S); S2;</li>
<li>由于S被初始化为0，若P2先执行，必定阻塞，只有在进程P1执行完使S增为1后，P2才能执行S2操作</li>
</ul>
<h1 id="经典进程的同步问题"><a class="markdownIt-Anchor" href="#经典进程的同步问题"></a> 经典进程的同步问题</h1>
<h2 id="生产者消费者问题"><a class="markdownIt-Anchor" href="#生产者消费者问题"></a> 生产者—消费者问题</h2>
<p>前面我们已经对生产者—消费者问题(The producer-consumer problem)做了一些描述，但未考虑进程的互斥与同步问题，因而造成了数据Counter的不定性。由于生产者—消费者问题是相互合作的进程关系的一种抽象，例如， 在输入时，输入进程是生产者，计算进程是消费者；而在输出时，则计算进程是生产者，而打印进程是消费者， 因此，该问题有很大的代表性及实用价值。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200504133557.png" alt="" /></p>
<ul>
<li>利用记录型信号量解决生产者—消费者问题
<ul>
<li>假定在生产者和消费者之间的公用缓冲池中，具有n个缓冲区</li>
<li>考虑哪些是互斥资源、哪些是资源信号量？
<ul>
<li><strong>互斥资源</strong>——缓冲区、计数器，设互斥信号量mutex实现诸进程对缓冲池的互斥使用及计数器的加减操作</li>
<li><strong>资源信号量</strong>——缓冲池，设信号量empty和full分别表示缓冲池中空缓冲区和满缓冲区的数量。</li>
</ul>
</li>
<li>假定这些生产者和消费者相互等效，只要缓冲池未满，生产者便可将消息送入缓冲池；只要缓冲池未空，消费者便可从缓冲池中取走一个消息</li>
</ul>
</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Var</span> mutex, empty, full:semaphore:=<span class="number">1</span>,n,<span class="number">0</span>;</span><br><span class="line">        buffer:<span class="keyword">array</span>［<span class="number">0</span>, …, n-<span class="number">1</span>］ <span class="keyword">of</span> item;</span><br><span class="line">        <span class="keyword">in</span>, <span class="keyword">out</span>: integer:=<span class="number">0</span>, <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">     parbegin</span><br><span class="line">      producer:<span class="keyword">begin</span><span class="comment">//生产者进程</span></span><br><span class="line">            <span class="keyword">repeat</span></span><br><span class="line">             …</span><br><span class="line">            produce an item nextp; <span class="comment">//产一个产品</span></span><br><span class="line">             …</span><br><span class="line">            wait(empty); <span class="comment">//empty减1</span></span><br><span class="line">            wait(mutex);<span class="comment">//加锁</span></span><br><span class="line">            buffer(<span class="keyword">in</span>):=nextp;</span><br><span class="line">            <span class="keyword">in</span>:=(<span class="keyword">in</span>+<span class="number">1</span>) <span class="keyword">mod</span> n;  <span class="comment">//移动生产指针</span></span><br><span class="line">            signal(mutex);<span class="comment">//解锁</span></span><br><span class="line">            signal(full); <span class="comment">//full增1</span></span><br><span class="line">            <span class="keyword">until</span> false;</span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">      consumer:<span class="keyword">begin</span> <span class="comment">//消费者进程</span></span><br><span class="line">            <span class="keyword">repeat</span></span><br><span class="line">            wait(full);</span><br><span class="line">            wait(mutex);</span><br><span class="line">            nextc:=buffer(<span class="keyword">out</span>);</span><br><span class="line">            <span class="keyword">out</span>:= (<span class="keyword">out</span>+<span class="number">1</span>) <span class="keyword">mod</span> n;</span><br><span class="line">            signal(mutex);</span><br><span class="line">            signal(empty);</span><br><span class="line">            consume the item <span class="keyword">in</span> nextc;</span><br><span class="line">            <span class="keyword">until</span> false;</span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">      parend</span><br><span class="line">    <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在生产者—消费者问题中要注意以下几点
<ul>
<li>在每个程序中用于实现互斥的wait(mutex)和signal(mutex)必须<strong>成对地出现</strong>；</li>
<li>对资源信号量empty和full的wait和signal操作，同样需要成对地出现，但它们分别处于不同的进程中。例如，wait(empty)在生产进程中，而signal(empty)则在消费进程中，生产进程若因执行wait(empty)而阻塞， 则以后将由消费进程将它唤醒；</li>
<li>在每个程序中的多个wait<strong>操作顺序不能颠倒</strong>。应先执行对资源信号量的wait操作，然后再执行对互斥信号量的wait操作，否则可能引起进程死锁</li>
</ul>
</li>
</ul>
<h3 id="利用and信号量解决生产者消费者问题"><a class="markdownIt-Anchor" href="#利用and信号量解决生产者消费者问题"></a> 利用AND信号量解决生产者—消费者问题</h3>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mutex, empty, full:semaphore: =<span class="number">1</span>, n, <span class="number">0</span>;</span><br><span class="line">    buffer:<span class="keyword">array</span>［<span class="number">0</span>, …, n-<span class="number">1</span>］ <span class="keyword">of</span> item;</span><br><span class="line">    <span class="keyword">in</span> <span class="keyword">out</span>:integer : =<span class="number">0</span>, <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">begin</span></span><br><span class="line">    parbegin</span><br><span class="line">      producer:<span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">repeat</span></span><br><span class="line">             …</span><br><span class="line">            produce an item <span class="keyword">in</span> nextp;</span><br><span class="line">             …</span><br><span class="line">            Swait(empty, mutex);</span><br><span class="line">            buffer(<span class="keyword">in</span>): =nextp;</span><br><span class="line">            <span class="keyword">in</span>: = (<span class="keyword">in</span>+<span class="number">1</span>)<span class="keyword">mod</span> n;</span><br><span class="line">            Ssignal(mutex, full);</span><br><span class="line">           <span class="keyword">until</span> false;</span><br><span class="line">         <span class="keyword">end</span></span><br><span class="line">      consumer:<span class="keyword">begin</span></span><br><span class="line">             <span class="keyword">repeat</span></span><br><span class="line">             Swait(full, mutex);</span><br><span class="line">             nextc:=buffer(<span class="keyword">out</span>);</span><br><span class="line">             <span class="keyword">out</span>:= (<span class="keyword">out</span>+<span class="number">1</span>) <span class="keyword">mod</span> n;</span><br><span class="line">             Ssignal(mutex, empty);</span><br><span class="line">             consumer the item <span class="keyword">in</span> nextc;</span><br><span class="line">             <span class="keyword">until</span> false;</span><br><span class="line">           <span class="keyword">end</span></span><br><span class="line">         parend</span><br><span class="line">   <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="哲学家进餐问题"><a class="markdownIt-Anchor" href="#哲学家进餐问题"></a> 哲学家进餐问题</h2>
<ul>
<li>
<p>哲学家进餐问题（The Dinning Philosophers Problem）是由Dijkstra提出并解决的典型进程同步问题</p>
</li>
<li>
<p>问题描述</p>
<ul>
<li>5个哲学家坐在桌子边，桌上有5个碗和5支筷子</li>
<li>哲家家的生活方式是交替地进行思考和进餐</li>
<li>哲学家饥饿时便拿起两边的筷子进餐，但只有当拿到两支后才能进餐</li>
<li>用餐毕，放下筷子继续思考<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200504134706.png" alt="" /></li>
</ul>
</li>
<li>
<p>利用记录型信号量解决哲学家进餐问题</p>
</li>
<li>
<p>经分析可知，放在桌子上的筷子是临界资源，在一段时间内只允许一位哲学家使用。</p>
</li>
<li>
<p>为了实现对筷子的互斥使用，可以用一个信号量表示一只筷子，由这五个信号量构成信号量数组。其描述如下：</p>
</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Var</span> chopstick: <span class="keyword">array</span>［<span class="number">0</span>, …, <span class="number">4</span>］ <span class="keyword">of</span> semaphore;</span><br></pre></td></tr></table></figure>
<p>所有信号量均被初始化为1， 第i位哲学家的活动可描述为：</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">repeat</span></span><br><span class="line">    wait(chopstick［i］);</span><br><span class="line">    wait(chopstick［(i+<span class="number">1</span>) <span class="keyword">mod</span> <span class="number">5</span>］);</span><br><span class="line">     …</span><br><span class="line">    eat;</span><br><span class="line">     …</span><br><span class="line">    signal(chopstick［i］);</span><br><span class="line">    signal(chopstick［(i+<span class="number">1</span>) <span class="keyword">mod</span> <span class="number">5</span>］);</span><br><span class="line">    …</span><br><span class="line">    think;</span><br><span class="line"><span class="keyword">until</span> false;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>问题：同时拿起一侧的筷子，则——死锁，如何解决？？？</p>
</blockquote>
<ul>
<li>可采取以下几种解决方法
<ul>
<li>至多<strong>只允许有四位哲学家</strong>同时去<strong>拿左边</strong>的筷子，最终能保证至少有一位哲学家能够进餐，并在用毕时能释放出他用过的两只筷子，从而使更多的哲学家能够进餐</li>
<li>仅当哲学家的<strong>左、右两只筷子</strong>均可用时，才允许他拿起筷子进餐</li>
<li>规定奇数号哲学家先拿他左边的筷子，然后再去拿右边的筷子；而偶数号哲学家则相反。按此规定，将是1、 2号哲学家竞争1号筷子；3、4号哲学家竞争3号筷子。即五位哲学家都<strong>先竞争奇数号筷子</strong>，获得后，再去<strong>竞争偶数号筷子</strong>，最后总会有一位哲学家能获得两只筷子而进餐<br />
利用AND信号量机制解决哲学家进餐问题<br />
在哲学家进餐问题中，要求每个哲学家先获得两个临界资源(筷子)后方能进餐，这在本质上就是前面所介绍的AND同步问题，故用AND信号量机制可获得最简洁的解法</li>
</ul>
</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Var</span> chopstick <span class="keyword">array</span> ［<span class="number">0</span>, …, <span class="number">4</span>］ <span class="keyword">of</span> semaphore:= (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    processi</span><br><span class="line">        <span class="keyword">repeat</span></span><br><span class="line">           think;</span><br><span class="line">           Sswait(chopstick［(i+<span class="number">1</span>) <span class="keyword">mod</span> <span class="number">5</span>］, chopstick ［i］);</span><br><span class="line">           eat;</span><br><span class="line">           Ssignat(chopstick ［(i+<span class="number">1</span>) <span class="keyword">mod</span> <span class="number">5</span>］, chopstick ［i］);</span><br><span class="line">      <span class="keyword">until</span> false;</span><br></pre></td></tr></table></figure>
<h2 id="读者写者问题"><a class="markdownIt-Anchor" href="#读者写者问题"></a> 读者—写者问题</h2>
<ul>
<li>一个数据文件或记录可被多个进程共享，我们把只要求读该文件的进程称为“Reader进程”，其他进程称为“Writer进程”</li>
<li><strong>允许多个进程同时读一个共享对象</strong>，因为读不会使数据文件混乱</li>
<li><strong>不允许一个Writer进程和其他Reader进程或Writer进程同时访问一个对象</strong></li>
<li>读者—写者问题(Reader-Writer Problem)是指保证一个Writer进程必须与其他进程互斥地访问共享对象的同步问题</li>
<li>读者—写者问题常被用来测试新同步原语</li>
</ul>
<hr />
<ul>
<li>利用记录型信号量解决读者-写者问题思想</li>
<li>为实现Reader与Writer进程间在读或写时的互斥而设置了一个互斥信号量Wmutex。另外，再设置一个整型变量Readcount表示正在读的进程数目</li>
<li>由于只要有一个Reader进程在读，便不允许Writer进程去写。因此，仅当Readcount=0, 表示尚无Reader进程在读时，Reader进程才需要执行wait(Wmutex)操作</li>
<li>若wait(Wmutex)操作成功，Reader进程便可去读，相应地，做Readcount+1操作。同理，仅当Reader进程在执行了Readcount减1操作后其值为0时，才须执行signal(Wmutex)操作，以便让Writer进程写</li>
<li>又因为Readcount是一个可被多个Reader进程访问的临界资源，因此，应该为它设置一个计数器互斥信号量rmutex</li>
</ul>
<hr />
<p>读者-写者问题可描述如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Var rmutex, wmutex:semaphore:&#x3D;1,1;</span><br><span class="line">       Readcount:integer:&#x3D;0;</span><br><span class="line">begin</span><br><span class="line">   parbegin</span><br><span class="line">     Reader:begin</span><br><span class="line">        repeat</span><br><span class="line">         wait(rmutex);</span><br><span class="line">         if readcount&#x3D;0 then wait(wmutex);</span><br><span class="line">          Readcount :&#x3D;Readcount+1;</span><br><span class="line">           …</span><br><span class="line">         signal(rmutex);</span><br><span class="line">           …</span><br><span class="line">         perform read operation;</span><br><span class="line">           …</span><br><span class="line">         wait(rmutex);</span><br><span class="line">         readcount:&#x3D;readcount-1;</span><br><span class="line">         if readcount&#x3D;0 then</span><br><span class="line">                signal(wmutex);</span><br><span class="line">         signal(rmutex);</span><br><span class="line">        until false;</span><br><span class="line">     end</span><br><span class="line">     writer:begin</span><br><span class="line">        repeat</span><br><span class="line">         wait(wmutex);</span><br><span class="line">         perform write operation;</span><br><span class="line">         signal(wmutex);</span><br><span class="line">        until false;</span><br><span class="line">       end</span><br><span class="line">     end</span><br><span class="line">   parend</span><br></pre></td></tr></table></figure>
<h3 id="利用信号量集机制解决读者-写者问题"><a class="markdownIt-Anchor" href="#利用信号量集机制解决读者-写者问题"></a> 利用信号量集机制解决读者-写者问题</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Var RN integer;&#x2F;&#x2F;允许有RN个读者同时读</span><br><span class="line">    L, mx:semaphore:&#x3D;RN,1;</span><br><span class="line">begin</span><br><span class="line">    parbegin</span><br><span class="line">     reader:begin</span><br><span class="line">        repeat</span><br><span class="line">           Swait(L,1,1);</span><br><span class="line">           Swait(mx,1,0);           &#x2F;&#x2F;只要mx有资源，即可增加</span><br><span class="line">           …</span><br><span class="line">           perform read operation;</span><br><span class="line">           …</span><br><span class="line">           Ssignal(L,1);</span><br><span class="line">        until false;</span><br><span class="line">     end</span><br><span class="line">     writer:begin</span><br><span class="line">        repeat</span><br><span class="line">           Swait(mx,1,1; L,RN,0);  &#x2F;&#x2F;既无writer进程在写(mx&#x3D;1)，又无reader进程在读(L&#x3D;RN)</span><br><span class="line">           perform write operation;</span><br><span class="line">           Ssignal(mx,1);</span><br><span class="line">        until false;</span><br><span class="line">     end</span><br><span class="line">    parend</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="独木桥问题"><a class="markdownIt-Anchor" href="#独木桥问题"></a> 独木桥问题</h2>
<p>独木桥问题（仅允许一人通过）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Var mx:semaphore:&#x3D;1;</span><br><span class="line">begin</span><br><span class="line">    parbegin</span><br><span class="line">     man(i):begin</span><br><span class="line">         wait(mx);</span><br><span class="line">         过桥；</span><br><span class="line">         signal(mx);</span><br><span class="line">     end</span><br><span class="line">     parend</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1 id="管程机制"><a class="markdownIt-Anchor" href="#管程机制"></a> 管程机制</h1>
<h2 id="管程的引入"><a class="markdownIt-Anchor" href="#管程的引入"></a> 管程的引入</h2>
<p>引入信号量机制，在使用同步操作wait(S)和signal(S)(P、V操作)时，也会造成错误。</p>
<ol>
<li>错误1：颠倒</li>
</ol>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">signal(mutex);</span><br><span class="line">critical section</span><br><span class="line">wait(mutex);</span><br></pre></td></tr></table></figure>
<p>这种情况可能会造成几个进程同时进入临界区。<br />
2. 错误2：误写</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">wait(mutex);</span><br><span class="line">critical section</span><br><span class="line">wait(mutex);</span><br></pre></td></tr></table></figure>
<p>两次执行P操作使mutex变成-1，这样，任何进程都进不了临界区，从而也不会再有V操作去唤醒出错的进程，造成死锁。<br />
3. 错误3：遗漏1</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">critical section</span><br><span class="line">signal(mutex);</span><br></pre></td></tr></table></figure>
<p>会使多个进程进入临界区。</p>
<ol start="4">
<li>错误3：遗漏2</li>
</ol>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">wait(mutex);</span><br><span class="line">critical section</span><br></pre></td></tr></table></figure>
<p>其他进程无法进入临界区，也不能唤醒因不能进入临界区而阻塞的进程。</p>
<p>基于上述情况，Dijkstra于1971年提出，把所有进程对某一种临界资源的同步操作都集中起来，构成一个所谓的“秘书”进程。凡是要访问该临界资源的进程，都需先报告“秘书”，由秘书来实现诸进程的同步。<br />
1973年，Hansan和Hoare又把“秘书”进程思想发展为管程概念；把并发进程间的同步操作，分别集中于相应的管程中。</p>
<h2 id="管程的基本概念"><a class="markdownIt-Anchor" href="#管程的基本概念"></a> 管程的基本概念</h2>
<ul>
<li>管程的提出
<ul>
<li>虽然信号量机制是一种既方便又有效的进程同步机制，但每个要访问临界资源的进程都必须自备同步操作wait(S)和signal(S)。这就使大量的同步操作分散在各个进程中。给系统的管理带来麻烦，也可能因同步操作不当而导致死锁</li>
</ul>
</li>
<li>管程(Monitors)的定义
<ul>
<li>一个<strong>管程</strong>定义了一个<strong>数据结构</strong>和能为并发进程所执行的<strong>一组操作</strong>，这组操作能同步进程和改变管程中的数据 (by Hansan)</li>
<li>管程由三部分组成
<ul>
<li>局部于管程的共享变量说明；</li>
<li>对该数据结构进行操作的一组过程；</li>
<li>对局部于管程的数据设置初始值的语句</li>
</ul>
</li>
<li>管程还必须有一个名字</li>
</ul>
</li>
<li>局部于管程的数据结构，仅能被局部于管程的过程所访问；</li>
<li>局部于管程的过程也仅能访问管程内的数据结构</li>
<li>管程相当于围墙，把共享变量和对它操作的过程围起来，而每次只允许一个进程进入，从而实现了互斥操作<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200504225539.png" alt="管程示意图" /></li>
</ul>
<h3 id="管程的语法"><a class="markdownIt-Anchor" href="#管程的语法"></a> 管程的语法</h3>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> monitor-<span class="keyword">name</span>=monitor</span><br><span class="line">          variable declarations</span><br><span class="line">          <span class="function"><span class="keyword">procedure</span> <span class="title">entry</span> <span class="title">P1</span><span class="params">(…)</span></span></span><br><span class="line"><span class="function">               <span class="title">begin</span> … <span class="title">end</span>;</span></span><br><span class="line">          <span class="function"><span class="keyword">procedure</span> <span class="title">entry</span> <span class="title">P2</span><span class="params">(…)</span></span></span><br><span class="line"><span class="function">              <span class="title">begin</span> … <span class="title">end</span>;</span></span><br><span class="line">              …</span><br><span class="line">          <span class="function"><span class="keyword">procedure</span> <span class="title">entry</span> <span class="title">Pn</span><span class="params">(…)</span></span></span><br><span class="line"><span class="function">              <span class="title">begin</span> … <span class="title">end</span>;</span></span><br><span class="line">         <span class="keyword">begin</span></span><br><span class="line">              <span class="keyword">initialization</span> code;</span><br><span class="line">         <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在实现一个管程时，必须考虑：
<ul>
<li>互斥。通常编译程序对每个管程自动产生一个互斥信号量（初值为1）。每次只准许一个进程进入管程，其他调用管程者必须等待。</li>
<li>同步。设置两个同步原语wait和signal.</li>
</ul>
</li>
<li>当某进程通过管程请求临界资源而不能满足时，管程便调用wait原语使该进程等待，并将它排在（管程）的等待队列上。</li>
<li>当另一进程访问完并释放之后，管程又调用signal原语，唤醒等待队列中的队首进程。</li>
</ul>
<h4 id="条件变量"><a class="markdownIt-Anchor" href="#条件变量"></a> 条件变量</h4>
<ul>
<li>管程中对每个条件变量，都须予以说明，其形式为：<strong>Var x, y:condition</strong>。该变量应置于wait和signal之前，即可表示为X.wait和X.signal。例如，由于共享数据被占用而使调用进程等待，该条件变量的形式为：<strong>nonbusy:condition</strong>。此时， wait原语应改为nonbusy.wait，相应地，signal应改为<strong>nonbusy.signal</strong></li>
<li>应当指出，X.signal操作的作用，是重新启动一个被阻塞的进程，但如果没有被阻塞的进程，则X.signal操作不产生任何后果。这与信号量机制中的signal操作不同。因为，后者总是要执行s∶=s+1操作，因而总会改变信号量的状态</li>
<li>如果有进程Q处于阻塞状态， 当进程P执行了X.signal操作后，怎样决定由哪个进行执行，哪个等待，可采用下述两种方式之一进行处理：
<ul>
<li>P等待，直至Q离开管程或等待另一条件。</li>
<li>Q等待，直至P离开管程或等待另一条件。</li>
<li>采用哪种处理方式， 当然是各执一词。 但是Hansan采用了第一种处理方式</li>
</ul>
</li>
</ul>
<h2 id="利用管程解决生产者消费者问题"><a class="markdownIt-Anchor" href="#利用管程解决生产者消费者问题"></a> 利用管程解决生产者—消费者问题</h2>
<ul>
<li>在利用管程方法来解决生产者-消费者问题时， 首先便是为它们建立一个管程，并命名为Producer-Consumer, 或简称为PC。其中包括两个过程
<ul>
<li>put(item)过程。生产者利用该过程将自己生产的产品投放到缓冲池中，并用整型变量count来表示在缓冲池中已有的产品数目，当count≥n时， 表示缓冲池已满， 生产者须等待。</li>
<li>get(item)过程。消费者利用该过程从缓冲池中取出一个产品，当count≤0时，表示缓冲池中已无可取用的产品， 消费者应等待。<br />
PC管程可描述如下：</li>
</ul>
</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> producer-consumer=monitor</span><br><span class="line">    <span class="keyword">Var</span> <span class="keyword">in</span>,<span class="keyword">out</span>,count:integer;</span><br><span class="line">     buffer:<span class="keyword">array</span>［<span class="number">0</span>,…,n-<span class="number">1</span>］ <span class="keyword">of</span> item;</span><br><span class="line">     notfull, notempty:condition;</span><br><span class="line">     <span class="function"><span class="keyword">procedure</span> <span class="title">entry</span> <span class="title">put</span><span class="params">(item)</span></span></span><br><span class="line"><span class="function">       <span class="title">begin</span></span></span><br><span class="line"><span class="function">        <span class="title">if</span> <span class="title">count</span>≥<span class="title">n</span> <span class="title">then</span> <span class="title">notfull</span>.<span class="title">wait</span>;</span>   <span class="comment">//缓冲区满等待</span></span><br><span class="line">         buffer(<span class="keyword">in</span>):=nextp;</span><br><span class="line">         <span class="keyword">in</span>:=(<span class="keyword">in</span>+<span class="number">1</span>) <span class="keyword">mod</span> n;</span><br><span class="line">         count:=count+<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">if</span> notempty.queue <span class="keyword">then</span></span><br><span class="line">            notempty.signal;  <span class="comment">//重新启动一个因缓冲区空而被阻塞的过程</span></span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">     <span class="function"><span class="keyword">procedure</span> <span class="title">entry</span> <span class="title">get</span><span class="params">(item)</span></span></span><br><span class="line"><span class="function">       <span class="title">begin</span></span></span><br><span class="line"><span class="function">         <span class="title">if</span> <span class="title">count</span>≤0 <span class="title">then</span> <span class="title">notempty</span>.<span class="title">wait</span>;</span> <span class="comment">//缓冲区空等待</span></span><br><span class="line">         nextc:=buffer(<span class="keyword">out</span>);</span><br><span class="line">         <span class="keyword">out</span>:= (<span class="keyword">out</span>+<span class="number">1</span>) <span class="keyword">mod</span> n;</span><br><span class="line">         count:=count-<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">if</span> notfull.queue <span class="keyword">then</span></span><br><span class="line">            notfull.signal;    <span class="comment">//重新启动一个因缓冲区满而被阻塞的过程</span></span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line"> <span class="keyword">begin</span></span><br><span class="line">         <span class="keyword">in</span>:=<span class="keyword">out</span>:=<span class="number">0</span>;</span><br><span class="line">         count:=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>在利用管程解决生产者-消费者问题时， 其中的生产者和消费者可描述为</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line">producer:<span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">repeat</span></span><br><span class="line">           produce an item <span class="keyword">in</span> nextp;</span><br><span class="line">           PC.put(item);</span><br><span class="line">      <span class="keyword">until</span> false;</span><br><span class="line">         <span class="keyword">end</span></span><br><span class="line">consumer:<span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">repeat</span></span><br><span class="line">           PC.get(item);</span><br><span class="line">           consume the item <span class="keyword">in</span> nextc;</span><br><span class="line">      <span class="keyword">until</span> false;</span><br><span class="line">         <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="进程通信"><a class="markdownIt-Anchor" href="#进程通信"></a> 进程通信</h1>
<p>信号量机制就是一种进程通信方式。但是——</p>
<ol>
<li>交换的信息量比较少；</li>
<li>效率低；</li>
<li>对用户不透明。</li>
</ol>
<h2 id="进程通信的类型"><a class="markdownIt-Anchor" href="#进程通信的类型"></a> 进程通信的类型</h2>
<ul>
<li>进程通信：为协调完成某一任务，几个进程间应保持联系，即交换一定数量的信息。</li>
<li>低级通信：仅交换少量的数据和一些状态，如前述的同步与互斥方式。（P、V操作）
<ol>
<li>效率低</li>
<li>通信对用户不透明</li>
</ol>
</li>
<li>高级通信：交换信息量大，用户可直接利用OS提供的通信命令高效的传送大量数据。（OS隐去了实现细节，对用户是透明的。）
<ol>
<li>共享存储器系统</li>
<li>消息传递系统</li>
<li>管道通信系统</li>
</ol>
</li>
</ul>
<h3 id="共享存储器系统shared-memory-system"><a class="markdownIt-Anchor" href="#共享存储器系统shared-memory-system"></a> 共享存储器系统(Shared-Memory System)</h3>
<ul>
<li>基于共享数据结构的通信方式
<ul>
<li>要求诸进程共享某些数据结构，借以实现进程间的数据交换。如生产者—消费者问题中，用有界缓冲区来实现通信</li>
<li>对用户<strong>不透明</strong>，程序员负担重，操作系统效率低，只<strong>适合传递少量数据</strong>，属于<strong>低级通信方式</strong></li>
</ul>
</li>
<li>基于共享存储区的通信方式
<ul>
<li>在存储器中划出一块共享存储区，诸进程可通过对共享存储区中的数据读写来实现通信</li>
<li>属于高级通信，<strong>适合传送大量数据</strong></li>
</ul>
</li>
</ul>
<h3 id="消息传递系统message-passing-system"><a class="markdownIt-Anchor" href="#消息传递系统message-passing-system"></a> 消息传递系统(Message passing system)</h3>
<ul>
<li>进程之间的数据交换，是以格式化的消息(message)为单位的；在计算机网络中，又把message称为<strong>报文</strong></li>
<li>实现方式：程序员直接利用系统提供的一组<strong>通信命令</strong>(原语)进行通信。</li>
<li>消息传递系统的通信方式属于高级通信方式。可分为<strong>直接通信方式和间接通信方式</strong></li>
<li>优点：传递信息量大、对用户透明、应用广泛</li>
<li>广泛应用于单机系统、多机系统、计算机网络</li>
<li>直接通信方式
<ul>
<li>发送进程直接将消息发送给接收进程，并将消息挂在接收进程</li>
<li>的消息队列上，接收进程从消息队列中取得消息。</li>
</ul>
</li>
<li>间接通信方式
<ul>
<li>发送进程发送消息到“信箱”中，接收进程从“信箱”中取得消息，</li>
<li>相应的系统称为电子邮件系统。</li>
</ul>
</li>
</ul>
<h3 id="管道pipe通信共享文件方式"><a class="markdownIt-Anchor" href="#管道pipe通信共享文件方式"></a> 管道(Pipe)通信（共享文件方式）</h3>
<ul>
<li>管道是指用于连接一个读进程和一个写进程以实现他们之间通信的一个共享文件，又名pipe文件</li>
<li>向<strong>管道</strong>(共享文件)提供输入的<strong>发送进程</strong>(即写进程)， 以字符流形式将大量的数据送入管道；而接受管道输出的<strong>接收进程</strong>(即读进程)，则从管道中接收(读)数据</li>
<li>由于发送进程和接收进程是利用管道进行通信的，故又称为<strong>管道通信</strong></li>
<li>这种方式首创于UNIX系统，由于它能有效地传送大量数据，因而又被引入到许多其它操作系统中</li>
<li>管道的作用类似于消息缓冲区（生产-消费），但有显著不同特点：
<ol>
<li><strong>以文件为传输介质</strong>，可传输大量数据。</li>
<li><strong>以字符流方式读写</strong>，不必以消息为单位。</li>
<li><strong>以队列方式工作</strong>，先写入的先读出。</li>
</ol>
</li>
<li>管道机制必须提供以下三方面的协调能力
<ul>
<li><strong>互斥</strong>，即当一个进程正在对pipe执行读/写操作时，其它(另一)进程必须等待</li>
<li><strong>同步</strong>，指当写(输入)进程把一定数量(如4 KB)的数据写入pipe，便去睡眠等待，直到读(输出)进程取走数据后，再把他唤醒。当读进程读一空pipe时，也应睡眠等待，直至写进程将数据写入管道后，才将之唤醒</li>
<li><strong>确定对方是否存在</strong>，只有确定了对方已存在时，才能进行通信</li>
</ul>
</li>
</ul>
<h2 id="消息传递通信的实现方法"><a class="markdownIt-Anchor" href="#消息传递通信的实现方法"></a> 消息传递通信的实现方法</h2>
<h3 id="直接通信方式"><a class="markdownIt-Anchor" href="#直接通信方式"></a> 直接通信方式</h3>
<ul>
<li><strong>发送进程</strong>利用OS所提供的发送命令，<strong>直接</strong>把消息发送给<strong>目标进程</strong>。</li>
<li>系统提供通信命令(原语)：
<ul>
<li>Send(Receiver, message); 发送一个消息给接收进程；</li>
<li>Receive(Sender, message); 接收Sender发来的消息；</li>
</ul>
</li>
<li>要求发送进程和接收进程：
<ul>
<li>一对一：都以<strong>显式方式</strong>提供对方的标识符。
<ul>
<li>Send(P1, m1)；</li>
<li>Receive(P2, m1)；</li>
</ul>
</li>
<li><strong>不可能</strong>事先<strong>指定发送进程</strong>：接收进程可与多个发送进程通信。例如，用于提供打印服务的进程，它可以接收来自任何一个进程的“打印请求”消息。对于这样的应用，在接收进程接收消息的原语中的源进程参数，是完成通信后的返回值，接收原语可表示为：
<ul>
<li>Receive (id, message);</li>
</ul>
</li>
</ul>
</li>
<li>利用直接通信原语解决生产者-消费者问题。生产者用Send原语将消息发送给消费者进程；消费者进程用Receive原语来得到一个消息。若消息尚未生产出来，消费者必须等待，直至生产者进程将消息发送过来。</li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"> Producer: <span class="keyword">repeat</span></span><br><span class="line">              produce an item <span class="keyword">in</span> nextp;</span><br><span class="line">              send(consumer, nextp);</span><br><span class="line">          <span class="keyword">until</span> false;</span><br><span class="line">Consumer: <span class="keyword">repeat</span></span><br><span class="line">              receive(producer, nextc);</span><br><span class="line">              consume the item <span class="keyword">in</span> nextc;</span><br><span class="line">          <span class="keyword">until</span> false;</span><br></pre></td></tr></table></figure>
<h3 id="间接通信方式"><a class="markdownIt-Anchor" href="#间接通信方式"></a> 间接通信方式</h3>
<ul>
<li>通过作为共享数据结构的实体——信箱，进行通信</li>
<li>系统提供信箱通信原语
<ul>
<li>创建：建立一个新信箱，给出信箱名字、信箱属性(公用、私用或共享)。共享信箱， 还应给出共享者的名字</li>
<li>撤消：不再需要信箱时，可用撤消原语将之撤消</li>
<li>消息的发送和接收。当进程之间要利用信箱进行通信时，必须使用共享信箱，通信原语
<ul>
<li>Send(mailbox, message); 将一个消息发送到指定信箱；</li>
<li>Receive(mailbox, message); 从指定信箱中接收一个消息</li>
</ul>
</li>
</ul>
</li>
<li>信箱可由操作系统创建，也可由用户进程创建，创建者是信箱的拥有者。据此，可把信箱分为以下三类
<ul>
<li><strong>私用信箱</strong>——用户进程可为自己建立一个新信箱，并作为该进程的一部分。信箱的拥有者有权从信箱中读取消息，其他用户则只能将自己构成的消息发送到该信箱中。这种私用信箱可采用<strong>单向通信链路</strong>的信箱来实现。当拥有该信箱的进程结束时，信箱也随之消失</li>
<li><strong>公用信箱</strong>——它由操作系统创建，并提供给系统中的所有核准进程使用。核准进程既可把消息发送到该信箱中，也可从信箱中读取发送给自己的消息。显然，公用信箱应采用<strong>双向通信链路</strong>的信箱来实现。通常，公用信箱在系统运行期间始终存在</li>
<li><strong>共享信箱</strong>——它由某进程创建，在创建时或创建后，指明它是可共享的，同时须指出共享进程(用户)的名字。信箱的拥有者和共享者，都有权从信箱中取走发送给自己的消息</li>
</ul>
</li>
<li>在利用信箱通信时，在发送进程和接收进程之间，存在以下四种关系：
<ul>
<li>一对一关系。这时可为发送进程和接收进程建立一条两者<strong>专用的通信链路</strong>，使两者之间的交互不受其他进程的干扰</li>
<li>多对一关系。允许提供服务的进程与多个用户进程之间进行交互，也称为<strong>客户/服务器交互</strong>(client/server interaction)</li>
<li>一对多关系。允许一个发送进程与多个接收进程进行交互，使发送进程可用<strong>广播方式</strong>，向接收者(多个)发送消息</li>
<li>多对多关系。允许建立一个<strong>公用信箱</strong>，让多个进程都能向信箱中投递消息；也可从信箱中取走属于自己的消息</li>
</ul>
</li>
</ul>
<h2 id="消息传递系统实现中的若干问题"><a class="markdownIt-Anchor" href="#消息传递系统实现中的若干问题"></a> 消息传递系统实现中的若干问题</h2>
<h3 id="通信链路communication-link"><a class="markdownIt-Anchor" href="#通信链路communication-link"></a> 通信链路(communication link)</h3>
<ul>
<li>要在发送进程和接收进程之间能进行通信，必须在两者之间建立一条<strong>通信链路</strong>。两种方式：
<ul>
<li>显式的“<strong>建立连接</strong>” 和拆除链路。用命令(原语)请求系统做。这种方式主要用于<strong>计算机网络</strong>中</li>
<li>系统自动地建立一条链路。无须明确提出建立链路的请求，只须利用系统提供的<strong>发送命令</strong>(原语)。这种方式主要用于<strong>单机</strong>系统中</li>
</ul>
</li>
<li>根据通信链路的连接方法，可把通信链路分为
<ul>
<li><strong>点—点连接通信链路</strong>，这时的一条链路只连接两个结点(进程)；</li>
<li><strong>多点连接链路</strong>，指用一条链路连接多个(n＞2)结点(进程)</li>
</ul>
</li>
<li>根据通信方式，可把链路分成
<ul>
<li><strong>单向通信链路</strong>，只允许发送进程向接收进程发送消息；</li>
<li><strong>双向链路</strong>，既允许由进程A向进程B发送消息，也允许进程B同时向进程A发送消息</li>
</ul>
</li>
<li>还可根据通信链路容量的不同而把链路分成两类：
<ul>
<li>无容量通信链路，在这种通信连路上没有缓冲区，因而不能暂存任何消息；</li>
<li>有容量通信链路，指在通信链路中设置了缓冲区，因而能暂存消息。缓冲区数目愈多，通信链路的容量愈大。</li>
</ul>
</li>
</ul>
<h3 id="消息的格式"><a class="markdownIt-Anchor" href="#消息的格式"></a> 消息的格式</h3>
<ul>
<li>定长消息格式：消息比较短
<ul>
<li>优点：减少了对消息的处理和存储开销。</li>
<li>缺点：对要发送较长消息的用户是不方便的</li>
<li>这种方式可用于办公自动化系统中，为用户提供快速的便笺式通信；</li>
</ul>
</li>
<li>变长的消息格式：消息的长度是可变的。
<ul>
<li>优点：方便了用户</li>
<li>缺点：处理和存储变长消息，须付出更多开销</li>
</ul>
</li>
<li>两种消息格式各有其优缺点，故在很多系统(包括计算机网络)中，是同时都用的</li>
</ul>
<h3 id="进程同步方式"><a class="markdownIt-Anchor" href="#进程同步方式"></a> 进程同步方式</h3>
<ul>
<li>辅以进程同步机制，使诸进程能协调通信。不论是发送还是接收进程，在完成消息的发送或接收后有两种可能，继续发送（接收）或阻塞
<ul>
<li><strong>发送进程阻塞、接收进程阻塞</strong> ——主要用于进程之间紧密同步（tight synchronization），发送进程和接收进程之间无缓冲时。这两个进程平时都处于阻塞状态，直到有消息传递时。这种方式称为<strong>汇合</strong>（rendezrous）</li>
<li><strong>发送进程不阻塞、接收进程阻塞</strong>——这是应用最多的一种进程同步方式。发送进程可以尽快地把一个或多个消息发送给目标；而接收进程平时处于阻塞状态，直到有消息发送来为止。如服务器上的打印服务</li>
<li><strong>发送进程和接收进程均不阻塞</strong>——平时，发送进程与接收进程都在忙自己的事情，仅当发生某事使它无法运行时才把自己阻塞起来等待</li>
</ul>
</li>
</ul>
<h2 id="消息缓冲队列通信机制"><a class="markdownIt-Anchor" href="#消息缓冲队列通信机制"></a> 消息缓冲队列通信机制</h2>
<ul>
<li>消息缓冲队列通信机制中的数据结构
<ul>
<li>消息缓冲区——在消息缓冲队列通信方式中，主要利用的数据结构是消息缓冲区。它可描述如下</li>
</ul>
  <figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">message</span> buffer=<span class="keyword">record</span></span><br><span class="line">    sender; <span class="comment">//发送者进程标识符</span></span><br><span class="line">    size; <span class="comment">//消息长度</span></span><br><span class="line">    text; <span class="comment">//消息正文</span></span><br><span class="line">    next; <span class="comment">//指向下一个消息缓冲区的指针</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li>PCB中有关通信的数据项。在利用消息缓冲队列通信机制时，在设置消息缓冲队列的同时，还应增加用于对消息队列进行操作和实现同步的信号量，并将它们置入进程的PCB中。在PCB中数据项可描述如下  <figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> processcontrol block=<span class="keyword">record</span></span><br><span class="line">       …</span><br><span class="line">       mq;        <span class="comment">//消息队列队首指针</span></span><br><span class="line">       mutex;     <span class="comment">//消息队列互斥信号量</span></span><br><span class="line">       sm;        <span class="comment">//消息队列资源信号量</span></span><br><span class="line">       …</span><br><span class="line">   <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="发送原语"><a class="markdownIt-Anchor" href="#发送原语"></a> 发送原语</h3>
<ul>
<li>发送进程：
<ol>
<li>先在自己的内存空间，设置一<strong>发送区a</strong>；</li>
<li>把待发送的消息正文、发送进程标识符、消息长度等信息填入其中；</li>
<li>调用发送原语，把消息发送给目标(接收)进程</li>
</ol>
</li>
<li>发送原语：首先根据发送区a中所设置的<strong>消息长度</strong>a.size来申请一缓冲区i，接着，把发送区a中的信息复制到缓冲区i中</li>
<li>为了能将i挂在接收进程的消息队列mq上，应先<strong>获得接收进程的内部标识符j</strong>，然后将i挂在j.mq上</li>
<li>由于该<strong>队列</strong>属于<strong>临界资源</strong>， 故在执行insert操作的前后，都要执行wait和signal操作<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200505220125.png" alt="" /></li>
</ul>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="comment">//发送原语</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">send</span><span class="params">(receiver, a)</span></span></span><br><span class="line"><span class="function">   <span class="title">begin</span></span></span><br><span class="line"><span class="function">      <span class="title">getbuf</span><span class="params">(a.size,i)</span>;</span>         根据a.size申请缓冲区(发送区a)</span><br><span class="line">      i.sender:=a.sender;  将发送区a中信息复制到消息缓冲区中</span><br><span class="line">      i.size:=a.size;</span><br><span class="line">      i.text=a.text;</span><br><span class="line">      i.next:=<span class="number">0</span>;</span><br><span class="line">      getid(PCB <span class="keyword">set</span>, receiver.j);   获得接收进程内部标识符；</span><br><span class="line">      wait(j.mutex);</span><br><span class="line">      insert(j.mq, i);   将消息缓冲区插入消息队列；</span><br><span class="line">      signal(j.mutex);</span><br><span class="line">      signal(j.sm);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="comment">//接收原语</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">receive</span><span class="params">(b)</span></span></span><br><span class="line"><span class="function">   <span class="title">begin</span></span></span><br><span class="line"><span class="function">      <span class="title">j</span>:</span>=internal <span class="keyword">name</span>; j为接收进程内部的标识符；</span><br><span class="line">      wait(j.sm);        申请队列资源</span><br><span class="line">      wait(j.mutex);      申请互斥</span><br><span class="line">      remove(j.mq, i);   将消息队列中第一个消息移出；</span><br><span class="line">      signal(j.mutex);</span><br><span class="line">      b.sender:=i.sender; 将消息缓冲区i中信息复制到接收区b;</span><br><span class="line">      b.size:=i.size;</span><br><span class="line">      b.text:=i.text;</span><br><span class="line">   <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="线程"><a class="markdownIt-Anchor" href="#线程"></a> 线程</h1>
<h2 id="线程的基本概念"><a class="markdownIt-Anchor" href="#线程的基本概念"></a> 线程的基本概念</h2>
<h3 id="进程的两个基本属性"><a class="markdownIt-Anchor" href="#进程的两个基本属性"></a> 进程的两个基本属性</h3>
<ul>
<li>可<strong>拥有资源</strong>的独立单位
<ul>
<li>给每个进程分配空间，保存进程映像，控制一些资源（文件，I/O设备），有状态、优先级、调度</li>
</ul>
</li>
<li>可独立<strong>调度和分派</strong>的基本单位</li>
<li>进程是一个执行轨迹</li>
<li>以上<strong>两个属性构成进程并发执行</strong>的基础</li>
</ul>
<h3 id="线程的引入"><a class="markdownIt-Anchor" href="#线程的引入"></a> 线程的引入</h3>
<ul>
<li>为使进程能并发执行，系统必须完成的操作：
<ul>
<li>创建进程</li>
<li>撤消进程</li>
<li>进程切换</li>
</ul>
</li>
<li>缺点：时间空间开销大，限制并发度的提高</li>
<li>在操作系统中，进程的引入提高了计算机资源的利用效率。但在进一步提高进程的并发性时，人们发现进程切换开销占的比重越来越大，同时进程间通信的效率也受到限制。</li>
<li>线程的引入正是为了简化进程间的通信，以<strong>小的开销</strong>来提高进程内的<strong>并发程度</strong>从而提高系统吞吐量， 20世纪80年代中期引入<strong>线程</strong>（Threads）</li>
<li>将进程的两个属性分开，作为<strong>调度和分派的基本单位</strong>，不同时作为资源的拥有者，就形成了线程的概念</li>
<li>线程：有时称轻量级进程，进程中的一个运行实体，是一个CPU调度单位，<strong>资源的拥有者还是进程</strong>或称任务</li>
<li>随着多处理机出现，线程可以更好的改善多机系统的性能</li>
</ul>
<h3 id="线程-2"><a class="markdownIt-Anchor" href="#线程-2"></a> 线程</h3>
<ul>
<li>具有执行状态（状态转换）</li>
<li>不运行时保存上下文</li>
<li>有一个执行栈</li>
<li>有一些局部变量的静态存储</li>
<li>可存取所在进程的内存和其他资源</li>
<li>可以创建、撤消另一个线程</li>
</ul>
<h3 id="线程的属性"><a class="markdownIt-Anchor" href="#线程的属性"></a> 线程的属性</h3>
<ul>
<li>轻型实体
<ul>
<li>只拥有必不可少的资源，如：线程状态、寄存器上下文和栈</li>
</ul>
</li>
<li>独立调度和分派的基本单位
<ul>
<li>具有就绪、阻塞和执行三种基本状态</li>
<li>线程的创建、终止时间比进程短</li>
<li>同进程内线程切换时间比进程短，系统开销小</li>
</ul>
</li>
<li>可并发执行
<ul>
<li>同一进程内的线程并发执行</li>
<li>不同进程间的线程并发执行</li>
</ul>
</li>
<li>共享进程资源
<ul>
<li>由于同进程内线程间共享内存和文件资源，可直接进行不通过内核的通信</li>
</ul>
</li>
</ul>
<h3 id="线程的状态"><a class="markdownIt-Anchor" href="#线程的状态"></a> 线程的状态</h3>
<ul>
<li>状态参数：在OS中的每一个线程都可以利用<strong>线程标识符</strong>和一组<strong>状态参数</strong>进行描述。通常有
<ul>
<li><strong>寄存器状态</strong>， 它包括程序计数器PC和堆栈指针中的内容</li>
<li><strong>堆栈</strong>， 在堆栈中通常保存有局部变量和返回地址</li>
<li><strong>优先级</strong>， 描述线程执行的优先程度；</li>
<li><strong>线程专有存储器</strong>， 用于保存线程自己的局部变量拷贝</li>
<li><strong>信号屏蔽</strong>， 即对某些信号加以屏蔽</li>
<li><strong>线程运行状态</strong></li>
</ul>
</li>
<li>如同传统的进程一样，在各线程之间也存在着<strong>共享资源</strong>和<strong>相互合作的制约关系</strong>，致使线程在运行时也具有<strong>间断性</strong>。 相应地，线程在运行时也具有下述三种基本状态
<ul>
<li><strong>执行状态</strong>，表示线程正获得处理机而运行；</li>
<li><strong>就绪状态</strong>， 指线程已具备了各种执行条件，一旦获得CPU便可执行的状态；</li>
<li><strong>阻塞状态</strong>，指线程在执行中因某事件而受阻，处于暂停执行时的状态</li>
</ul>
</li>
</ul>
<h3 id="线程的创建和终止"><a class="markdownIt-Anchor" href="#线程的创建和终止"></a> 线程的创建和终止</h3>
<pre><code>+ 在多线程OS环境下，应用程序在启动时，通常仅有一个线程在执行，该线程被人们称为“**初始化线程**”。它可根据需要再去创建若干个线程
+ 在创建新线程时，需要利用一个**线程创建函数**（或系统调用），并提供相应的参数，如指向线程主程序的入口指针、堆栈的大小，以及用于调度的优先级等。在线程创建函数执行完后，将返回一个**线程标识符**供以后使用
+ 终止线程的方式有两种
    + 一种是在线程完成了自己的工作后**自愿退出**；
    + 另一种是线程在运行中出现错误或由于某种原因而被其它线程**强行终止**
</code></pre>
<h3 id="多线程os中的进程"><a class="markdownIt-Anchor" href="#多线程os中的进程"></a> 多线程OS中的进程</h3>
<ul>
<li>在多线程OS中，进程是作为<strong>拥有系统资源的基本单位</strong>，通常的进程都<strong>包含多个线程</strong>并为它们提供资源，但此时的进程<strong>就不再作为一个执行的实体</strong>。 多线程OS中的进程有以下属性
<ul>
<li>作为系统资源分配的单位</li>
<li>可包括多个线程</li>
<li>进程不是一个可执行的实体</li>
</ul>
</li>
</ul>
<h3 id="线程和进程的关系"><a class="markdownIt-Anchor" href="#线程和进程的关系"></a> 线程和进程的关系</h3>
<ul>
<li>单进程、单线程</li>
<li>单进程、多线程</li>
<li>多进程、一个进程一个线程</li>
<li>多进程、一个进程多个线程<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200505223705.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200505223722.png" alt="" /></li>
</ul>
<h3 id="引入线程的好处"><a class="markdownIt-Anchor" href="#引入线程的好处"></a> 引入线程的好处</h3>
<ul>
<li>创建一个新线程花费时间少（结束亦如此）</li>
<li>两个线程的切换花费时间少</li>
<li>（如果机器设有“存储[恢复]所有寄存器”指令，则整个切换过程用几条指令即可完成）</li>
<li>因为同一进程内的线程共享内存和文件，因此它们之间相互通信无须调用内核</li>
<li>适合多处理机系统</li>
</ul>
<hr />
<blockquote>
<p><strong>例子1</strong><br />
LAN（局域网）中的一个文件服务器，在一段时间内需要处理几个文件请求。有效的方法是为每一个请求创建一个线程。<br />
在一个SMP（对称多处理）上：多个线程可以同时在不同的处理器上运行<br />
<strong>例子2</strong><br />
一个线程显示菜单，并读入用户输入；<br />
另一个线程执行用户命令<br />
考虑一个应用：由几个独立部分组成，这几个部分不需要顺序执行，则每个部分可以以线程方式实现<br />
当一个线程因I/O阻塞时，可以切换到同一应用的另一个线程</p>
</blockquote>
<h3 id="线程与进程的比较"><a class="markdownIt-Anchor" href="#线程与进程的比较"></a> 线程与进程的比较</h3>
<ul>
<li>调度：线程作为调度的基本单位，同进程中线程切换不引起进程切换，当不同进程的线程切换才引起进程切换；进程作为拥有资源的基本单位。</li>
<li>并发性：一个进程间的多个线程可并发。</li>
<li>拥有资源：线程仅拥有隶属进程的资源；进程是拥有资源的独立单位。</li>
<li>系统开销：进程大；线程小。</li>
</ul>
<h2 id="线程间的同步和通信"><a class="markdownIt-Anchor" href="#线程间的同步和通信"></a> 线程间的同步和通信</h2>
<h3 id="互斥锁mutex"><a class="markdownIt-Anchor" href="#互斥锁mutex"></a> 互斥锁(mutex)</h3>
<ul>
<li>互斥锁是一种比较简单的、用于实现进程间对<strong>资源互斥访问</strong>的机制。由于操作互斥锁的时间和空间开锁都较低， 因而较适合于高频度使用的关键共享数据和程序段</li>
<li>互斥锁可以有两种状态， 即<strong>开锁</strong>(unlock)和<strong>关锁</strong>(lock)状态。 相应地，可用两条命令(函数)对互斥锁进行操作。其中的关锁lock操作用于将mutex关上，开锁操作unlock则用于打开mutex</li>
</ul>
<h3 id="条件变量-2"><a class="markdownIt-Anchor" href="#条件变量-2"></a> 条件变量</h3>
<ul>
<li>每一个<strong>条件变量</strong>通常都与一个<strong>互斥锁一起使用</strong>，亦即，在创建一个互斥锁时便联系着一个条件变量。单纯的互斥锁用于<strong>短期锁定</strong>，主要是用来保证对临界区的互斥进入。而条件变量则用于线程的<strong>长期等待</strong>， 直至所等待的资源成为可用的</li>
<li>线程首先对mutex执行关锁操作，若成功便进入临界区，然后查找用于描述资源状态的数据结构，以了解资源的情况。 只要发现所需资源R正处于忙碌状态，线程便转为等待状态， 并对mutex执行开锁操作后，等待该资源被释放； 若资源处于空闲状态，表明线程可以使用该资源，于是将该资源设置为忙碌状态，再对mutex执行开锁操作</li>
</ul>
<hr />
<blockquote>
<p><strong>例：使用互斥锁和条件变量实现对资源R的访问</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Lock mutex;</span><br><span class="line">check data structures;</span><br><span class="line">while(resource busy);</span><br><span class="line">     wait(condition variable);</span><br><span class="line">mark resource as busy;</span><br><span class="line">unlock mutex;</span><br><span class="line">Lock mutex;</span><br><span class="line">mark resource as free;</span><br><span class="line">unlock mutex;</span><br><span class="line">wakeup(condition variable);</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="信号量机制-2"><a class="markdownIt-Anchor" href="#信号量机制-2"></a> 信号量机制</h3>
<h4 id="私用信号量private-samephore"><a class="markdownIt-Anchor" href="#私用信号量private-samephore"></a> 私用信号量(private samephore)</h4>
<ul>
<li>线程可利用私用信号量来实现同一进程中各线程之间的同步</li>
<li>调用创建信号量命令来创建一私用信号量</li>
<li>数据结构是<strong>存放在应用程序的地址空间中</strong></li>
<li>私用信号量属于<strong>特定的进程所有</strong>，OS不知道私用信号量的存在</li>
<li>缺点：易丢失空间，私用信号量的占用者异常结束或正常结束，并未释放该信号量所占有空间时，系统将无法使它恢复为0(空)； 也不能将它传送给下一个请求它的线程</li>
</ul>
<h4 id="公用信号量public-semaphore"><a class="markdownIt-Anchor" href="#公用信号量public-semaphore"></a> 公用信号量(public semaphore)</h4>
<ul>
<li>实现不同进程间或不同进程中各线程之间的同步</li>
<li>有一个公开的名字<strong>供所有的进程使用</strong></li>
<li>数据结构是存放在受保护的系统存储区中，由OS为它分配空间并进行管理，故也称为系统信号量</li>
<li>优点：信号量的占有者在结束时未释放该公用信号量，则OS会自动将该信号量空间回收，并通知下一进程。可见，公用信号量是一种<strong>比较安全的同步机制</strong></li>
</ul>
<h2 id="内核支持线程和用户级线程"><a class="markdownIt-Anchor" href="#内核支持线程和用户级线程"></a> 内核支持线程和用户级线程</h2>
<h3 id="内核支持线程kernel-support-threads"><a class="markdownIt-Anchor" href="#内核支持线程kernel-support-threads"></a> 内核支持线程(Kernel-Support Threads)</h3>
<ul>
<li>用户进程和系统进程都是在操作系统内核的支持下运行的，与内核紧密相关</li>
<li>内核支持线程由<strong>操作系统直接支持</strong>，内核在<strong>其空间内</strong>执行线程的创建、调度和管理。</li>
<li>所有线程管理<strong>由核心完成</strong></li>
<li>没有线程库，但对核心线程工具提供API（应用编程接口）</li>
<li><strong>核心维护</strong>进程和线程的上下文</li>
<li>线程之间的<strong>切换需要核心支持</strong></li>
<li>进行调度以<strong>线程</strong>为基础</li>
<li>例子：Windows NT，OS/2</li>
</ul>
<h4 id="核心级线程的优点和缺点"><a class="markdownIt-Anchor" href="#核心级线程的优点和缺点"></a> 核心级线程的优点和缺点</h4>
<ul>
<li>优点:
<ul>
<li>对多处理器，核心可以同时调度同一进程的多个线程</li>
<li>阻塞是在线程一级完成</li>
<li>核心例程是多线程的</li>
</ul>
</li>
<li>缺点：
<ul>
<li>在同一进程内的线程切换调用内核，导致速度下降</li>
</ul>
</li>
</ul>
<h3 id="用户级线程user-level-threads"><a class="markdownIt-Anchor" href="#用户级线程user-level-threads"></a> 用户级线程(User-Level Threads)</h3>
<ul>
<li>用户级线程在内核之上支持，并在用户层通过线程库来实现。线程库提供对线程创建、调度和管理的支持而无需内核支持。</li>
<li>调度<strong>仍然是以进程为单位的</strong></li>
<li>因内核并不知道用户级线程，所以所有线程的创建和调度是在<strong>用户空间内</strong>进行的，无需内核干涉</li>
<li>由于切换的规则远比进程调度和切换的规则简单，因而使线程的切换速度特别快。可见，这种<strong>线程是与内核无关的</strong></li>
</ul>
<h4 id="用户级线程的优点和缺点"><a class="markdownIt-Anchor" href="#用户级线程的优点和缺点"></a> 用户级线程的优点和缺点</h4>
<ul>
<li>优点：
<ul>
<li>线程切换不调用核心</li>
<li>调度是应用程序特定的：可以选择最好的算法</li>
<li>ULT可运行在任何操作系统上（只需要线程库）</li>
</ul>
</li>
<li>缺点：
<ul>
<li>大多数系统调用是阻塞的，若核心阻塞进程，则进程中所有线程将被阻塞</li>
<li><strong>核心只将处理器分配给进程</strong>，同一进程中的两个线程<strong>不能同时运行</strong>于两个处理器上</li>
</ul>
</li>
</ul>
<h2 id="线程控制"><a class="markdownIt-Anchor" href="#线程控制"></a> 线程控制</h2>
<h3 id="内核支持线程的实现"><a class="markdownIt-Anchor" href="#内核支持线程的实现"></a> 内核支持线程的实现</h3>
<ul>
<li>不论是进程还是线程都必须直接或间接地取得内核的支持。由于内核支持线程可以直接利用系统调用为它服务，故线程的控制简单</li>
<li>系统在创建一个<strong>新进程</strong>时，为它分配任务数据区PTDA(Per Task Data Area)，其中包括若干个<strong>线程控制块TCB</strong>空间。在每个TCB中可保存线程标识符、优先级、线程运行的CPU状态等信息</li>
<li>进程在创建一个<strong>线程</strong>时，为它<strong>分配一个TCB</strong>，将有关信息写入该TCB中，并为之分配必要的资源</li>
<li>撤消线程时，也要<strong>回收</strong>该线程所有资源和TCB</li>
<li>其切换也与进程的调度的切换<strong>十分相似</strong>，也分<strong>抢占式与非抢占式两种</strong>。在线程的调度算法上也可以采用<strong>时间片轮转法、优先权法</strong>等<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200505224646.png" alt="" /></li>
</ul>
<h3 id="用户级线程的实现"><a class="markdownIt-Anchor" href="#用户级线程的实现"></a> 用户级线程的实现</h3>
<h4 id="运行时系统runtime-system"><a class="markdownIt-Anchor" href="#运行时系统runtime-system"></a> 运行时系统(Runtime System)</h4>
<ul>
<li>所谓“运行时系统”，实质上是用于<strong>管理和控制线程的函数(过程)的集合</strong>， 其中包括
<ul>
<li>用于创建和撤消线程的函数、 线程同步和通信的函数以及实现线程调度的函数等</li>
<li>这些函数<strong>使用户级线程与内核无关</strong></li>
<li>运行时系统中的所有函数都驻留在用户空间，并作为用户级线程与内核之间的接口</li>
</ul>
</li>
</ul>
<h4 id="内核控制线程"><a class="markdownIt-Anchor" href="#内核控制线程"></a> 内核控制线程</h4>
<ul>
<li>这种线程又称为轻型进程LWP(Light Weight Process)。</li>
<li><strong>每一个进程都可拥有多个LWP</strong>， 同用户级线程一样， 每个LWP都有自己的数据结构(如TCB)，其中包括线程标识符、优先级、 状态， 另外还有栈和局部存储区等</li>
<li>也可以共享进程所拥有的资源。<strong>LWP可通过系统调用来获得内核提供的服务</strong>，这样，当一个用户级线程运行时，<strong>只要将它连接到一个LWP上</strong>，此时它便具有了内核支持线程的所有属性<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200505224824.png" alt="" /></li>
</ul>
<blockquote>
<p>当用户级线程要通信时，须借助于轻型进程LWP，而且每个要通信的用户级线程都需要一个LWP</p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>操作系统</tag>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络 | 3. 数据链路层</title>
    <url>/2020/05/02/network_2/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>数据链路层
<ul>
<li>数据链路层概述</li>
<li>使用点对点信道的数据链路层
<ul>
<li>数据链路和帧
<ul>
<li>数据链路层像个数字管道</li>
</ul>
</li>
<li>三个基本问题
<ul>
<li>封装成帧</li>
<li>透明传输</li>
<li>差错控制
<ul>
<li>循环冗余检验的原理
<ul>
<li>冗余码的计算</li>
<li>冗余码的计算举例</li>
</ul>
</li>
<li>帧检验序列 FCS</li>
<li>接收端对收到的每一帧进行 CRC 检验</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>点对点协议 PPP
<ul>
<li>PPP 协议的特点
<ul>
<li>PPP 协议应满足的需求</li>
<li>PPP 协议不需要的功能</li>
<li>PPP 协议的组成</li>
</ul>
</li>
<li>PPP 协议的帧格式
<ul>
<li>透明传输问题
<ul>
<li>字符填充</li>
<li>零比特填充</li>
</ul>
</li>
<li>不提供使用序号和确认的可靠传输</li>
</ul>
</li>
<li>PPP 协议的工作状态</li>
</ul>
</li>
<li>使用广播信道的数据链路层
<ul>
<li>局域网的数据链路层
<ul>
<li>局域网的拓扑</li>
<li>媒体共享技术</li>
<li>以太网的两个标准</li>
<li>数据链路层的两个子层
<ul>
<li>局域网对 LLC 子层是透明的</li>
<li>以后一般不考虑LLC子层</li>
</ul>
</li>
<li>适配器的作用</li>
</ul>
</li>
<li>CSMA/CD 协议
<ul>
<li>以太网的广播方式发送</li>
<li>以太网提供的服务</li>
<li>载波监听多点接入/碰撞检测  CSMA/CD
<ul>
<li>碰撞检测
<ul>
<li>检测到碰撞后</li>
</ul>
</li>
</ul>
</li>
<li>电磁波在总线上的有限传播速率的影响</li>
<li>传播时延对载波监听的影响</li>
<li>重要特性</li>
<li>争用期
<ul>
<li>二进制指数类型退避算法</li>
<li>争用期的长度</li>
<li>最短有效帧长</li>
<li>强化碰撞</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>使用广播信道的以太网
<ul>
<li>使用集线器的星形拓扑
<ul>
<li>星形网 10BASE-T</li>
<li>以太网在局域网中的统治地位</li>
<li>集线器的一些特点</li>
</ul>
</li>
<li>以太网的信道利用率
<ul>
<li>参数a</li>
<li>对以太网参数的要求</li>
<li>信道利用率的最大值 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
<li>以太网的 MAC 层
<ul>
<li>MAC 层的硬件地址
<ul>
<li>48位的MAC地址</li>
<li>适配器检查 MAC 地址</li>
</ul>
</li>
<li>MAC 帧的格式
<ul>
<li>无效的 MAC 帧</li>
<li>帧间最小间隔</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>扩展的以太网
<ul>
<li>在物理层扩展局域网
<ul>
<li>用集线器扩展局域网</li>
</ul>
</li>
<li>在数据链路层扩展以太网
<ul>
<li>网桥的内部结构
<ul>
<li>使用网桥带来的好处</li>
<li>使用网桥带来的缺点</li>
<li>网桥和集线器（或转发器）不同</li>
</ul>
</li>
<li>透明网桥
<ul>
<li>转发表中登记的信息</li>
<li>网桥的自学习和转发帧的步骤归纳</li>
<li>透明网桥使用了生成树算法
<ul>
<li>生成树的得出</li>
</ul>
</li>
</ul>
</li>
<li>源路由网桥</li>
<li>多接口网桥——以太网交换机
<ul>
<li>以太网交换机的特点</li>
</ul>
</li>
</ul>
</li>
<li>用以太网交换机扩展局域网
<ul>
<li>虚拟局域网使用的以太网帧格式</li>
</ul>
</li>
</ul>
</li>
<li>高速以太网
<ul>
<li>100BASE-T 以太网
<ul>
<li>特点</li>
<li>三种不同的物理层标准</li>
</ul>
</li>
<li>吉比特以太网
<ul>
<li>吉比特以太网的物理层</li>
<li>全双工方式</li>
</ul>
</li>
<li>10 吉比特以太网
<ul>
<li>吉比特以太网的物理层</li>
<li>端到端的以太网传输</li>
<li>以太网从 10 Mb/s 到 10 Gb/s 的演进</li>
</ul>
</li>
<li>使用高速以太网进行宽带接入</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="数据链路层概述"><a class="markdownIt-Anchor" href="#数据链路层概述"></a> 数据链路层概述</h1>
<p>数据链路层使用的信道主要有以下两种类型：</p>
<ul>
<li><strong>点对点信道</strong>。这种信道使用一对一的点对点通信方式。</li>
<li><strong>广播信道</strong>。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发</li>
</ul>
<h1 id="使用点对点信道的数据链路层"><a class="markdownIt-Anchor" href="#使用点对点信道的数据链路层"></a> 使用点对点信道的数据链路层</h1>
<h2 id="数据链路和帧"><a class="markdownIt-Anchor" href="#数据链路和帧"></a> 数据链路和帧</h2>
<ul>
<li><strong>链路</strong>(link)是一条无源的点到点的物理线路段，中间没有任何其他的交换结点。
<ul>
<li>一条链路只是一条通路的一个组成部分。</li>
</ul>
</li>
<li><strong>数据链路</strong>(data link) 除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。
<ul>
<li>现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。</li>
<li>一般的适配器都包括了数据链路层和物理层这两层的功能。</li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425174730.png" alt="" /></p>
<h3 id="数据链路层像个数字管道"><a class="markdownIt-Anchor" href="#数据链路层像个数字管道"></a> 数据链路层像个数字管道</h3>
<ul>
<li>常常在两个对等的数据链路层之间画出一个数字管道，而在这条数字管道上传输的数据单位是<strong>帧</strong>。</li>
<li>早期的数据通信协议曾叫作<strong>通信规程</strong>(procedure)。因此在数据链路层，规程和协议是同义语。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425174839.png" alt="" /></li>
</ul>
<h2 id="三个基本问题"><a class="markdownIt-Anchor" href="#三个基本问题"></a> 三个基本问题</h2>
<ol>
<li>封装成帧</li>
<li>透明传输</li>
<li>差错控制</li>
</ol>
<h3 id="封装成帧"><a class="markdownIt-Anchor" href="#封装成帧"></a> 封装成帧</h3>
<ul>
<li><strong>封装成帧</strong>(framing)就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。确定帧的界限。</li>
<li>首部和尾部的一个重要作用就是进行<strong>帧定界</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425174935.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425175040.png" alt="" /></li>
</ul>
<h3 id="透明传输"><a class="markdownIt-Anchor" href="#透明传输"></a> 透明传输</h3>
<p>如果数据中的某个字节的二进制代码恰好和SOH或EOT一样，数据链路层就会错误地找到“<strong>帧的边界</strong>”。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425175103.png" alt="" /></p>
<ul>
<li>发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个<strong>转义字符</strong>“ESC”(其十六进制编码是 1B)。</li>
<li><strong>字节填充</strong>(byte stuffing)或<strong>字符填充</strong>(character stuffing)——接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。</li>
<li>如果转义字符也出现数据当中，那么应在转义字符前面插入一个转义字符。当接收端收到连续的两个转义字符时，就删除其中前面的一个。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425175329.png" alt="" /></p>
<h3 id="差错控制"><a class="markdownIt-Anchor" href="#差错控制"></a> 差错控制</h3>
<ul>
<li>在传输过程中可能会产生<strong>比特差错</strong>：1 可能会变成 0 而 0 也可能变成 1。</li>
<li>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong> BER (Bit Error Rate)。</li>
<li>误码率与信噪比有很大的关系。</li>
<li>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</li>
</ul>
<h4 id="循环冗余检验的原理"><a class="markdownIt-Anchor" href="#循环冗余检验的原理"></a> 循环冗余检验的原理</h4>
<ul>
<li>在数据链路层传送的帧中，广泛使用了<strong>循环冗余检验</strong> CRC 的检错技术。</li>
<li>在发送端，先把数据划分为组。假定每组 k 个比特。</li>
<li>假设待传送的一组数据 M = 101001（现在 k = 6）。我们在 M 的后面再添加供差错检测用的 n 位<strong>冗余码</strong>一起发送。</li>
</ul>
<h5 id="冗余码的计算"><a class="markdownIt-Anchor" href="#冗余码的计算"></a> 冗余码的计算</h5>
<ul>
<li>用二进制的模 2 运算进行 2n 乘 M 的运算，这相当于在 M 后面添加 n 个 0。</li>
<li>得到的 (k + n) 位的数除以事先选定好的长度为 (n + 1) 位的<strong>除数</strong> P，得出<strong>商</strong>是 Q 而<strong>余数</strong>是 R，余数 R 比除数 P 少1 位，即 R 是 n位。</li>
</ul>
<h5 id="冗余码的计算举例"><a class="markdownIt-Anchor" href="#冗余码的计算举例"></a> 冗余码的计算举例</h5>
<ul>
<li>现在 k = 6, M = 101001。</li>
<li>设 n = 3, 除数 P = 1101，</li>
<li>被除数是 2nM = 101001000。</li>
<li>模 2 运算的结果是：商 Q = 110101，余数 R = 001。</li>
<li>把余数 R 作为冗余码添加在数据 M 的后面发送出去。发送的数据是：2nM + R，即：101001001，共 (k + n) 位。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425202747.png" alt="" /></li>
</ul>
<h4 id="帧检验序列-fcs"><a class="markdownIt-Anchor" href="#帧检验序列-fcs"></a> 帧检验序列 FCS</h4>
<ul>
<li>在数据后面添加上的冗余码称为<strong>帧检验序列</strong> FCS (Frame Check Sequence)。</li>
<li>循环冗余检验 CRC 和帧检验序列 FCS并不等同。
<ul>
<li>CRC 是一种常用的<strong>检错方法</strong>，而 FCS 是添加在数据后面的<strong>冗余码</strong>。</li>
<li>FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。</li>
</ul>
</li>
</ul>
<h4 id="接收端对收到的每一帧进行-crc-检验"><a class="markdownIt-Anchor" href="#接收端对收到的每一帧进行-crc-检验"></a> 接收端对收到的每一帧进行 CRC 检验</h4>
<p>(1) 若得出的余数 R = 0，则判定这个帧没有差错，就接受(accept)。<br />
(2) 若余数 R <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≠</mo></mrow><annotation encoding="application/x-tex">\not=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span> 0，则判定这个帧有差错，就丢弃。<br />
但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。<br />
只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。</p>
<blockquote>
<p><strong>应当注意</strong></p>
<ul>
<li>仅用循环冗余检验 CRC 差错检测技术只能做到无差错<strong>接受</strong>(accept)。</li>
<li>“无差错接受”是指：“凡是接受的帧（即<strong>不包括丢弃的帧</strong>），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”。</li>
<li>也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。</li>
<li>要做到“<strong>可靠传输</strong>”（即发送什么就收到什么）就必须再加上<strong>确认</strong>和<strong>重传</strong>机制。</li>
</ul>
</blockquote>
<h1 id="点对点协议-ppp"><a class="markdownIt-Anchor" href="#点对点协议-ppp"></a> 点对点协议 PPP</h1>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425203250.png" alt="" /></p>
<h2 id="ppp-协议的特点"><a class="markdownIt-Anchor" href="#ppp-协议的特点"></a> PPP 协议的特点</h2>
<ul>
<li>现在全世界使用得最多的数据链路层协议是<strong>点对点协议</strong> PPP (Point-to-Point Protocol)。</li>
<li>用户使用拨号电话线接入因特网时，一般都是使用 PPP 协议。</li>
</ul>
<h3 id="ppp-协议应满足的需求"><a class="markdownIt-Anchor" href="#ppp-协议应满足的需求"></a> PPP 协议应满足的需求</h3>
<ul>
<li><strong>简单——这是首要的要求</strong></li>
<li>封装成帧</li>
<li>透明性</li>
<li>多种网络层协议</li>
<li>多种类型链路</li>
<li>差错检测</li>
<li>检测连接状态</li>
<li>最大传送单元</li>
<li>网络层地址协商</li>
<li>数据压缩协商</li>
</ul>
<h3 id="ppp-协议不需要的功能"><a class="markdownIt-Anchor" href="#ppp-协议不需要的功能"></a> PPP 协议不需要的功能</h3>
<ul>
<li>纠错</li>
<li>流量控制</li>
<li>序号</li>
<li>多点线路</li>
<li>半双工或单工链路</li>
</ul>
<h3 id="ppp-协议的组成"><a class="markdownIt-Anchor" href="#ppp-协议的组成"></a> PPP 协议的组成</h3>
<ul>
<li>1992 年制订了 PPP 协议。经过 1993 年和 1994 年的修订，现在的 PPP 协议已成为因特网的正式标准[RFC 1661]。</li>
<li>PPP 协议有三个组成部分
<ul>
<li>一个将 IP 数据报封装到串行链路的方法。</li>
<li>链路控制协议 LCP (Link Control Protocol)。</li>
<li>网络控制协议 NCP (Network Control Protocol)。</li>
</ul>
</li>
</ul>
<h2 id="ppp-协议的帧格式"><a class="markdownIt-Anchor" href="#ppp-协议的帧格式"></a> PPP 协议的帧格式</h2>
<ul>
<li>标志字段 F = 0x7E （符号“0x”表示后面的字符是用十六进制表示。十六进制的 7E 的二进制表示是 01111110）。</li>
<li>地址字段 A 只置为 0xFF。地址字段实际上并不起作用。</li>
<li>控制字段 C 通常置为 0x03。</li>
<li>PPP 是<strong>面向字节</strong>的，所有的 PPP 帧的长度都是整数字节。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425203705.png" alt="" /></li>
</ul>
<h3 id="透明传输问题"><a class="markdownIt-Anchor" href="#透明传输问题"></a> 透明传输问题</h3>
<ul>
<li>当 PPP 用在同步传输链路时，协议规定采用硬件来完成比特填充（和 HDLC 的做法一样）。</li>
<li>当 PPP 用在异步传输时，就使用一种特殊的<strong>字符填充法</strong>。</li>
</ul>
<h4 id="字符填充"><a class="markdownIt-Anchor" href="#字符填充"></a> 字符填充</h4>
<ul>
<li>将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列(0x7D, 0x5E)。</li>
<li>若信息字段中出现一个 0x7D 的字节, 则将其转变成为 2 字节序列(0x7D, 0x5D)。</li>
<li>若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变。</li>
</ul>
<h4 id="零比特填充"><a class="markdownIt-Anchor" href="#零比特填充"></a> 零比特填充</h4>
<ul>
<li>PPP 协议用在 SONET/SDH 链路时，是使用同步传输（一连串的比特连续传送）。这时 PPP 协议采用零比特填充方法来实现透明传输。</li>
<li>在发送端，只要发现有 5 个连续 1，则立即填入一个 0。接收端对帧中的比特流进行扫描。每当发现 5 个连续1时，就把这 5 个连续 1 后的一个 0 删除。</li>
<li>0x7E是01111110。0xFF是11111111。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425204240.png" alt="" /></li>
</ul>
<h3 id="不提供使用序号和确认的可靠传输"><a class="markdownIt-Anchor" href="#不提供使用序号和确认的可靠传输"></a> 不提供使用序号和确认的可靠传输</h3>
<ul>
<li>PPP 协议之所以不使用序号和确认机制是出于以下的考虑：
<ul>
<li>在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。</li>
<li>在因特网环境下，PPP 的信息字段放入的数据是 IP 数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。</li>
<li>帧检验序列 FCS 字段可保证无差错接受。</li>
</ul>
</li>
</ul>
<h2 id="ppp-协议的工作状态"><a class="markdownIt-Anchor" href="#ppp-协议的工作状态"></a> PPP 协议的工作状态</h2>
<ul>
<li>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。</li>
<li>PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。</li>
<li>这些分组及其响应选择一些 PPP 参数，和进行网络层配置，NCP 给新接入的 PC机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。</li>
<li>通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425204750.png" alt="" /></li>
</ul>
<h1 id="使用广播信道的数据链路层"><a class="markdownIt-Anchor" href="#使用广播信道的数据链路层"></a> 使用广播信道的数据链路层</h1>
<h2 id="局域网的数据链路层"><a class="markdownIt-Anchor" href="#局域网的数据链路层"></a> 局域网的数据链路层</h2>
<ul>
<li>局域网最主要的特点是：网络为一个单位所拥有，且地理范围和站点数目均有限。</li>
<li>局域网具有如下的一些主要优点：</li>
<li>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</li>
<li>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。</li>
<li>提高了系统的可靠性、可用性和残存性。</li>
</ul>
<h3 id="局域网的拓扑"><a class="markdownIt-Anchor" href="#局域网的拓扑"></a> 局域网的拓扑</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425210853.png" alt="" /></p>
<h3 id="媒体共享技术"><a class="markdownIt-Anchor" href="#媒体共享技术"></a> 媒体共享技术</h3>
<ul>
<li>静态划分信道
<ul>
<li>频分复用</li>
<li>时分复用</li>
<li>波分复用</li>
<li>码分复用</li>
</ul>
</li>
<li>动态媒体接入控制（多点接入）
<ul>
<li>随机接入</li>
<li>受控接入 ，如多点线路探询(polling)，或轮询。</li>
</ul>
</li>
</ul>
<h3 id="以太网的两个标准"><a class="markdownIt-Anchor" href="#以太网的两个标准"></a> 以太网的两个标准</h3>
<ul>
<li>DIX Ethernet V2 是世界上第一个局域网产品（以太网）的规约。</li>
<li>IEEE 的 802.3 标准。</li>
<li>DIX Ethernet V2 标准与 IEEE 的 802.3 标准只有很小的差别，因此可以将 802.3 局域网简称为“<strong>以太网</strong>”。</li>
<li>严格说来，“以太网”应当是指符合 DIX Ethernet V2 标准的局域网</li>
</ul>
<h3 id="数据链路层的两个子层"><a class="markdownIt-Anchor" href="#数据链路层的两个子层"></a> 数据链路层的两个子层</h3>
<ul>
<li>为了使数据链路层能更好地适应多种局域网标准，802 委员会就将局域网的数据链路层拆成两个子层：</li>
<li>逻辑链路控制 LLC (Logical Link Control)子层</li>
<li>媒体接入控制 MAC (Medium Access Control)子层。</li>
<li>与接入到传输媒体有关的内容都放在 MAC子层，而 LLC 子层则与传输媒体无关，不管采用何种协议的局域网对 LLC 子层来说都是透明的</li>
</ul>
<h4 id="局域网对-llc-子层是透明的"><a class="markdownIt-Anchor" href="#局域网对-llc-子层是透明的"></a> 局域网对 LLC 子层是透明的</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425211053.png" alt="" /></p>
<h4 id="以后一般不考虑llc子层"><a class="markdownIt-Anchor" href="#以后一般不考虑llc子层"></a> 以后一般不考虑LLC子层</h4>
<ul>
<li>由于 TCP/IP 体系经常使用的局域网是 DIX Ethernet V2 而不是 802.3 标准中的几种局域网，因此现在 802 委员会制定的逻辑链路控制子层 LLC（即 802.2 标准）的作用已经不大了。</li>
<li>很多厂商生产的适配器上就仅装有 MAC 协议而没有 LLC 协议。</li>
</ul>
<h3 id="适配器的作用"><a class="markdownIt-Anchor" href="#适配器的作用"></a> 适配器的作用</h3>
<ul>
<li>网络接口板又称为<strong>通信适配器</strong>(adapter)或<strong>网络接口卡</strong> NIC (Network Interface Card)，或“<strong>网卡</strong>”。</li>
<li>适配器的重要功能：</li>
<li>进行串行/并行转换。</li>
<li>对数据进行缓存。</li>
<li>在计算机的操作系统安装设备驱动程序。</li>
<li>实现以太网协议。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427161937.png" alt="" /></p>
<h2 id="csmacd-协议"><a class="markdownIt-Anchor" href="#csmacd-协议"></a> CSMA/CD 协议</h2>
<ul>
<li>最初的以太网是将许多计算机都连接到一根总线上。当初认为这样的连接方法既简单又可靠，因为总线上没有有源器件。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427161959.png" alt="" /></li>
</ul>
<h3 id="以太网的广播方式发送"><a class="markdownIt-Anchor" href="#以太网的广播方式发送"></a> 以太网的广播方式发送</h3>
<ul>
<li>总线上的每一个工作的计算机都能检测到 B 发送的数据信号。</li>
<li>由于只有计算机 D 的地址与数据帧首部写入的地址一致，因此只有 D 才接收这个数据帧。</li>
<li>其他所有的计算机（A, C 和 E）都检测到不是发送给它们的数据帧，因此就丢弃这个数据帧而不能够收下来。</li>
<li>具有广播特性的总线上实现了一对一的通信。</li>
</ul>
<p>为了通信的简便以太网采取了两种重要的措施：</p>
<ul>
<li>采用较为灵活的无连接的工作方式，即不必先建立连接就可以直接发送数据。</li>
<li>以太网对发送的数据帧不进行编号，也不要求对方发回确认。
<ul>
<li>这样做的理由是局域网信道的质量很好，因信道质量产生差错的概率是很小的。</li>
</ul>
</li>
</ul>
<h3 id="以太网提供的服务"><a class="markdownIt-Anchor" href="#以太网提供的服务"></a> 以太网提供的服务</h3>
<ul>
<li>以太网提供的服务是不可靠的交付，即尽最大努力的交付。</li>
<li>当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。差错的纠正由高层来决定。</li>
<li>如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧，而是当作一个新的数据帧来发送。</li>
</ul>
<p>以太网发送的数据都使用曼彻斯特(Manchester)编码。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427162313.png" alt="" /></p>
<h3 id="载波监听多点接入碰撞检测-csmacd"><a class="markdownIt-Anchor" href="#载波监听多点接入碰撞检测-csmacd"></a> 载波监听多点接入/碰撞检测  CSMA/CD</h3>
<ul>
<li>CSMA/CD 表示 Carrier Sense Multiple Access with Collision Detection。</li>
<li>“<strong>多点接入</strong>”表示许多计算机以多点接入的方式连接在一根总线上。</li>
<li>“<strong>载波监听</strong>”是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。</li>
<li>总线上并没有什么“载波”。因此， “载波监听”就是用电子技术检测总线上有没有其他计算机发送的数据信号。</li>
</ul>
<h4 id="碰撞检测"><a class="markdownIt-Anchor" href="#碰撞检测"></a> 碰撞检测</h4>
<ul>
<li>“<strong>碰撞检测</strong>”就是计算机边发送数据边检测信道上的信号电压大小。</li>
<li>当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（互相叠加）。</li>
<li>当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞。</li>
<li>所谓“碰撞”就是发生了冲突。因此“碰撞检测”也称为“冲突检测”。</li>
</ul>
<h5 id="检测到碰撞后"><a class="markdownIt-Anchor" href="#检测到碰撞后"></a> 检测到碰撞后</h5>
<ul>
<li>在发生碰撞时，总线上传输的信号产生了严重的失真，无法从中恢复出有用的信息来。</li>
<li>每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。</li>
</ul>
<h3 id="电磁波在总线上的有限传播速率的影响"><a class="markdownIt-Anchor" href="#电磁波在总线上的有限传播速率的影响"></a> 电磁波在总线上的有限传播速率的影响</h3>
<ul>
<li>当某个站监听到总线是空闲时，也可能总线并非真正是空闲的。</li>
<li>A 向 B 发出的信息，要经过一定的时间后才能传送到 B。</li>
<li>B 若在 A 发送的信息到达 B 之前发送自己的帧(因为这时 B 的载波监听检测不到 A 所发送的信息)，则必然要在某个时间和 A 发送的帧发生碰撞。</li>
<li>碰撞的结果是两个帧都变得无用。</li>
</ul>
<h3 id="传播时延对载波监听的影响"><a class="markdownIt-Anchor" href="#传播时延对载波监听的影响"></a> 传播时延对载波监听的影响</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427162724.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427162741.png" alt="" /></p>
<h3 id="重要特性"><a class="markdownIt-Anchor" href="#重要特性"></a> 重要特性</h3>
<ul>
<li>使用 CSMA/CD 协议的以太网不能进行<strong>全双工通信而只能进行双向交替通信（半双工通信）</strong>。</li>
<li>每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。</li>
<li>这种<strong>发送的不确定性</strong>使整个以太网的平均通信量远小于以太网的最高数据率。</li>
</ul>
<h3 id="争用期"><a class="markdownIt-Anchor" href="#争用期"></a> 争用期</h3>
<ul>
<li>最先发送数据帧的站，在发送数据帧后至多经过时间  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span> （两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。</li>
<li>以太网的端到端往返时延  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span> 称为<strong>争用期</strong>，或<strong>碰撞窗口</strong>。</li>
<li>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</li>
</ul>
<h4 id="二进制指数类型退避算法"><a class="markdownIt-Anchor" href="#二进制指数类型退避算法"></a> 二进制指数类型退避算法</h4>
<ul>
<li>发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。
<ul>
<li>确定基本退避时间，一般是取为争用期 2 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>。</li>
<li>定义重传次数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo separator="true">,</mo><mi>k</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">k,k \le 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>，即
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">{</mo><mi mathvariant="normal">重</mi><mi mathvariant="normal">传</mi><mi mathvariant="normal">次</mi><mi mathvariant="normal">数</mi><mo separator="true">,</mo><mn>10</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">k = \min\{重传次数, 10\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">{</span><span class="mord cjk_fallback">重</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">次</span><span class="mord cjk_fallback">数</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mclose">}</span></span></span></span></li>
</ul>
</li>
<li>从整数集合<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,1,\cdots,(2^k-1)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span>中随机地取出一个数，记为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>。重传所需的时延就是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> 倍的基本退避时间。</li>
<li>当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告。</li>
</ul>
</li>
</ul>
<h4 id="争用期的长度"><a class="markdownIt-Anchor" href="#争用期的长度"></a> 争用期的长度</h4>
<ul>
<li>以太网取  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>51.2</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">51.2\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>为争用期的长度。</li>
<li>对于 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">10 Mb/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span> 以太网，在争用期内可发送<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>512</mn><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">512 bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span></span></span></span>，即 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>64</mn></mrow><annotation encoding="application/x-tex">64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">4</span></span></span></span> 字节。</li>
<li>以太网在发送数据时，若前 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>64</mn></mrow><annotation encoding="application/x-tex">64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">4</span></span></span></span>字节没有发生冲突，则后续的数据就不会发生冲突。</li>
</ul>
<h4 id="最短有效帧长"><a class="markdownIt-Anchor" href="#最短有效帧长"></a> 最短有效帧长</h4>
<ul>
<li>如果发生冲突，就一定是在发送的前 64 字节之内。</li>
<li>由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。</li>
<li>以太网规定了<strong>最短有效帧长为 64 字节，凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧</strong>。</li>
</ul>
<h4 id="强化碰撞"><a class="markdownIt-Anchor" href="#强化碰撞"></a> 强化碰撞</h4>
<ul>
<li>当发送数据的站一旦发现发生了碰撞时：
<ul>
<li>立即停止发送数据；</li>
<li>再继续发送若干比特的人为干扰信号(jamming signal)，以便让所有用户都知道现在已经发生了碰撞。</li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427164014.png" alt="" /></p>
<h1 id="使用广播信道的以太网"><a class="markdownIt-Anchor" href="#使用广播信道的以太网"></a> 使用广播信道的以太网</h1>
<h2 id="使用集线器的星形拓扑"><a class="markdownIt-Anchor" href="#使用集线器的星形拓扑"></a> 使用集线器的星形拓扑</h2>
<ul>
<li>传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线。</li>
<li>这种以太网采用星形拓扑，在星形的中心则增加了一种可靠性非常高的设备，叫做<strong>集线器</strong>(hub)<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427164237.png" alt="" /></li>
</ul>
<h3 id="星形网-10base-t"><a class="markdownIt-Anchor" href="#星形网-10base-t"></a> 星形网 10BASE-T</h3>
<ul>
<li>不用电缆而使用无屏蔽双绞线。每个站需要用两对双绞线，分别用于发送和接收。</li>
<li>集线器使用了大规模集成电路芯片，因此这样的硬件设备的可靠性已大大提高了。</li>
</ul>
<h3 id="以太网在局域网中的统治地位"><a class="markdownIt-Anchor" href="#以太网在局域网中的统治地位"></a> 以太网在局域网中的统治地位</h3>
<ul>
<li>10BASE-T 的通信距离稍短，每个站到集线器的距离不超过 100 m。</li>
<li>这种 10 Mb/s 速率的无屏蔽双绞线星形网的出现，既降低了成本，又提高了可靠性。</li>
<li>10BASE-T 双绞线以太网的出现，是局域网发展史上的一个非常重要的里程碑，它为以太网在局域网中的统治地位奠定了牢固的基础。</li>
</ul>
<h3 id="集线器的一些特点"><a class="markdownIt-Anchor" href="#集线器的一些特点"></a> 集线器的一些特点</h3>
<ul>
<li>集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。</li>
<li>使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线。</li>
<li>集线器很像一个多接口的转发器，工作在物理层。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427164444.png" alt="" /></p>
<h2 id="以太网的信道利用率"><a class="markdownIt-Anchor" href="#以太网的信道利用率"></a> 以太网的信道利用率</h2>
<ul>
<li>以太网的信道被占用的情况：
<ul>
<li>争用期长度为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>，即端到端传播时延的两倍。检测到碰撞后不发送干扰信号。</li>
<li>帧长为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L (bit)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span>，数据发送速率为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C (b/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span>，因而帧的发送时间为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>C</mi><mo>=</mo><msub><mi>T</mi><mn>0</mn></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L/C = T_0 (s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span>。</li>
</ul>
</li>
<li>一个帧从开始发送，经可能发生的碰撞后，将再重传数次，到发送成功且信道转为空闲(即再经过时间   使得信道上无信号在传播)时为止，是发送一帧所需的平均时间。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200427164648.png" alt="" /></li>
</ul>
<h3 id="参数a"><a class="markdownIt-Anchor" href="#参数a"></a> 参数a</h3>
<ul>
<li>要提高以太网的信道利用率，就必须减小 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span> 与 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 之比。在以太网中定义了参数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span>，它是以太网单程端到端时延 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>u</mi></mrow><annotation encoding="application/x-tex">tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">u</span></span></span></span> 与帧的发送时间 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 之比：</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>τ</mi><msub><mi>T</mi><mn>0</mn></msub></mfrac></mstyle></mrow><annotation encoding="application/x-tex">a=\dfrac{\tau}{T_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.9435600000000002em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a\rightarrow 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>表示一发生碰撞就立即可以检测出来，并立即停止发送，因而信道利用率很高。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span>越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低。</li>
</ul>
<h3 id="对以太网参数的要求"><a class="markdownIt-Anchor" href="#对以太网参数的要求"></a> 对以太网参数的要求</h3>
<ul>
<li>当数据率一定时，以太网的连线的长度受到限制，否则 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span> 的数值会太大。</li>
<li>以太网的帧长不能太短，否则 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的值会太小，使 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span> 值太大。</li>
</ul>
<h3 id="信道利用率的最大值-s_max"><a class="markdownIt-Anchor" href="#信道利用率的最大值-s_max"></a> 信道利用率的最大值 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></h3>
<ul>
<li>在<strong>理想化</strong>的情况下，以太网上的各站发送数据都不会产生碰撞（这显然已经不是 CSMA/CD，而是需要使用一种特殊的调度方法），即总线一旦空闲就有某一个站立即发送数据。</li>
<li>发送一帧占用线路的时间是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>τ</mi></mrow><annotation encoding="application/x-tex">T_0+\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>，而帧本身的发送时间是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。于是我们可计算出<strong>理想情况下</strong>的极限信道利用率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为：
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><msub><mi>T</mi><mn>0</mn></msub><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>τ</mi></mrow></mfrac></mstyle><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>a</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">S_{max}=\dfrac{T_0}{T_0+\tau}=\dfrac{1}{1+a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.19633em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.09077em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ul>
</li>
</ul>
<h2 id="以太网的-mac-层"><a class="markdownIt-Anchor" href="#以太网的-mac-层"></a> 以太网的 MAC 层</h2>
<h3 id="mac-层的硬件地址"><a class="markdownIt-Anchor" href="#mac-层的硬件地址"></a> MAC 层的硬件地址</h3>
<ul>
<li>在局域网中，<strong>硬件地址</strong>又称为<strong>物理地址</strong>，或 <strong>MAC 地址</strong>。</li>
<li>802 标准所说的“地址”严格地讲应当是每一个站的“<strong>名字</strong>”或<strong>标识符</strong>。</li>
<li>但鉴于大家都早已习惯了将这种 48 位的“名字”称为“地址”，所以本书也采用这种习惯用法，尽管这种说法并不太严格。</li>
</ul>
<h4 id="48位的mac地址"><a class="markdownIt-Anchor" href="#48位的mac地址"></a> 48位的MAC地址</h4>
<ul>
<li>IEEE 的<strong>注册管理机构</strong> RA 负责向厂家分配地址字段的前三个字节(即高位 24 位)。</li>
<li>地址字段中的后三个字节(即低位 24 位)由厂家自行指派，称为<strong>扩展标识符</strong>，必须保证生产出的适配器没有重复地址。</li>
<li>一个地址块可以生成224个不同的地址。这种 48 位地址称为 MAC-48，它的通用名称是EUI-48。</li>
<li>“MAC地址”实际上就是适配器地址或适配器标识符EUI-48。</li>
</ul>
<h4 id="适配器检查-mac-地址"><a class="markdownIt-Anchor" href="#适配器检查-mac-地址"></a> 适配器检查 MAC 地址</h4>
<ul>
<li>适配器从网络上每收到一个 MAC 帧就首先用硬件检查 MAC 帧中的 MAC 地址.
<ul>
<li>如果是发往本站的帧则收下，然后再进行其他的处理。</li>
<li>否则就将此帧丢弃，不再进行其他的处理。</li>
</ul>
</li>
<li>“发往本站的帧”包括以下三种帧：
<ul>
<li>单播(unicast)帧（一对一）</li>
<li>广播(broadcast)帧（一对全体）</li>
<li>多播(multicast)帧（一对多）</li>
</ul>
</li>
</ul>
<h3 id="mac-帧的格式"><a class="markdownIt-Anchor" href="#mac-帧的格式"></a> MAC 帧的格式</h3>
<ul>
<li>常用的以太网MAC帧格式有两种标准 ：
<ul>
<li>DIX Ethernet V2 标准</li>
<li>IEEE 的 802.3 标准</li>
</ul>
</li>
<li>最常用的 MAC 帧是<strong>以太网 V2 的格式</strong>。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502193859.png" alt="以太网的 MAC 帧格式" /></p>
<ul>
<li>类型字段用来标志上一层使用的是什么协议，以便把收到的 MAC 帧的数据上交给上一层的这个协议。</li>
<li>数据字段的正式名称是 MAC 客户数据字段最小长度 64 字节 - 18 字节的首部和尾部 = 数据字段的最小长度46字节</li>
<li>当传输媒体的误码率为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>8</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1\times 10^{-8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span></span> 时，MAC 子层可使未检测到的差错小于 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>14</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1\times 10^{-14}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span>。</li>
<li>当数据字段的长度小于 46 字节时，应在数据字段的后面加入整数字节的填充字段，以保证以太网的 MAC 帧长不小于 64 字节。</li>
<li>在帧的前面插入的 8 字节中的第一个字段共 7 个字节，是前同步码，用来迅速实现 MAC 帧的比特同步。第二个字段是帧开始定界符，表示后面的信息就是MAC 帧。</li>
<li>为了达到比特同步，在传输媒体上实际传送的要比 MAC 帧还多 8 个字节。</li>
</ul>
<h4 id="无效的-mac-帧"><a class="markdownIt-Anchor" href="#无效的-mac-帧"></a> 无效的 MAC 帧</h4>
<ul>
<li>数据字段的长度与长度字段的值不一致；</li>
<li>帧的长度不是整数个字节；</li>
<li>用收到的帧检验序列 FCS 查出有差错；</li>
<li>数据字段的长度不在 46 ~ 1500 字节之间。</li>
<li>有效的 MAC 帧长度为 64 ~ 1518 字节之间。</li>
<li>对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。</li>
</ul>
<h4 id="帧间最小间隔"><a class="markdownIt-Anchor" href="#帧间最小间隔"></a> 帧间最小间隔</h4>
<ul>
<li>帧间最小间隔为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9.6</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">9.6 \mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">9</span><span class="mord">.</span><span class="mord">6</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>，相当于 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>96</mn><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">96 bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span></span></span></span> 的发送时间。</li>
<li>一个站在检测到总线开始空闲后，还要等待 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9.6</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">9.6 \mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">9</span><span class="mord">.</span><span class="mord">6</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>才能再次发送数据。</li>
<li>这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。</li>
</ul>
<h1 id="扩展的以太网"><a class="markdownIt-Anchor" href="#扩展的以太网"></a> 扩展的以太网</h1>
<h2 id="在物理层扩展局域网"><a class="markdownIt-Anchor" href="#在物理层扩展局域网"></a> 在物理层扩展局域网</h2>
<p>主机使用光纤和一对光纤调制解调器连接到集线器。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502194610.png" alt="" /></p>
<hr />
<p>用多个集线器可连成更大的局域网。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502194637.png" alt="" /></p>
<hr />
<p>用集线器组成更大的局域网都在一个碰撞域中。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502194904.png" alt="" /></p>
<h3 id="用集线器扩展局域网"><a class="markdownIt-Anchor" href="#用集线器扩展局域网"></a> 用集线器扩展局域网</h3>
<ul>
<li>优点
<ul>
<li>使原来属于不同碰撞域的局域网上的计算机能够进行跨碰撞域的通信。</li>
<li>扩大了局域网覆盖的地理范围。</li>
</ul>
</li>
<li>缺点
<ul>
<li>碰撞域增大了，但总的吞吐量并未提高。</li>
<li>如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。</li>
</ul>
</li>
</ul>
<h2 id="在数据链路层扩展以太网"><a class="markdownIt-Anchor" href="#在数据链路层扩展以太网"></a> 在数据链路层扩展以太网</h2>
<ul>
<li>在数据链路层扩展局域网是使用<strong>网桥</strong>。</li>
<li>网桥工作在数据链路层，它根据 MAC 帧的目的地址对收到的帧进行转发。</li>
<li>网桥具有过滤帧的功能。当网桥收到一个帧时，并不是向所有的接口转发此帧，而是先检查此帧的目的 MAC 地址，然后再确定将该帧转发到哪一个接口。</li>
</ul>
<h3 id="网桥的内部结构"><a class="markdownIt-Anchor" href="#网桥的内部结构"></a> 网桥的内部结构</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502195047.png" alt="" /></p>
<h4 id="使用网桥带来的好处"><a class="markdownIt-Anchor" href="#使用网桥带来的好处"></a> 使用网桥带来的好处</h4>
<ul>
<li>过滤通信量。</li>
<li>扩大了物理范围。</li>
<li>提高了可靠性。</li>
<li>可互连不同物理层、不同 MAC 子层和不同速率（如10 Mb/s 和 100 Mb/s 以太网）的局域网。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502195123.png" alt="网桥使各网段成为隔离开的碰撞域" /></li>
</ul>
<h4 id="使用网桥带来的缺点"><a class="markdownIt-Anchor" href="#使用网桥带来的缺点"></a> 使用网桥带来的缺点</h4>
<ul>
<li>存储转发增加了时延。</li>
<li>在MAC 子层并没有流量控制功能。</li>
<li>具有不同 MAC 子层的网段桥接在一起时时延更大。</li>
<li>网桥只适合于用户数不太多(不超过几百个)和通信量不太大的局域网，否则有时还会因传播过多的广播信息而产生网络拥塞。这就是所谓的<strong>广播风暴</strong>。</li>
</ul>
<hr />
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502195320.png" alt="" /></p>
<h4 id="网桥和集线器或转发器不同"><a class="markdownIt-Anchor" href="#网桥和集线器或转发器不同"></a> 网桥和集线器（或转发器）不同</h4>
<ul>
<li>集线器在转发帧时，不对传输媒体进行检测。</li>
<li>网桥在转发帧之前必须执行 CSMA/CD 算法。
<ul>
<li>若在发送过程中出现碰撞，就必须停止发送和进行退避。</li>
</ul>
</li>
</ul>
<h3 id="透明网桥"><a class="markdownIt-Anchor" href="#透明网桥"></a> 透明网桥</h3>
<p>目前使用得最多的网桥是<strong>透明网桥</strong>(transparent bridge)。<br />
“透明”是指局域网上的站点并不知道所发送的帧将经过哪几个网桥，因为网桥对各站来说是看不见的。<br />
透明网桥是一种<strong>即插即用设备</strong>，其标准是 IEEE 802.1D。</p>
<p>网桥应当按照以下自学习算法处理收到的帧和建立转发表：</p>
<ul>
<li>若从 A 发出的帧从接口 x 进入了某网桥，那么从这个接口出发沿相反方向一定可把一个帧传送到 A。</li>
<li>网桥每收到一个帧，就记下其源地址和进入网桥的接口，作为转发表中的一个项目。</li>
<li>在建立转发表时是把帧首部中的源地址写在“地址”这一栏的下面。</li>
<li>在转发帧时，则是根据收到的帧首部中的目的地址来转发的。这时就把在“地址”栏下面已经记下的源地址当作目的地址，而把记下的进入接口当作转发接口。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502195641.png" alt="转发表的建立过程举例" /></p>
<h4 id="转发表中登记的信息"><a class="markdownIt-Anchor" href="#转发表中登记的信息"></a> 转发表中登记的信息</h4>
<ul>
<li>在网桥的转发表中写入的信息除了<strong>地址</strong>和<strong>接口</strong>外，还有帧进入该网桥的<strong>时间</strong>。</li>
<li>这是因为以太网的拓扑可能经常会发生变化，站点也可能会更换适配器（这就改变了站点的地址）。另外，以太网上的工作站并非总是接通电源的。</li>
<li>把每个帧到达网桥的时间登记下来，就可以在转发表中只保留网络拓扑的<strong>最新状态信息</strong>。这样就使得网桥中的转发表能反映当前网络的最新拓扑状态。</li>
</ul>
<h4 id="网桥的自学习和转发帧的步骤归纳"><a class="markdownIt-Anchor" href="#网桥的自学习和转发帧的步骤归纳"></a> 网桥的自学习和转发帧的步骤归纳</h4>
<ul>
<li>网桥收到一帧后先进行<strong>自学习</strong>。查找转发表中与收到帧的源地址有无相匹配的项目。如没有，就在转发表中增加一个项目（源地址、进入的接口和时间）。如有，则把原有的项目进行更新。</li>
<li><strong>转发帧</strong>。查找转发表中与收到帧的目的地址有无相匹配的项目。
<ul>
<li>如没有，则通过所有其他接口（但进入网桥的接口除外）按进行转发。</li>
<li>如有，则按转发表中给出的接口进行转发。</li>
<li>若转发表中给出的接口就是该帧进入网桥的接口，则应丢弃这个帧（因为这时不需要经过网桥进行转发）。</li>
</ul>
</li>
</ul>
<h4 id="透明网桥使用了生成树算法"><a class="markdownIt-Anchor" href="#透明网桥使用了生成树算法"></a> 透明网桥使用了生成树算法</h4>
<p>这是为了避免产生转发的帧在网络中不断地兜圈子。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502195902.png" alt="" /></p>
<h5 id="生成树的得出"><a class="markdownIt-Anchor" href="#生成树的得出"></a> 生成树的得出</h5>
<ul>
<li>互连在一起的网桥在进行彼此通信后，就能找出原来的网络拓扑的一个子集。在这个子集里，整个连通的网络中不存在回路，即<strong>在任何两个站之间只有一条路径</strong>。</li>
<li>为了避免产生转发的帧在网络中不断地兜圈子。</li>
<li>为了得出能够反映网络拓扑发生变化时的生成树，在生成树上的根网桥每隔一段时间还要对生成树的拓扑进行更新。</li>
</ul>
<h3 id="源路由网桥"><a class="markdownIt-Anchor" href="#源路由网桥"></a> 源路由网桥</h3>
<ul>
<li>透明网桥容易安装，但网络资源的利用不充分。</li>
<li><strong>源路由</strong>(source route)网桥在发送帧时将详细的路由信息放在帧的首部中。</li>
<li>源站以广播方式向欲通信的目的站发送一个发现帧，每个发现帧都记录所经过的路由。</li>
<li>发现帧到达目的站时就沿各自的路由返回源站。源站在得知这些路由后，从所有可能的路由中选择出一个最佳路由。凡从该源站向该目的站发送的帧的首部，都必须携带源站所确定的这一路由信息。</li>
</ul>
<h3 id="多接口网桥以太网交换机"><a class="markdownIt-Anchor" href="#多接口网桥以太网交换机"></a> 多接口网桥——以太网交换机</h3>
<ul>
<li>1990 年问世的<strong>交换式集线器</strong>(switching hub)，可明显地提高局域网的性能。</li>
<li>交换式集线器常称为<strong>以太网交换机</strong>(switch)或第二层交换机（表明此交换机工作在数据链路层）。</li>
<li>以太网交换机通常都有十几个接口。因此，以太网交换机实质上就是一个<strong>多接口的网桥</strong>，可见交换机工作在数据链路层。</li>
</ul>
<h4 id="以太网交换机的特点"><a class="markdownIt-Anchor" href="#以太网交换机的特点"></a> 以太网交换机的特点</h4>
<ul>
<li>以太网交换机的每个接口都直接与主机相连，并且一般都工作在<strong>全双工方式</strong>。</li>
<li>交换机能同时连通许多对的接口，使每一对相互通信的主机都能像独占通信媒体那样，进行无碰撞地传输数据。</li>
<li>以太网交换机由于使用了专用的交换结构芯片，其交换速率就较高。</li>
<li>独占传输媒体的带宽
<ul>
<li>对于普通 10 Mb/s 的共享式以太网，若共有 N 个用户，则每个用户占有的平均带宽只有总带宽(10 Mb/s)的 N 分之一。</li>
<li>使用以太网交换机时，虽然在每个接口到主机的带宽还是 10 Mb/s，但由于一个用户在通信时是独占而不是和其他网络用户共享传输媒体的带宽，因此对于拥有 N 对接口的交换机的总容量为 N10 Mb/s。这正是交换机的最大优点。</li>
</ul>
</li>
</ul>
<h2 id="用以太网交换机扩展局域网"><a class="markdownIt-Anchor" href="#用以太网交换机扩展局域网"></a> 用以太网交换机扩展局域网</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502200212.png" alt="" /><br />
利用以太网交换机可以很方便地实现虚拟局域网。</p>
<ul>
<li><strong>虚拟局域网</strong> VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组。
<ul>
<li>这些网段具有某些共同的需求。</li>
<li>每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的工作站是属于哪一个 VLAN。</li>
</ul>
</li>
<li>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502200251.png" alt="" /><br />
当 B1 向 VLAN2 工作组内成员发送数据时，工作站 B2 和 B3 将会收到广播的信息。<br />
B1 发送数据时，工作站 A1, A2 和 C1都不会收到 B1 发出的广播信息。<br />
虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息(即“广播风暴”)而引起性能恶化。</li>
</ul>
<h3 id="虚拟局域网使用的以太网帧格式"><a class="markdownIt-Anchor" href="#虚拟局域网使用的以太网帧格式"></a> 虚拟局域网使用的以太网帧格式</h3>
<p>虚拟局域网协议允许在以太网的帧格式中插入一个 4 字节的标识符，称为 VLAN 标记(tag)，用来指明发送该帧的工作站属于哪一个虚拟局域网。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502200428.png" alt="" /></p>
<h1 id="高速以太网"><a class="markdownIt-Anchor" href="#高速以太网"></a> 高速以太网</h1>
<h2 id="100base-t-以太网"><a class="markdownIt-Anchor" href="#100base-t-以太网"></a> 100BASE-T 以太网</h2>
<ul>
<li>速率达到或超过 100 Mb/s 的以太网称为<strong>高速以太网</strong>。</li>
<li>在双绞线上传送 100 Mb/s 基带信号的星型拓扑以太网，仍使用 IEEE 802.3 的CSMA/CD 协议。100BASE-T 以太网又称为<strong>快速以太网</strong>(Fast Ethernet)。</li>
</ul>
<h3 id="特点"><a class="markdownIt-Anchor" href="#特点"></a> 特点</h3>
<ul>
<li>可在全双工方式下工作而无冲突发生。因此，不使用 CSMA/CD 协议。</li>
<li>MAC 帧格式仍然是 802.3 标准规定的。</li>
<li>保持最短帧长不变，但将一个网段的最大电缆长度减小到 100 m。</li>
<li>帧间时间间隔从原来的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9.6</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">9.6 \mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">9</span><span class="mord">.</span><span class="mord">6</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span> 改为现在的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0.96</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">0.96 \mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">9</span><span class="mord">6</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>。</li>
</ul>
<h3 id="三种不同的物理层标准"><a class="markdownIt-Anchor" href="#三种不同的物理层标准"></a> 三种不同的物理层标准</h3>
<ul>
<li>100BASE-TX
<ul>
<li>使用 2 对 UTP 5 类线或屏蔽双绞线 STP。</li>
</ul>
</li>
<li>100BASE-FX
<ul>
<li>使用 2 对光纤。</li>
</ul>
</li>
<li>100BASE-T4
<ul>
<li>使用 4 对 UTP 3 类线或 5 类线。</li>
</ul>
</li>
</ul>
<h2 id="吉比特以太网"><a class="markdownIt-Anchor" href="#吉比特以太网"></a> 吉比特以太网</h2>
<ul>
<li>允许在 1 Gb/s 下全双工和半双工两种方式工作。</li>
<li>使用 802.3 协议规定的帧格式。</li>
<li>在半双工方式下使用 CSMA/CD 协议（全双工方式不需要使用 CSMA/CD 协议）。</li>
<li>与 10BASE-T 和 100BASE-T 技术向后兼容。</li>
</ul>
<h3 id="吉比特以太网的物理层"><a class="markdownIt-Anchor" href="#吉比特以太网的物理层"></a> 吉比特以太网的物理层</h3>
<ul>
<li>1000BASE-X      基于光纤通道的物理层：
<ul>
<li>1000BASE-SX   SX表示短波长</li>
<li>1000BASE-LX   LX表示长波长</li>
<li>1000BASE-CX   CX表示铜线</li>
</ul>
</li>
<li>1000BASE-T
<ul>
<li>使用 4对 5 类线 UTP</li>
</ul>
</li>
</ul>
<h3 id="全双工方式"><a class="markdownIt-Anchor" href="#全双工方式"></a> 全双工方式</h3>
<p>当吉比特以太网工作在全双工方式时（即通信双方可同时进行发送和接收数据），不使用载波延伸和分组突发。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502200656.png" alt="吉比特以太网的配置举例 " /></p>
<h2 id="10-吉比特以太网"><a class="markdownIt-Anchor" href="#10-吉比特以太网"></a> 10 吉比特以太网</h2>
<ul>
<li>10 吉比特以太网与 10 Mb/s，100 Mb/s 和 1 Gb/s 以太网的帧格式完全相同。</li>
<li>10 吉比特以太网还保留了 802.3 标准规定的以太网最小和最大帧长，便于升级。</li>
<li>10 吉比特以太网不再使用铜线而只使用光纤作为传输媒体。</li>
<li>10 吉比特以太网只工作在<strong>全双工方式</strong>，因此没有争用问题，也不使用 CSMA/CD 协议。</li>
</ul>
<h3 id="吉比特以太网的物理层-2"><a class="markdownIt-Anchor" href="#吉比特以太网的物理层-2"></a> 吉比特以太网的物理层</h3>
<ul>
<li>局域网物理层 LAN PHY。局域网物理层的数据率是 10.000 Gb/s。</li>
<li>可选的广域网物理层 WAN PHY。广域网物理层具有另一种数据率，这是为了和所谓的“Gb/s”的 SONET/SDH（即OC-192/STM-64）相连接。
<ul>
<li>为了使 10 吉比特以太网的帧能够插入到 OC-192/STM-64 帧的有效载荷中，就要使用可选的广域网物理层，其数据率为 9.95328 Gb/s。</li>
</ul>
</li>
</ul>
<h3 id="端到端的以太网传输"><a class="markdownIt-Anchor" href="#端到端的以太网传输"></a> 端到端的以太网传输</h3>
<ul>
<li>10 吉比特以太网的出现，以太网的工作范围已经从局域网（校园网、企业网）扩大到城域网和广域网，从而实现了端到端的以太网传输。</li>
<li>这种工作方式的好处是：
<ul>
<li>成熟的技术</li>
<li>互操作性很好</li>
<li>在广域网中使用以太网时价格便宜。</li>
<li>统一的帧格式简化了操作和管理。</li>
</ul>
</li>
</ul>
<h3 id="以太网从-10-mbs-到-10-gbs-的演进"><a class="markdownIt-Anchor" href="#以太网从-10-mbs-到-10-gbs-的演进"></a> 以太网从 10 Mb/s 到 10 Gb/s 的演进</h3>
<ul>
<li>以太网从 10 Mb/s 到 10 Gb/s 的演进证明了以太网是：</li>
<li>可扩展的（从 10 Mb/s 到 10 Gb/s）。</li>
<li>灵活的（多种传输媒体、全/半双工、共享/交换）。</li>
<li>易于安装。</li>
<li>稳健性好。</li>
</ul>
<h2 id="使用高速以太网进行宽带接入"><a class="markdownIt-Anchor" href="#使用高速以太网进行宽带接入"></a> 使用高速以太网进行宽带接入</h2>
<ul>
<li>以太网已成功地把速率提高到 1 ~ 10 Gb/s ，所覆盖的地理范围也扩展到了城域网和广域网，因此现在人们正在尝试使用以太网进行宽带接入。</li>
<li>以太网接入的重要特点是它可提供双向的宽带通信，并且可根据用户对带宽的需求灵活地进行带宽升级。</li>
<li>采用以太网接入可实现端到端的以太网传输，中间不需要再进行帧格式的转换。这就提高了数据的传输效率和降低了传输的成本。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200502200847.png" alt="以太网接入举例：光纤到大楼 FTTB" /></li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>网络</tag>
        <tag>互联网</tag>
      </tags>
  </entry>
  <entry>
    <title>操作系统 | 1. 操作系统引论</title>
    <url>/2020/04/29/operating_system_0/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>操作系统引论
<ul>
<li>操作系统的目标与作用
<ul>
<li>操作系统的目标</li>
<li>操作系统的作用
<ul>
<li>用户与硬件系统之间的接口</li>
<li>计算机资源的管理者</li>
<li>扩充机器</li>
</ul>
</li>
</ul>
</li>
<li>推动操作系统发展的主要动力</li>
<li>操作系统的发展过程
<ul>
<li>无操作系统的计算机系统
<ul>
<li>脱机输入/输出（Off-Line I/O）方式</li>
<li>无操作系统的主要问题</li>
</ul>
</li>
<li>单道批处理系统
<ul>
<li>联机批处理</li>
<li>脱机批处理</li>
<li>单道批处理系统的特征</li>
</ul>
</li>
<li>多道批处理系统
<ul>
<li>多道批处理系统的特征</li>
<li>单道批处理和多道批处理的比较</li>
<li>多道批处理系统的特点</li>
<li>多道批处理系统需要解决的问题</li>
</ul>
</li>
<li>分时系统
<ul>
<li>分时系统中的关键问题</li>
<li>分时系统的特征</li>
</ul>
</li>
<li>实时系统</li>
<li>网络操作系统
<ul>
<li>计算机网络</li>
<li>网络操作系统功能</li>
</ul>
</li>
<li>分布式操作系统
<ul>
<li>分布式操作系统的特征</li>
<li>网络和分布式的区别</li>
</ul>
</li>
<li>嵌入式操作系统
<ul>
<li>典型嵌入式操作系统的特性</li>
<li>嵌入式操作系统的应用</li>
</ul>
</li>
</ul>
</li>
<li>操作系统的基本特征
<ul>
<li>并发
<ul>
<li>进程</li>
</ul>
</li>
<li>共享</li>
<li>虚拟</li>
<li>异步</li>
</ul>
</li>
<li>操作系统的主要功能
<ul>
<li>处理机管理功能</li>
<li>存储器管理功能</li>
<li>设备管理功能</li>
<li>文件管理功能</li>
<li>用户接口</li>
</ul>
</li>
<li>操作系统的结构设计
<ul>
<li>软件工程的基本概念</li>
<li>传统的操作系统结构
<ul>
<li>无结构操作系统</li>
<li>模块化OS结构</li>
<li>分层式OS结构</li>
</ul>
</li>
<li>微内核OS结构
<ul>
<li>微内核的基本功能</li>
<li>客户/服务器模式</li>
<li>面向对象的程序设计技术(Object-Orientated Programming)</li>
<li>OS设计原则</li>
<li>现代操作系统的特点</li>
</ul>
</li>
<li>操作系统实例
<ul>
<li>目前常用的操作系统</li>
<li>操作系统领域中新的操作系统</li>
<li>研究中的新的操作系统</li>
<li>国内操作系统的研制状况</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="操作系统的目标与作用"><a class="markdownIt-Anchor" href="#操作系统的目标与作用"></a> 操作系统的目标与作用</h1>
<p>操作系统(Operating System OS)属于软件中的<code>系统软件</code>，是管理<code>软硬件资源、数据</code>的计算机程序，控制其他程序运行并为用户提供交互界面的软件集合。</p>
<h2 id="操作系统的目标"><a class="markdownIt-Anchor" href="#操作系统的目标"></a> 操作系统的目标</h2>
<p>目前存在着多种类型的OS,不同类型的OS,其目标各有所侧重。通常在计算机硬件上配置的OS，其目标有以下几点：</p>
<ul>
<li><strong>方便性（用户的观点）</strong><br />
操作系统最终是要为用户服务的。提供良好的、一致的用户接口，弥补硬件系统的类型和数量差别，使计算机更<code>容易使用</code>。</li>
<li><strong>有效性（系统管理人员的观点）</strong><br />
使CPU、I/O设备和存储空间得到<code>有效利用</code>；管理和分配硬件、软件<code>资源</code>，合理地组织计算机的工作流程。</li>
<li><strong>可扩充性</strong><br />
OS应采用<code>层次化</code>结构，以便于增加新的功能层次和<code>模块</code>，并能修改老的功能层次和模块。</li>
<li><strong>开放性</strong><br />
遵循标准规范，方便地实现互连，实现应用程序的<code>可移植性</code>和<code>互操作性</code>。</li>
</ul>
<h2 id="操作系统的作用"><a class="markdownIt-Anchor" href="#操作系统的作用"></a> 操作系统的作用</h2>
<h3 id="用户与硬件系统之间的接口"><a class="markdownIt-Anchor" href="#用户与硬件系统之间的接口"></a> 用户与硬件系统之间的接口</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1587825785_20200304182331239_22824.png" alt="OS作为接口的示意图" /><br />
使用接口的方式</p>
<ul>
<li>命令方式
<ul>
<li>联机用户接口（命令）</li>
<li>脱机用户接口（批处理）</li>
</ul>
</li>
<li>系统调用方式
<ul>
<li>形式上类似于过程调用，在应用编程中使用（API）</li>
</ul>
</li>
<li>图形、窗口方式
<ul>
<li>用户通过屏幕上的窗口和图标来操纵计算机系统和运行自己的程序</li>
</ul>
</li>
</ul>
<h3 id="计算机资源的管理者"><a class="markdownIt-Anchor" href="#计算机资源的管理者"></a> 计算机资源的管理者</h3>
<p>计算机的资源包括<code>处理机</code>、<code>存储器</code>、<code>I/O设备</code>及<code>数据和程序</code>等。<br />
管理的内容：</p>
<ul>
<li>资源的当前状态(数量和使用情况)</li>
<li>资源的分配、回收和访问操作</li>
<li>相应管理策略(包括用户权限)</li>
<li>处理机管理</li>
<li>存储器管理</li>
<li>I/O设备管理</li>
<li>文件管理</li>
</ul>
<h3 id="扩充机器"><a class="markdownIt-Anchor" href="#扩充机器"></a> 扩充机器</h3>
<ul>
<li>OS是扩展机(extended machine)/虚拟机(virtualmachine)<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li>
</ul>
<ul>
<li>在裸机上添加：设备管理、文件管理、存储管理（针对内存和外存）、处理机管理（针对CPU）</li>
<li>合理组织工作流程：作业管理、进程管理</li>
</ul>
<blockquote>
<p>OS能把一台“裸机”改造成功能更强大、用户使用更方便灵活、更安全可靠的虚拟机。</p>
</blockquote>
<blockquote>
<p><strong>操作系统的非形式化定义：</strong> 系统软件程序模块的集合，资源管理和用户接口功能</p>
</blockquote>
<h1 id="推动操作系统发展的主要动力"><a class="markdownIt-Anchor" href="#推动操作系统发展的主要动力"></a> 推动操作系统发展的主要动力</h1>
<ul>
<li>提高资源的利用率和系统性能
<ul>
<li>计算机发展的初期，计算机系统昂贵，用作集中计算</li>
</ul>
</li>
<li>方便用户
<ul>
<li>用户上机、调试程序，分散计算时的事务处理和非专业用户（商业和办公、家庭）</li>
</ul>
</li>
<li>器件的发展
<ul>
<li>CPU的位宽度（指令和数据）、快速外存</li>
</ul>
</li>
<li>计算机体系结构的发展
<ul>
<li>从单处理机到多处理机；从单机到网络</li>
</ul>
</li>
</ul>
<h1 id="操作系统的发展过程"><a class="markdownIt-Anchor" href="#操作系统的发展过程"></a> 操作系统的发展过程</h1>
<h2 id="无操作系统的计算机系统"><a class="markdownIt-Anchor" href="#无操作系统的计算机系统"></a> 无操作系统的计算机系统</h2>
<ul>
<li>1946 ~ 50年代（电子管），集中计算（计算中心），计算机资源昂贵</li>
<li>工作方式
<ul>
<li>用户：用户既是程序员，又是操作员；用户是计算机专业人员；</li>
<li>编程语言：机器语言</li>
<li>输入输出：纸带或卡片</li>
</ul>
</li>
<li>计算机的工作特点
<ul>
<li>用户独占全机：不出现资源被其他用户占用，资源利用率低</li>
<li>CPU等待用户：计算前，手工装入纸带或卡片；计算完成后，手工卸取纸带或卡片；CPU利用率低</li>
</ul>
</li>
</ul>
<blockquote>
<p>严重降低了计算机资源的利用率———人机矛盾！</p>
</blockquote>
<h3 id="脱机输入输出off-line-io方式"><a class="markdownIt-Anchor" href="#脱机输入输出off-line-io方式"></a> 脱机输入/输出（Off-Line I/O）方式</h3>
<ul>
<li>事先将用户程序或数据的纸带或卡片准入纸带输入机，在外围机的控制下输入到磁带上，CPU从磁带上读入数据；输出过程正好相反</li>
<li>特点
<ul>
<li>减少了CPU的空闲时间</li>
<li>提高I/O速度</li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425223853.png" alt="" /></p>
<hr />
<h3 id="无操作系统的主要问题"><a class="markdownIt-Anchor" href="#无操作系统的主要问题"></a> 无操作系统的主要问题</h3>
<ul>
<li>主要矛盾
<ul>
<li>计算机处理能力的提高，手工操作的低效率（造成浪费）；</li>
<li>用户独占全机的所有资源；</li>
</ul>
</li>
<li>提高效率的途径
<ul>
<li>专门的操作员</li>
<li>批处理</li>
</ul>
</li>
</ul>
<h2 id="单道批处理系统"><a class="markdownIt-Anchor" href="#单道批处理系统"></a> 单道批处理系统</h2>
<ul>
<li>50年代末 ~ 60年代中（晶体管）：利用磁带把若干个作业分类编成作业执行序列，每个批作业由一个专门的<strong>监督程序</strong>（Monitor）自动依次处理。可使用汇编语言开发。</li>
<li>批处理中的作业的组成
<ul>
<li>用户程序</li>
<li>数据</li>
<li>作业说明书（作业控制语言）</li>
</ul>
</li>
<li>批
<ul>
<li>供一次加载的磁带或磁盘，通常由若干个作业组装成，在处理中使用一组相同的系统软件（系统带）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425224034.png" alt="" /></li>
</ul>
</li>
</ul>
<h3 id="联机批处理"><a class="markdownIt-Anchor" href="#联机批处理"></a> 联机批处理</h3>
<ul>
<li>用户提交作业：以纸带或卡片为介质</li>
<li>操作员合成批作业：结果为磁带介质</li>
<li>批作业处理：对批作业中的每个作业进行相同的处理：从磁带读入用户作业和编译链接程序，编译链接用户作业，生成可执行程序；启动执行；执行结果输出</li>
<li>这时的问题：慢速的输入输出处理仍直接由主机来完成。输入输出时，CPU处于等待状态</li>
</ul>
<h3 id="脱机批处理"><a class="markdownIt-Anchor" href="#脱机批处理"></a> 脱机批处理</h3>
<ul>
<li>卫星机：完成面向用户的输入输出（纸带或卡片），中间结果暂存在磁带或磁盘上</li>
<li>利用卫星机完成输入输出功能。主机与卫星机可并行工作</li>
<li>作业控制命令由监督程序(monitor)来执行，完成如装入程序、编译、运行等操作</li>
<li>优点：同一批内各作业的自动依次更替，改善了主机CPU和I/O设备的使用效率，提高了吞吐量</li>
<li>缺点：磁带或磁盘需要人工装卸，作业需要人工分类，监督程序易遭到用户程序的破坏（由人工干预才可恢复）</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425224213.png" alt="" /></p>
<h3 id="单道批处理系统的特征"><a class="markdownIt-Anchor" href="#单道批处理系统的特征"></a> 单道批处理系统的特征</h3>
<ul>
<li>自动性
<ul>
<li>在顺利的情况下，磁带上的一批作业能自动地逐个地依次运行，而无需人工干预</li>
</ul>
</li>
<li>顺序性
<ul>
<li>磁带上的各道作业是顺序地进入内存，完成顺序与进入内存顺序相同</li>
</ul>
</li>
<li>单道性
<ul>
<li>内存中只有一道程序运行</li>
</ul>
</li>
<li>CPU和I/O设备使用忙闲不均（取决于当前作业）
<ul>
<li>对计算为主的作业，外设空闲</li>
<li>对I/O为主的作业，CPU空闲</li>
</ul>
</li>
</ul>
<h2 id="多道批处理系统"><a class="markdownIt-Anchor" href="#多道批处理系统"></a> 多道批处理系统</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200425224430.png" alt="" /></p>
<ul>
<li>60年代中 ~ 70年代中（集成电路），利用多道批处理提高资源的利用率</li>
<li>多道批处理的运行特征
<ul>
<li>多道：内存中同时存放几个作业，并允许并发执行，从而有效地提高了资源利用率和系统吞吐量</li>
<li>无序性：多个作业完成的先后顺序与它们进入内存的顺序之间无严格对应关系</li>
<li>调度性：作业调度，从后备队列进入内存；进程调度，分配处理机运行</li>
</ul>
</li>
<li>举例
<ul>
<li>在当前运行的作业需作I/O处理时，CPU转而执行另一个作业</li>
</ul>
</li>
</ul>
<h3 id="多道批处理系统的特征"><a class="markdownIt-Anchor" href="#多道批处理系统的特征"></a> 多道批处理系统的特征</h3>
<ul>
<li>多道性
<ul>
<li>多道程序驻留内存：提高了资源的利用率；</li>
<li>程序并发执行：提高了系统的吞吐量；</li>
</ul>
</li>
<li>无序性
<ul>
<li>作业进入内存先后顺序和完成的先后顺序无对应性</li>
</ul>
</li>
<li>调度性
<ul>
<li>作业提交给系统需经过两次调度
<ul>
<li>作业调度</li>
<li>进程调度</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="单道批处理和多道批处理的比较"><a class="markdownIt-Anchor" href="#单道批处理和多道批处理的比较"></a> 单道批处理和多道批处理的比较</h3>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">单道</th>
<th style="text-align:center">多道</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">内存使用</td>
<td style="text-align:center">每次一个作业</td>
<td style="text-align:center">每次多个作业（充分利用内存）</td>
</tr>
<tr>
<td style="text-align:center">作业次序</td>
<td style="text-align:center">顺序，先进先出</td>
<td style="text-align:center">无确定次序</td>
</tr>
<tr>
<td style="text-align:center">内存中驻留程序数目</td>
<td style="text-align:center">一道</td>
<td style="text-align:center">多道</td>
</tr>
<tr>
<td style="text-align:center">占用CPU的情况</td>
<td style="text-align:center">独占</td>
<td style="text-align:center">交替占用</td>
</tr>
<tr>
<td style="text-align:center">是否需要作业和进度调度</td>
<td style="text-align:center">不需要</td>
<td style="text-align:center">需要</td>
</tr>
<tr>
<td style="text-align:center">程序完成次序与其进入内存次序间的关系</td>
<td style="text-align:center">严格对应</td>
<td style="text-align:center">不严格对应</td>
</tr>
</tbody>
</table>
<h3 id="多道批处理系统的特点"><a class="markdownIt-Anchor" href="#多道批处理系统的特点"></a> 多道批处理系统的特点</h3>
<ul>
<li>优点
<ul>
<li>资源利用率高：CPU、I/O设备和内存利用率较高；</li>
<li>作业吞吐量大：单位时间内完成的工作总量大</li>
</ul>
</li>
<li>缺点
<ul>
<li>用户交互性差：整个作业完成后或中间出错时，才与用户交互，不利于调试和修改</li>
<li>作业平均周转时间长：短作业的周转时间显著增长</li>
</ul>
</li>
</ul>
<h3 id="多道批处理系统需要解决的问题"><a class="markdownIt-Anchor" href="#多道批处理系统需要解决的问题"></a> 多道批处理系统需要解决的问题</h3>
<ul>
<li>处理机管理：如何共享、分配及回收处理机、提高利用率</li>
<li>内存管理：如何分配、互不重叠及干扰</li>
<li>I/O设备管理：如何共享及分配、方便用户、提高利用率</li>
<li>文件管理：如何组织数据和程序、便于使用、保证数据的安全性及一致性</li>
<li>作业管理：如何根据作业类型进行组织</li>
</ul>
<blockquote>
<p>操作系统是一组控制和管理计算机硬件和软件资源，合理地对各类作业进调度，以及方便用户使用的程序集合</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">要解决的问题</th>
<th style="text-align:center">对应章节</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">处理机管理问题</td>
<td style="text-align:center">第三章 处理机调度与死锁</td>
</tr>
<tr>
<td style="text-align:center">内存管理问题</td>
<td style="text-align:center">第四章 存储器管理</td>
</tr>
<tr>
<td style="text-align:center">I/O设备管理问题</td>
<td style="text-align:center">第五章 设备管理</td>
</tr>
<tr>
<td style="text-align:center">文件管理问题</td>
<td style="text-align:center">第六章 文件管理</td>
</tr>
<tr>
<td style="text-align:center">作业管理问题</td>
<td style="text-align:center">第三章 处理机调度与死锁</td>
</tr>
</tbody>
</table>
<h2 id="分时系统"><a class="markdownIt-Anchor" href="#分时系统"></a> 分时系统</h2>
<ul>
<li>产生原因：用户需要
<ul>
<li>人—机交互</li>
<li>共享主机</li>
<li>便于用户上机：远程联机</li>
</ul>
</li>
<li>70年代中期至今</li>
<li>把计算机的系统资源（尤其是CPU时间）进行时间上的分割，每个时间段称为一个<strong>时间片</strong>（time  slice），每个用户依次轮流使用时间片</li>
<li>&quot;分时&quot;的含义分时是指<strong>多个用户</strong>分享使用同一台计算机；<strong>多个程序</strong>分时共享硬件和软件资源
<ul>
<li>多个用户分时：单个用户使用计算机的效率低，因而允许多个应用程序同时在内存中，分别服务于不同的用户。有用户输入时由CPU执行，处理完一次用户输入后程序暂停，等待下一次用户输入——时走时停</li>
<li>前台和后台程序(foreground &amp; background)分时：后台程序不占用终端输入输出，不与用户交互——现在的图形用户界面(GUI)，除当前交互的程序(输入焦点)之外，其他程序均作为后台</li>
<li>按时间片(time  slice)分配：各个程序在CPU上执行的轮换时间</li>
</ul>
</li>
</ul>
<h3 id="分时系统中的关键问题"><a class="markdownIt-Anchor" href="#分时系统中的关键问题"></a> 分时系统中的关键问题</h3>
<ul>
<li>如何使用户能与自已的作业进行交互是分时系统的关键问题
<ul>
<li>及时接收：多路卡</li>
<li>及时处理：作业直接进入内存</li>
</ul>
</li>
<li>为了实现交互，用户作业必须及时进入内存；不允许一个作业长期占用处理机，须按时间片分配</li>
<li>分时系统实现方法：
<ul>
<li>单道分时系统</li>
<li>具有“前台”和“后台”的分时系统</li>
<li>多道分时系统</li>
</ul>
</li>
</ul>
<h3 id="分时系统的特征"><a class="markdownIt-Anchor" href="#分时系统的特征"></a> 分时系统的特征</h3>
<ul>
<li>多路性
<ul>
<li>共享系统资源，提高了资源利用率。节省维护开支，可靠性高。促进了计算机的普遍应用，提高资源利用率：远地用户通过终端（较便宜）联机使用</li>
</ul>
</li>
<li>独立性
<ul>
<li>每个用户一台终端，互不干扰，感觉像一个人独占计算机</li>
</ul>
</li>
<li>及时性
<ul>
<li>用户请求应尽快得到响应</li>
</ul>
</li>
<li>交互性
<ul>
<li>用户可通过终端与系统进行广泛的人机对话，请求系统提供多方面的服务，如文件编辑、数据处理、资源共享等</li>
<li>系统能及时对用户的操作进行响应，显著提高调试和修改程序的效率：缩短了周转时间</li>
</ul>
</li>
</ul>
<h2 id="实时系统"><a class="markdownIt-Anchor" href="#实时系统"></a> 实时系统</h2>
<ul>
<li>用于工业过程控制、军事实时控制、金融等领域，包括：
<ul>
<li>实时控制：当计算机应用于生产过程的控制形成以计算机为中心的控制系统时，系统要求能实时采集现场数据，并对所采集的数据进行及时处理，从而自动地控制相应的执行机构，使某些参数（如湿度、压力、液位）能按预定的规律变化，以保证产品的质量和提高产量。</li>
<li>实时信息处理：能及时接收从远程终端发来的服务请求，对信息进行检索和处理，并在很短时间内作出回答</li>
</ul>
</li>
<li>主要设计目标：响应时间短；实时时钟管理；连续人机对话；过载防护；高度可靠性和安全</li>
<li>任务的类型
<ul>
<li>周期性实时任务</li>
<li>非周期性实时任务：截止时间(deadline)，开始截止时间（最晚开始时间）和完成截止时间（最晚完成时间）</li>
</ul>
</li>
<li>对截止时间的要求
<ul>
<li>硬实时任务（hard real-time task）：必须满足截止时间要求</li>
<li>软实时任务（soft real-time task）</li>
</ul>
</li>
<li>通常把<strong>兼有分时、实时和批处理三者或其中两者的操作系统</strong>，称作<strong>通用操作系统</strong>。可适用于计算、事务处理等多种领域，能运行在多种硬件平台上，如 UNIX系统、Windows NT等。——通用化、小型化</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>分时系统</th>
<th>实时系统</th>
</tr>
</thead>
<tbody>
<tr>
<td>多路性</td>
<td>多终端服务</td>
<td>多路现场、多个对象、多个执行机构</td>
</tr>
<tr>
<td>独立性</td>
<td>终端服务互相独立、互不干扰</td>
<td>信息采集和对象控制互不干扰</td>
</tr>
<tr>
<td>及时性</td>
<td>用户可接受的</td>
<td>实时信息系统同分时系统，实时控制系统要求高</td>
</tr>
<tr>
<td>交互性</td>
<td>强</td>
<td>仅对特定服务</td>
</tr>
<tr>
<td>可靠性</td>
<td>一般</td>
<td>强，通常采取容错措施</td>
</tr>
</tbody>
</table>
<h2 id="网络操作系统"><a class="markdownIt-Anchor" href="#网络操作系统"></a> 网络操作系统</h2>
<h3 id="计算机网络"><a class="markdownIt-Anchor" href="#计算机网络"></a> 计算机网络</h3>
<p>通过通信设施将物理上分散的<strong>具有自治功能</strong>的<strong>多个计算机系统</strong>互连起来的实现信息交换、资源共享、可互操作和协作处理的系统。</p>
<h3 id="网络操作系统功能"><a class="markdownIt-Anchor" href="#网络操作系统功能"></a> 网络操作系统功能</h3>
<ul>
<li>
<p>在各种计算机操作系统上，按网络体系结构协议标准开发的软件</p>
</li>
<li>
<p>包括网络管理、通信、安全、资源共享和各种网络应用</p>
</li>
<li>
<p>目标：是相互通信及资源共享</p>
</li>
</ul>
<h2 id="分布式操作系统"><a class="markdownIt-Anchor" href="#分布式操作系统"></a> 分布式操作系统</h2>
<ul>
<li>
<p>基于两种环境</p>
<ul>
<li>多处理器系统</li>
<li>多计算机系统</li>
</ul>
</li>
<li>
<p>是网络操作系统的更高级的形式</p>
</li>
<li>
<p>保持了网络操作系统的全部功能</p>
</li>
</ul>
<h3 id="分布式操作系统的特征"><a class="markdownIt-Anchor" href="#分布式操作系统的特征"></a> 分布式操作系统的特征</h3>
<ul>
<li>是一个统一的操作系统</li>
<li>资源进一步共享</li>
<li>透明性：资源共享与分布对用户是透明的</li>
<li>自治性：处于分布式系统的多个主机处于平等地位，无主从关系</li>
<li>处理能力增强、速度更快、可靠性增强</li>
</ul>
<h3 id="网络和分布式的区别"><a class="markdownIt-Anchor" href="#网络和分布式的区别"></a> 网络和分布式的区别</h3>
<ul>
<li>分布式具有各个计算机间相互通讯，无主从关系；网络有主从关系。</li>
<li>分布式系统资源为所有用户共享；而网络有限制地共享。</li>
<li>分布式系统中若干个计算机可相互协作共同完成一项任务。</li>
</ul>
<h2 id="嵌入式操作系统"><a class="markdownIt-Anchor" href="#嵌入式操作系统"></a> 嵌入式操作系统</h2>
<ul>
<li>在各种设备、装置或系统中，<strong>完成特定功能</strong>的软硬件系统</li>
<li>它们是一个大设备、装置或系统中的一部分，这个大设备、装置或系统可以不是“计算机”</li>
<li>由于它们被嵌入在各种设备、装置或系统中，因此称为嵌入式系统</li>
<li>EOS（Embedded Operating System）在嵌入式系统中的OS</li>
<li>是运行在嵌入式智能芯片环境中</li>
<li>对整个智能芯片以及它所操作、控制的各种部件装置等等资源进行统一协调、调度、指挥和控制的系统软件</li>
<li>国际上有名的嵌入式操作系统有Windows CE 、Palm OS 、Linux 、VxWorks 、pSOS、QNX、OS-9 、LynxOS等。</li>
</ul>
<h3 id="典型嵌入式操作系统的特性"><a class="markdownIt-Anchor" href="#典型嵌入式操作系统的特性"></a> 典型嵌入式操作系统的特性</h3>
<ul>
<li>完成<strong>某一项或有限项</strong>功能；<strong>不是通用型</strong>的</li>
<li>在性能和实时性方面有严格的限制</li>
<li>能源、成本和可靠性通常是影响设计的重要因素</li>
<li>占有资源少、易于连接</li>
<li>系统功能<strong>可针对需求进行裁剪、调整和生成</strong>，以便满足最终产品的设计要求</li>
</ul>
<h3 id="嵌入式操作系统的应用"><a class="markdownIt-Anchor" href="#嵌入式操作系统的应用"></a> 嵌入式操作系统的应用</h3>
<ul>
<li>嵌入计算的各种应用特点</li>
<li>掌上电脑
<ul>
<li>运算速度： 100 KIPS</li>
<li>在大小上优化、支持手写、低能耗</li>
</ul>
</li>
<li>工业设备
<ul>
<li>运算速度： 1 MIPS</li>
<li>安全优先，控制流程为主</li>
</ul>
</li>
<li>军事装备
<ul>
<li>运算速度 ：1 GIPS</li>
<li>可靠性最重要</li>
</ul>
</li>
</ul>
<h1 id="操作系统的基本特征"><a class="markdownIt-Anchor" href="#操作系统的基本特征"></a> 操作系统的基本特征</h1>
<ul>
<li>并发（Concurrence）</li>
<li>共享（Sharing）</li>
<li>虚拟（Virtual）</li>
<li>异步性（Asynchronism）</li>
</ul>
<blockquote>
<p>注意：这里指的是通用操作系统</p>
</blockquote>
<h2 id="并发"><a class="markdownIt-Anchor" href="#并发"></a> 并发</h2>
<p>并发是指多个事件在<strong>同一时间段</strong>内发生。操作系统是一个并发系统，各进程间的并发，系统与应用间的并发。操作系统要完成这些并发过程的管理。</p>
<ul>
<li>并行(parallel)是指在<strong>同一时刻</strong>发生</li>
<li>在多道程序处理时，<strong>宏观</strong>上并发，<strong>微观</strong>上交替执行（在单处理器情况下）</li>
<li>程序的静态实体是可执行文件，而动态实体是进程（或称作任务），并发指的是进程（或线程）</li>
</ul>
<h3 id="进程"><a class="markdownIt-Anchor" href="#进程"></a> 进程</h3>
<p>应当指出，通常的程序是静态实体（Passive Entity），它们是不能并发执行的。为使多个程序能并发执行，系统必须分别为每个程序建立进程。简单说来，进程是指在系统中能独立运行并作为资源分配的基本单位，它是由一组机器指令、数据和堆栈等组成的，是一个活动实体。多个进程之间可以并发执行和交换信息。一个进程在运行时需要一定的资源，如CPU、存储空间及I/O设备等。</p>
<ul>
<li>在操作系统中引入进程的目的，是使多个程序能并发执行。</li>
<li>进程和并发是现代OS中最重要的基本概念，也是OS运行的基础。</li>
<li>进程都是OS中可以拥有资源和作为独立运行的基本单位。</li>
<li>直到80年代中期，人们才有提出了比进程更小的单位——线程（Threads）。</li>
</ul>
<h2 id="共享"><a class="markdownIt-Anchor" href="#共享"></a> 共享</h2>
<ul>
<li>是指系统中的资源可供内存中<strong>多个并发</strong>执行的进程（线程）<strong>共同使用</strong>。因资源属性不同，对资源共享的方式也不同</li>
<li>互斥共享（如音频设备、打印机等）
<ul>
<li>资源分配后到释放前，不能被其他进程所用。</li>
</ul>
</li>
<li>同时访问（如可重入代码，磁盘文件）
<ul>
<li>同时是宏观上的，在微观上进程可能是交替地对资源进行访问</li>
</ul>
</li>
<li>并发和共享是操作系统的<strong>两个最基本的特征</strong>。一方面，资源<strong>共享是以</strong>程序(进程)的<strong>并发执行为条件</strong>的；另一方面，若系统不能对资源共享实施有效管理， 协调好诸进程对共享资源的访问，也必然影响到程序并发执行的程度</li>
</ul>
<h2 id="虚拟"><a class="markdownIt-Anchor" href="#虚拟"></a> 虚拟</h2>
<ul>
<li>通过某种技术把一个物理实体变为若干个逻辑上的对应物，主要目的在于提高资源的利用率</li>
<li>如
<ul>
<li>CPU——每个用户（进程）的&quot;虚处理机&quot;</li>
<li>存储器——每个进程都占有的地址空间（指令＋数据＋堆栈）</li>
<li>显示设备——多窗口或虚拟终端(virtual terminal)</li>
<li>打印设备——将临界资源变为同时访问资源</li>
</ul>
</li>
</ul>
<h2 id="异步"><a class="markdownIt-Anchor" href="#异步"></a> 异步</h2>
<ul>
<li>也称<strong>不确定性</strong>，指进程的执行<strong>顺序</strong>和执行<strong>时间</strong>的不确定性</li>
<li>进程的运行速度不可预知：分时系统中，多个进程并发执行，“<strong>时走时停</strong>”，不可预知每个进程的运行推进快慢</li>
<li>判据：无论快慢，应该<strong>结果相同</strong>——通过进程互斥和同步手段来保证</li>
<li>难以重现系统在某个时刻的状态（包括重现运行中的错误）</li>
<li>性能保证：实时系统与分时系统相似，但通过资源预留以保证性能</li>
</ul>
<h1 id="操作系统的主要功能"><a class="markdownIt-Anchor" href="#操作系统的主要功能"></a> 操作系统的主要功能</h1>
<ul>
<li>处理机管理</li>
<li>存储器管理</li>
<li>设备管理</li>
<li>文件管理</li>
<li>用户接口</li>
</ul>
<h2 id="处理机管理功能"><a class="markdownIt-Anchor" href="#处理机管理功能"></a> 处理机管理功能</h2>
<p>处理机的分配和运行，都是以进程为基本单位，因而对处理机的管理，可归结为对进程的管理。处理机管理的主要功能，是</p>
<ul>
<li>创建和撤销进程——进程控制</li>
<li>对诸进程的运行进行协商——进程同步</li>
<li>是进程之间的信息交换——进程通信</li>
<li>按照一定的算法把处理机分配给进程——进程调度</li>
</ul>
<hr />
<ul>
<li>完成处理机资源的<strong>分配、回收</strong>调度等功能。处理机调度的单位可为<strong>进程或线程</strong>。</li>
<li>进程控制
<ul>
<li><strong>创建、撤消、挂起、改变</strong>运行优先级等——主动改变<strong>进程的状态</strong>；在现代OS中，进行控制还应具有为一个进程创建和撤消<strong>线程</strong>的功能。</li>
</ul>
</li>
<li>进程同步
<ul>
<li>协调并发进程之间的推进步骤，以协调资源共享；——交换信息能力弱</li>
<li><strong>互斥方式</strong> 诸进程访问临界资源时采用这种方式</li>
<li><strong>同步方式</strong> 在相互合作完成任务的进程之间由同步机构对执行次序加以协调</li>
</ul>
</li>
<li>进程通信
<ul>
<li>负责进程之间<strong>传送数据</strong>，以协调进程间的协作；——交换信息能力强，也可以用来协调进程之间的推进</li>
<li>如，输入进程、计算进程、打印进程之间的通信</li>
</ul>
</li>
<li>进程调度
<ul>
<li>作业和进程的<strong>运行切换</strong>，以充分利用处理机资源和提高系统性能；——未必是进程控制操作所引起（可能是时间片轮转、I/O操作）</li>
<li>作业调度从外存<strong>调入内存</strong></li>
<li>进程调度是从内存中的进程就绪队列中选一个<strong>分配处理机</strong></li>
<li>在多线程OS中，要考虑线程调度</li>
<li>考虑同一类型内的公平性、高效率（吞吐量大）、作业或进程的周转时间等</li>
</ul>
</li>
</ul>
<h2 id="存储器管理功能"><a class="markdownIt-Anchor" href="#存储器管理功能"></a> 存储器管理功能</h2>
<p>存储器管理的主要任务，是为多道程序的运行提供良好的环境，方便用户使用存储器，提高存储器的利用率以及能从逻辑上扩充内存。</p>
<ul>
<li>内存分配</li>
<li>内存保护</li>
<li>地址映射</li>
<li>内存扩充</li>
</ul>
<hr />
<ul>
<li>管理目标
<ul>
<li>提高<strong>利用率、方便</strong>用户使用、提供足够的<strong>存储空间</strong>、方便进程<strong>并发</strong>运行</li>
</ul>
</li>
<li>内存分配
<ul>
<li>为每道程序分配空间：静态分配、动态分配</li>
<li>提高利用率</li>
<li>允许正在运行程序申请附加空间</li>
</ul>
</li>
<li>内存保护
<ul>
<li>确保每道用户程序都只在自己的内存空间内运行，彼此<strong>互不干扰</strong></li>
<li>如：访问合法性检查、甚至要防止从&quot;垃圾&quot;中窃取其他进程的信息</li>
<li>一种方法是设置两个界限寄存器，由硬件实现越界检查</li>
</ul>
</li>
<li>地址映射
<ul>
<li>程序中的地址称为“<strong>逻辑地址</strong>”或“<strong>相对地址</strong>”</li>
<li>内存中单元的地址称为&quot;<strong>物理地址</strong>&quot;</li>
<li>多道程序下，进程装入内存后要由<strong>逻辑地址</strong>到<strong>内存物理地址</strong>进行变换</li>
</ul>
</li>
<li>内存扩充
<ul>
<li>借助于虚拟存储技术，从逻辑上去扩充内存容量</li>
<li>改善了系统的性能，基本上不增加硬件投资</li>
<li>请求调入功能</li>
<li>置换功能</li>
</ul>
</li>
</ul>
<h2 id="设备管理功能"><a class="markdownIt-Anchor" href="#设备管理功能"></a> 设备管理功能</h2>
<p>设备管理用于管理计算机系统中所有的外围设备， 而设备管理的主要任务是，完成用户进程提出的I/O请求；为用户进程分配其所需的I/O设备；提高CPU和I/O设备的利用率；提高I/O速度；方便用户使用I/O设备。为实现上述任务，设备管理应具有<strong>缓冲管理</strong>、<strong>设备分配</strong>和<strong>设备处理</strong>，以及<strong>虚拟设备</strong>等功能。</p>
<ul>
<li>管理目标
<ul>
<li>方便的设备使用、提高CPU与I/O设备<strong>利用率</strong>、提高<strong>I/O速度</strong></li>
</ul>
</li>
<li>缓冲区管理
<ul>
<li>匹配CPU和外设的速度，提高两者的利用率（单缓冲区、双缓冲区和公用缓冲区）</li>
<li><strong>单缓冲、双缓冲、公共缓冲池</strong></li>
</ul>
</li>
<li>设备分配与回收
<ul>
<li>在多用户间共享I/O设备资源</li>
<li>针对不同类型设备采用不同策略，如独占设备分配</li>
<li>虚拟设备(virtual device)：设备由多个进程共享，每个进程如同独占</li>
</ul>
</li>
<li>设备独立性
<ul>
<li>用户申请的设备与实际操作的物理<strong>设备无关</strong></li>
</ul>
</li>
</ul>
<h2 id="文件管理功能"><a class="markdownIt-Anchor" href="#文件管理功能"></a> 文件管理功能</h2>
<p>文件管理的主要任务，是对用户文件和系统文件进行管理，以方便用户使用，并保证文件的安全性。</p>
<ul>
<li>文件存储空间的管理</li>
<li>目录管理</li>
<li>文件的读/写管理和保护</li>
</ul>
<hr />
<ul>
<li>管理主要目标
<ul>
<li>对用户文件和系统文件进行管理，以方便用户使用并保证文件安全</li>
</ul>
</li>
<li>文件存储空间管理
<ul>
<li>解决如何存放信息，以提高空间利用率和读写性能</li>
<li>存储空间的使用情况，空间分配与回收</li>
</ul>
</li>
<li>目录管理
<ul>
<li>解决信息检索问题，能按名存取</li>
<li>目录项包括文件名、文件属性、文件在磁盘上的物理位置等</li>
</ul>
</li>
<li>文件的读写
<ul>
<li>根据用户请求，从外存中读取数据；或将数据写入外存</li>
</ul>
</li>
<li>文件保护
<ul>
<li>解决信息安全问题</li>
<li>防止未经核准的用户存取文件</li>
<li>防止冒名顶替存取文件</li>
<li>防止以不正确的方式使用文件</li>
</ul>
</li>
</ul>
<h2 id="用户接口"><a class="markdownIt-Anchor" href="#用户接口"></a> 用户接口</h2>
<ul>
<li>目标
<ul>
<li>提供一个友好的用户访问操作系统的接口</li>
</ul>
</li>
<li>命令接口
<ul>
<li><strong>联机用户接口</strong>	这是为联机用户提供的，它由一组键盘操作命令及命令解释程序所组成。当用户在终端或控制台上每键入一条命令后，系统便立即转入命令解释程序，对该命令加以解释并执行该命令。</li>
<li><strong>脱机用户接口</strong>	该接口是为批处理作业的用户提供的，故也称为批处理用户接口。该接口由一组作业控制语言JCL组成。批处理作业的用户<strong>不能直接与自己的作业交互作用</strong>，只能委托系统代替用户对作业进行控制和干预。</li>
</ul>
</li>
<li>程序接口
<ul>
<li>该接口是为用户程序在执行中访问系统资源而设置的，是用户程序取得操作系统服务的惟一途径。它是由一组系统调用组成，每一个系统调用都是一个能完成特定功能的子程序，每当应用程序要求OS提供某种服务(功能)时，便调用具有相应功能的系统调用</li>
</ul>
</li>
<li>图形接口
<ul>
<li>图形用户接口采用了图形化的操作界面， 用非常容易识别的各种图标(icon)来将系统的各项功能、各种应用程序和文件，直观、逼真地表示出来。用户可用鼠标或通过菜单和对话框，来完成对应用程序和文件的操作</li>
</ul>
</li>
</ul>
<h1 id="操作系统的结构设计"><a class="markdownIt-Anchor" href="#操作系统的结构设计"></a> 操作系统的结构设计</h1>
<h2 id="软件工程的基本概念"><a class="markdownIt-Anchor" href="#软件工程的基本概念"></a> 软件工程的基本概念</h2>
<ul>
<li>软件
<ul>
<li>是指当计算机运行时，能提供所要求的功能和性能的指令和程序的集合，以及该程序能够正确地处理信息的数据结构</li>
<li>规范的软件还应具有描述程序功能需求以及程序如何操作使用的文档</li>
</ul>
</li>
<li>软件工程
<ul>
<li>是指运用<strong>系统的、规范的和可定量的方法</strong>，来开发、运行和维护软件</li>
<li>目的是为了解决在软件开发中所出现的编程随意、软件质量不可保证以及维护困难等问题</li>
</ul>
</li>
</ul>
<h2 id="传统的操作系统结构"><a class="markdownIt-Anchor" href="#传统的操作系统结构"></a> 传统的操作系统结构</h2>
<h3 id="无结构操作系统"><a class="markdownIt-Anchor" href="#无结构操作系统"></a> 无结构操作系统</h3>
<ul>
<li>设计者只是把他的注意力放在功能的实现和获得高的效率上，缺乏首尾一致的设计思想</li>
<li>此时的OS是为数众多的一组过程的集合，各过程之间可以相互调用，在操作系统内部不存在任何结构</li>
<li>缺点
<ul>
<li>操作系统既庞大又杂乱，缺乏清晰的程序结构，调试困难</li>
<li>程序难以阅读和理解，增加了维护人员的负担</li>
</ul>
</li>
</ul>
<h3 id="模块化os结构"><a class="markdownIt-Anchor" href="#模块化os结构"></a> 模块化OS结构</h3>
<ul>
<li>模块由众多服务过程（模块接口）组成，可以随意调用其他模块中的服务过程</li>
<li>优点
<ul>
<li>具有一定灵活性，在运行中的高效率</li>
</ul>
</li>
<li>缺点
<ul>
<li>功能划分和模块接口难保正确和合理</li>
<li>模块之间的依赖关系（功能调用关系）复杂（调用深度和方向），降低了模块之间的相对独立性－－不利于修改<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200429103828.png" alt="" /></li>
</ul>
</li>
</ul>
<h3 id="分层式os结构"><a class="markdownIt-Anchor" href="#分层式os结构"></a> 分层式OS结构</h3>
<ul>
<li>有序分层的概念</li>
<li>基本原则是
<ul>
<li>每一层都仅使用其底层所提供的功能和服务，这样可使系统的调试和验证都变得容易</li>
</ul>
</li>
<li>层次的设置
<ul>
<li>程序嵌套</li>
<li>运行频率</li>
<li>公用模块</li>
<li>用户接口<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200429103953.png" alt="" /></li>
</ul>
</li>
</ul>
<h2 id="微内核os结构"><a class="markdownIt-Anchor" href="#微内核os结构"></a> 微内核OS结构</h2>
<ul>
<li>把操作系统分成若干分别完成一组特定功能的服务进程，等待客户提出请求；而系统内核<strong>只实现</strong>操作系统的<strong>基本功能</strong>(如：虚拟存储、消息传递)</li>
<li>微内核(MicroKernel)
<ul>
<li>将更多操作系统功能放在核心之外，作为独立的服务进程运行；</li>
<li>服务进程，如进程服务器、存储管理服务器、文件服务器</li>
<li>客户进程（系统客户和应用客户）——需支持多进程</li>
</ul>
</li>
</ul>
<h3 id="微内核的基本功能"><a class="markdownIt-Anchor" href="#微内核的基本功能"></a> 微内核的基本功能</h3>
<ul>
<li>微内核所提供的功能，通常都是一些最基本的功能，如进程管理、存储器管理、进程间通信、 低级I/O功能
<ul>
<li>进程管理</li>
<li>存储器管理</li>
<li>进程通信管理</li>
<li>I/O设备管理</li>
</ul>
</li>
</ul>
<h3 id="客户服务器模式"><a class="markdownIt-Anchor" href="#客户服务器模式"></a> 客户/服务器模式</h3>
<ul>
<li>为了提高OS的灵活性和可扩充性而将OS划分为两部分， 一部分是用于<strong>提供各种服务的一组服务器</strong>(进程); 另一部分是内核，<strong>用来处理客户和服务器之间的通信</strong></li>
<li>所有这些服务器(进程)都运行在<strong>用户态</strong>。 当有一用户进程(现在称为客户进程)要求读文件的一个盘块时，该进程便向文件服务器(进程)发出一个请求</li>
<li>内核来接收客户的请求，再将该请求送至相应的服务器；同时它也接收服务器的应答， 并将此应答回送给请求客户；内核还有与硬件直接相关的一些功能<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200429105829.png" alt="" /></li>
</ul>
<h3 id="面向对象的程序设计技术object-orientated-programming"><a class="markdownIt-Anchor" href="#面向对象的程序设计技术object-orientated-programming"></a> 面向对象的程序设计技术(Object-Orientated Programming)</h3>
<ul>
<li>对象
<ul>
<li>是指在现实世界中具有相同属性、服从相同规则的一系列事物的抽象，而把其中的具体事物称为对象的实例</li>
<li>OS中的各类实体如进程、线程、消息、存储器等，都使用了对象这一概念<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200429105905.png" alt="" /></li>
</ul>
</li>
<li>优点
<ul>
<li>可修改性和可扩充性
<ul>
<li>由于隐蔽了表示实体的数据和操作，因而可以改变对象的表示而不会影响其它部分， 从而可以方便地改变老的对象和增加新的对象</li>
</ul>
</li>
<li>继承性
<ul>
<li>继承性是面向对象技术所具有的重要特性。继承性是指子对象可以继承父对象的属性，这样，在创建一个新的对象时， 便可减少大量的时空开销</li>
</ul>
</li>
<li>正确性和可靠性
<ul>
<li>由于对象是构成操作系统的基本单元，可以独立地对它进行测试，这样，比较易于保证其正确性和可靠性，从而比较容易保证整个系统的正确性和可靠性</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="os设计原则"><a class="markdownIt-Anchor" href="#os设计原则"></a> OS设计原则</h3>
<ul>
<li>可维护性：容易修改与否称为可维护性
<ul>
<li>改错性维护：改正已发现的错误；</li>
<li>适应性维护：修改软件，使之适应新的运行环境（硬件环境和软件环境）；如：操作系统的移植。</li>
<li>完善性维护：增加新功能；</li>
</ul>
</li>
<li>可靠性
<ul>
<li>正确性：正确实现所要求的功能和性能；</li>
<li>稳健性：对意外（故障和误操作）作出适当的处理；</li>
</ul>
</li>
<li>可理解性：易于理解，以方便测试、维护和交流；</li>
<li>性能：有效地使用系统资源；尽可能快地响应用户请求；</li>
</ul>
<h3 id="现代操作系统的特点"><a class="markdownIt-Anchor" href="#现代操作系统的特点"></a> 现代操作系统的特点</h3>
<ul>
<li>微内核结构
<ul>
<li>只给内核分配最基本的功能，可简化实现，提供灵活性</li>
</ul>
</li>
<li>多线程
<ul>
<li>把执行一个应用程序的进程划分成可以同时运行的多个线程。提高程序的执行效率。</li>
</ul>
</li>
<li>对称多处理
<ul>
<li>有多个处理器共享同一个主存储器和I/O设备，可以执行相同的功能。提高并行性、可靠性</li>
</ul>
</li>
<li>分布式操作系统</li>
<li>面向对象设计
<ul>
<li>提高模块独立性，便于扩展</li>
</ul>
</li>
</ul>
<h2 id="操作系统实例"><a class="markdownIt-Anchor" href="#操作系统实例"></a> 操作系统实例</h2>
<h3 id="目前常用的操作系统"><a class="markdownIt-Anchor" href="#目前常用的操作系统"></a> 目前常用的操作系统</h3>
<ul>
<li>微软Windows操作系统
<ul>
<li>1983年10月，PC机竞争厂家的图形界面相关产品上市</li>
<li>面对市场压力，比尔.盖茨在1983年11月10日宣布推出Windows操作系统</li>
<li>然而宣布容易，交货就不简单了，Windows交货期的灾难，成了当年计算机界的笑柄</li>
<li>直到1985年11月20日，Windows 1.0才正式上市</li>
<li>Windows的历史记录
<ul>
<li>Windows在当时微软历史上创了几个记录：延迟交货次数最多，投入开发人员最多，开发时间最长，更换主管人员最多</li>
<li>不过几年之后，Windows终于创造了销售成绩最佳的历史记录</li>
<li>1992年4月，推出Windows 3.1, 1993年5月，发表Windows NT</li>
<li>Windows 95，Windows CE，Windows 98，Windows 2000，Windows XP,.net</li>
<li>个人计算机采用Windows占90％以上，微软公司成了垄断PC行业的同义词</li>
</ul>
</li>
</ul>
</li>
<li>UNIX
<ul>
<li>UNIX是现代操作系统的代表。Unix运行时的安全性、可靠性以及强大的计算能力赢得广大用户的信赖</li>
<li>促使UNIX系统成功的因素：</li>
<li>首先，由于UNIX是用C语言编写，因此它是可移植的，UNIX 是世界上唯一能在笔记本计算机、PC机、工作站直至巨型机上运行的操作系统</li>
<li>第二，系统源代码非常有效，系统容易适应特殊的需求</li>
<li>最后，它是一个良好的、通用的、多用户、多任务、分时操作系统</li>
<li>UNIX系统的特点
<ul>
<li>字符用户界面和图形用户界面GUI(X Window)。</li>
<li>抢先式多任务，多线程。支持动态链接。支持对称式多处理。</li>
<li>虚拟存储：段页式，有存储保护。</li>
<li>文件系统：多级目录，文件卷可以在子目录下动态装卸。无文件属性，可有别名。</li>
<li>采用设备文件的形式（读写，参数控制）。设备驱动程序修改后需要重新编译连接生成内核。</li>
<li>支持多种硬件平台。</li>
<li>易移植：主要代码用C语言写成；</li>
<li>变种很多，很难标准化。</li>
</ul>
</li>
</ul>
</li>
<li>IBM大型计算机操作系统OS/390
<ul>
<li>90年代末期，电子商务发展刺激对计算能力的要求，导致大型机市场的再度升温</li>
<li>三十年的改进,IBM OS/390已成为有高可靠性、可扩展性、及安全可用性的现代大型计算机系统</li>
<li>支持UNIX 95标准，UNIX应用程序可在IBM OS/390上运行</li>
<li>同时还可继续运行OS/390应用程序，包括OS/370上开发的应用程序</li>
<li>包括TCP/IP的多种通信协议，具有高网络安全性</li>
<li>采用面向对象程序设计、并行处理、分布式处理以及客户机/服务器技术，具有较强的互操作性、可移植性与可扩展性</li>
<li>在PC机时代，人们曾经估计大型计算机会衰亡</li>
<li>IBM S/390是大型计算机复活的一个典型</li>
</ul>
</li>
<li>Linux
<ul>
<li>1990年秋天，Linus在芬兰首都赫尔辛基大学学习操作系统课程，因为上机需要排队等待，Linus买了台PC机，开发了第一个程序，程序包括两个进程，向屏幕上写字母，然后用定时器来切换进程</li>
<li>编写了从调制解调器上接发信息的程序以及显示器、键盘和调制解调器的驱动程序</li>
<li>然后写了磁盘驱动程序，文件系统，一旦有了进程切换、文件系统和设备驱动程序，当然就拥有了一个操作系统原型，或者至少是它的一个内核</li>
<li>Linux就以这样极其古怪但也极其自然式问世</li>
<li>Linux是一个免费的操作系统，用户可以免费获得其源代码，并能够随意修改。它是在共用许可证GPL（General Public License）保护下的自由软件</li>
<li>Linux具有许多Unix系统的功能和特点，能够兼容Unix，但无需支付Unix高额的费用。</li>
<li>Linux的应用广泛：Sony最新的PS2游戏机采用Linux作为系统软件。著名的电影《泰坦尼克号》的数字技术合成工作就是利用100多台Linux服务器来完成的。</li>
</ul>
</li>
</ul>
<h3 id="操作系统领域中新的操作系统"><a class="markdownIt-Anchor" href="#操作系统领域中新的操作系统"></a> 操作系统领域中新的操作系统</h3>
<ul>
<li>有线电视机顶盒领域， PowerTV</li>
<li>移动通信领域，EPOC</li>
<li>掌上计算机领域，Palm OS</li>
<li>数字影像领域， Digita</li>
</ul>
<h3 id="研究中的新的操作系统"><a class="markdownIt-Anchor" href="#研究中的新的操作系统"></a> 研究中的新的操作系统</h3>
<ul>
<li>哈佛大学的VINO，使应用得以重用内核构件</li>
<li>犹他州大学的OSKit，提供构造操作系统所需的基础构件，也提供高层次构件。OSKit可用来构造新的OS</li>
<li>MIT Exokernel,该系统只有一个极小的核。系统抽象通过Library Operating System完成</li>
<li>NASA空间飞行中心(GSFC)研制Beowulf项目开始于1994年，用商业化的微型计算机，Linux和以太网等构造集群。已有世界各地的约六十个大学和研究机构在使用</li>
<li>加州大学伯克利分校NOW集群操作系统，100台Ultra SPARC-I处理机集群，排名于世界最快的200台超级计算机之内</li>
</ul>
<h3 id="国内操作系统的研制状况"><a class="markdownIt-Anchor" href="#国内操作系统的研制状况"></a> 国内操作系统的研制状况</h3>
<ul>
<li>60年代末至70年代初
<ul>
<li>杨芙清院士主持</li>
<li>我国第一台百万次集成电路计算机（150）操作系统</li>
<li>支持多道程序运行，在石油勘探领域成功应用</li>
</ul>
</li>
<li>70年代中后期
<ul>
<li>杨芙清院士主持</li>
<li>我国第一个全部用高级语言书写的DJS240机操作系统DJS200/XT2</li>
<li>层次管程结构模型，PCM设计方法，活跃管程结构模式</li>
</ul>
</li>
<li>GX73多机实时操作系统（1978年）
<ul>
<li>国防科技大学，1980年装在“远望”-I 号航天测量船上，完成了向太平洋发射运载火箭、潜水艇水下发射的测控任务；完成了我国第一颗同步地球卫星的测控、定轨、控制任务</li>
</ul>
</li>
<li>银河”-1 YHOS巨型操作系统（1983年）国防科技大学，用于YH-1、YH-2超级计算机，用于我国的石油勘探、天气预报和核物理研究</li>
<li>COSIX v 1.X/2.0 国产UNIX类操作系统（国家八五、九五重点科技攻关成果，以中软为首，联合国内18个单位共同完成）</li>
<li>嵌入式操作系统Hopen（女娲计划）</li>
<li>Linux类操作系统</li>
</ul>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>扩展机/虚拟机：将覆盖了软件的机器称为扩充机器或虚拟机 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>操作系统</tag>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL | 0. MySQL安装教程</title>
    <url>/2020/04/23/mysql_0/</url>
    <content><![CDATA[<h1 id="为什么要安装mysql"><a class="markdownIt-Anchor" href="#为什么要安装mysql"></a> 为什么要安装MySQL</h1>
<p>这个学期开设了一门专业课，即数据库原理。现在学到<strong>第三章关系数据库标准语言SQL</strong>了。这门课程对这一部分有着操作实验的要求。因此老师要求我们安装一个SQL软件。我看了看我开始菜单里的<code>Access</code>，貌似人家也有着SQL语句可以用。<s>emmmm，不过老师不让用</s>因为好像得用<code>CLI</code>的SQL软件😂。</p>
<p>所以找一个别的SQL软件。也就是这个MySQL。<br />
无论是在<code>Windows</code>还是<code>Linux</code>我都尝试安装了一下MySQL。结果发现还是<code>Linux</code>环境下较为方便。</p>
<p>下文我会简单地说明分别在<code>Windows</code> <code>Linux</code>和<code>Mac OS</code>下安装MySQL的流程。</p>
<blockquote>
<p>命令行界面（英语：command-line interface，缩写：CLI）是在图形用户界面得到普及之前使用最为广泛的用户界面，它通常不支持鼠标，用户通过键盘输入指令，计算机接收到指令后，予以执行。也有人称之为字符用户界面（CUI）。<br />
通常认为，命令行界面（CLI）没有图形用户界面（GUI）那么方便用户操作。因为，命令行界面的软件通常需要用户记忆操作的命令，但是，由于其本身的特点，命令行界面要较图形用户界面节约计算机系统的资源。在熟记命令的前提下，使用命令行界面往往要较使用图形用户界面的操作速度要快。所以，图形用户界面的操作系统中，都保留着可选的命令行界面。</p>
</blockquote>
<h1 id="windows-篇"><a class="markdownIt-Anchor" href="#windows-篇"></a> Windows 篇</h1>
<h2 id="安装mysql"><a class="markdownIt-Anchor" href="#安装mysql"></a> 安装MySQL</h2>
<h3 id="下载安装包"><a class="markdownIt-Anchor" href="#下载安装包"></a> 下载安装包</h3>
<p>我使用的<code>Windows</code>版本是<code>Windows 10 Pro</code>，因此以<code>Windows 10 Pro</code>为例。<br />
首先前往MySQL的官网，<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">下载安装包</a>。<br />
如果官网打不开，或者访问比较慢，请继续往下阅读。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423125326.png" alt="" /></p>
<blockquote>
<p>上面的<code>MySQL Installer MSI</code>貌似是提供图形安装界面。但是我没试过。可能会简化安装流程。或许懒癌用户可以试试。</p>
</blockquote>
<p>如果从官网的下载速度比较缓慢的话，可以尝试一下从镜像站中下载。例如<a href="https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-8.0/" target="_blank" rel="noopener">清华大学开源软件镜像站</a><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423125945.png" alt="" /></p>
<p>下载完压缩包后，解压至你要安装的目录下。例如我选择的目录是下图。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423130345.png" alt="" /></p>
<h3 id="配置环境变量"><a class="markdownIt-Anchor" href="#配置环境变量"></a> 配置环境变量</h3>
<p>环境变量的配置比较重要，如果配置得不正确，会使得后面的步骤略麻烦。<br />
如果你不能完成配置该部分内容，可以选择跳过。<br />
后面部分的内容将<strong>基于你没有完成配置</strong>来进行，但是也会<strong>说明配置完成的做法</strong>。</p>
<ul>
<li>
<p>在此电脑上右击，选择<code>属性(R)</code><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423131224.png" alt="" /></p>
</li>
<li>
<p>选择高级系统设置<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423131300.png" alt="" /></p>
</li>
<li>
<p>选择<strong>高级-环境变量</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423131336.png" alt="" /></p>
</li>
<li>
<p>选择<strong>系统变量-新建</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423131425.png" alt="" /></p>
</li>
<li>
<p>变量名为 <code>MYSQL_HOME</code>，变量值为<code>D:\mysql\mysql-5.7.20-winx64</code>。值按你所安装的目录来决定。输入完毕后依次确定来完成配置。</p>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200428195351.png" alt="" /></p>
<ul>
<li>再编辑<code>Path</code>这个用户环境变量，新建文本，内容为<code>%MYSQL_HOME%\bin</code><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200428195512.png" alt="" /></li>
</ul>
<h3 id="开始安装"><a class="markdownIt-Anchor" href="#开始安装"></a> 开始安装</h3>
<p>按下开始菜单，键入<code>cmd</code>，选择以管理员身份运行。（其他<code>Shell</code>也可以，此处以<code>cmd</code>为例）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423130449.png" alt="" /></p>
<p>打不开这个页面的同学，可以在系统目录下找到<code>cmd.exe</code>。右键-以管理员身份运行。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423130615.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423130857.png" alt="" /></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">Microsoft Windows [版本 <span class="number">10</span>.<span class="number">0</span>.<span class="number">18362</span>.<span class="number">778</span>]</span><br><span class="line">(c) <span class="number">2019</span> Microsoft Corporation。保留所有权利。</span><br><span class="line"><span class="function">C:\<span class="title">WINDOWS</span>\<span class="title">system32</span>&gt;<span class="title">D</span>:</span></span><br><span class="line"><span class="function"><span class="title">D</span>:\&gt;<span class="title">cd</span> <span class="title">MySQL</span>\<span class="title">mysql</span>-8.0.19-<span class="title">winx64</span></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">MySQL</span>\<span class="title">mysql</span>-8.0.19-<span class="title">winx64</span>&gt;<span class="title">cd</span> <span class="title">bin</span></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">MySQL</span>\<span class="title">mysql</span>-8.0.19-<span class="title">winx64</span>\<span class="title">bin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果你是和我一样，安装在别的盘符下。先使用<code>D:</code>切换盘符。再使用<code>cd</code>命令切换目录至安装目录。再使用<code>cd</code>命令切换目录至<code>bin</code>目录。<br />
如果你的环境变量配置得是正确的，无须切换目录至<code>bin</code>目录。可以直接执行下面的内容。</p>
<p>键入命令 <code>mysqld --initialize-insecure --user=mysql</code>。<br />
有点长，可以复制粘贴或者利用<code>Tab</code>键的自动填充功能完成键入。</p>
<blockquote>
<p>PowerShell 用户需要改为 <code>.\mysqld</code> 才能执行 <code>mysqld</code><br />
在这条命令输入完毕后，会在安装目录下生成一个<code>data</code>文件夹。</p>
</blockquote>
<p>再键入<code>mysqld -install</code>命令即可完成安装。</p>
<h3 id="其他问题"><a class="markdownIt-Anchor" href="#其他问题"></a> 其他问题</h3>
<h4 id="提示缺少-vcruntime140dll"><a class="markdownIt-Anchor" href="#提示缺少-vcruntime140dll"></a> 提示缺少 VCRUNTIME140.dll</h4>
<p>这是C++应用的必要组件，<br />
在微软的官网下载安装程序，安装完毕再重新进行安装操作。<br />
请根据计算机的具体硬件配置来选择x64，ARM64或x86。<br />
可以在搜索引擎中直接搜索你的计算机的处理器型号来获取相关信息。<br />
获取处理器型号可以在此电脑上<code>右击-属性</code>中看到。<br />
<a href="https://visualstudio.microsoft.com/zh-hans/downloads/" target="_blank" rel="noopener">官方下载地址</a><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200428175628.png" alt="" /></p>
<h2 id="开启和关闭服务"><a class="markdownIt-Anchor" href="#开启和关闭服务"></a> 开启和关闭服务</h2>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="built_in">net</span> <span class="built_in">start</span> MySQL</span><br><span class="line"><span class="built_in">net</span> stop MySQL</span><br></pre></td></tr></table></figure>
<h2 id="登录mysql"><a class="markdownIt-Anchor" href="#登录mysql"></a> 登录MySQL</h2>
<p>在<code>bin</code>目录下使用指令<code>mysql -u root -p</code>即可登录。<br />
如果询问密码，直接回车即可。因为并没有设置密码。<br />
如果嫌每次打开/切换目录比较麻烦的话，可以在<code>bin</code>目录下创建一个文本文档，编辑其中内容为：</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200428180255.png" alt="" /><br />
然后将后缀改为<code>.cmd</code>。之后只需要运行这个批处理文件即可登录MySQL。<br />
之后你可以自行把这个批处理文件创建一个桌面快捷方式或改图标什么的。这里就不赘述了。<br />
<strong>如果你的环境变量配置的是正确的话，可以直接打开终端，键入<code>mysql -u root -p</code>，而不需要在<code>bin</code>目录下。</strong><br />
<strong>同时这个批处理文件也不一定要创建在<code>bin</code>目录下</strong><br />
至此，<code>Windows</code>的MySQL安装完毕。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423132724.png" alt="" /></p>
<h1 id="linux-篇"><a class="markdownIt-Anchor" href="#linux-篇"></a> Linux 篇</h1>
<h2 id="安装mysql-2"><a class="markdownIt-Anchor" href="#安装mysql-2"></a> 安装MySQL</h2>
<p>我使用的<code>Linux</code>发行版是<code>ubuntu 16.04</code>。因此以<code>ubuntu 16.04</code>为例。如果是<code>centos</code>则选择<code>Yum</code>仓库。同理，如果是其他发行版，使用对应仓库。<br />
执行下列三条语句即可完成安装。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br><span class="line">sudo apt install mysql-client</span><br><span class="line">sudo apt install libmysqlclient-dev</span><br></pre></td></tr></table></figure>
<p>安装时，会出现一个图形界面要求你设置一个密码。键入密码并按下回车键。<br />
安装完毕后，可以用下面这条指令进行检验。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo netstat -tap | grep mysql</span><br></pre></td></tr></table></figure>
<p>上述指令实现的效果是，在网络连接状态中，寻找和mysql相关的连接。<br />
<code>|</code>符号是<strong>管道</strong>，我会在日后的<a href="/tags/Linux/">Linux入门</a>中提及。</p>
<ul>
<li><code>netstat</code>查看网络相关信息
<ul>
<li><code>a</code>显示所有选项，默认不显示LISTEN相关</li>
<li><code>t</code>仅显示TCP相关选项</li>
<li><code>u</code>仅显示UDP相关选项</li>
<li><code>n</code>拒绝显示别名，能显示数字的全部转化成数字。</li>
<li><code>l</code>仅列出有在LISTEN的服务状态</li>
<li><code>p</code>显示建立相关链接的程序名</li>
<li><code>r</code>显示路由信息，路由表</li>
<li><code>e</code>显示扩展信息，例如uid等</li>
<li><code>s</code>按各个协议进行统计</li>
<li><code>c</code>每隔一个固定时间，执行该netstat命令。</li>
<li>提示：LISTEN和LISTENING的状态只有用<code>-a</code>或者<code>-l</code>才能看到。</li>
</ul>
</li>
</ul>
<p>因为MySQL安装完成后默认是启动的，所以出现类似的如下信息即为安装成功。<code>6580</code>是<code>PID</code>，无需和我一致。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423120349.png" alt="" /></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zorua@zorua-ubuntu:~$ sudo netstat -tap | grep mysql</span><br><span class="line">[sudo] password for zorua: </span><br><span class="line">tcp        0      0 localhost:mysql         *:*                     LISTEN      6580&#x2F;mysqld</span><br></pre></td></tr></table></figure>
<h2 id="开启和关闭服务-2"><a class="markdownIt-Anchor" href="#开启和关闭服务-2"></a> 开启和关闭服务</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service mysql start</span><br><span class="line">service mysql stop</span><br><span class="line">service mysql restart</span><br></pre></td></tr></table></figure>
<p>上面三条指令分别是，开启/关闭/重启。<br />
验证服务的开启与否同样也可以使用上面的<code>sudo netstat -tap | grep mysql</code>。</p>
<h2 id="登录mysql-2"><a class="markdownIt-Anchor" href="#登录mysql-2"></a> 登录MySQL</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<ul>
<li><code>u</code>是<code>username</code></li>
<li><code>p</code>是<code>password</code></li>
</ul>
<p>使用这条命令后，会请求用户键入密码。密码就是在安装时设置的那个。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423124405.png" alt="" /></p>
<p>然后就进入了MySQL Shell。<br />
至此 MySQL 安装完成。</p>
<h2 id="安装命令行工具"><a class="markdownIt-Anchor" href="#安装命令行工具"></a> 安装命令行工具</h2>
<p>为了更好的使用MySQL，~~我实在是受不了没有自动补全功能，~~可以安装命令行工具MyCli</p>
<h1 id="mac-os篇"><a class="markdownIt-Anchor" href="#mac-os篇"></a> Mac OS篇</h1>
<p><s>我没得苹果家的电脑，写不了教程辽。</s><br />
<s>好心人可以捐一台给我嗷</s></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
        <tag>SQL</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络 | 2. 物理层</title>
    <url>/2020/04/20/network_1/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>物理层
<ul>
<li>物理层的基本概念
<ul>
<li>物理层的主要任务</li>
</ul>
</li>
<li>数据通信的基础知识
<ul>
<li>数据通信系统的模型
<ul>
<li>常用术语</li>
</ul>
</li>
<li>有关信道的几个基本概念
<ul>
<li>常用编码方式</li>
<li>基本的带通调制方法
<ul>
<li>正交振幅调制 QAM (Quadrature Amplitude Modulation)</li>
</ul>
</li>
</ul>
</li>
<li>信道的极限容量
<ul>
<li>信道能够通过的频率范围</li>
<li>信噪比
<ul>
<li>香农公式</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>物理层下面的传输媒体
<ul>
<li>导引型传输媒体
<ul>
<li>双绞线
<ul>
<li>双绞线标准</li>
</ul>
</li>
<li>同轴电缆</li>
<li>光缆
<ul>
<li>光线在光纤中的折射</li>
<li>多模光纤与单模光纤</li>
<li>光纤通信中使用的光波的波段</li>
<li>光纤优点</li>
</ul>
</li>
</ul>
</li>
<li>非导引型传输媒体
<ul>
<li>无线局域网使用的 ISM 频段</li>
</ul>
</li>
</ul>
</li>
<li>信道复用技术
<ul>
<li>频分复用 FDM (Frequency Division Multiplexing)</li>
<li>时分复用TDM (Time Division Multiplexing)
<ul>
<li>时分复用可能会造成线路资源的浪费</li>
<li>统计时分复用 STDM  (Statistic TDM)</li>
</ul>
</li>
<li>波分复用 WDM(Wavelength Division Multiplexing)</li>
<li>码分复用 CDM  (Code Division Multiplexing)
<ul>
<li>码片序列(chip sequence)</li>
<li>码片序列实现了扩频</li>
<li>码分复用的重要特点</li>
<li>码片序列的正交关系</li>
</ul>
</li>
</ul>
</li>
<li>数字传输系统
<ul>
<li>旧的数字传输系统存在许多缺点</li>
<li>同步光纤网 SONET</li>
<li>同步数字系列 SDH</li>
<li>SONET / SDH 标准的意义</li>
</ul>
</li>
<li>宽带接入技术
<ul>
<li>ADSL技术
<ul>
<li>DSL 的几种类型</li>
<li>ADSL 的传输距离</li>
<li>ADSL 的特点</li>
<li>DMT 技术</li>
<li>ADSL 的数据率</li>
<li>ADSL 的组成</li>
<li>第二代ADSL</li>
</ul>
</li>
<li>光纤同轴混合网(HFC网)</li>
<li>HFC 网的主干线路采用光纤
<ul>
<li>每个家庭要安装一个用户接口盒</li>
<li>电缆调制解调器 (Cable Modem)</li>
</ul>
</li>
<li>FTTx技术
<ul>
<li>无源光网络 PON (Passive Optical Network) 的组成</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="物理层的基本概念"><a class="markdownIt-Anchor" href="#物理层的基本概念"></a> 物理层的基本概念</h1>
<ul>
<li>物理层考虑的是怎样才能在连接各种计算机的传输媒体上<strong>传输数据比特流</strong>，而<strong>不是指具体的传输媒体</strong>。</li>
<li>物理层的作用是要尽可能地<strong>屏蔽</strong>掉不同传输媒体和通信手段的差异。</li>
<li>用于物理层的协议也常称为物理层<strong>规程</strong> (procedure)。</li>
</ul>
<h2 id="物理层的主要任务"><a class="markdownIt-Anchor" href="#物理层的主要任务"></a> 物理层的主要任务</h2>
<blockquote>
<p>主要任务：确定与传输媒体的接口的一些特性。</p>
</blockquote>
<ul>
<li><strong>机械特性</strong> ：指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。</li>
<li><strong>电气特性</strong>：指明在接口电缆的各条线上出现的电压的范围。</li>
<li><strong>功能特性</strong>：指明某条线上出现的某一电平的电压的意义。</li>
<li><strong>过程特性</strong> ：指明对于不同功能的各种可能事件的出现顺序。</li>
</ul>
<h1 id="数据通信的基础知识"><a class="markdownIt-Anchor" href="#数据通信的基础知识"></a> 数据通信的基础知识</h1>
<h2 id="数据通信系统的模型"><a class="markdownIt-Anchor" href="#数据通信系统的模型"></a> 数据通信系统的模型</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420135626.png" alt="" /></p>
<h3 id="常用术语"><a class="markdownIt-Anchor" href="#常用术语"></a> 常用术语</h3>
<ul>
<li><strong>数据 (data)</strong> —— 运送消息的实体。</li>
<li><strong>信号 (signal)</strong> —— 数据的电气的或电磁的表现。</li>
<li><strong>模拟信号 (analogous signal)</strong> —— 代表消息的参数的取值是连续的。</li>
<li><strong>数字信号 (digital signal)</strong> —— 代表消息的参数的取值是离散的。</li>
<li><strong>码元 (code)</strong> —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。</li>
</ul>
<h2 id="有关信道的几个基本概念"><a class="markdownIt-Anchor" href="#有关信道的几个基本概念"></a> 有关信道的几个基本概念</h2>
<ul>
<li><strong>信道</strong> —— 一般用来表示向某一个方向传送信息的媒体。</li>
<li><strong>单向通信（单工通信</strong>）——只能有一个方向的通信而没有反方向的交互。</li>
<li><strong>双向交替通信（半双工通信）</strong>——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。</li>
<li><strong>双向同时通信（全双工通信）</strong>——通信的双方可以同时发送和接收信息。</li>
<li><strong>基带信号（即基本频带信号）</strong>—— 来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。
<ul>
<li>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行<strong>调制</strong>  (modulation)。</li>
</ul>
</li>
<li><strong>调制</strong>分为两大类：
<ul>
<li><strong>基带调制</strong>：仅对基带信号的波形进行变换，使它能够与信道特性相适应。<strong>变换后的信号仍然是基带信号</strong>。把这种过程称为<strong>编码</strong> (coding)。</li>
<li><strong>带通调制</strong>：使用<strong>载波</strong> (carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并<strong>转换为模拟信号</strong>，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道） 。</li>
<li><strong>带通信号</strong> ：经过载波调制后的信号。</li>
</ul>
</li>
</ul>
<h3 id="常用编码方式"><a class="markdownIt-Anchor" href="#常用编码方式"></a> 常用编码方式</h3>
<ul>
<li><strong>不归零制</strong>：正电平代表 1，负电平代表 0。</li>
<li><strong>归零制</strong>：正脉冲代表 1，负脉冲代表 0。</li>
<li><strong>曼彻斯特编码</strong>：位周期中心的向上跳变代表 0，位周期中心的向下跳变代表 1。但也可反过来定义。</li>
<li><strong>差分曼彻斯特编码</strong>：在每一位的中心处始终都有跳变。位开始边界有跳变代表 0，而位开始边界没有跳变代表 1。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420140056.png" alt="" /></p>
<blockquote>
<ul>
<li>从信号波形中可以看出，曼彻斯特 (Manchester) 编码和差分曼彻斯特编码产生的信号频率比不归零制高。</li>
<li>从自同步能力来看，不归零制不能从信号波形本身中提取信号时钟频率（这叫做没有自同步能力），<strong>而曼彻斯特编码和差分曼彻斯特编码具有自同步能力。</strong></li>
</ul>
</blockquote>
<h3 id="基本的带通调制方法"><a class="markdownIt-Anchor" href="#基本的带通调制方法"></a> 基本的带通调制方法</h3>
<ul>
<li>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行调制 (modulation)。</li>
<li>最基本的二元制调制方法有以下几种：
<ol>
<li>调幅(AM)：载波的振幅随基带数字信号而变化。</li>
<li>调频(FM)：载波的频率随基带数字信号而变化。</li>
<li>调相(PM) ：载波的初始相位随基带数字信号而变化。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420140503.png" alt="" /></li>
</ol>
</li>
</ul>
<h4 id="正交振幅调制-qam-quadrature-amplitude-modulation"><a class="markdownIt-Anchor" href="#正交振幅调制-qam-quadrature-amplitude-modulation"></a> 正交振幅调制 QAM (Quadrature Amplitude Modulation)</h4>
<p>为了达到更高的信息传输速率，必须采用技术上更为复杂的多元制的振幅相位混合调制方法。<br />
例如：</p>
<ul>
<li>可供选择的相位有 12 种，而对于每一种相位有 1 或 2 种振幅可供选择。总共有 16 种组合，即 16 个码元。</li>
<li>由于 4 bit 编码共有 16 种不同的组合，因此这 16 个点中的每个点可对应于一种 4 bit 的编码。数据传输率可提高 4 倍。</li>
</ul>
<blockquote>
<p>不是码元越多越好。若每一个码元可表示的比特数越多，则在接收端进行解调时要正确识别每一种状态就越困难，出错率增加。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420140729.png" alt="" /></p>
</blockquote>
<h2 id="信道的极限容量"><a class="markdownIt-Anchor" href="#信道的极限容量"></a> 信道的极限容量</h2>
<ul>
<li>任何实际的信道都不是理想的，在传输信号时会产生各种失真以及带来多种干扰。</li>
<li>码元传输的速率越高，或信号传输的距离越远，或传输媒体质量越差，在信道的输出端的波形的失真就越严重。</li>
</ul>
<hr />
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420141036.png" alt="" /></p>
<hr />
<p>从概念上讲，限制码元在信道上的传输速率的因素有以下两个：</p>
<ul>
<li><strong>信道能够通过的频率范围</strong></li>
<li><strong>信噪比</strong></li>
</ul>
<h3 id="信道能够通过的频率范围"><a class="markdownIt-Anchor" href="#信道能够通过的频率范围"></a> 信道能够通过的频率范围</h3>
<ul>
<li>具体的信道所能通过的频率范围总是有限的。信号中的许多高频分量往往不能通过信道。</li>
<li>1924 年，奈奎斯特 (Nyquist) 就推导出了著名的<strong>奈氏准则</strong>。他给出了在假定的理想条件下，为了避免<strong>码间串扰</strong>，码元的传输速率的上限值。</li>
<li>在任何信道中，<strong>码元传输的速率是有上限的</strong>，否则就会出现<strong>码间串扰</strong>的问题，使接收端对码元的判决（即识别）成为不可能。</li>
</ul>
<blockquote>
<p>如果信道的频带越宽，也就是能够通过的信号高频分量越多，那么就可以用更高的速率传送码元而不出现码间串扰。</p>
</blockquote>
<h3 id="信噪比"><a class="markdownIt-Anchor" href="#信噪比"></a> 信噪比</h3>
<ul>
<li>噪声存在于所有的电子设备和通信信道中。</li>
<li>噪声是随机产生的，它的瞬时值有时会很大。因此噪声会使接收端对码元的判决产生错误。</li>
<li>但噪声的影响是相对的。如果信号相对较强，那么噪声的影响就相对较小。</li>
<li>信噪比就是<strong>信号的平均功率和噪声的平均功率之比</strong>。常记为S/N，并用分贝 (dB) 作为度量单位。即：
<ul>
<li><strong>信噪比</strong>(dB) = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>10</mn></msub><mrow><mo stretchy="false">(</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><mo stretchy="false">(</mo><mi>d</mi><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">10 \log_{10}{(S/N)} (dB)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
<li>例如，当S/N=10时，信噪比为10dB，而当S/N=1000时，信噪比为30dB。</li>
</ul>
<h4 id="香农公式"><a class="markdownIt-Anchor" href="#香农公式"></a> 香农公式</h4>
<ul>
<li>1984年，香农 (Shannon) 用信息论的理论推导出了带宽受限且有高斯白噪声干扰的信道的<strong>极限、无差错</strong>的信息传输速率（香农公式）。</li>
<li>信道的极限信息传输速率 C 可表达为：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>=</mo><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C = W log_2(1+S/N)(bit/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span>
<ul>
<li>其中：
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span> 为信道的带宽（以 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">Hz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span> 为单位）；</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span> 为信道内所传信号的平均功率；</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> 为信道内部的高斯噪声功率。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>香农公式表明：</strong></p>
<ul>
<li>信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。</li>
<li><strong>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。</strong></li>
<li><strong>若信道带宽 W 或信噪比 S/N 没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率 C 也就没有上限。</strong></li>
<li>实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。</li>
</ul>
<blockquote>
<p><strong>注意：</strong></p>
<ul>
<li>对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，那么还有办法提高信息的传输速率。</li>
<li>这就是：<strong>用编码的方法让每一个码元携带更多比特的信息量。</strong></li>
</ul>
</blockquote>
<h1 id="物理层下面的传输媒体"><a class="markdownIt-Anchor" href="#物理层下面的传输媒体"></a> 物理层下面的传输媒体</h1>
<ul>
<li><strong>传输媒体也称为传输介质或传输媒介</strong>，它就是数据传输系统中在发送器和接收器之间的物理通路。</li>
<li>传输媒体可分为两大类，即<strong>导引型传输媒体和非导引型传输媒体</strong>。</li>
<li><strong>在导引型传输媒体中</strong>，电磁波被导引沿着固体媒体（铜线或光纤）传播。</li>
<li><strong>非导引型传输媒体就是指自由空间</strong>。在非导引型传输媒体中，电磁波的传输常称为无线传输。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420142101.png" alt="" /></p>
<h2 id="导引型传输媒体"><a class="markdownIt-Anchor" href="#导引型传输媒体"></a> 导引型传输媒体</h2>
<h3 id="双绞线"><a class="markdownIt-Anchor" href="#双绞线"></a> 双绞线</h3>
<ul>
<li>最常用的传输媒体。</li>
<li>模拟传输和数字传输都可以使用双绞线，其通信距离一般为几到十几公里。</li>
<li><strong>屏蔽双绞线 STP</strong> (Shielded Twisted Pair)</li>
<li>带金属屏蔽层</li>
<li><strong>无屏蔽双绞线 UTP</strong> (Unshielded Twisted Pair)</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420142417.png" alt="" /></p>
<h4 id="双绞线标准"><a class="markdownIt-Anchor" href="#双绞线标准"></a> 双绞线标准</h4>
<ul>
<li>1991 年，美国电子工业协会 EIA 和电信行业协会联合发布了一个用于室内传送数据的无屏蔽双绞线和屏蔽双绞线的标准 <strong>EIA/TIA-568</strong>。</li>
<li>1995 年将布线标准更新为 <strong>EIA/TIA-568-A</strong>。</li>
<li>此标准规定了 <strong>5 个种类的 UTP 标准</strong>（从 1 类线到 5 类线）。</li>
<li><strong>对传送数据来说，现在最常用的 UTP 是5类线（Category 5 或 CAT5）。</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420142522.png" alt="" /></li>
</ul>
<h3 id="同轴电缆"><a class="markdownIt-Anchor" href="#同轴电缆"></a> 同轴电缆</h3>
<ul>
<li>同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。</li>
<li>同轴电缆的带宽取决于电缆的质量。</li>
<li><strong>50 Ω 同轴电缆 —— LAN / 数字传输常用</strong></li>
<li><strong>75 Ω 同轴电缆 —— 有线电视 / 模拟传输常用</strong></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420142750.png" alt="" /></p>
<h3 id="光缆"><a class="markdownIt-Anchor" href="#光缆"></a> 光缆</h3>
<ul>
<li>光纤是光纤通信的传输媒体。</li>
<li>由于可见光的频率非常高，约为 108 MHz 的量级，因此一个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽。</li>
</ul>
<h4 id="光线在光纤中的折射"><a class="markdownIt-Anchor" href="#光线在光纤中的折射"></a> 光线在光纤中的折射</h4>
<blockquote>
<p>当光线从高折射率的媒体射向低折射率的媒体时，其折射角将大于入射角。因此，如果入射角足够大，就会出现全反射，光也就沿着光纤传输下去。</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420142928.png" alt="" /></p>
<h4 id="多模光纤与单模光纤"><a class="markdownIt-Anchor" href="#多模光纤与单模光纤"></a> 多模光纤与单模光纤</h4>
<ul>
<li>多模光纤<br />
可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为<strong>多模光纤</strong>。</li>
<li>单模光纤<br />
若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为<strong>单模光纤</strong>。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420143047.png" alt="" /></p>
<h4 id="光纤通信中使用的光波的波段"><a class="markdownIt-Anchor" href="#光纤通信中使用的光波的波段"></a> 光纤通信中使用的光波的波段</h4>
<ul>
<li>常用的三个波段的中心分别位于<strong>850 nm, 1300 nm 和 1550 nm</strong>。</li>
<li>所有这三个波段都具有 <strong>25000~30000 GHz 的带宽</strong>，可见光纤的通信容量非常大。</li>
</ul>
<h4 id="光纤优点"><a class="markdownIt-Anchor" href="#光纤优点"></a> 光纤优点</h4>
<ol>
<li>通信容量非常大。</li>
<li>传输损耗小，中继距离长。</li>
<li>抗雷电和电磁干扰性能好。</li>
<li>无串音干扰，保密性好。</li>
<li>体积小，重量轻。</li>
</ol>
<h2 id="非导引型传输媒体"><a class="markdownIt-Anchor" href="#非导引型传输媒体"></a> 非导引型传输媒体</h2>
<ul>
<li>将自由空间称为“非导引型传输媒体”。</li>
<li>无线传输所使用的频段很广。</li>
<li>短波通信（即高频通信）主要是靠电离层的反射，但短波信道的通信质量较差，传输速率低。</li>
<li>微波在空间主要是直线传播。</li>
<li>传统微波通信有两种方式：
<ol>
<li>地面微波接力通信</li>
<li>卫星通信</li>
</ol>
</li>
</ul>
<h3 id="无线局域网使用的-ism-频段"><a class="markdownIt-Anchor" href="#无线局域网使用的-ism-频段"></a> 无线局域网使用的 ISM 频段</h3>
<p>要使用某一段无线电频谱进行通信，通常必须得到本国政府有关无线电频谱管理机构的许可证。但是，也有一些无线电频段是可以自由使用的。例如：ISM。各国的 ISM 标准有可能略有差别。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420143354.png" alt="" /></p>
<h1 id="信道复用技术"><a class="markdownIt-Anchor" href="#信道复用技术"></a> 信道复用技术</h1>
<ul>
<li><strong>复用</strong> (multiplexing) 是通信技术中的基本概念。</li>
<li>它允许用户使用一个共享信道进行通信，降低成本，提高利用率。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420152729.png" alt="" /></li>
</ul>
<h2 id="频分复用-fdm-frequency-division-multiplexing"><a class="markdownIt-Anchor" href="#频分复用-fdm-frequency-division-multiplexing"></a> 频分复用 FDM (Frequency Division Multiplexing)</h2>
<ul>
<li>将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。</li>
<li><strong>频分复用</strong>的所有用户在同样的时间<strong>占用不同的带宽资源</strong>（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420152834.png" alt="" /></li>
</ul>
<h2 id="时分复用tdm-time-division-multiplexing"><a class="markdownIt-Anchor" href="#时分复用tdm-time-division-multiplexing"></a> 时分复用TDM (Time Division Multiplexing)</h2>
<ul>
<li><strong>时分复用</strong>则是将时间划分为一段段等长的<strong>时分复用帧</strong>（TDM帧）。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。</li>
<li>每一个用户所占用的时隙是<strong>周期性地出现</strong>（其周期就是TDM帧的长度）的。</li>
<li>TDM 信号也称为<strong>等时</strong> (isochronous) 信号。</li>
<li>时分复用的所有用户<strong>在不同的时间</strong>占用<strong>同样的频带宽度</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420153337.png" alt="" /></li>
</ul>
<h3 id="时分复用可能会造成线路资源的浪费"><a class="markdownIt-Anchor" href="#时分复用可能会造成线路资源的浪费"></a> 时分复用可能会造成线路资源的浪费</h3>
<p>使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420153408.png" alt="" /></p>
<h3 id="统计时分复用-stdm-statistic-tdm"><a class="markdownIt-Anchor" href="#统计时分复用-stdm-statistic-tdm"></a> 统计时分复用 STDM  (Statistic TDM)</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420153459.png" alt="" /></p>
<h2 id="波分复用-wdmwavelength-division-multiplexing"><a class="markdownIt-Anchor" href="#波分复用-wdmwavelength-division-multiplexing"></a> 波分复用 WDM(Wavelength Division Multiplexing)</h2>
<p>波分复用就是<strong>光的频分复用</strong>。使用一根光纤来同时传输多个光载波信号。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420153558.png" alt="" /></p>
<h2 id="码分复用-cdm-code-division-multiplexing"><a class="markdownIt-Anchor" href="#码分复用-cdm-code-division-multiplexing"></a> 码分复用 CDM  (Code Division Multiplexing)</h2>
<ul>
<li>常用的名词是<strong>码分多址</strong> CDMA (Code Division Multiple Access)。</li>
<li>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。</li>
<li>这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。</li>
</ul>
<h3 id="码片序列chip-sequence"><a class="markdownIt-Anchor" href="#码片序列chip-sequence"></a> 码片序列(chip sequence)</h3>
<ul>
<li>每一个比特时间划分为 m 个短的间隔，称为<strong>码片</strong> (chip)。</li>
<li>每个站被指派一个唯一的 m bit <strong>码片序列</strong>。
<ol>
<li><strong>如发送比特 1，则发送自己的 m bit 码片序列。</strong></li>
<li><strong>如发送比特 0，则发送该码片序列的二进制反码。</strong></li>
</ol>
</li>
<li>例如，S 站的 8 bit 码片序列是 00011011。
<ol>
<li><strong>发送比特 1 时，就发送序列 00011011</strong>，</li>
<li><strong>发送比特 0 时，就发送序列 11100100</strong>。</li>
</ol>
</li>
<li>S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1)</li>
</ul>
<h3 id="码片序列实现了扩频"><a class="markdownIt-Anchor" href="#码片序列实现了扩频"></a> 码片序列实现了扩频</h3>
<ul>
<li>假定S站要发送信息的数据率为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">b bit/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span>。由于每一个比特要转换成 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span> 个比特的码片，因此S站实际上发送的数据率提高到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>b</mi><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">mb bit/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">b</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span>，同时S站所占用的频带宽度也提高到原来数值的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span> 倍。</li>
<li>这种通信方式是<strong>扩频</strong>(spread spectrum)通信中的一种。</li>
<li>扩频通信通常有两大类：
<ol>
<li>一种是<strong>直接序列扩频DSSS</strong>(Direct Sequence Spread Spectrum)，如上面讲的使用码片序列就是这一类。</li>
<li>另一种是<strong>跳频扩频FHSS</strong> (Frequency Hopping Spread Spectrum)。</li>
</ol>
</li>
</ul>
<h3 id="码分复用的重要特点"><a class="markdownIt-Anchor" href="#码分复用的重要特点"></a> 码分复用的重要特点</h3>
<ul>
<li>每个站分配的码片序列不仅<strong>必须各不相同</strong>，并且还<strong>必须互相正交</strong> (orthogonal)。</li>
<li>在实用的系统中是使用<strong>伪随机码序列</strong>。</li>
</ul>
<h3 id="码片序列的正交关系"><a class="markdownIt-Anchor" href="#码片序列的正交关系"></a> 码片序列的正交关系</h3>
<ul>
<li>令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量。</li>
<li>两个不同站的码片序列正交，就是向量 S 和T 的规格化<strong>内积</strong> (inner product) 等于 0：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo separator="true">⋅</mo><mi>T</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><mi>m</mi></mfrac></mstyle><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>S</mi><mi>i</mi></msub><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S·T=\dfrac{1}{m} \sum\limits_{i=1}^{m}S_iT_i=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.329066em;vertical-align:-0.9776689999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3513970000000004em;"><span style="top:-2.122331em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0000050000000003em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.950005em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9776689999999999em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></li>
<li>任何一个码片向量和该码片向量自己的规格化内积都是 1 。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo separator="true">⋅</mo><mi>S</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><mi>m</mi></mfrac></mstyle><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>S</mi><mi>i</mi></msub><mo separator="true">⋅</mo><msub><mi>S</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S·S =\dfrac{1}{m} \sum\limits_{i=1}^{m}S_i·S_i=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.329066em;vertical-align:-0.9776689999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3513970000000004em;"><span style="top:-2.122331em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0000050000000003em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.950005em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9776689999999999em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>一个码片向量和该码片反码的向量的规格化内积值是 –1。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420154453.png" alt="" /></li>
</ul>
<h1 id="数字传输系统"><a class="markdownIt-Anchor" href="#数字传输系统"></a> 数字传输系统</h1>
<ul>
<li>在早期电话网中，从市话局到用户电话机的用户线是采用最廉价的双绞线电缆，而长途干线采用的是频分复用 FDM 的模拟传输方式。</li>
<li><strong>与模拟通信相比，数字通信无论是在传输质量上还是经济上都有明显的优势。</strong></li>
<li>目前，长途干线大都采用时分复用 PCM 的数字传输方式。</li>
<li><strong>脉码调制 PCM</strong> 体制最初是为了在电话局之间的中继线上传送多路的电话。</li>
<li>由于历史上的原因，PCM 有两个互不兼容的国际标准：
<ol>
<li>北美的 24 路 PCM（简称为 T1）</li>
<li>欧洲的 30 路 PCM（简称为 E1）</li>
</ol>
</li>
<li>我国采用的是欧洲的 E1 标准。</li>
<li>E1 的速率是 2.048 Mbit/s，而 T1 的速率是 1.544 Mbit/s。</li>
<li>当需要有更高的数据率时，可采用复用的方法。</li>
</ul>
<h2 id="旧的数字传输系统存在许多缺点"><a class="markdownIt-Anchor" href="#旧的数字传输系统存在许多缺点"></a> 旧的数字传输系统存在许多缺点</h2>
<ul>
<li>最主要的是以下两个方面：</li>
<li><strong>速率标准不统一</strong>
<ul>
<li>如果不对高次群的数字传输速率进行标准化，国际范围的<strong>基于光纤高速数据传输就很难实现</strong>。</li>
</ul>
</li>
<li><strong>不是同步传输</strong>
<ol>
<li>在过去相当长的时间，为了节约经费，各国的数字网主要采用准同步方式。</li>
<li>当数据传输的速率很高时，<strong>收发双方的时钟同步就成为很大的问题</strong>。</li>
</ol>
</li>
</ul>
<h2 id="同步光纤网-sonet"><a class="markdownIt-Anchor" href="#同步光纤网-sonet"></a> 同步光纤网 SONET</h2>
<ul>
<li><strong>同步光纤网</strong> SONET (Synchronous Optical Network)  的各级时钟都来自一个非常精确的主时钟。</li>
<li>SONET 为光纤传输系统定义了同步传输的线路速率等级结构
<ol>
<li>对电信信号称为第 1 级<strong>同步传送信号</strong> STS-1 (Synchronous Transport Signal)，其传输速率是 51.84 Mbit/s。</li>
<li>对光信号则称为第 1 级<strong>光载波</strong> OC-1 (OC 表示Optical Carrier)。</li>
</ol>
</li>
<li>现已定义了从 51.84 Mbit/s (即OC-1) 一直到 9953.280 Mbit/s (即 OC-192/STS-192) 的标准。</li>
</ul>
<h2 id="同步数字系列-sdh"><a class="markdownIt-Anchor" href="#同步数字系列-sdh"></a> 同步数字系列 SDH</h2>
<ul>
<li>ITU-T 以美国标准 SONET 为基础，制订出国际标准<strong>同步数字系列</strong> SDH (Synchronous Digital Hierarchy)。</li>
<li>一般可认为 SDH 与 SONET 是同义词。</li>
<li><strong>其主要不同点是</strong>：SDH的基本速率为155.52 Mbit/s，称为第 1 级<strong>同步传递模块</strong> (Synchronous Transfer Module)，即 STM-1，相当于 SONET 体系中的 OC-3 速率。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420155000.png" alt="" /></p>
<h2 id="sonet-sdh-标准的意义"><a class="markdownIt-Anchor" href="#sonet-sdh-标准的意义"></a> SONET / SDH 标准的意义</h2>
<ul>
<li>使不同的数字传输体制在 STM-1 等级上获得了统一。</li>
<li>第一次真正实现了数字传输体制上的世界性标准。</li>
<li>已成为公认的新一代理想的传输网体制。</li>
<li>SDH 标准也适合于微波和卫星传输的技术体制。</li>
</ul>
<h1 id="宽带接入技术"><a class="markdownIt-Anchor" href="#宽带接入技术"></a> 宽带接入技术</h1>
<ul>
<li>用户要连接到互联网，必须先连接到某个ISP。</li>
<li>在互联网的发展初期，用户都是利用电话的用户线通过调制解调器连接到ISP的，电话用户线接入到互联网的速率最高仅达到56 kbit/s。</li>
<li>美国联邦通信委员会FCC原来认为只要双向速率之和超过200 kbit/s 就是<strong>宽带</strong>。但 2015 年重新定义为：
<ul>
<li>宽带下行速率要达到 25 Mbit/s</li>
<li>宽带上行速率要达到 3 Mbit/s</li>
</ul>
</li>
<li>从宽带接入的媒体来看，可以划分为两大类：
<ol>
<li>有线宽带接入</li>
<li>无线宽带接入</li>
</ol>
</li>
</ul>
<p>下面讨论有线的宽带接入。</p>
<h2 id="adsl技术"><a class="markdownIt-Anchor" href="#adsl技术"></a> ADSL技术</h2>
<ul>
<li><strong>非对称数字用户线 ADSL</strong> (Asymmetric Digital Subscriber Line) 技术就是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。</li>
<li>标准模拟电话信号的频带被限制在 300~3400 Hz 的范围内，但用户线本身实际可通过的信号频率仍然超过 1 MHz。</li>
<li>ADSL 技术就把 0~4 kHz 低端频谱留给传统电话使用，而<strong>把原来没有被利用的高端频谱留给用户上网使用</strong>。</li>
<li>DSL 就是<strong>数字用户线</strong> (Digital Subscriber Line) 的缩写。</li>
</ul>
<h3 id="dsl-的几种类型"><a class="markdownIt-Anchor" href="#dsl-的几种类型"></a> DSL 的几种类型</h3>
<ul>
<li><strong>ADSL</strong> (Asymmetric Digital Subscriber Line)：非对称数字用户线</li>
<li><strong>HDSL</strong> (High speed DSL)：高速数字用户线</li>
<li><strong>SDSL</strong> (Single-line DSL)：1 对线的数字用户线</li>
<li><strong>VDSL</strong> (Very high speed DSL)：甚高速数字用户线</li>
<li><strong>DSL</strong> (Digital Subscriber Line) ：数字用户线</li>
<li><strong>RADSL</strong> (Rate-Adaptive DSL)：速率自适应 DSL，是 ADSL 的一个子集，可自动调节线路速率）</li>
</ul>
<h3 id="adsl-的传输距离"><a class="markdownIt-Anchor" href="#adsl-的传输距离"></a> ADSL 的传输距离</h3>
<ul>
<li>ADSL 的传输距离取决于数据率和用户线的线径（用户线越细，信号传输时的衰减就越大）。</li>
<li>ADSL 所能得到的最高数据传输速率与实际的用户线上的信噪比密切相关。</li>
<li>例如：
<ol>
<li>0.5 毫米线径的用户线，传输速率为 1.5~2.0 Mbit/s 时可传送5.5公里，但当传输速率提高到 6.1 Mbit/s 时，传输距离就缩短为 3.7 公里。</li>
<li>如果把用户线的线径减小到 0.4 毫米，那么在 6.1 Mbit/s 的传输速率下就只能传送 2.7 公里。</li>
</ol>
</li>
</ul>
<h3 id="adsl-的特点"><a class="markdownIt-Anchor" href="#adsl-的特点"></a> ADSL 的特点</h3>
<ul>
<li>上行和下行带宽做成不对称的。
<ul>
<li>上行指从用户到 ISP，而下行指从 ISP 到用户。</li>
</ul>
</li>
<li>ADSL 在用户线（铜线）的两端各安装一个 <strong>ADSL 调制解调器</strong>。</li>
<li>我国目前采用的方案是<strong>离散多音调 DMT</strong> (Discrete Multi-Tone)调制技术。<br />
这里的“多音调”就是“<strong>多载波</strong>”或“<strong>多子信道</strong>”的意思。</li>
</ul>
<h3 id="dmt-技术"><a class="markdownIt-Anchor" href="#dmt-技术"></a> DMT 技术</h3>
<ul>
<li>DMT 调制技术采用<strong>频分复用</strong>的方法，把 40 kHz 以上一直到 1.1 MHz 的高端频谱划分为许多子信道，其中 25 个子信道用于上行信道，而 249 个子信道用于下行信道。</li>
<li>每个子信道占据 4 kHz 带宽（严格讲是 4.3125 kHz），并使用不同的载波（即不同的音调）进行数字调制。这种做法相当于在一对用户线上使用许多小的调制解调器<strong>并行地</strong>传送数据。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420160705.png" alt="" /></li>
</ul>
<h3 id="adsl-的数据率"><a class="markdownIt-Anchor" href="#adsl-的数据率"></a> ADSL 的数据率</h3>
<ul>
<li>由于用户线的具体条件往往相差很大（距离、线径、受到相邻用户线的干扰程度等都不同），<strong>因此 ADSL 采用自适应调制技术使用户线能够传送尽可能高的数据率。</strong></li>
<li>当 ADSL 启动时，用户线两端的 ADSL 调制解调器就测试可用的频率、各子信道受到的干扰情况，以及在每一个频率上测试信号的传输质量。</li>
<li><strong>ADSL 不能保证固定的数据率</strong>。对于质量很差的用户线甚至无法开通 ADSL。</li>
<li>通常下行数据率在32 kbit/s到6.4 Mbit/s之间，而上行数据率在 32 kbit/s 到 640 kbit/s 之间。</li>
</ul>
<h3 id="adsl-的组成"><a class="markdownIt-Anchor" href="#adsl-的组成"></a> ADSL 的组成</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420161927.png" alt="" /></p>
<h3 id="第二代adsl"><a class="markdownIt-Anchor" href="#第二代adsl"></a> 第二代ADSL</h3>
<ul>
<li>包括 ADSL2（G.992.3 和 G.992.4）和 ADSL2+（G.992.5）。</li>
<li>通过提高调制效率得到了<strong>更高的数据率</strong>。
<ol>
<li>要求至少应支持下行 8 Mbit/s、上行 800 kbit/s的速率。</li>
<li>ADSL2+ 则将频谱范围从 1.1 MHz 扩展至 2.2 MHz，下行速率可达 16 Mbit/s（最大传输速率可达 25 Mbit/s），而上行速率可达 800 kbit/s。</li>
</ol>
</li>
<li>采用了<strong>无缝速率自适应技术</strong> SRA (Seamless Rate Adaptation)，可在运营中不中断通信和不产生误码的情况下，自适应地调整数据率。</li>
<li>改善了线路质量评测和故障定位功能，这对提高网络的运行维护水平具有非常重要的意义。</li>
</ul>
<h2 id="光纤同轴混合网hfc网"><a class="markdownIt-Anchor" href="#光纤同轴混合网hfc网"></a> 光纤同轴混合网(HFC网)</h2>
<ul>
<li>HFC (Hybrid Fiber Coax) 网是在目前覆盖面很广的有线电视网 CATV 的基础上开发的一种居民宽带接入网。</li>
<li>HFC 网除可传送 CATV 外，还提供电话、数据和其他宽带交互型业务。</li>
<li>现有的 CATV 网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向传输。</li>
<li><strong>HFC 网对 CATV 网进行了改造。</strong></li>
</ul>
<h2 id="hfc-网的主干线路采用光纤"><a class="markdownIt-Anchor" href="#hfc-网的主干线路采用光纤"></a> HFC 网的主干线路采用光纤</h2>
<ul>
<li>HFC 网将原 CATV 网中的同轴电缆<strong>主干部分改换为光纤</strong>，并使用<strong>模拟光纤技术</strong>。</li>
<li>在模拟光纤中采用<strong>光的振幅调制AM</strong>，这比使用数字光纤更为经济。</li>
<li>模拟光纤从<strong>头端</strong>连接到<strong>光纤结点</strong> (fiber node)，即<strong>光分配结点</strong> ODN (Optical Distribution Node)。在光纤结点光信号被转换为电信号。在光纤结点以下就是同轴电缆。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420162753.png" alt="" /></li>
</ul>
<blockquote>
<p>HFC 网具有双向传输功能，扩展了传输频带<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420162852.png" alt="" /></p>
</blockquote>
<h3 id="每个家庭要安装一个用户接口盒"><a class="markdownIt-Anchor" href="#每个家庭要安装一个用户接口盒"></a> 每个家庭要安装一个用户接口盒</h3>
<ul>
<li><strong>用户接口盒 UIB</strong> (User Interface Box) 要提供<strong>三种连接</strong>，即：
<ol>
<li>使用同轴电缆连接到机顶盒 (set-top box)，然后再连接到用户的电视机。</li>
<li>使用双绞线连接到用户的电话机。</li>
<li>使用电缆调制解调器连接到用户的计算机。</li>
</ol>
</li>
</ul>
<h3 id="电缆调制解调器-cable-modem"><a class="markdownIt-Anchor" href="#电缆调制解调器-cable-modem"></a> 电缆调制解调器 (Cable Modem)</h3>
<ul>
<li><strong>电缆调制解调器</strong>是为 HFC 网而使用的调制解调器。</li>
<li>电缆调制解调器最大的特点就是传输速率高。
<ol>
<li>下行速率一般在 3 ~ 10 Mbit/s之间，最高可达 30 Mbit/s。</li>
<li>上行速率一般为 0.2 ~ 2 Mbit/s，最高可达 10 Mbit/s。</li>
</ol>
</li>
<li>电缆调制解调器比在普通电话线上使用的调制解调器要复杂得多，并且不是成对使用，而是只安装在用户端。</li>
</ul>
<h2 id="fttx技术"><a class="markdownIt-Anchor" href="#fttx技术"></a> FTTx技术</h2>
<ul>
<li>FTTx 是一种实现宽带居民接入网的方案，代表多种宽带光纤接入方式。</li>
<li>FTTx 表示 Fiber To The…（光纤到…），例如：
<ol>
<li><strong>光纤到户 FTTH</strong> (Fiber To The Home)：光纤一直铺设到用户家庭，可能是居民接入网最后的解决方法。</li>
<li><strong>光纤到大楼 FTTB</strong> (Fiber To The Building)：光纤进入大楼后就转换为电信号，然后用电缆或双绞线分配到各用户。</li>
<li><strong>光纤到路边 FTTC</strong> (Fiber To The Curb)：光纤铺到路边，从路边到各用户可使用星形结构双绞线作为传输媒体。</li>
</ol>
</li>
</ul>
<h3 id="无源光网络-pon-passive-optical-network-的组成"><a class="markdownIt-Anchor" href="#无源光网络-pon-passive-optical-network-的组成"></a> 无源光网络 PON (Passive Optical Network) 的组成</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200420163052.png" alt="" /></p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>网络</tag>
        <tag>互联网</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络 | 1. 计算机网络概述</title>
    <url>/2020/04/19/network_0/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>计算机网络概述
<ul>
<li>计算机网络的定义及其特点
<ul>
<li>定义</li>
<li>特点</li>
</ul>
</li>
<li>互联网概述
<ul>
<li>互联网概念</li>
<li>互联网基础结构发展的三个阶段</li>
<li>互联网的标准化工作</li>
</ul>
</li>
<li>互联网的组成
<ul>
<li>边缘部分
<ul>
<li>客户-服务器方式</li>
<li>对等连接方式</li>
</ul>
</li>
<li>核心部分
<ul>
<li>电路交换
<ul>
<li>交换的含义</li>
<li>电路交换的阶段</li>
<li>电路交换的特点</li>
</ul>
</li>
<li>分组交换
<ul>
<li>路由器</li>
<li>主机和路由器的作用不同</li>
<li>分组交换的优点</li>
<li>分组交换带来的问题</li>
</ul>
</li>
<li>报文交换</li>
<li>三种交换的比较</li>
</ul>
</li>
</ul>
</li>
<li>计算机网络在我国的发展</li>
<li>计算机网络的类别
<ul>
<li>作用范围</li>
<li>网络的使用者</li>
<li>用来把用户接入互联网</li>
</ul>
</li>
<li>计算机网络的性能
<ul>
<li>速率</li>
<li>带宽</li>
<li>吞吐量</li>
<li>时延
<ul>
<li>发送时延</li>
<li>传播时延</li>
<li>处理时延</li>
<li>排队时延</li>
<li>容易产生的错误概念</li>
</ul>
</li>
<li>时延带宽积</li>
<li>往返时间</li>
<li>利用率</li>
<li>时延与网络利用率的关系</li>
<li>计算机网络的非性能特征</li>
</ul>
</li>
<li>计算机网络的体系结构
<ul>
<li>定义</li>
<li>计算机网络体系结构的形成
<ul>
<li>开放系统互连参考模型 OSI/RM</li>
<li>两种国际标准</li>
</ul>
</li>
<li>协议与划分层次
<ul>
<li>网络协议的三个组成要素</li>
<li>协议的两种形式</li>
<li>层次式协议结构</li>
<li>分层的好处与缺点</li>
<li>各层完成的主要功能</li>
</ul>
</li>
<li>具有五层协议的体系结构</li>
<li>实体、协议、服务和服务访问点
<ul>
<li>服务访问点</li>
<li>协议很复杂</li>
</ul>
</li>
<li>TCP/IP 的体系结构</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="计算机网络的定义及其特点"><a class="markdownIt-Anchor" href="#计算机网络的定义及其特点"></a> 计算机网络的定义及其特点</h1>
<h2 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h2>
<p>“网络”是一个统称，泛指把人或物互连在一起而形成的系统。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419204250.png" alt="" /></p>
<p>大众熟悉的三大类网络：</p>
<ul>
<li>电信网络：提供电话、电报及传真等服务。</li>
<li>有线电视网络：向用户传送各种电视节目。</li>
<li>计算机网络：使用户能在计算机之间传送数据文件。</li>
</ul>
<p>发展最快的并起到核心作用的是计算机网络。</p>
<ul>
<li>计算机网络的精确定义并未统一。</li>
<li><strong>较好的定义：</strong> 计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</li>
<li>重要的两点
<ul>
<li>多种硬件：计算机，智能手机，智能传感器等。</li>
<li>多种应用：数据，语音，视频，以及今后可能出现的各种应用。</li>
</ul>
</li>
<li>根据这个定义：
<ul>
<li>计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机等。</li>
<li>计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用）。</li>
<li>请注意，上述的“可编程的硬件”表明这种硬件一定包含有中央处理机 (CPU)。</li>
</ul>
</li>
</ul>
<h2 id="特点"><a class="markdownIt-Anchor" href="#特点"></a> 特点</h2>
<ul>
<li>连通性 (Connectivity)
<ul>
<li>使上网用户之间都可以交换信息（数据，以及各种音频视频） ，好像这些用户的计算机都可以彼此直接连通一样。</li>
<li>注意，互联网具有虚拟的特点，无法准确知道对方是谁，也无法知道对方的位置。</li>
</ul>
</li>
<li>共享 (Sharing)
<ul>
<li>指资源共享。</li>
<li>资源共享的含义是多方面的。可以是信息共享、软件共享，也可以是硬件共享。</li>
<li>由于网络的存在，这些资源好像就在用户身边一样，方便使用。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419205005.png" alt="" /></li>
</ul>
</li>
</ul>
<h1 id="互联网概述"><a class="markdownIt-Anchor" href="#互联网概述"></a> 互联网概述</h1>
<h2 id="互联网概念"><a class="markdownIt-Anchor" href="#互联网概念"></a> 互联网概念</h2>
<ul>
<li>互联网是目前技术最为成功、应用最为广泛的计算机网络。</li>
<li>互联网已经成为现代社会最为重要的基础设施<br />
互联网，特指 Internet，它起源于美国，是由数量极大的各种计算机网络互连起来而形成的一个互连网络。它采用 TCP/IP 协议族作为通信规则，是一个覆盖全球、实现全球范围内连通性和资源共享的计算机网络。</li>
</ul>
<blockquote>
<ul>
<li><strong>以小写字母 “i”开始</strong>的 internet（互连网）是一个通用名词，它泛指由多个计算机网络互连而成的网络。</li>
<li><strong>以大写字母 “I”开始</strong>的 Internet（互联网或因特网）则是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用 TCP/IP 协议族作为通信的规则，且其前身是美国的 ARPANET。</li>
</ul>
<p>任意把几个计算机网络互连起来（不管采用什么协议），并能够相互通信，这样构成的是一个互连网 (internet)，而不是互联网 (Internet)。</p>
</blockquote>
<h2 id="互联网基础结构发展的三个阶段"><a class="markdownIt-Anchor" href="#互联网基础结构发展的三个阶段"></a> 互联网基础结构发展的三个阶段</h2>
<ul>
<li>
<p><strong>第一阶段：</strong> 从单个网络 ARPANET 向互联网发展的过程。</p>
<ul>
<li>1983 年，TCP/IP 协议成为 ARPANET 上的标准协议，使得所有使用 TCP/IP 协议的计算机都能利用互连网相互通信。</li>
<li>人们把 1983 年作为互联网的诞生时间。</li>
<li>1990年，ARPANET 正式宣布关闭。</li>
</ul>
</li>
<li>
<p><strong>第二阶段：</strong> 建成了三级结构的互联网。<br />
它是一个三级计算机网络，分为主干网、地区网和校园网（或企业网）。</p>
</li>
<li>
<p><strong>第三阶段：</strong> 逐渐形成了多层次 ISP 结构的互联网。</p>
<ul>
<li>出现了<strong>互联网服务提供者 ISP (Internet Service Provider)</strong>。</li>
<li>任何机构和个人只要向某个 ISP 交纳规定的费用，就可从该 ISP 获取所需 IP 地址的使用权，并可通过该 ISP 接入到互联网。</li>
<li>根据提供服务的覆盖面积大小以及所拥有的IP地址数目的不同，ISP 也分成为<strong>不同层次的 ISP</strong>：<strong>主干 ISP、地区 ISP和本地 ISP</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419211204.png" alt="" /></li>
</ul>
</li>
<li>
<p>互联网已经成为世界上规模最大和增长速率最快的计算机网络，没有人能够准确说出互联网究竟有多大。</p>
</li>
<li>
<p>互联网的迅猛发展始于 20 世纪 90 年代。由欧洲原子核研究组织 CERN 开发的万维网 WWW  (World Wide Web) 被广泛使用在互联网上，大大方便了广大非网络专业人员对网络的使用，成为互联网的这种指数级增长的主要驱动力。</p>
</li>
</ul>
<h2 id="互联网的标准化工作"><a class="markdownIt-Anchor" href="#互联网的标准化工作"></a> 互联网的标准化工作</h2>
<ul>
<li>互联网的标准化工作对互联网的发展起到了非常重要的作用。</li>
<li>所有互联网标准都以 RFC 的形式在互联网上发表。</li>
</ul>
<p>过去是三个阶段。</p>
<ol>
<li>互联网草案 (Internet Draft) ——有效期只有六个月。在这个阶段还不是 RFC 文档。</li>
<li>建议标准 (Proposed Standard) ——从这个阶段开始就成为 RFC 文档。</li>
<li>互联网标准 (Internet Standard) ——达到正式标准后，每个标准就分配到一个编号 STD xxxx。 一个标准可以和多个 RFC 文档关联。</li>
</ol>
<p>现在简化为二个阶段：建议标准，互联网标准。<br />
除了建议标准和互联网标准这两种 RFC 文档外，还有三种 RFC 文档：历史的、实验的和提供信息的 RFC 文档。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419212227.png" alt="" /></p>
<h1 id="互联网的组成"><a class="markdownIt-Anchor" href="#互联网的组成"></a> 互联网的组成</h1>
<p>从互联网的工作方式上看，可以划分为两大块：</p>
<ul>
<li>边缘部分： 由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。</li>
<li>核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419212318.png" alt="" /></li>
</ul>
<h2 id="边缘部分"><a class="markdownIt-Anchor" href="#边缘部分"></a> 边缘部分</h2>
<ul>
<li>处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为<strong>端系统 (end system)。</strong></li>
<li>端系统在功能上可能有很大的差别：
<ol>
<li>小的端系统可以是一台普通个人电脑，具有上网功能的智能手机，甚至是一个很小的网络摄像头。</li>
<li>大的端系统则可以是一台非常昂贵的大型计算机。</li>
<li>端系统的拥有者可以是个人，也可以是单位（如学校、企业、政府机关等），当然也可以是某个 ISP。</li>
</ol>
</li>
</ul>
<blockquote>
<p><strong>端系统之间通信的含义</strong><br />
“主机 A 和主机 B 进行通信”实际上是指：<strong>“运行在主机 A 上的某个程序和运行在主机 B 上的另一个程序进行通信”。</strong><br />
即“主机 A 的某个进程和主机 B 上的另一个进程进行通信”。简称为“计算机之间通信”。</p>
</blockquote>
<p>端系统之间的通信方式通常可划分为两大类：</p>
<ul>
<li>客户-服务器方式（C/S方式），即 Client/Server 方式，简称为 C/S 方式。</li>
<li>对等方式（P2P方式），即 Peer-to-Peer 方式 ，简称为 P2P 方式。</li>
</ul>
<h3 id="客户-服务器方式"><a class="markdownIt-Anchor" href="#客户-服务器方式"></a> 客户-服务器方式</h3>
<ul>
<li>客户 (client) 和服务器 (server) 都是指通信中所涉及的两个应用进程。</li>
<li>客户-服务器方式所描述的是进程之间服务和被服务的关系。</li>
<li>客户是服务的请求方，服务器是服务的提供方。</li>
</ul>
<blockquote>
<p>服务请求方和服务提供方都要使用网络核心部分所提供的服务。</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419213421.png" alt="" /></p>
<ul>
<li>客户软件的特点 :
<ul>
<li><strong>被用户调用后运行</strong>，在打算通信时主动向远地服务器发起通信（请求服务）。<strong>因此，客户程序必须知道服务器程序的地址</strong>。</li>
<li>不需要特殊的硬件和很复杂的操作系统。</li>
</ul>
</li>
<li>服务器软件的特点
<ul>
<li>一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。</li>
<li>系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。因此，服务器程序不需要知道客户程序的地址。</li>
<li>一般需要强大的硬件和高级的操作系统支持。</li>
</ul>
</li>
</ul>
<blockquote>
<p>客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接收数据。</p>
</blockquote>
<h3 id="对等连接方式"><a class="markdownIt-Anchor" href="#对等连接方式"></a> 对等连接方式</h3>
<ul>
<li><strong>对等连接</strong> (peer-to-peer，简写为 P2P ) 是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方。</li>
<li>只要两个主机都运行了对等连接软件 ( P2P 软件) ，它们就可以进行<strong>平等的、对等连接通信</strong>。</li>
<li>双方都可以下载对方已经存储在硬盘中的共享文档。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419213754.png" alt="" /></li>
<li>对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的<strong>每一个主机既是客户又是服务器</strong>。
<ul>
<li>例如主机 C 请求 D 的服务时，C 是客户，D 是服务器。但如果 C 又同时向 F提供服务，那么 C 又同时起着服务器的作用。</li>
</ul>
</li>
</ul>
<blockquote>
<p>对等连接工作方式可支持大量对等用户（如上百万个）同时工作。</p>
</blockquote>
<h2 id="核心部分"><a class="markdownIt-Anchor" href="#核心部分"></a> 核心部分</h2>
<ul>
<li>网络核心部分是互联网中最复杂的部分。</li>
<li>网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一个主机都能够向其他主机通信（即传送或接收各种形式的数据）。</li>
<li>在网络核心部分起特殊作用的是<strong>路由器 (router)</strong>。</li>
<li>路由器是实现<strong>分组交换 (packet switching) <strong>的关键构件，其任务是</strong>转发</strong>收到的分组，这是网络核心部分最重要的功能。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419214001.png" alt="" /></li>
</ul>
<blockquote>
<p>典型交换技术包括：</p>
<ul>
<li>电路交换</li>
<li>分组交换</li>
<li>报文交换</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span><br />
互联网的核心部分采用了分组交换技术。</li>
</ul>
</blockquote>
<h3 id="电路交换"><a class="markdownIt-Anchor" href="#电路交换"></a> 电路交换</h3>
<ul>
<li>
<p>2 部电话机只需要用 1 对电线直接连接就能够互相通话。</p>
</li>
<li>
<p>5 部电话机两两直接相连，需 10 对电线。</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> 部电话机两两直接相连，需 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mi mathvariant="normal">–</mi><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{N(N –1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord" style="margin-right:0.02778em;">–</span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 对电线。这种直接连接方法所需要的电线对的数量与电话机数量的平方（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">N^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>）成正比。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419214318.png" alt="" /></p>
</li>
<li>
<p>当电话机的数量增多时，就要使用交换机来完成全网的交换任务。</p>
</li>
<li>
<p>每一部电话都直接连接到交换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信。</p>
</li>
</ul>
<p>所采用的交换方式就是<strong>电路交换 (circuit switching)</strong>。</p>
<h4 id="交换的含义"><a class="markdownIt-Anchor" href="#交换的含义"></a> 交换的含义</h4>
<blockquote>
<ul>
<li>“交换”(switching)的含义就是转接 —— 把一条电话线转接到另一条电话线，使它们连通起来。</li>
<li>从通信资源的分配角度来看，“交换”就是按照某种方式动态地分配传输线路的资源。</li>
</ul>
</blockquote>
<h4 id="电路交换的阶段"><a class="markdownIt-Anchor" href="#电路交换的阶段"></a> 电路交换的阶段</h4>
<ul>
<li>电路交换必定是面向连接的。</li>
<li>电路交换分为三个阶段：
<ol>
<li>建立连接：建立一条专用的物理通路，以保证双方通话时所需的通信资源在通信时不会被其他用户占用；</li>
<li>通信：主叫和被叫双方就能互相通电话；</li>
<li>释放连接：释放刚才使用的这条专用的物理通路（释放刚才占用的所有通信资源）。</li>
</ol>
</li>
</ul>
<h4 id="电路交换的特点"><a class="markdownIt-Anchor" href="#电路交换的特点"></a> 电路交换的特点</h4>
<pre><code>+ 计算机数据具有突发性。
+ 这导致在传送计算机数据时，通信线路的利用率很低（用来传送数据的时间往往不到 10% 甚至不到 1% ）。
</code></pre>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419214623.png" alt="电路交换实例" /></p>
<h3 id="分组交换"><a class="markdownIt-Anchor" href="#分组交换"></a> 分组交换</h3>
<ul>
<li>分组交换则采用<strong>存储转发</strong>技术。</li>
<li>在发送端，先把较长的报文划分成<strong>较短的、固定长度的数据段</strong>。</li>
<li>每一个数据段前面添加上<strong>首部</strong>构成<strong>分组 (packet)</strong>。</li>
<li>分组交换网以“<strong>分组</strong>”作为数据传输单元。</li>
<li><strong>依次</strong>把各分组发送到接收端（假定接收端在左边）。</li>
<li>接收端收到分组后<strong>剥去</strong>首部还原成报文。</li>
<li>分组交换的传输单元：
<ul>
<li><strong>每一个</strong>分组的首部都含有<strong>地址</strong>（诸如目的地址和源地址）等控制信息。</li>
<li>分组交换网中的结点交换机根据收到的分组首部中的<strong>地址信息</strong>，把分组<strong>转发</strong>到下一个结点交换机。</li>
<li>每个分组在互联网中<strong>独立地选择传输路径</strong>。</li>
<li>用这样的<strong>存储转发</strong>方式，最后分组就能到达<strong>最终目的地</strong>。</li>
</ul>
</li>
</ul>
<h4 id="路由器"><a class="markdownIt-Anchor" href="#路由器"></a> 路由器</h4>
<blockquote>
<ul>
<li>在路由器中的输入和输出端口之间没有直接连线。</li>
<li>路由器处理分组的过程是：
<ol>
<li>把收到的分组先<strong>放入缓存（暂时存储）</strong>；</li>
<li><strong>查找转发表</strong>，找出到某个目的地址应从哪个端口转发；</li>
<li>把分组送到适当的端口<strong>转发</strong>出去。</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="主机和路由器的作用不同"><a class="markdownIt-Anchor" href="#主机和路由器的作用不同"></a> 主机和路由器的作用不同</h4>
<blockquote>
<ul>
<li>主机是为用户进行信息处理的，并向网络发送分组，从网络接收分组。</li>
<li>路由器对分组进行存储转发，最后把分组交付目的主机。</li>
</ul>
</blockquote>
<h4 id="分组交换的优点"><a class="markdownIt-Anchor" href="#分组交换的优点"></a> 分组交换的优点</h4>
<table>
<thead>
<tr>
<th>优点</th>
<th>所采用的手段</th>
</tr>
</thead>
<tbody>
<tr>
<td>高效</td>
<td>在分组传输的过程中<strong>动态分配</strong>传输带宽，对通信链路是逐段占用。</td>
</tr>
<tr>
<td>灵活</td>
<td>为每一个分组<strong>独立</strong>地选择最合适的转发路由。</td>
</tr>
<tr>
<td>迅速</td>
<td>以分组作为传送单位，可以<strong>不先建立连接</strong>就能向其他主机发送分组。</td>
</tr>
<tr>
<td>可靠</td>
<td>保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性。</td>
</tr>
</tbody>
</table>
<h4 id="分组交换带来的问题"><a class="markdownIt-Anchor" href="#分组交换带来的问题"></a> 分组交换带来的问题</h4>
<ul>
<li>分组在各结点存储转发时需要<strong>排队</strong>，这就会造成一定的<strong>时延</strong>。</li>
<li>分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的<strong>开销</strong>。</li>
</ul>
<h3 id="报文交换"><a class="markdownIt-Anchor" href="#报文交换"></a> 报文交换</h3>
<ul>
<li>在 20 世纪 40 年代，电报通信也采用了基于存储转发原理的<strong>报文交换 (message switching)</strong>。</li>
<li>报文交换的时延较长，从几分钟到几小时不等。现在报文交换已经很少有人使用了。</li>
</ul>
<h3 id="三种交换的比较"><a class="markdownIt-Anchor" href="#三种交换的比较"></a> 三种交换的比较</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419215934.png" alt="" /></p>
<ul>
<li>若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。</li>
<li>报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。</li>
<li>由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。</li>
</ul>
<h1 id="计算机网络在我国的发展"><a class="markdownIt-Anchor" href="#计算机网络在我国的发展"></a> 计算机网络在我国的发展</h1>
<ul>
<li>1980 年，铁道部开始进行计算机联网实验。</li>
<li>1989 年 11 月，我国第一个公用分组交换网 CNPAC 建成运行。</li>
<li>1994 年 4 月 20 日，我国用 64 kbit/s 专线正式连入互联网，我国被国际上正式承认为接入互联网的国家。</li>
<li>1994 年 5 月，中国科学院高能物理研究所设立了我国的第一个万维网服务器。</li>
<li>1994 年 9 月，中国公用计算机互联网 CHINANET 正式启动。</li>
<li>到目前为止，我国陆续建造了基于互联网技术的并能够和互联网互连的多个全国范围的公用计算机网络，其中规模最大的就是下面这五个：
<ol>
<li>中国电信互联网 CHINANET（也就是原来的中国公用计算机互联网）</li>
<li>中国联通互联网 UNINET</li>
<li>中国移动互联网 CMNET</li>
<li>中国教育和科研计算机网 CERNET</li>
<li>中国科学技术网 CSTNET</li>
</ol>
</li>
<li>中国教育和科研计算机网 CERNET (China Education and Research NETwork) 始建于 1994 年，是我国第一个 IPv4 互联网主干网。</li>
<li>2004 年 2 月，我国的第一个下一代互联网 CNGI 的主干网 CERNET2 试验网正式开通，并提供服务。</li>
<li>中国互联网络信息中心 CNNIC (ChiNa Network Information Center) 每年两次公布我国互联网的发展情况。</li>
</ul>
<h1 id="计算机网络的类别"><a class="markdownIt-Anchor" href="#计算机网络的类别"></a> 计算机网络的类别</h1>
<p>计算机网络有多种类别。典型包括：</p>
<ul>
<li>按照网络的作用范围进行分类</li>
<li>按照网络的使用者进行分类</li>
<li>用来把用户接入到互联网的网络</li>
</ul>
<h2 id="作用范围"><a class="markdownIt-Anchor" href="#作用范围"></a> 作用范围</h2>
<ul>
<li>广域网 WAN (Wide Area Network)：作用范围通常为几十到几千公里。</li>
<li>城域网 MAN (Metropolitan Area Network)：作用距离约为 5~50 公里。</li>
<li>局域网 LAN (Local Area Network) ：局限在较小的范围（如 1 公里左右）。</li>
<li>个人区域网 PAN (Personal Area Network) ：范围很小，大约在 10 米左右。</li>
</ul>
<blockquote>
<p>若中央处理机之间的距离非常近（如仅 1 米的数量级甚至更小些），则一般就称之为多处理机系统，而不称它为计算机网络。</p>
</blockquote>
<h2 id="网络的使用者"><a class="markdownIt-Anchor" href="#网络的使用者"></a> 网络的使用者</h2>
<ul>
<li>公用网 (public network)<br />
按规定交纳费用的人都可以使用的网络。因此也可称为公众网。</li>
<li>专用网 (private network)<br />
为特殊业务工作的需要而建造的网络。</li>
</ul>
<blockquote>
<p>公用网和专用网都可以提供多种服务。如传送的是计算机数据，则分别是公用计算机网络和专用计算机网络。</p>
</blockquote>
<h2 id="用来把用户接入互联网"><a class="markdownIt-Anchor" href="#用来把用户接入互联网"></a> 用来把用户接入互联网</h2>
<ul>
<li><strong>接入网 AN</strong> (Access Network)，它又称为本地接入网或居民接入网。</li>
<li>接入网是一类比较特殊的计算机网络，用于将用户接入互联网。</li>
<li>接入网本身<strong>既不属于互联网的核心部分，也不属于互联网的边缘部分</strong>。</li>
<li>接入网是从某个用户端系统到互联网中的<strong>第一个路由器</strong>（也称为边缘路由器）之间的一种网络。</li>
<li>从覆盖的范围看，很多接入网还是属于局域网。</li>
<li>从作用上看，接入网只是起到让用户能够与互联网连接的“桥梁”作用。</li>
</ul>
<h1 id="计算机网络的性能"><a class="markdownIt-Anchor" href="#计算机网络的性能"></a> 计算机网络的性能</h1>
<p>计算机网络的性能一般是指它的几个重要的性能指标，主要包括：</p>
<ul>
<li>速率</li>
<li>带宽</li>
<li>吞吐量</li>
<li>时延</li>
<li>时延带宽积</li>
<li>往返时间 RTT</li>
<li>利用率</li>
</ul>
<h2 id="速率"><a class="markdownIt-Anchor" href="#速率"></a> 速率</h2>
<ul>
<li>比特（bit）是计算机中数据量的单位，也是信息论中使用的信息量的单位。</li>
<li>比特（bit）来源于 binary digit，意思是一个“二进制数字”，因此一个比特就是二进制数字中的一个 1 或 0。</li>
<li>速率是计算机网络中最重要的一个性能指标，指的是数据的传送速率，它也称为<strong>数据率</strong> (data rate) 或<strong>比特率</strong> (bit rate)。</li>
<li>速率的<strong>单位</strong>是 bit/s，或 kbit/s、Mbit/s、 Gbit/s等。<br />
例如<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mo>×</mo><mn>1010</mn></mrow><annotation encoding="application/x-tex">4\times 1010</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span></span></span></span>bit/s 的数据率就记为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>40</mn></mrow><annotation encoding="application/x-tex">40</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span></span></span></span> Gbit/s。</li>
<li><strong>速率往往是指额定速率或标称速率，非实际运行速率。</strong></li>
</ul>
<h2 id="带宽"><a class="markdownIt-Anchor" href="#带宽"></a> 带宽</h2>
<p>两种不同意义：</p>
<ul>
<li>“带宽”(bandwidth) 本来是指信号具有的<strong>频带宽度</strong>，其单位是赫（或千赫、兆赫、吉赫等）。</li>
<li>在计算机网络中，带宽用来表示网络中某通道传送数据的能力。表示在单位时间内网络中的某信道所能通过的“<strong>最高数据率</strong>”。单位是 bit/s，即 “比特每秒”。</li>
</ul>
<blockquote>
<p>在“带宽”的上述两种表述中，前者为频域称谓，而后者为时域称谓，其本质是相同的。也就是说，<strong>一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。</strong></p>
</blockquote>
<p>在<strong>时间轴</strong>上信号的宽度随带宽的增大而变窄。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419221022.png" alt="" /></p>
<h2 id="吞吐量"><a class="markdownIt-Anchor" href="#吞吐量"></a> 吞吐量</h2>
<ul>
<li>吞吐量 (throughput) 表示在单位时间内通过某个网络（或信道、接口）的数据量。</li>
<li>吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道<strong>实际上到底有多少数据量能够通过网络</strong>。</li>
<li><strong>吞吐量受网络的带宽或网络的额定速率的限制</strong>。</li>
</ul>
<h2 id="时延"><a class="markdownIt-Anchor" href="#时延"></a> 时延</h2>
<ul>
<li>
<p>时延 (delay 或 latency) 是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。</p>
</li>
<li>
<p>有时也称为<strong>延迟</strong>或迟延。</p>
</li>
<li>
<p>网络中的时延由以下几个不同的部分组成：</p>
<ol>
<li>发送时延</li>
<li>传播时延</li>
<li>处理时延</li>
<li>排队时延</li>
</ol>
</li>
<li>
<p>数据在网络中经历的总时延就是发送时延、传播时延、处理时延和排队时延之和。</p>
<ul>
<li>总时延  = 发送时延  + 传播时延  + 处理时延  + 排队时延</li>
</ul>
</li>
<li>
<p>必须指出，在总时延中，究竟是哪一种时延占主导地位，必须具体分析。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419221926.png" alt="" /></p>
</li>
</ul>
<h3 id="发送时延"><a class="markdownIt-Anchor" href="#发送时延"></a> 发送时延</h3>
<p>也称为传输时延。</p>
<ul>
<li>发送数据时，数据帧从结点进入到传输媒体所需要的时间。</li>
<li>也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。</li>
</ul>
<blockquote>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">发</mi><mi mathvariant="normal">送</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">延</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">数</mi><mi mathvariant="normal">据</mi><mi mathvariant="normal">帧</mi><mi mathvariant="normal">长</mi><mi mathvariant="normal">度</mi><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">发</mi><mi mathvariant="normal">送</mi><mi mathvariant="normal">速</mi><mi mathvariant="normal">率</mi><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">发送时延=\dfrac{数据帧长度(bit)}{发送速率(bit/s)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mord cjk_fallback">发</span><span class="mord cjk_fallback">送</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">延</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">发</span><span class="mord cjk_fallback">送</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">率</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">帧</span><span class="mord cjk_fallback">长</span><span class="mord cjk_fallback">度</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
</blockquote>
<h3 id="传播时延"><a class="markdownIt-Anchor" href="#传播时延"></a> 传播时延</h3>
<ul>
<li>电磁波在信道中需要传播一定的距离而花费的时间。</li>
<li><strong>发送时延与传播时延有本质上的不同。</strong></li>
<li>信号<strong>发送速率</strong>和信号在信道上的<strong>传播速率</strong>是<strong>完全不同</strong>的概念。</li>
</ul>
<blockquote>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">传</mi><mi mathvariant="normal">播</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">延</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">信</mi><mi mathvariant="normal">道</mi><mi mathvariant="normal">长</mi><mi mathvariant="normal">度</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">信</mi><mi mathvariant="normal">号</mi><mi mathvariant="normal">在</mi><mi mathvariant="normal">信</mi><mi mathvariant="normal">道</mi><mi mathvariant="normal">上</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">传</mi><mi mathvariant="normal">播</mi><mi mathvariant="normal">速</mi><mi mathvariant="normal">率</mi><mo stretchy="false">(</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">传播时延=\dfrac{信道长度(m)}{信号在信道上的传播速率(m/s)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">播</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">延</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">号</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">上</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">播</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">率</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">长</span><span class="mord cjk_fallback">度</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
</blockquote>
<h3 id="处理时延"><a class="markdownIt-Anchor" href="#处理时延"></a> 处理时延</h3>
<ul>
<li>主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间。</li>
</ul>
<h3 id="排队时延"><a class="markdownIt-Anchor" href="#排队时延"></a> 排队时延</h3>
<ul>
<li>分组在路由器输入输出队列中<strong>排队等待处理</strong>所经历的时延。</li>
<li><strong>排队时延的长短往往取决于网络中当时的通信量。</strong></li>
</ul>
<h3 id="容易产生的错误概念"><a class="markdownIt-Anchor" href="#容易产生的错误概念"></a> 容易产生的错误概念</h3>
<ul>
<li>对于高速网络链路，我们提高的仅仅是数据的<strong>发送速率</strong>而不是比特在链路上的<strong>传播速率</strong>。</li>
<li>提高链路带宽减小了数据的发送时延。</li>
</ul>
<blockquote>
<p>以下说法是错误的：<br />
“在高速链路（或高带宽链路）上，比特会传送得更快些”。</p>
</blockquote>
<h2 id="时延带宽积"><a class="markdownIt-Anchor" href="#时延带宽积"></a> 时延带宽积</h2>
<p>链路的时延带宽积又称为以比特为单位的链路长度。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419222105.png" alt="" /></p>
<h2 id="往返时间"><a class="markdownIt-Anchor" href="#往返时间"></a> 往返时间</h2>
<ul>
<li>互联网上的信息不仅仅单方向传输，而是双向交互的。因此，有时很需要知道双向交互一次所需的时间。</li>
<li><strong>往返时间 RTT</strong> (round-trip time) 表示从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间。</li>
<li>在互联网中，往返时间还包括<strong>各中间结点</strong>的处理时延、排队时延以及转发数据时的发送时延。</li>
<li><strong>当使用卫星通信时，往返时间 RTT 相对较长，是很重要的一个性能指标。</strong></li>
</ul>
<h2 id="利用率"><a class="markdownIt-Anchor" href="#利用率"></a> 利用率</h2>
<ul>
<li>分为<strong>信道利用率</strong>和<strong>网络利用率</strong>。</li>
<li>信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。</li>
<li>完全空闲的信道的利用率是零。</li>
<li><strong>网络利用率</strong>则是全网络的信道利用率的加权平均值。</li>
<li>信道利用率<strong>并非越高越好</strong>。当某信道的利用率增大时，该信道引起的时延也就迅速增加。</li>
</ul>
<h2 id="时延与网络利用率的关系"><a class="markdownIt-Anchor" href="#时延与网络利用率的关系"></a> 时延与网络利用率的关系</h2>
<p>根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。<br />
若令 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">D_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 表示网络空闲时的时延，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span> 表示网络当前的时延，则在适当的假定条件下，可以用下面的简单公式表示 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">D_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 之间的关系：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><msub><mi>D</mi><mn>0</mn></msub><mrow><mn>1</mn><mo>−</mo><mi>U</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">D=\dfrac{D_0}{1-U}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.1296600000000003em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
其中：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span> 是网络的利用率，数值在 0 到 1 之间。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419223820.png" alt="" /></p>
<h2 id="计算机网络的非性能特征"><a class="markdownIt-Anchor" href="#计算机网络的非性能特征"></a> 计算机网络的非性能特征</h2>
<p>一些非性能特征也很重要。它们与前面介绍的性能指标有很大的关系。主要包括：</p>
<ul>
<li>费用</li>
<li>质量</li>
<li>标准化</li>
<li>可靠性</li>
<li>可扩展性和可升级性</li>
<li>易于管理和维护</li>
</ul>
<h1 id="计算机网络的体系结构"><a class="markdownIt-Anchor" href="#计算机网络的体系结构"></a> 计算机网络的体系结构</h1>
<h2 id="定义-2"><a class="markdownIt-Anchor" href="#定义-2"></a> 定义</h2>
<ul>
<li><strong>计算机网络的体系结构</strong> (architecture) 是计算机网络的各层及其协议的集合。</li>
<li>体系结构就是这个计算机网络及其部件<strong>所应完成的功能的精确定义</strong>。</li>
<li><strong>实现</strong> (implementation) 是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题。</li>
<li><strong>体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件。</strong></li>
</ul>
<h2 id="计算机网络体系结构的形成"><a class="markdownIt-Anchor" href="#计算机网络体系结构的形成"></a> 计算机网络体系结构的形成</h2>
<ul>
<li>计算机网络是个非常复杂的系统。</li>
<li>相互通信的两个计算机系统必须<strong>高度协调工作</strong>才行，而这种“协调”是相当复杂的。</li>
<li>“<strong>分层</strong>”可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。</li>
</ul>
<h3 id="开放系统互连参考模型-osirm"><a class="markdownIt-Anchor" href="#开放系统互连参考模型-osirm"></a> 开放系统互连参考模型 OSI/RM</h3>
<ul>
<li>1974 年，美国的 IBM 公司宣布了系统网络体系结构SNA (System Network Architecture)。这个著名的网络标准就是按照分层的方法制定的。</li>
<li>不久后，其他一些公司也相继推出自己公司的具有不同名称的体系结构。</li>
<li>由于网络体系结构的不同，不同公司的设备很难互相连通。</li>
<li>为了使不同体系结构的计算机网络都能互连，国际标准化组织 ISO 于 1977 年成立了专门机构研究该问题。</li>
<li>他们提出了一个试图使各种计算机在世界范围内互连成网的标准框架，即著名的开放系统互连基本参考模型 OSI/RM (Open Systems Interconnection Reference Model)，简称为 OSI。</li>
<li>只要遵循 OSI 标准，一个系统就可以和位于世界上任何地方的、也遵循这同一标准的其他任何系统进行通信。</li>
<li>OSI 只获得了一些理论研究的成果，在市场化方面却失败了。原因包括：
<ul>
<li>OSI 的专家们在完成 OSI 标准时没有商业驱动力；</li>
<li>OSI 的协议实现起来过分复杂，且运行效率很低；</li>
<li>OSI 标准的制定周期太长，因而使得按 OSI 标准生产的设备无法及时进入市场；</li>
<li>OSI 的层次划分也不太合理，有些功能在多个层次中重复出现。</li>
</ul>
</li>
</ul>
<h3 id="两种国际标准"><a class="markdownIt-Anchor" href="#两种国际标准"></a> 两种国际标准</h3>
<ul>
<li>法律上的 (de jure) 国际标准 OSI 并没有得到市场的认可。</li>
<li>非国际标准 TCP/IP 却获得了最广泛的应用。TCP/IP 常被称为<strong>事实上的 (de facto) 国际标准</strong>。</li>
</ul>
<h2 id="协议与划分层次"><a class="markdownIt-Anchor" href="#协议与划分层次"></a> 协议与划分层次</h2>
<ul>
<li>计算机网络中的数据交换<strong>必须遵守事先约定好的规则</strong>。</li>
<li>这些<strong>规则</strong>明确规定了所交换的数据的格式以及有关的同步问题（同步含有时序的意思）。</li>
<li><strong>网络协议</strong> (network protocol)，简称为<strong>协议</strong>，是为进行网络中的数据交换而建立的规则、标准或约定。</li>
</ul>
<h3 id="网络协议的三个组成要素"><a class="markdownIt-Anchor" href="#网络协议的三个组成要素"></a> 网络协议的三个组成要素</h3>
<ul>
<li>语法：数据与控制信息的结构或格式 。</li>
<li>语义：需要发出何种控制信息，完成何种动作以及做出何种响应。</li>
<li>同步：事件实现顺序的详细说明。</li>
</ul>
<blockquote>
<p>由此可见，网络协议是计算机网络的不可缺少的组成部分。</p>
</blockquote>
<h3 id="协议的两种形式"><a class="markdownIt-Anchor" href="#协议的两种形式"></a> 协议的两种形式</h3>
<ul>
<li>一种是使用便于人来阅读和理解的<strong>文字描述</strong>。</li>
<li>另一种是使用让计算机能够理解的<strong>程序代码</strong>。</li>
<li>这两种不同形式的协议都必须能够对网络上信息交换过程<strong>做出精确的解释</strong>。</li>
</ul>
<h3 id="层次式协议结构"><a class="markdownIt-Anchor" href="#层次式协议结构"></a> 层次式协议结构</h3>
<ul>
<li>ARPANET 的研制经验表明，对于非常复杂的计算机网络协议，<strong>其结构应该是层次式的</strong>。</li>
<li>可以将要做的工作进行如下的划分：
<ol>
<li>第一类工作与传送文件直接有关。
<ul>
<li>确信对方已做好接收和存储文件的准备。</li>
<li>双方已协调好一致的文件格式。</li>
</ul>
</li>
<li>两个主机将<strong>文件传送模块</strong>作为最高的一层 ，剩下的工作由下面的模块负责。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419224510.png" alt="" /></li>
</ol>
</li>
</ul>
<h3 id="分层的好处与缺点"><a class="markdownIt-Anchor" href="#分层的好处与缺点"></a> 分层的好处与缺点</h3>
<ul>
<li>好处
<ul>
<li>各层之间是独立的。</li>
<li>灵活性好。</li>
<li>结构上可分割开。</li>
<li>易于实现和维护。</li>
<li>能促进标准化工作。</li>
</ul>
</li>
<li>缺点
<ul>
<li>降低效率。</li>
<li>有些功能会在不同的层次中重复出现，因而产生了额外开销。</li>
</ul>
</li>
</ul>
<blockquote>
<p>层数太少，就会使每一层的协议太复杂。<br />
层数太多，又会在描述和综合各层功能的系统工程任务时遇到较多的困难。</p>
</blockquote>
<h3 id="各层完成的主要功能"><a class="markdownIt-Anchor" href="#各层完成的主要功能"></a> 各层完成的主要功能</h3>
<ul>
<li>差错控制：使相应层次对等方的通信更加可靠。</li>
<li>流量控制：发送端的发送速率必须使接收端来得及接收，不要太快。</li>
<li>分段和重装：发送端将要发送的数据块划分为更小的单位，在接收端将其还原。</li>
<li>复用和分用：发送端几个高层会话复用一条低层的连接，在接收端再进行分用。</li>
<li>连接建立和释放：交换数据前先建立一条逻辑连接，数据传送结束后释放连接。</li>
</ul>
<h2 id="具有五层协议的体系结构"><a class="markdownIt-Anchor" href="#具有五层协议的体系结构"></a> 具有五层协议的体系结构</h2>
<ul>
<li>OSI 的七层协议体系结构的概念清楚，理论也较完整，但它既复杂又不实用。</li>
<li>TCP/IP 是四层体系结构：应用层、运输层、网际层和网络接口层。</li>
<li>但最下面的网络接口层并没有具体内容。</li>
<li><strong>因此往往采取折中的办法，即综合 OSI 和 TCP/IP 的优点，采用一种只有五层协议的体系结构。</strong><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419224934.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/zorua_demo00.gif" alt="" /></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419230134.png" alt="" /></p>
<ul>
<li>OSI 参考模型把对等层次之间传送的数据单位称为该层的<strong>协议数据单元 PDU</strong> (Protocol Data Unit)。这个名词现已被许多非 OSI 标准采用。</li>
<li>任何两个同样的层次把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“<strong>对等层</strong>”(peer layers)之间的通信。</li>
<li><strong>各层协议</strong>实际上就是在各个对等层之间传递数据时的各项规定。</li>
</ul>
<h2 id="实体-协议-服务和服务访问点"><a class="markdownIt-Anchor" href="#实体-协议-服务和服务访问点"></a> 实体、协议、服务和服务访问点</h2>
<ul>
<li><strong>实体</strong>（entity） 表示任何可发送或接收信息的硬件或软件进程。</li>
<li><strong>协议</strong>是控制<strong>两个对等实体</strong>进行通信的规则的集合。</li>
<li>在协议的控制下，两个对等实体间的通信使得本层能够<strong>向上一层提供服务</strong>。</li>
<li>要实现本层协议，还需要<strong>使用下层所提供的服务</strong>。</li>
</ul>
<blockquote>
<p><strong>协议和服务在概念上是不一样的</strong></p>
<ul>
<li>协议的实现保证了能够向上一层提供服务。</li>
<li>本层的服务用户<strong>只能看见服务</strong>而无法看见下面的协议。即下面的协议对上面的服务用户是<strong>透明</strong>的。</li>
<li>协议是“<strong>水平的</strong>”，即协议是控制对等实体之间通信的规则。</li>
<li>服务是“<strong>垂直的</strong>”，即服务是由下层向上层通过层间接口提供的。</li>
<li>上层使用<strong>服务原语</strong>获得下层所提供的服务。</li>
</ul>
</blockquote>
<h3 id="服务访问点"><a class="markdownIt-Anchor" href="#服务访问点"></a> 服务访问点</h3>
<ul>
<li>同一系统相邻两层的实体进行交互的地方，称为<strong>服务访问点 SAP</strong> (Service Access Point)。</li>
<li>服务访问点SAP是一个抽象的概念，它实际上就是一个逻辑接口。</li>
<li>OSI把层与层之间交换的数据的单位称为<strong>服务数据单元 SDU</strong>(Service Data Unit)。</li>
<li>SDU 可以与 PDU 不一样，例如，可以是多个 SDU 合成为一个 PDU，也可以是一个 SDU 划分为几个 PDU。</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419230506.png" alt="" /></p>
<h3 id="协议很复杂"><a class="markdownIt-Anchor" href="#协议很复杂"></a> 协议很复杂</h3>
<ul>
<li>协议必须把所有<strong>不利的条件</strong>事先都估计到，而<strong>不能假定</strong>一切都是正常的和非常理想的。</li>
<li>看一个计算机网络协议是否正确，不能光看在正常情况下是否正确，还必须非常仔细地检查这个协议<strong>能否应付各种异常情况</strong>。</li>
</ul>
<h2 id="tcpip-的体系结构"><a class="markdownIt-Anchor" href="#tcpip-的体系结构"></a> TCP/IP 的体系结构</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419230624.png" alt="" /></p>
<blockquote>
<p><strong>TCP/IP 体系结构的另一种表示方法</strong><br />
实际上，现在的互联网使用的 TCP/IP 体系结构有时已经发生了演变，即某些应用程序可以直接使用 IP 层，或甚至直接使用最下面的网络接口层。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200419230701.png" alt="" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1587353657_20200419230734906_24963.png" alt="" /></p>
</blockquote>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>网络</tag>
        <tag>互联网</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 2. 关系数据库</title>
    <url>/2020/04/18/database_1/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>关系数据库
<ul>
<li>关系模型概述
<ul>
<li>关系操作集合
<ul>
<li>常用的关系操作</li>
<li>关系操作的特点</li>
<li>关系数据语言的种类</li>
<li>关系数据语言的特点</li>
</ul>
</li>
</ul>
</li>
<li>关系数据结构
<ul>
<li>概述</li>
<li>关系
<ul>
<li>域（Domain）</li>
<li>笛卡尔积（Cartesian Product）</li>
<li>关系（Relation）
<ul>
<li>元组</li>
<li>单元关系与二元关系</li>
<li>关系的表示</li>
<li>属性</li>
<li>码
<ul>
<li>候选码（Candidate Key）</li>
<li>全码（All-key）</li>
<li>主码（Primary Key）</li>
</ul>
</li>
<li>三类关系</li>
<li>基本关系的性质</li>
</ul>
</li>
</ul>
</li>
<li>关系模式
<ul>
<li>什么是关系模式</li>
<li>定义关系模式</li>
<li>关系模式与关系</li>
</ul>
</li>
<li>关系数据库
<ul>
<li>简介</li>
<li>定义</li>
<li>型与值</li>
</ul>
</li>
</ul>
</li>
<li>关系完整性约束
<ul>
<li>实体完整性</li>
<li>参照完整性
<ul>
<li>关系间的引用</li>
<li>外码</li>
<li>规则</li>
</ul>
</li>
<li>用户定义的完整性</li>
</ul>
</li>
<li>关系代数
<ul>
<li>关系代数运算符
<ul>
<li>集合运算符</li>
<li>比较运算符</li>
<li>专门的关系运算符</li>
<li>逻辑运算符</li>
</ul>
</li>
<li>传统的集合运算符
<ul>
<li>并（Union）</li>
<li>差（Difference）</li>
<li>交（Intersection）</li>
<li>广义笛卡尔积（Extended Cartesian Product）</li>
</ul>
</li>
<li>专门的关系运算符
<ul>
<li>选择（Selection）</li>
<li>投影（Projection）</li>
<li>连接（Join）
<ul>
<li>等值连接（equijoin）</li>
<li>自然连接（Natural join）</li>
</ul>
</li>
<li>除（Division）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="关系模型概述"><a class="markdownIt-Anchor" href="#关系模型概述"></a> 关系模型概述</h1>
<ul>
<li>关系数据库系统<br />
是支持关系模型的数据库系统</li>
<li>关系模型的组成
<ul>
<li>关系数据结构</li>
<li>关系操作集合</li>
<li>关系完整性约束</li>
</ul>
</li>
</ul>
<h2 id="关系操作集合"><a class="markdownIt-Anchor" href="#关系操作集合"></a> 关系操作集合</h2>
<h3 id="常用的关系操作"><a class="markdownIt-Anchor" href="#常用的关系操作"></a> 常用的关系操作</h3>
<ul>
<li>查询<br />
选择、投影、连接、除、并、交、差</li>
<li>数据更新<br />
插入、删除、修改</li>
</ul>
<p>查询的表达能力是其中最主要的部分</p>
<h3 id="关系操作的特点"><a class="markdownIt-Anchor" href="#关系操作的特点"></a> 关系操作的特点</h3>
<ul>
<li>集合操作方式，即操作的对象和结果都是集合。
<ul>
<li>关系数据模型的数据操作方式：一次一集合</li>
<li>非关系数据模型的数据操作方式：一次一记录</li>
</ul>
</li>
</ul>
<h3 id="关系数据语言的种类"><a class="markdownIt-Anchor" href="#关系数据语言的种类"></a> 关系数据语言的种类</h3>
<ol>
<li>关系代数语言</li>
<li>关系演算语言：用谓词来表达查询要求
<ul>
<li>元组关系演算语言<br />
谓词变元的基本对象是元组变量——典型代表：APLHA, QUEL</li>
<li>域关系演算语言<br />
谓词变元的基本对象是域变量——典型代表：QBE</li>
</ul>
</li>
<li>具有关系代数和关系演算双重特点的语言<br />
典型代表：SQL</li>
</ol>
<h3 id="关系数据语言的特点"><a class="markdownIt-Anchor" href="#关系数据语言的特点"></a> 关系数据语言的特点</h3>
<ul>
<li>关系语言是一种高度非过程化的语言
<ul>
<li>存取路径的选择由DBMS的优化机制来完成</li>
<li>用户不必用循环结构就可以完成数据操作</li>
</ul>
</li>
<li>能够嵌入高级语言中使用</li>
<li>关系代数、元组关系演算和域关系演算三种语言在表达能力上完全等价</li>
</ul>
<h1 id="关系数据结构"><a class="markdownIt-Anchor" href="#关系数据结构"></a> 关系数据结构</h1>
<h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2>
<ul>
<li>单一的数据结构——关系<br />
现实世界的实体以及实体间的各种联系均用关系来表示</li>
<li>数据的逻辑结构——二维表<br />
从用户角度，关系模型中数据的逻辑结构是一张二维表。</li>
</ul>
<h2 id="关系"><a class="markdownIt-Anchor" href="#关系"></a> 关系</h2>
<h3 id="域domain"><a class="markdownIt-Anchor" href="#域domain"></a> 域（Domain）</h3>
<p>域是一组具有相同数据类型的值的集合。</p>
<blockquote>
<p>例如：</p>
<ul>
<li>整数</li>
<li>实数</li>
<li>介于某个取值范围的整数</li>
<li>指定长度的字符串集合</li>
<li>{‘男’,‘女’}</li>
<li>介于某个取值范围的日期</li>
</ul>
</blockquote>
<h3 id="笛卡尔积cartesian-product"><a class="markdownIt-Anchor" href="#笛卡尔积cartesian-product"></a> 笛卡尔积（Cartesian Product）</h3>
<p>给定一组域<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1,D_2,\cdots,D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，这些域中可以有相同的。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1,D_2,\cdots,D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的笛卡尔积为：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>×</mo><msub><mi>D</mi><mn>2</mn></msub><mo>×</mo><mo>⋯</mo><mo>×</mo><msub><mi>D</mi><mi>n</mi></msub><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>d</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msub><mi>d</mi><mi>i</mi></msub><mo>∈</mo><msub><mi>D</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_1 \times D_2\times\cdots\times D_n=\{(d_1,d_2,\cdots ,d_n) |d_i\in D_i,i=1,2,\cdots,n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">}</span></span></span></span></p>
<blockquote>
<p>所有域的所有取值的一个组合，不能重复</p>
</blockquote>
<ul>
<li>元组（Tuple）<br />
笛卡尔积中每一个元素<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>d</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(d_1,d_2,\cdots ,d_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>叫作一个<strong>n元组（n-tuple）<strong>或简称</strong>元组</strong>。</li>
<li>分量（Component）<br />
笛卡尔积元素<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>d</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(d_1,d_2,\cdots ,d_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>中的每一个值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>叫作一个<strong>分量</strong>。</li>
<li>基数（Cardinal number）<br />
若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_i(i=1,2,\cdots ,n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>为有限集，其基数为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">m_i(i=1,2,\cdots ,n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>×</mo><msub><mi>D</mi><mn>2</mn></msub><mo>×</mo><mo>⋯</mo><mo>×</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1 \times D_2\times\cdots\times D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的基数M为：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>=</mo><msubsup><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M=\prod\limits_{i=1}^{n} m_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.329066em;vertical-align:-0.9776689999999999em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3513970000000004em;"><span style="top:-2.122331em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0000050000000003em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∏</span></span></span><span style="top:-3.950005em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9776689999999999em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
<blockquote>
<p>举例</p>
<ul>
<li>D1=导师集合SUPERVISOR={张三,李四}</li>
<li>D2=专业集合SPECIALITY={计算机专业,信息专业}</li>
<li>D3=研究生集合POSTGRADUATE={王五,赵六,孙七}<br />
各自的基数分别为2，2，3。他们的笛卡尔积的基数为12。</li>
</ul>
</blockquote>
<h3 id="关系relation"><a class="markdownIt-Anchor" href="#关系relation"></a> 关系（Relation）</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>×</mo><msub><mi>D</mi><mn>2</mn></msub><mo>×</mo><mo>⋯</mo><mo>×</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1 \times D_2\times\cdots\times D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的子集叫作在域<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1,D_2,\cdots,D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>上的关系，表示为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(D_1,D_2,\cdots,D_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="script">R</mi></mrow><annotation encoding="application/x-tex">\mathcal{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal">R</span></span></span></span></span>：关系名<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">\mathcal{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span></span></span>：关系的目或度（Degree）</p>
<h4 id="元组"><a class="markdownIt-Anchor" href="#元组"></a> 元组</h4>
<p>关系中的每个元素是关系中的元组，通常用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span>表示。</p>
<blockquote>
<p>也称记录，关系表中的每行对应一个元组，组成元组的元素称为分量。数据库中的一个实体或实体之间的一个联系均使用一个元组来表示。</p>
</blockquote>
<h4 id="单元关系与二元关系"><a class="markdownIt-Anchor" href="#单元关系与二元关系"></a> 单元关系与二元关系</h4>
<p>当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>时，称该关系为单元关系（Unary relation）。<br />
当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>时，称该关系为二元关系（Binary relation）。</p>
<h4 id="关系的表示"><a class="markdownIt-Anchor" href="#关系的表示"></a> 关系的表示</h4>
<p>关系也是一个二维表，表的每行对应一个元组，表的每列对应一个域。</p>
<table>
<thead>
<tr>
<th style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="script">S</mi><mi mathvariant="script">U</mi><mi mathvariant="script">P</mi><mi mathvariant="script">E</mi><mi mathvariant="script">R</mi><mi mathvariant="script">V</mi><mi mathvariant="script">I</mi><mi mathvariant="script">S</mi><mi mathvariant="script">O</mi><mi mathvariant="script">R</mi></mrow><annotation encoding="application/x-tex">\mathcal{SUPERVISOR}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.075em;">S</span><span class="mord mathcal" style="margin-right:0.09931em;">U</span><span class="mord mathcal" style="margin-right:0.08222em;">P</span><span class="mord mathcal" style="margin-right:0.08944em;">E</span><span class="mord mathcal">R</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mord mathcal" style="margin-right:0.07382em;">I</span><span class="mord mathcal" style="margin-right:0.075em;">S</span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mord mathcal">R</span></span></span></span></span></th>
<th style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="script">S</mi><mi mathvariant="script">P</mi><mi mathvariant="script">E</mi><mi mathvariant="script">C</mi><mi mathvariant="script">I</mi><mi mathvariant="script">A</mi><mi mathvariant="script">L</mi><mi mathvariant="script">I</mi><mi mathvariant="script">T</mi><mi mathvariant="script">Y</mi></mrow><annotation encoding="application/x-tex">\mathcal{SPECIALITY}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78055em;vertical-align:-0.09722em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.075em;">S</span><span class="mord mathcal" style="margin-right:0.08222em;">P</span><span class="mord mathcal" style="margin-right:0.08944em;">E</span><span class="mord mathcal" style="margin-right:0.05834em;">C</span><span class="mord mathcal" style="margin-right:0.07382em;">I</span><span class="mord mathcal">A</span><span class="mord mathcal">L</span><span class="mord mathcal" style="margin-right:0.07382em;">I</span><span class="mord mathcal" style="margin-right:0.25417em;">T</span><span class="mord mathcal" style="margin-right:0.08222em;">Y</span></span></span></span></span></th>
<th style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="script">P</mi><mi mathvariant="script">O</mi><mi mathvariant="script">S</mi><mi mathvariant="script">T</mi><mi mathvariant="script">G</mi><mi mathvariant="script">R</mi><mi mathvariant="script">A</mi><mi mathvariant="script">D</mi><mi mathvariant="script">U</mi><mi mathvariant="script">A</mi><mi mathvariant="script">T</mi><mi mathvariant="script">E</mi></mrow><annotation encoding="application/x-tex">\mathcal{POSTGRADUATE}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78055em;vertical-align:-0.09722em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">P</span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mord mathcal" style="margin-right:0.075em;">S</span><span class="mord mathcal" style="margin-right:0.25417em;">T</span><span class="mord mathcal" style="margin-right:0.0593em;">G</span><span class="mord mathcal">R</span><span class="mord mathcal">A</span><span class="mord mathcal" style="margin-right:0.02778em;">D</span><span class="mord mathcal" style="margin-right:0.09931em;">U</span><span class="mord mathcal">A</span><span class="mord mathcal" style="margin-right:0.25417em;">T</span><span class="mord mathcal" style="margin-right:0.08944em;">E</span></span></span></span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">张三</td>
<td style="text-align:center">信息专业</td>
<td style="text-align:center">王五</td>
</tr>
<tr>
<td style="text-align:center">李四</td>
<td style="text-align:center">信息专业</td>
<td style="text-align:center">赵六</td>
</tr>
<tr>
<td style="text-align:center">李四</td>
<td style="text-align:center">信息专业</td>
<td style="text-align:center">孙七</td>
</tr>
</tbody>
</table>
<h4 id="属性"><a class="markdownIt-Anchor" href="#属性"></a> 属性</h4>
<ul>
<li>关系中不同列可以对应相同的域，为了加以区分，必须对每列起一一个名字，称为属性（Attribute）。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>目关系必有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>个属性。</li>
<li>属性具有<strong>型</strong>和<strong>值</strong>两层含义：型指字段名和属性值域；值是指属性具体的取值。</li>
<li>关系中的字段名具有<strong>标识列</strong>的作用，所以在同一个关系中的字段名(列名)不能相同。一个关系中通常有个多个属性，属性用于表示实体的特征。</li>
</ul>
<h4 id="码"><a class="markdownIt-Anchor" href="#码"></a> 码</h4>
<h5 id="候选码candidate-key"><a class="markdownIt-Anchor" href="#候选码candidate-key"></a> 候选码（Candidate Key）</h5>
<ul>
<li>若关系中的某一属性组的值能唯一地标识一一个元组，则称该属性组为候选码。</li>
<li>在最简单的情况下，候选码只包含一个属性。</li>
</ul>
<p>在不重名的情况下，可以用<strong>学号</strong>和<strong>性别</strong>作为学生关系的候选码。</p>
<h5 id="全码all-key"><a class="markdownIt-Anchor" href="#全码all-key"></a> 全码（All-key）</h5>
<ul>
<li>在最极端的情况下，关系模式的所有属性组是这个关系模式的候选码，称为全码。</li>
<li>全为候选码。</li>
</ul>
<h5 id="主码primary-key"><a class="markdownIt-Anchor" href="#主码primary-key"></a> 主码（Primary Key）</h5>
<ul>
<li>若一个关系有多个候选码，则人为选定其中一个为主码。</li>
<li>这个候选码的诸属性称为主属性。</li>
<li>不包含在任何候选码中的属性称为非码属性。</li>
</ul>
<hr />
<ul>
<li>不仅可以标识唯一的行，还可以建立与别的表之间的联系。</li>
<li>作用：
<ul>
<li>作为关联表的<strong>外键</strong>，链接两个表；</li>
<li>使用主码值来组织关系的存储；</li>
<li>使用<strong>主码索引</strong>快速检索数据。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>主码选择的注意事项</strong>：</p>
<ol>
<li>建议<strong>取值简单</strong>的关键字为主码。</li>
<li>为便于表的维护，<strong>不建议</strong>使用复合主键。</li>
<li>代理键
<ul>
<li>定义：一个<strong>没有实际意义</strong>的字段作为表的主键。</li>
<li>取值：建议由DBMS（例如MySQL）或者应用程序<strong>自动生成</strong>，避免人工录入时人为操作产生的错误。</li>
</ul>
</li>
</ol>
</blockquote>
<h4 id="三类关系"><a class="markdownIt-Anchor" href="#三类关系"></a> 三类关系</h4>
<ul>
<li>基本关系（基本表或基表）<br />
实际存在的表，是实际存储数据的逻辑表示。</li>
<li>查询表<br />
查询结果对应的表。</li>
<li>视图表<br />
由<strong>基本表或其他视图表</strong>导出的表，是<strong>虚表</strong>，不对应实际存储的数据。</li>
</ul>
<h4 id="基本关系的性质"><a class="markdownIt-Anchor" href="#基本关系的性质"></a> 基本关系的性质</h4>
<ul>
<li>关系中的元组存储了某个实体或实体某个部分的数据。</li>
<li>列是<strong>同质</strong>的（Homogeneous）
<ul>
<li>每一列中的分量是同一类型的数据，它们来自同一个域。</li>
</ul>
</li>
<li>同一关系的字段名具有<strong>不可重复性</strong>
<ul>
<li>同一关系中不同属性的数据可出自同一个域，但不同的属性要给予不同的字段名。</li>
</ul>
</li>
<li>列的位置具有<strong>顺序无关性</strong>
<ul>
<li>即列的次序可以任意交换、重新组织。</li>
</ul>
</li>
<li>关系具有元组<strong>无冗余性</strong>
<ul>
<li>即关系中的任意两个元组不能完全相同。</li>
</ul>
</li>
<li>关系中元组的位置具有<strong>顺序无关性</strong>
<ul>
<li>元组的顺序可以任意交换。</li>
</ul>
</li>
<li>分量必须取<strong>原子值</strong>
<ul>
<li>每个分量都必须是不可分的数据项。</li>
</ul>
</li>
</ul>
<h2 id="关系模式"><a class="markdownIt-Anchor" href="#关系模式"></a> 关系模式</h2>
<h3 id="什么是关系模式"><a class="markdownIt-Anchor" href="#什么是关系模式"></a> 什么是关系模式</h3>
<ul>
<li>关系模式（Relation Schema）是型</li>
<li>关系是值</li>
<li>关系模式是对关系的描述
<ul>
<li>元组集合的结构
<ul>
<li>属性构成</li>
<li>属性来自的域</li>
<li>属性与域之间的映象关系</li>
</ul>
</li>
<li>元组语义以及完整性约束条件</li>
<li>属性间的数据依赖关系集合</li>
</ul>
</li>
</ul>
<h3 id="定义关系模式"><a class="markdownIt-Anchor" href="#定义关系模式"></a> 定义关系模式</h3>
<p>关系模式可以形式化地表示为：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo separator="true">,</mo><mi>D</mi><mo separator="true">,</mo><mi>d</mi><mi>o</mi><mi>m</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U,D,dom,F)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mclose">)</span></span></span></span></p>
<table>
<thead>
<tr>
<th>符号</th>
<th>表示</th>
</tr>
</thead>
<tbody>
<tr>
<td>R</td>
<td>关系名</td>
</tr>
<tr>
<td>U</td>
<td>组成该关系的属性名集合</td>
</tr>
<tr>
<td>D</td>
<td>属性组U中属性所来自的域</td>
</tr>
<tr>
<td>dom</td>
<td>属性向域的映象集合</td>
</tr>
<tr>
<td>F</td>
<td>属性间的数据依赖关系集合</td>
</tr>
</tbody>
</table>
<p>关系模式通常可以简记为<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R (U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A_1,A_2,…,A_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<table>
<thead>
<tr>
<th>符号</th>
<th>表示</th>
</tr>
</thead>
<tbody>
<tr>
<td>R</td>
<td>关系名</td>
</tr>
<tr>
<td>A_1，A_2，…，A_n</td>
<td>属性名</td>
</tr>
</tbody>
</table>
<ul>
<li>注：域名及属性向域的映象常常直接说明为属性的类型、长度</li>
</ul>
<h3 id="关系模式与关系"><a class="markdownIt-Anchor" href="#关系模式与关系"></a> 关系模式与关系</h3>
<ul>
<li>关系模式
<ul>
<li>对关系的描述</li>
<li>静态的、稳定的</li>
</ul>
</li>
<li>关系
<ul>
<li>关系模式在某一时刻的状态或内容</li>
<li>动态的、随时间不断变化的</li>
</ul>
</li>
</ul>
<p>关系是关系模式在某一时刻的状态或内容。<br />
实际应用中，人们通常把关系模式和关系都称为关系，通过上下文加以区别。</p>
<h2 id="关系数据库"><a class="markdownIt-Anchor" href="#关系数据库"></a> 关系数据库</h2>
<h3 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h3>
<ul>
<li>系统而严格地提出关系模型的是美国IBM公司的E.F.Codd 1970年提出关系数据模型</li>
</ul>
<blockquote>
<p>E.F.Codd, “A Relational Model of Data for Large Shared Data Banks”, 《Communication of the ACM》,1970</p>
</blockquote>
<ul>
<li>之后，提出了关系代数和关系演算的概念</li>
<li>1972年提出了关系的第一、第二、第三范式</li>
<li>1974年提出了关系的BC范式</li>
</ul>
<h3 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h3>
<p>在一个给定的应用领域中，所有实体及实体之间联系的关系的集合构成的一个关系数据库。</p>
<h3 id="型与值"><a class="markdownIt-Anchor" href="#型与值"></a> 型与值</h3>
<ul>
<li>型：关系数据库模式—抽象</li>
</ul>
<blockquote>
<p>若干域的定义；域上定义的若干关系模式</p>
</blockquote>
<ul>
<li>值：关系模式在某一时刻对应的关系的集合</li>
</ul>
<blockquote>
<p>关系数据库的值简称为关系数据库RDB</p>
</blockquote>
<h1 id="关系完整性约束"><a class="markdownIt-Anchor" href="#关系完整性约束"></a> 关系完整性约束</h1>
<ul>
<li>实体完整性<br />
通常由关系系统自动支持</li>
<li>参照完整性<br />
早期系统不支持，目前大型系统能自动支持</li>
<li>用户定义的完整性<br />
反映应用领域需要遵循的约束条件，体现了具体领域中的语义约束<br />
用户定义后由系统支持</li>
</ul>
<blockquote>
<p>关系模型的完整性规则是对关系的某种约束条件。<br />
实体完整性和参照完整性是关系模型必须满足的完整性约束条件，被称作是关系的两个<strong>不变性</strong>，应该由关系系统自动支持。</p>
</blockquote>
<h2 id="实体完整性"><a class="markdownIt-Anchor" href="#实体完整性"></a> 实体完整性</h2>
<p>若属性A是基本关系R的主属性，则属性A不能取空值。</p>
<blockquote>
<p>例<br />
学生(学号，姓名，性别)<br />
‘学号’属性为主码,则其不能取空值</p>
</blockquote>
<h2 id="参照完整性"><a class="markdownIt-Anchor" href="#参照完整性"></a> 参照完整性</h2>
<h3 id="关系间的引用"><a class="markdownIt-Anchor" href="#关系间的引用"></a> 关系间的引用</h3>
<p>在关系模型中实体及实体间的联系都是用关系来描述的，因此可能存在着关系与关系间的引用。</p>
<blockquote>
<p>例  学生实体、专业实体以及专业与学生间的一对多联系<br />
　学生（学号，姓名，性别，<strong>专业号</strong>，年龄）<br />
　  专业（<strong>专业号</strong>，专业名）</p>
</blockquote>
<h3 id="外码"><a class="markdownIt-Anchor" href="#外码"></a> 外码</h3>
<p>设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>是基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>的一个或一组属性，但不是关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>的码。如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>与基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的主码<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">K_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>相对应，则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>是基本关系R的<strong>外码</strong>，基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>称为<strong>参照关系（Referencing Relation）</strong>，基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>称为<strong>被参照关系（Referenced Relation）<strong>或</strong>目标关系（Target Relation）</strong>。</p>
<blockquote>
<p>例  学生实体、专业实体以及专业与学生间的一对多联系<br />
　学生（学号，姓名，性别，<strong>专业号</strong>，年龄）<br />
　  专业（<strong>专业号</strong>，专业名）<br />
‘专业号’称为学生关系的外码</p>
</blockquote>
<ul>
<li>关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span><strong>不一定是不同</strong>的关系。</li>
</ul>
<blockquote>
<p>学生（学号，姓名，性别，所在班级，班长学号）</p>
</blockquote>
<ul>
<li>目标关系S的主码<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">K_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和参照关系的外码<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>必须<strong>定义在同一个（或一组）域上</strong>。</li>
<li>外码<strong>并不一定要与相应的主码同名</strong>。当外码与相应的主码属于不同关系时，往往取相同的名字，以便于识别。</li>
</ul>
<h3 id="规则"><a class="markdownIt-Anchor" href="#规则"></a> 规则</h3>
<p>若属性（或属性组）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>是基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>的外码它与基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的主码<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">K_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>相对应（基本关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>不一定是不同的关系），则对于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>中每个元组在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>上的值必须为：</p>
<ul>
<li>或者取空值（F的每个属性值均为空值）</li>
<li>或者等于S中某个元组的主码值。</li>
</ul>
<blockquote>
<p>学生关系中每个元组的“专业号”属性只<br />
取下面两类值：</p>
<ol>
<li><strong>空值</strong>，表示尚未给该学生分配专业</li>
<li>非空值，这时该值必须是<strong>专业关系中某个元组的“专业号”值</strong>，表示该学生不可能分配到一个不存在的专业中</li>
</ol>
</blockquote>
<h2 id="用户定义的完整性"><a class="markdownIt-Anchor" href="#用户定义的完整性"></a> 用户定义的完整性</h2>
<ul>
<li>用户定义的完整性是针对某一具体关系数据库的约束条件，反映某一<strong>具体应用</strong>所涉及的数据必须满足的<strong>语义要求</strong>。</li>
<li>关系模型应提供定义和检验这类完整性的机制，以便用统一的系统的方法处理它们，而不要由应用程序承担这一功能。</li>
</ul>
<h1 id="关系代数"><a class="markdownIt-Anchor" href="#关系代数"></a> 关系代数</h1>
<p>一种抽象的<strong>查询</strong>语言，用对关系的运算来表达查询。<br />
关系代数运算的三个要素：</p>
<ul>
<li>运算对象：关系</li>
<li>运算结果：关系</li>
<li>运算符：四类
<ol>
<li>集合运算符
<ul>
<li>将关系看成元组的集合</li>
<li>运算是从关系的“水平”方向即行的角度来进行</li>
</ul>
</li>
<li>专门的关系运算符
<ul>
<li>不仅涉及行而且涉及列</li>
</ul>
</li>
<li>算术比较符
<ul>
<li>辅助专门的关系运算符进行操作</li>
</ul>
</li>
<li>逻辑运算符
<ul>
<li>辅助专门的关系运算符进行操作</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="关系代数运算符"><a class="markdownIt-Anchor" href="#关系代数运算符"></a> 关系代数运算符</h2>
<h3 id="集合运算符"><a class="markdownIt-Anchor" href="#集合运算符"></a> 集合运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∪</mo></mrow><annotation encoding="application/x-tex">\cup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∪</span></span></span></span></td>
<td style="text-align:center">并</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo></mrow><annotation encoding="application/x-tex">-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">−</span></span></span></span></td>
<td style="text-align:center">差</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∩</mo></mrow><annotation encoding="application/x-tex">\cap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∩</span></span></span></span></td>
<td style="text-align:center">交</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span></span></span></span></td>
<td style="text-align:center">广义笛卡尔积</td>
</tr>
</tbody>
</table>
<h3 id="比较运算符"><a class="markdownIt-Anchor" href="#比较运算符"></a> 比较运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span></span></span></td>
<td style="text-align:center">大于</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≥</mo></mrow><annotation encoding="application/x-tex">\ge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">≥</span></span></span></span></td>
<td style="text-align:center">大于等于</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&lt;</mo></mrow><annotation encoding="application/x-tex">&lt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span></span></span></span></td>
<td style="text-align:center">小于</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≤</mo></mrow><annotation encoding="application/x-tex">\le</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">≤</span></span></span></span></td>
<td style="text-align:center">小于等于</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo></mrow><annotation encoding="application/x-tex">=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span></td>
<td style="text-align:center">等于</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≠</mo></mrow><annotation encoding="application/x-tex">\not=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span></td>
<td style="text-align:center">不等于</td>
</tr>
</tbody>
</table>
<h3 id="专门的关系运算符"><a class="markdownIt-Anchor" href="#专门的关系运算符"></a> 专门的关系运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span></span></span></span></td>
<td style="text-align:center">选择</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span></td>
<td style="text-align:center">投影</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋈</mo></mrow><annotation encoding="application/x-tex">\bowtie</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.51em;vertical-align:-0.005em;"></span><span class="mrel">⋈</span></span></span></span></td>
<td style="text-align:center">连接</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>÷</mo></mrow><annotation encoding="application/x-tex">\div</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">÷</span></span></span></span></td>
<td style="text-align:center">除</td>
</tr>
</tbody>
</table>
<h3 id="逻辑运算符"><a class="markdownIt-Anchor" href="#逻辑运算符"></a> 逻辑运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∧</mo></mrow><annotation encoding="application/x-tex">\wedge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∧</span></span></span></span></td>
<td style="text-align:center">与</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∨</mo></mrow><annotation encoding="application/x-tex">\vee</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∨</span></span></span></span></td>
<td style="text-align:center">或</td>
</tr>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">¬</mi></mrow><annotation encoding="application/x-tex">\neg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">¬</span></span></span></span></td>
<td style="text-align:center">非</td>
</tr>
</tbody>
</table>
<h2 id="传统的集合运算符"><a class="markdownIt-Anchor" href="#传统的集合运算符"></a> 传统的集合运算符</h2>
<h3 id="并union"><a class="markdownIt-Anchor" href="#并union"></a> 并（Union）</h3>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo separator="true">,</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R,S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>具有相同的目<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>（即两个关系都有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>个属性），相应的属性取自同一个域</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∪</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R\cup S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>仍为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>目关系，由属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>或属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的元组组成</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∪</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∨</mo><mi>t</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\cup S = \{ t|t\in R\vee t\in S \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65418em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span></p>
<h3 id="差difference"><a class="markdownIt-Anchor" href="#差difference"></a> 差（Difference）</h3>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo separator="true">,</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R,S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>具有相同的目<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>，相应的属性取自同一个域</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>−</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R - S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>仍为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>目关系，由属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>且不属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的所有元组组成</p>
</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>−</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>t</mi><mi mathvariant="normal">∉</mi><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R-S = \{ t|t\in R \wedge t\notin S \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.25em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span></p>
<h3 id="交intersection"><a class="markdownIt-Anchor" href="#交intersection"></a> 交（Intersection）</h3>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo separator="true">,</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R,S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>具有相同的目<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>，相应的属性取自同一个域</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R\cap S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>仍为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>目关系，由既属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>又属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的元组组成</p>
</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>t</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\cap S = \{ t|t \in R \wedge t \in S \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65418em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi><mo>=</mo><mi>R</mi><mi mathvariant="normal">–</mi><mo stretchy="false">(</mo><mi>R</mi><mo>−</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R\cap S = R –(R-S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord" style="margin-right:0.02778em;">–</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span></p>
<h3 id="广义笛卡尔积extended-cartesian-product"><a class="markdownIt-Anchor" href="#广义笛卡尔积extended-cartesian-product"></a> 广义笛卡尔积（Extended Cartesian Product）</h3>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>目关系，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">k_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>个元组</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>目关系，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>个元组</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>×</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \times S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>
<ul>
<li>列：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n+m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span>列的元组的集合<br />
元组的前<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>列是关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>的一个元组<br />
后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>列是关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的一个元组</li>
<li>行：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mn>1</mn><mo>×</mo><mi>k</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">k1 \times k2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord">2</span></span></span></span>个元组</li>
</ul>
</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>×</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mover accent="true"><mrow><msub><mi>t</mi><mi>r</mi></msub><msub><mi>t</mi><mi>s</mi></msub></mrow><mo>^</mo></mover><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mi>t</mi><mi>s</mi></msub><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R \times S = \{\hat{t_r t_s} |t_r \in R \wedge t_s \in S \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.12852em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.87852em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.18408em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span></p>
<h2 id="专门的关系运算符-2"><a class="markdownIt-Anchor" href="#专门的关系运算符-2"></a> 专门的关系运算符</h2>
<h3 id="选择selection"><a class="markdownIt-Anchor" href="#选择selection"></a> 选择（Selection）</h3>
<ol>
<li>
<p>选择又称为限制（Restriction）</p>
</li>
<li>
<p>选择运算符的含义</p>
<ul>
<li>
<p>在关系R中选择满足给定条件的诸元组<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>F</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msup><mo>=</mo><mo mathvariant="normal">′</mo></msup><mi>t</mi><mi>r</mi><mi>u</mi><msup><mi>e</mi><mo mathvariant="normal">′</mo></msup><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\sigma_F(R)=\{t|t \in R \wedge F(t)=&#x27;true&#x27;\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>：选择条件，是一个逻辑表达式，基本形式为：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi mathvariant="normal">¬</mi><mo stretchy="false">(</mo><mo stretchy="false">]</mo><msub><mi>X</mi><mn>1</mn></msub><mi>θ</mi><msub><mi>Y</mi><mn>1</mn></msub><mo stretchy="false">[</mo><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>ϕ</mi><mo stretchy="false">[</mo><mi mathvariant="normal">¬</mi><mo stretchy="false">(</mo><mo stretchy="false">]</mo><msub><mi>X</mi><mn>2</mn></msub><mi>θ</mi><msub><mi>Y</mi><mn>2</mn></msub><mo stretchy="false">[</mo><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo stretchy="false">]</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">[\neg(]X_1\theta Y_1 [)][\phi [\neg(]X_2 \theta Y_2[)]] \cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">¬</span><span class="mopen">(</span><span class="mclose">]</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault">ϕ</span><span class="mopen">[</span><span class="mord">¬</span><span class="mopen">(</span><span class="mclose">]</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mclose">)</span><span class="mclose">]</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>：比较运算符（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&gt;</mo><mo separator="true">,</mo><mo>≥</mo><mo separator="true">,</mo><mo>&lt;</mo><mo separator="true">,</mo><mo>≤</mo><mo separator="true">,</mo><mo>=</mo><mo separator="true">,</mo><mo>≠</mo></mrow><annotation encoding="application/x-tex">&gt;,\ge,&lt;,\le,=,\not=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span></span><span class="base"><span class="strut" style="height:0.56131em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span>）</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub><msub><mi>Y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">X_1Y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>等：属性名、常量、简单函数；属性名也可以用它的序号来代替；</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span>：逻辑运算符（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∨</mo></mrow><annotation encoding="application/x-tex">\vee</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∨</span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∧</mo></mrow><annotation encoding="application/x-tex">\wedge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∧</span></span></span></span>）</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mspace width="1em"/><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[\quad]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:1em;"></span><span class="mclose">]</span></span></span></span>：表示可选项</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span>： 表示上述格式可以重复下去</li>
</ul>
</li>
</ul>
</li>
<li>
<p>选择运算是<strong>从行的角度</strong>进行的运算</p>
</li>
</ol>
<blockquote>
<p>选择——对元组进行操作，行变、列一定不变，只作用于单一关系之上。</p>
</blockquote>
<h3 id="投影projection"><a class="markdownIt-Anchor" href="#投影projection"></a> 投影（Projection）</h3>
<ol>
<li>投影运算符的含义
<ul>
<li>从R中选择出若干属性列组成新的关系<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>π</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\pi_A(R)=\{t[A]|t \in R\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mclose">]</span><span class="mord">∣</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mclose">}</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>当中的属性列。</li>
</ul>
</li>
<li>投影操作主要是从列的角度进行运算。
<ul>
<li>但投影之后不仅取消，了原关系中的某些列，而且还可能取消某些元组（避免重复行）。</li>
</ul>
</li>
</ol>
<blockquote>
<p>示例数据库<br />
Student（Sno, Sname, Sage, Ssex, Sdept）<br />
Course（Cno, Cname, Ccredit, Cpno）<br />
SC（Sno, Cno, Grade）<br />
查询学生的姓名和所在系<br />
即求Student关系上学生姓名和所在系两个属性上的投影<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>π</mi><mrow><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{Sname, Sdept}(Student)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>π</mi><mrow><mn>2</mn><mo separator="true">,</mo><mn>5</mn></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{2,5}(Student)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<h3 id="连接join"><a class="markdownIt-Anchor" href="#连接join"></a> 连接（Join）</h3>
<ol>
<li>连接也称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>连接</li>
<li>连接运算的含义
<ul>
<li>从两个关系的笛卡尔积中选取属性间满足一定条件的元组<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><munder><mo><mo>⋈</mo></mo><mrow><mi>A</mi><mi>θ</mi><mi>B</mi></mrow></munder><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mover accent="true"><mrow><msub><mi>t</mi><mi>r</mi></msub><msub><mi>t</mi><mi>s</mi></msub></mrow><mo>^</mo></mover><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mi>t</mi><mi>s</mi></msub><mo>∈</mo><mi>S</mi><mo>∧</mo><msub><mi>t</mi><mi>r</mi></msub><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mi>θ</mi><msub><mi>t</mi><mi>s</mi></msub><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\mathop{\bowtie}\limits_{A \theta B} S=\{\hat{t_rt_s}|t_r \in R \wedge t_s \in S \wedge t_r[A] \theta t_s[B]\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4404379999999999em;vertical-align:-0.7571079999999999em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.342892em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">θ</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7571079999999999em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.12852em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.87852em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.18408em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mclose">]</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mclose">}</span></span></span></span></li>
<li>连接运算从<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的广义笛卡尔积<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>×</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \times S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>中选取（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>关系）在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>属性组上的值与（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>关系）在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>属性组上值满足比较关系的元组。</li>
</ul>
</li>
</ol>
<h4 id="等值连接equijoin"><a class="markdownIt-Anchor" href="#等值连接equijoin"></a> 等值连接（equijoin）</h4>
<ul>
<li>什么是等值连接
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>为“＝”的连接运算称为等值连接</li>
</ul>
</li>
<li>等值连接的含义
<ul>
<li>从关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的广义笛卡尔积中选取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>属性值相等的那些元组，即等值连接为：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><munder><mo><mo>⋈</mo></mo><mrow><mi>A</mi><mo>=</mo><mi>B</mi></mrow></munder><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mover accent="true"><mrow><msub><mi>t</mi><mi>r</mi></msub><msub><mi>t</mi><mi>s</mi></msub></mrow><mo>^</mo></mover><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mi>t</mi><mi>s</mi></msub><mo>∈</mo><mi>S</mi><mo>∧</mo><msub><mi>t</mi><mi>r</mi></msub><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><msub><mi>t</mi><mi>s</mi></msub><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\mathop{\bowtie}\limits_{A = B} S=\{\hat{t_rt_s}|t_r \in R \wedge t_s \in S \wedge t_r[A] = t_s[B]\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.432661em;vertical-align:-0.749331em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.350669em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.749331em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.12852em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.87852em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.18408em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mclose">}</span></span></span></span></li>
</ul>
</li>
</ul>
<h4 id="自然连接natural-join"><a class="markdownIt-Anchor" href="#自然连接natural-join"></a> 自然连接（Natural join）</h4>
<ul>
<li>什么是自然连接
<ul>
<li>自然连接是一种特殊的等值连接
<ul>
<li>两个关系中进行比较的分量必须是相同的属性组</li>
<li>在结果中把重复的属性列去掉</li>
</ul>
</li>
</ul>
</li>
<li>自然连接的含义<br />
R和S具有相同的属性组B<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>⋈</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mover accent="true"><mrow><msub><mi>t</mi><mi>r</mi></msub><msub><mi>t</mi><mi>s</mi></msub></mrow><mo>^</mo></mover><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mi>t</mi><mi>s</mi></msub><mo>∈</mo><mi>S</mi><mo>∧</mo><msub><mi>t</mi><mi>r</mi></msub><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><msub><mi>t</mi><mi>s</mi></msub><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">}</mo><mtext> </mtext></mrow><annotation encoding="application/x-tex">R\bowtie S=\{\hat{t_rt_s}|t_r \in R \wedge t_s \in S \wedge t_r[B] = t_s[B]\}\,</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68833em;vertical-align:-0.005em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.12852em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.87852em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.18408em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span></span></span></li>
</ul>
<h3 id="除division"><a class="markdownIt-Anchor" href="#除division"></a> 除（Division）</h3>
<p>给定关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R (X,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span> 和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(Y,Z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X,Y,Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为属性组。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>中的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>中的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>可以有不同的属性名，但必须出自相同的域集。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>的除运算得到一个新的关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>，<strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>中满足下列条件的元组在</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>属性列上的投影：元组在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>上分量值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>的象集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">Y_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>包含<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>上投影的集合。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><msub><mi>t</mi><mi>r</mi></msub><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mi>π</mi><mi>Y</mi></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo><mo>⊆</mo><msub><mi>Y</mi><mi>x</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R \div S=\{t_r[X]|t_r \in R \wedge \pi_Y(S) \subseteq Y_x\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">Y_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>中的象集，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>t</mi><mi>r</mi></msub><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">x=t_r[x]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault">x</span><span class="mclose">]</span></span></span></span></p>
<p>除操作是同时从行和列的角度进行的。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418192945.png" alt="" /></p>
<ul>
<li>在关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>可以取四个值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>4</mn></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{a_1,a_2,a_3,a_4\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">a_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的象集为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(b_1,c_2),(b_2,c_3),(b_2,c_1)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">a_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的象集为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>7</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(b_3,c_7),(b_2,c_3)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">a_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的象集为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>4</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>6</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(b_4,c_6)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">a_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的象集为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>6</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>6</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(b_6,c_6)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></li>
</ul>
</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(B,C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span>上的投影为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(b_1,c_2),(b_2,c_1),(b_2,c_3)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></li>
</ul>
<p>只有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">a_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的象集包含了<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(B,C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span>属性组上的投影，所以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">R \div S={a_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>。</p>
<h1 id="练习题"><a class="markdownIt-Anchor" href="#练习题"></a> 练习题</h1>
<div class="note success">
            <ul><li><p>有两个关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mi mathvariant="normal">，</mi><mi>B</mi><mi mathvariant="normal">，</mi><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A，B，C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(B,C,D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>×</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R\times S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>结果的属性个数是（   <span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">D</span></span>  ）<br />A. 3<br />B. 4<br />C. 5<br />D. 6</p></li><li><p>下述哪个是单目运算？（<span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">C</span></span> ）<br />A. 差<br />B. 并<br />C. 投影<br />D. 除</p></li><li><p>取出关系中的某些列，并消去重复元组的关系代数运算称为（<span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">B</span></span> ）<br />A. 取列运算<br />B. 投影运算<br />C. 连接运算<br />D. 选择运算</p></li></ul>
          </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux入门 | 2. 终端介绍</title>
    <url>/2020/04/14/Linux_1/</url>
    <content><![CDATA[<h1 id="font-facestcaiyun归档font"><a class="markdownIt-Anchor" href="#font-facestcaiyun归档font"></a> <font face="STCAIYUN">归档</font></h1>
<h2 id="关于"><a class="markdownIt-Anchor" href="#关于"></a> 关于</h2>
<blockquote>
<p>Written BY Zorua 2020.4.14<br />
Email: <a href="mailto:zoruasama@qq.com">zoruasama@qq.com</a><br />
Home: <a href="https://zoruasama.gitee.io/">https://zoruasama.gitee.io/</a></p>
</blockquote>
<hr />
<h1 id="终端命令"><a class="markdownIt-Anchor" href="#终端命令"></a> 终端命令</h1>
<p>我最初接触到命令行这一类东西，已经是<code>cmd.exe</code>了，终端、命令行、bash、dash，我找不到对这一类命令解释器统一的专业名称（但是我觉得可以将它们视为Shell的入口，想看区别可以康康<a href="https://unix.stackexchange.com/questions/4126/what-is-the-exact-difference-between-a-terminal-a-shell-a-tty-and-a-con" target="_blank" rel="noopener">这篇文章</a>）。总而言之，它们能够接收用户命令，然后调用相应的应用程序。接触过C语言的同学，不可能没有接触过<code>system(&quot;pause&quot;);</code>这一语句。事实上，这一语句就是调用了<code>cmd.exe</code>里的<code>pause</code>命令。</p>
<p>如今我们正在使用图形界面（GUI）的交互，如果想要浏览文件夹，用鼠标点击文件资源管理器打开就能看；想要建立新文件夹，只需要<code>右键-新建-文件夹</code>即可。一切都似乎十分高效与便捷。但是现在的<code>Windows</code>上还是保留了命令行程序，例如<code>cmd.exe</code> <code>PowerShell</code>等等。<code>ubuntu</code>同样也有一个图形桌面。既然如此，为什么还要学习终端命令呢？</p>
<p>我认为有如下原因：</p>
<ul>
<li>图形界面比较消耗资源。一些硬件水平没有那么高的场合（如DIY的电子设备），硬件水平不足以带动图形界面。这时候用终端命令来进行交互。</li>
<li><code>Linux</code>发行版的桌面其实并没有商业化的<code>Windows</code> <code>Mac OS</code>稳定。而且最初的<code>Linux</code>所有的操作全靠命令完成。因此我觉得也可以说，学<code>Linux</code>就是学终端。</li>
<li>在职场中，绝大多数<strong>服务器的运维工作</strong>都是在<strong>远程</strong>通过<strong>SSH客户端</strong>来完成的。</li>
<li><s>使用终端命令比较装逼。</s></li>
</ul>
<h1 id="ubuntu的终端"><a class="markdownIt-Anchor" href="#ubuntu的终端"></a> Ubuntu的终端</h1>
<p><code>ubuntu</code>默认使用的终端好像是叫做<code>bash</code>。</p>
<h2 id="打开方式"><a class="markdownIt-Anchor" href="#打开方式"></a> 打开方式</h2>
<p>在<code>ubuntu</code>的桌面/文件资源管理器任意空白位置右击，选择<code>Open Terminal</code>即可。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/2020-04-14_00.png" alt="" /></p>
<h2 id="终端界面介绍"><a class="markdownIt-Anchor" href="#终端界面介绍"></a> 终端界面介绍</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414144137.png" alt="" /></p>
<ul>
<li>在未输入任何命令前，终端等待输入时，屏幕上会显示 <code>username@computername:~/Documents$</code>。<br />
<em>每一条指令前都会自动显示这段信息。不需要用户手动来打。</em></li>
<li>其中<code>@</code>前面的是用户名，后面的是计算机名称。</li>
<li>在<code>:</code>后面的是当前的工作路径。一般，你在哪里打开<code>Terminal</code>，工作路径就是哪里。</li>
<li><code>$</code>后面就是开始接收用户的命令。</li>
<li>输入<code>help</code>然后按下回车键，会在终端中显示Bash的版本信息，和一些指令。</li>
</ul>
<h1 id="基础命令"><a class="markdownIt-Anchor" href="#基础命令"></a> 基础命令</h1>
<p><code>Linux</code>发行版本的命令多达上百条，但是常用的并不是很多。多多使用就会记住了。</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>命令</th>
<th>对应英语</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>ls</td>
<td>list</td>
<td>列出指定文件夹下的内容</td>
</tr>
<tr>
<td>02</td>
<td>pwd</td>
<td>print work directory</td>
<td>显示当前工作路径</td>
</tr>
<tr>
<td>03</td>
<td>cd</td>
<td>change directory</td>
<td>改变当前工作路径</td>
</tr>
<tr>
<td>04</td>
<td>touch</td>
<td>touch</td>
<td>新建一个空白文件</td>
</tr>
<tr>
<td>05</td>
<td>mkdir</td>
<td>make directory</td>
<td>创建一个新的目录</td>
</tr>
<tr>
<td>06</td>
<td>rm</td>
<td>remove</td>
<td>删除指定文件</td>
</tr>
<tr>
<td>07</td>
<td>clear</td>
<td>clear</td>
<td>清除当前屏幕上的信息（新建一屏）</td>
</tr>
<tr>
<td>08</td>
<td>reset</td>
<td>reset</td>
<td>重置终端</td>
</tr>
</tbody>
</table>
<p>在下一篇文章，会详细介绍上面的命令。</p>
<blockquote>
<p>终端命令是严格区分大小写的。</p>
</blockquote>
<h1 id="终端的其他技巧"><a class="markdownIt-Anchor" href="#终端的其他技巧"></a> 终端的其他技巧</h1>
<h2 id="字体大小"><a class="markdownIt-Anchor" href="#字体大小"></a> 字体大小</h2>
<ul>
<li><code>Ctrl</code> <code>Shift</code> <code>=</code>可以<strong>放大</strong>终端窗口的字体显示。</li>
<li><code>Ctrl</code> <code>-</code>可以<strong>缩小</strong>终端窗口的字体显示。<br />
其实就是<code>Ctrl</code> <code>+</code>和<code>Ctrl</code> <code>-</code>两个快捷键。因为在键盘上要输入<code>+</code>时，是用 <code>Shift</code> <code>=</code>的（非100%的键盘布局）。</li>
</ul>
<h2 id="自动补全"><a class="markdownIt-Anchor" href="#自动补全"></a> 自动补全</h2>
<p>在敲出<code>文件</code>/<code>目录</code>/<code>命令</code>的部分字符后，按下<code>tab</code>键，终端会按照你可能想输入的字符进行补全。<br />
例如在终端中，键入<code>cd De</code>再按下<code>tab</code>键。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zorua@zorua-ubuntu:~$ <span class="built_in">cd</span> De</span><br></pre></td></tr></table></figure>
<p>它就会自动补全为 <code>cd Desktop/</code>。因为当前工作目录为家目录<code>~</code>，而家目录<code>~</code>下恰好有一个<code>Desktop/</code>的目录。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zorua@zorua-ubuntu:~$ <span class="built_in">cd</span> Desktop/</span><br><span class="line">zorua@zorua-ubuntu:~/Desktop$</span><br></pre></td></tr></table></figure>
<p>那么，我们知道家目录下有 <code>Downloads</code> <code>Documents</code>这样两个Do打头的文件夹，那么键入<code>cd Do</code>是如何自动补全的呢？</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zorua@zorua-ubuntu:~$ <span class="built_in">cd</span> Do</span><br></pre></td></tr></table></figure>
<p>按一下<code>tab</code>键，并没有反应，<strong>再按一下<code>tab</code>键</strong>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zorua@zorua-ubuntu:~$ <span class="built_in">cd</span> Do</span><br><span class="line">Documents/ Downloads/ </span><br><span class="line">zorua@zorua-ubuntu:~$ <span class="built_in">cd</span> Do</span><br></pre></td></tr></table></figure>
<p>终端将会提示，以Do打头的目录的多个可能性。这时候你可以输入<code>c</code>再<code>tab</code>自动补全为<code>Documents/</code>，也可以输入<code>w</code>再<code>tab</code>自动补全为<code>Downloads</code>。</p>
<h2 id="过去的命令"><a class="markdownIt-Anchor" href="#过去的命令"></a> 过去的命令</h2>
<p>按<code>UP</code>/<code>DOWN</code>光标键可以在曾经使用过的命令之间来回切换。</p>
<blockquote>
<p>没错，就是你玩各种游戏的上下左右键。</p>
</blockquote>
<h2 id="终止当前命令"><a class="markdownIt-Anchor" href="#终止当前命令"></a> 终止当前命令</h2>
<p>有一些命令，不会自动跳出，会一直保持执行。这样就不能输入下一条命令了。<br />
如果想终止当前正在执行的命令，可以按<code>Ctrl</code> <code>C</code>键。</p>
<p>同样，也可以用于放弃已经键入的命令。<br />
例如，键入了<code>cd Do</code>，但还没有按下<code>Enter</code>，选择按下<code>Ctrl</code> <code>C</code>键，它会新建一行，接受用户的重新键入。</p>
<h2 id="复制与粘贴"><a class="markdownIt-Anchor" href="#复制与粘贴"></a> 复制与粘贴</h2>
<p>我知道绝大多数人都养成了良好的<code>Ctrl</code> <code>C</code>和<code>Ctrl</code> <code>V</code>的习惯。<br />
但是在上文中已经写到，<code>Ctrl</code> <code>C</code>是用于终止的。那么该如何愉快地复制与粘贴呢？</p>
<ol>
<li>可以使用鼠标选中文本，单击右键，选择菜单中的<code>Copy</code>和<code>Paste</code>。</li>
<li>也可以换一组快捷键，使用<code>Ctrl</code> <code>Insert</code>复制和<code>Shift</code> <code>Insert</code>粘贴。<br />
至于 <code>Insert</code>在哪……。建议问问度娘嗷。</li>
</ol>
<h1 id="小练习"><a class="markdownIt-Anchor" href="#小练习"></a> 小练习</h1>
<div class="note success">
            <p><strong>小练习</strong></p><ul><li>根据作用的提示，来思考命令名称。<ul><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">ls</span></span>  列出指定文件夹下的内容</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">pwd</span></span>显示当前工作路径</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">cd</span></span> 改变当前工作路径</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">touch</span></span>新建一个空白文件</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">mkdir</span></span> 创建一个新的目录</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">rm</span></span>   删除指定文件</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">clear</span></span> 清除当前屏幕上的信息（新建一屏）</li><li><span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">reset</span></span>  重置终端</li></ul></li></ul>
          </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>操作系统</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库原理 | 1. 概述</title>
    <url>/2020/04/13/database_0/</url>
    <content><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>概述
<ul>
<li>数据库概述
<ul>
<li>数据库的重要性</li>
<li>数据库是什么
<ul>
<li>数据</li>
<li>数据库</li>
<li>数据库管理系统</li>
<li>数据库系统</li>
</ul>
</li>
<li>数据库的来历</li>
<li>数据库系统的特点</li>
</ul>
</li>
<li>数据模型
<ul>
<li>信息世界的概念模型
<ul>
<li>基本概念</li>
<li>概念模型</li>
</ul>
</li>
<li>机器世界的数据模型
<ul>
<li>数据模型</li>
<li>数据模型的三要素</li>
<li>类别</li>
<li>层次模型</li>
<li>网状模型</li>
<li>关系模型
<ul>
<li>关系模型的基本概念</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>数据库系统结构
<ul>
<li>数据库系统模式的概念</li>
<li>数据库系统的三级模式结构
<ul>
<li>模式</li>
<li>外模式</li>
<li>内模式</li>
</ul>
</li>
<li>数据库的二级映像功能与数据独立性
<ul>
<li>三级模式与二级映像</li>
<li>外模式/模式映像</li>
<li>模式/内模式映像</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="数据库概述"><a class="markdownIt-Anchor" href="#数据库概述"></a> 数据库概述</h1>
<h2 id="数据库的重要性"><a class="markdownIt-Anchor" href="#数据库的重要性"></a> 数据库的重要性</h2>
<p>如果把计算机分为如下几个层次：</p>
<ul>
<li>软件产品</li>
<li>应用软件平台——协同软件、办公软件……</li>
<li>软件基础构架平台——中间件、应用基础服务器……</li>
<li>基础软件平台——数据库系统、操作系统……</li>
<li>硬件平台</li>
</ul>
<p>因此数据库系统的地位与操作系统相当。</p>
<ul>
<li>数据库技术产生于六十年代末，是数据管理的有效技术，是计算机科学的重要分支</li>
<li>数据库技术是信息系统的核心和基础，它的出现极大地促进了计算机应用向各行各业的渗透</li>
<li>数据库的建设规模、数据库信息量的大小和使用频度已成为衡量<strong>一个国家信息化程度</strong>的重要标志</li>
</ul>
<h2 id="数据库是什么"><a class="markdownIt-Anchor" href="#数据库是什么"></a> 数据库是什么</h2>
<p>引入下列四个名词：</p>
<ul>
<li>数据 Data</li>
<li>数据库 DataBase</li>
<li>数据库管理系统 DBMS</li>
<li>数据库系统 DBS</li>
</ul>
<h3 id="数据"><a class="markdownIt-Anchor" href="#数据"></a> 数据</h3>
<p><strong>数据（Data）</strong> 是数据库中存储的基本对象。</p>
<ul>
<li>定义：描述事物的符号记录</li>
<li>种类：数字、文字、图形、图像、声音</li>
<li>特点：<strong>与其语义是不可分的</strong></li>
</ul>
<p>对于其特点，举一个例子:</p>
<blockquote>
<p>学生档案中有一个学生记录record<br />
（李明，男，199605，浙江省杭州市，计算机科学与技术专业，2014）</p>
</blockquote>
<p><strong>数据的形式不能完全表达其内容。</strong><br />
例如其中的浙江省杭州市，可以理解为现居住地，也可以理解为籍贯，凭主观直接理解，可能会产生歧义。<br />
如果引入<strong>语义</strong>：</p>
<ul>
<li>语义：学生姓名、性别、出生年月、籍贯、所在系别、入学时间</li>
<li>解释：李明是个大学生，1996年出生，杭州人，2014年考入计算机科学与技术专业</li>
</ul>
<h3 id="数据库"><a class="markdownIt-Anchor" href="#数据库"></a> 数据库</h3>
<p>人们收集并抽取一个应用所需要的大量数据之后，应将其保存起来以供进一步加工处理，进一步抽取有用信息。</p>
<ul>
<li>定义：数据库（Database，简称DB）是<strong>长期</strong>储存在计算机内、<strong>有组织的</strong>、<strong>可共享</strong>的<strong>大量</strong>数据集合。</li>
</ul>
<h3 id="数据库管理系统"><a class="markdownIt-Anchor" href="#数据库管理系统"></a> 数据库管理系统</h3>
<p>数据管理系统（DataBase Management System，简称DBMS）是位于用户与操作系统之间的一层数据管理软件。</p>
<ul>
<li>用途：科学地<strong>组织</strong>和<strong>存储</strong>数据、高效地<strong>获取</strong>和<strong>维护</strong>数据。</li>
<li>主要功能：
<ul>
<li>数据定义功能</li>
<li>数据操纵功能</li>
<li>数据库的运行管理</li>
<li>数据库的建立和维护</li>
</ul>
</li>
</ul>
<h3 id="数据库系统"><a class="markdownIt-Anchor" href="#数据库系统"></a> 数据库系统</h3>
<ul>
<li>数据库系统(DatabaseSystem，简称DBS)是指在计算机系统中引入数据库后的系统构成。</li>
<li>在不引起混淆的情况下常常把数据库系统简称为数据库。<br />
数据库系统由<strong>数据库、数据库管理系统(及其开发工具)、应用系统、数据库管理员(和用户)构成</strong>。</li>
</ul>
<h2 id="数据库的来历"><a class="markdownIt-Anchor" href="#数据库的来历"></a> 数据库的来历</h2>
<p>数据库技术是数据管理的一个发展阶段，是最有效的<strong>数据管理</strong>方式。<br />
数据管理：对数据进行分类、组织、编码、存储、检索和维护，是数据处理的中心问题。<br />
数据管理技术的发展：</p>
<ul>
<li>人工管理阶段（40年代中——50年代中）</li>
<li>文件系统阶段（50年代末——60年代中）</li>
<li>数据库系统阶段（60年代末——现在）</li>
</ul>
<h2 id="数据库系统的特点"><a class="markdownIt-Anchor" href="#数据库系统的特点"></a> 数据库系统的特点</h2>
<ul>
<li>数据结构化
<ul>
<li>数据模型</li>
</ul>
</li>
<li>数据独立性
<ul>
<li>逻辑独立性</li>
<li>物理独立性</li>
</ul>
</li>
<li>数据共享性
<ul>
<li>共享性高</li>
<li>冗余度低</li>
<li>易扩充</li>
</ul>
</li>
<li>数据的统一管理和控制
<ul>
<li>通过DBMS</li>
</ul>
</li>
</ul>
<h1 id="数据模型"><a class="markdownIt-Anchor" href="#数据模型"></a> 数据模型</h1>
<p>信息循环经历了三个领域：</p>
<ul>
<li>现实世界</li>
<li>信息世界（概念模型）</li>
<li>计算机世界（逻辑模型和物理模型）</li>
</ul>
<table>
<thead>
<tr>
<th>现实世界</th>
<th>信息世界</th>
<th>计算机世界</th>
</tr>
</thead>
<tbody>
<tr>
<td>个体</td>
<td>实体</td>
<td>记录</td>
</tr>
<tr>
<td>特征</td>
<td>属性</td>
<td>数据项</td>
</tr>
<tr>
<td>总体</td>
<td>实体集</td>
<td>文件</td>
</tr>
<tr>
<td>事物及其联系</td>
<td>实体模型</td>
<td>数据模型</td>
</tr>
</tbody>
</table>
<p>在数据库中用数据模型这个工具来<strong>抽象、表示和处理</strong>现实世界中的数据和信息。通俗地讲<strong>数据模型</strong>就是现实世界的模拟。</p>
<p>数据模型分成两个不同的层次</p>
<ol>
<li>概念模型（信息模型）<br />
是按用户的观点来对数据和信息建模。</li>
<li>数据模型（逻辑模型）<br />
主要包括网状模型、层次模型、关系模型等，它是按计算机系统的观点对数据建模。</li>
</ol>
<h2 id="信息世界的概念模型"><a class="markdownIt-Anchor" href="#信息世界的概念模型"></a> 信息世界的概念模型</h2>
<h3 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h3>
<ul>
<li>实体（Entity）<br />
客观存在并可相互区别的事物称为实体。可以是具体的人、事、物或抽象的概念。</li>
<li>属性（Attribute）<br />
实体所具有的某一特性称为属性。一个实体可以由若干个属性来刻画。</li>
<li>码（Key）<br />
唯一标识实体的属性称为码。</li>
<li>域（Domain）<br />
属性的取值范围称为该属性的域。</li>
<li>实体型（Entity Type）<br />
用实体名及其属性名集合来抽象和刻画同类实体称为实体型。</li>
<li>实体集（Entity Set）<br />
同型实体的集合称为实体集。</li>
</ul>
<h3 id="概念模型"><a class="markdownIt-Anchor" href="#概念模型"></a> 概念模型</h3>
<ul>
<li>用户的观点表达世界。</li>
<li>较强的语义表达能力，能够方便、直接地表达应用中的各种语义知识。</li>
<li>简单、清晰、易于用户理解</li>
<li>主要用于数据库设计。</li>
</ul>
<p>概念模型的表示方法：实体—联系方法（E-R方法）</p>
<p>E-R模型的图形要素：</p>
<ul>
<li>实体型——矩形框</li>
<li>属性——椭圆形框</li>
<li>联系——菱形框</li>
</ul>
<h2 id="机器世界的数据模型"><a class="markdownIt-Anchor" href="#机器世界的数据模型"></a> 机器世界的数据模型</h2>
<h3 id="数据模型-2"><a class="markdownIt-Anchor" href="#数据模型-2"></a> 数据模型</h3>
<ul>
<li>数据库系统的核心与基础。DBMS都是基于某种数据模型的或是支持某种数据模型的。</li>
<li>用计算机的观点描述现实世界。</li>
<li>主要用于数据库管理系统的实现。</li>
<li>可以细分为逻辑模型和物理模型。</li>
</ul>
<h3 id="数据模型的三要素"><a class="markdownIt-Anchor" href="#数据模型的三要素"></a> 数据模型的三要素</h3>
<ul>
<li>数据结构<br />
描述数据库的组成对象以及对象之间的联系。</li>
<li>数据操纵<br />
数据库中各种对象的实例允许执行的操作的集合(操作及规则)。</li>
<li>数据完整性约束<br />
给定的数据模型中数据及其联系所具有的制约和依存规则。</li>
</ul>
<h3 id="类别"><a class="markdownIt-Anchor" href="#类别"></a> 类别</h3>
<ul>
<li><strong>层次模型</strong></li>
<li><strong>网状模型</strong></li>
<li><strong>关系模型</strong></li>
<li>面向对象数据模型</li>
<li>对象关系数据模型</li>
<li>半结构化数据模型</li>
<li>……</li>
</ul>
<p>下文对前三个模型进行展开详述。</p>
<h3 id="层次模型"><a class="markdownIt-Anchor" href="#层次模型"></a> 层次模型</h3>
<ul>
<li>
<p>数据结构</p>
<ul>
<li>有且只有一个结点没有双亲节点，即为根节点。</li>
<li>根以外的其他结点有且只有一个双亲结点</li>
</ul>
</li>
<li>
<p>数据操纵</p>
<ul>
<li>支持查询、插入、删除、修改操作</li>
<li>任何一个给定的记录值只能按其层次路径查看</li>
</ul>
</li>
<li>
<p>数据完整性约束</p>
<ul>
<li>增删改查操作时要满足层次模型的完整性约束条件</li>
<li>双亲结点值与子女结点值的操作会产生关联和影响</li>
</ul>
</li>
<li>
<p>优点</p>
<ul>
<li>数据结构简单清晰</li>
<li>层次数据库查询效率高，效率优于关系模型</li>
<li>提供了良好的完整性支持</li>
</ul>
</li>
<li>
<p>缺点</p>
<ul>
<li>对现实世界的非层次性联系(如多对多联系)不适合</li>
<li>查询子女结点必须通过双亲结点</li>
<li>结构严密，因此命令趋于程序化</li>
</ul>
</li>
</ul>
<h3 id="网状模型"><a class="markdownIt-Anchor" href="#网状模型"></a> 网状模型</h3>
<ul>
<li>数据结构
<ul>
<li>允许一个以上的节点无双亲</li>
<li>一个结点可以有多于一个的双亲</li>
</ul>
</li>
<li>数据操作
<ul>
<li>支持增删改查操作</li>
<li>访问数据时必须选择适当的存取路径</li>
</ul>
</li>
<li>数据完整性约束
<ul>
<li>支持记录码的概念</li>
<li>保证一个联系中双亲记录和子女记录之间是一对多的联系</li>
<li>支持双亲记录和子女记录之间的约束条件</li>
</ul>
</li>
</ul>
<ul>
<li>优点
<ul>
<li>更为直接地描述现实世界</li>
<li>具有良好的性能，存取效率高</li>
</ul>
</li>
<li>缺点
<ul>
<li>结构复杂，随着应用环境扩大，数据库结构会更加复杂，不易于掌握</li>
<li>DDL、DML复杂，用户不易掌握、不易使用</li>
<li>记录间联系通过存取路径实现，用户需了解系统结构细节，编程负担重</li>
</ul>
</li>
</ul>
<h3 id="关系模型"><a class="markdownIt-Anchor" href="#关系模型"></a> 关系模型</h3>
<ul>
<li>数据结构
<ul>
<li>表(二维表)</li>
<li>建立在严格的数据概念基础上</li>
</ul>
</li>
<li>数据操作
<ul>
<li>支持增删改查操作</li>
<li>面向集合的操作，操作对象和结果都是关系</li>
<li>存取路径向用户隐蔽</li>
</ul>
</li>
<li>数据完整性约束
<ul>
<li>实体完整性</li>
<li>参照完整性</li>
<li>用户定义的完整性</li>
</ul>
</li>
</ul>
<ul>
<li>优点
<ul>
<li>关系模型建立在严格的数据概念基础上</li>
<li>关系模型概念单-一，既可以表示实体也可以表示联系</li>
<li>存取路径对用户透明，数据独立性更高、安全保密性更好，程序员工作简化</li>
</ul>
</li>
<li>缺点
<ul>
<li>查询效率上不如格式化数据模型——DBMS查询优化</li>
</ul>
</li>
</ul>
<h4 id="关系模型的基本概念"><a class="markdownIt-Anchor" href="#关系模型的基本概念"></a> 关系模型的基本概念</h4>
<ul>
<li>关系（Relation）<br />
一个关系对应通常说的一张表。</li>
<li>元组（Tuple）<br />
表中的一行即为-一个元组。</li>
<li>属性（Attribute）<br />
表中的一列即为一个属性，给每一个属性起一个名称即属性名。</li>
<li>码(Key) (等同于候选码)<br />
表中的某个属性组，它可以唯一确定一个元组。</li>
<li>域(Domain )<br />
属性的取值范围。</li>
<li>分量<br />
元组中的一个属性值。</li>
<li>关系模式<br />
对关系的描述<br />
关系名(属性1，属性2,……,属性n)<br />
学生(学号，姓名，年龄，性别，系，年级)</li>
</ul>
<h1 id="数据库系统结构"><a class="markdownIt-Anchor" href="#数据库系统结构"></a> 数据库系统结构</h1>
<p>之前提过数据库系统具备数据独立性。是什么引起其数据独立性呢？这需要从数据库系统结构谈起。</p>
<ul>
<li>数据库系统内部的模式结构<br />
从数据库管理系统角度看<br />
分为<strong>外模式、模式、内模式</strong>。</li>
<li>数据库系统外部的模式结构<br />
从数据库最终用户角度看<br />
单用户、主从式、分布式、客户/服务器、浏览器/应用服务器/数据库服务器……</li>
</ul>
<h2 id="数据库系统模式的概念"><a class="markdownIt-Anchor" href="#数据库系统模式的概念"></a> 数据库系统模式的概念</h2>
<ul>
<li><strong>型</strong>和<strong>值</strong>的概念</li>
</ul>
<ul>
<li>型（Type）<br />
对某一类数据的结构和属性的说明</li>
<li>值（Value)<br />
是型的一个具体赋值</li>
</ul>
<p>例如：学生记录</p>
<ul>
<li>
<p>记录型：<br />
(学号，姓名，性别，系别，年龄，籍贯)</p>
</li>
<li>
<p>该记录型的一个记录值：<br />
( 2017061161，李明，男，计算机，22， 江苏)</p>
</li>
<li>
<p>模式(Schema)</p>
<ul>
<li>数据库逻辑结构和特征的描述</li>
<li>是型的描述</li>
<li>反映的是数据的结构及其联系</li>
<li>模式是相对稳定的</li>
</ul>
</li>
<li>
<p>模式的一个实例（Instance）</p>
<ul>
<li>模式的一个具体值</li>
<li>反映数据库某一时刻的状态</li>
<li>同一个模式可以有很多实例</li>
<li>实例随数据库中的数据的更新而变动</li>
</ul>
</li>
</ul>
<h2 id="数据库系统的三级模式结构"><a class="markdownIt-Anchor" href="#数据库系统的三级模式结构"></a> 数据库系统的三级模式结构</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/img/shujuku/%E6%A8%A1%E5%BC%8F.png" alt="" /></p>
<h3 id="模式"><a class="markdownIt-Anchor" href="#模式"></a> 模式</h3>
<ul>
<li>模式（也称逻辑模式）
<ul>
<li>数据库中全体数据的逻辑结构和特征的描述</li>
<li>所有用户的公共数据视图，综合了所有用户的需求</li>
</ul>
</li>
<li>模式的地位：是数据库系统模式结构的中间层
<ul>
<li>与数据的物理存储细节和硬件环境无关</li>
</ul>
</li>
</ul>
<p>一个数据库只有一个模式。</p>
<h3 id="外模式"><a class="markdownIt-Anchor" href="#外模式"></a> 外模式</h3>
<p>外模式（也称子模式或用户模式）</p>
<ul>
<li>数据库用户(包括应用程序员和最终用户)使用的<strong>局部</strong>数据的逻辑结构和特征的描述</li>
<li>数据库用户的数据视图，是与某一应用有关的数据的逻辑表示</li>
</ul>
<h3 id="内模式"><a class="markdownIt-Anchor" href="#内模式"></a> 内模式</h3>
<ul>
<li>内模式(也称存储模式)
<ul>
<li>是数据物理结构和存储方式的描述</li>
<li>是数据在数据库内部的表示方式
<ul>
<li>记录的存储方式(顺序存储，按照B树结构存储，按hash方法存储)</li>
<li>索引的组织方式</li>
<li>数据是否压缩存储</li>
<li>数据是否加密</li>
<li>数据存储记录结构的规定</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>一个数据库只有一个内模式。</p>
<h2 id="数据库的二级映像功能与数据独立性"><a class="markdownIt-Anchor" href="#数据库的二级映像功能与数据独立性"></a> 数据库的二级映像功能与数据独立性</h2>
<h3 id="三级模式与二级映像"><a class="markdownIt-Anchor" href="#三级模式与二级映像"></a> 三级模式与二级映像</h3>
<ul>
<li>
<p>三级模式是对数据的三个抽象级别</p>
</li>
<li>
<p>二级映象在DBMS内部实现这三个抽象层次的联系和转换</p>
</li>
<li>
<p>外模式/模式映像</p>
</li>
<li>
<p>模式/内模式映像</p>
</li>
</ul>
<h3 id="外模式模式映像"><a class="markdownIt-Anchor" href="#外模式模式映像"></a> 外模式/模式映像</h3>
<ul>
<li>定义外模式与模式之间的对应关系</li>
<li>每一个外模式都对应一个外模式/模式映象</li>
<li>映象定义通常包含在各自外模式的描述中</li>
</ul>
<p>外模式/模式映像能够保证数据的<strong>逻辑独立性</strong>：</p>
<ul>
<li>当模式改变时，数据库管理员修改有关的外模式/模式映象，使<br />
外模式保持不变</li>
<li>应用程序是依据数据的外模式编写的，从而应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。</li>
</ul>
<h3 id="模式内模式映像"><a class="markdownIt-Anchor" href="#模式内模式映像"></a> 模式/内模式映像</h3>
<ul>
<li>模式/内模式映象定义了数据全局逻辑结构与存储结构之间的对应关系。<br />
例如，说明逻辑记录和字段在内部是如何表示的</li>
<li>数据库中模式/内模式映象是唯一的</li>
<li>该映象定义通常包含在模式描述中</li>
</ul>
<p>模式/内模式映像能够保证数据的<strong>物理独立性</strong>：</p>
<ul>
<li>当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式/内模式映象，使模式保持不变</li>
<li>应用程序不受影响。保证了数据与程序的物理独立性，简称数据的物理独立性。</li>
</ul>
<h1 id="练习题"><a class="markdownIt-Anchor" href="#练习题"></a> 练习题</h1>
<div class="note success">
            <ul><li><p>信息世界下的数据模型是（   <span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">C</span></span>  ）<br />A. 网状模型<br />B. 层次模型<br />C. 概念模型<br />D. 逻辑模型</p></li><li><p>在数据库管理技术发展的三阶段中，没有专门的软件对数据进行管理的是（<span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">D</span></span> ）</p><ol><li>人工管理阶段</li><li>文件系统阶段</li><li>数据库阶段</li></ol><p>A. 1和2<br />B. 只有2<br />C. 2和3<br />D. 只有1</p></li><li><p>DB、DBS、DBMS之间的关系是（<span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">A</span></span> ）<br />A. DBS包括DB和DBMS<br />B. DBMS包括DBIDBS<br />C. DB包括DBS和DBMNS<br />D. DBS就是DB，也就是DBMS</p></li><li><p>在E-R图中，用来表示属性的图形是（  <span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">B</span></span>）<br />A. 矩形<br />B. 椭圆形<br />C. 菱形<br />D. 平行四边形</p></li></ul>
          </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>数据库原理</category>
      </categories>
      <tags>
        <tag>数据库原理</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX | LaTeX基础</title>
    <url>/2020/03/30/LaTeX_0/</url>
    <content><![CDATA[<h1 id="归档"><a class="markdownIt-Anchor" href="#归档"></a> 归档</h1>
<blockquote>
<p>Written BY Zorua 2020.2.09</p>
</blockquote>
<h2 id="学习素材"><a class="markdownIt-Anchor" href="#学习素材"></a> 学习素材</h2>
<blockquote>
<p>来源于B站UP主 <a href="https://space.bilibili.com/32248502" target="_blank" rel="noopener">小风寒呐</a></p>
</blockquote>
<hr />
<h1 id="创建一篇文档"><a class="markdownIt-Anchor" href="#创建一篇文档"></a> 创建一篇文档</h1>
<ol>
<li>
<p>文档类型</p>
<ul>
<li>文章 Article</li>
<li>报告 Report</li>
<li>书 Book<br />
中文的文章是ctexart，中文字体是UTF8</li>
</ul>
 <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[UTF8]</span><span class="string">&#123;ctexart&#125;</span></span></span><br></pre></td></tr></table></figure>
<p>其中的 <strong>[   ]</strong> 说明可以省略不写的意思，<strong>{   }</strong> 是必须写的意思。</p>
</li>
<li>
<p>宏包<br />
想在文档里加入公式，做个表格，放个图片，需要先使用宏包。</p>
 <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;mathtools,amsmath,graphicx,array&#125;</span></span></span><br></pre></td></tr></table></figure>
<p>宏包有很多：</p>
 <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;xcolor&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;titlesec&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;fontspec&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">defaultfontfeatures</span><span class="string">&#123;Mapping=tex-text&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;xunicode&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;xltxtra&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;polyglossia&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;indentfirst&#125;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>环境建立</p>
 <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line">  My Contents</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure>
<p>这样就可以建立一个文档环境。</p>
</li>
<li>
<p>注释<br />
用<code>%</code>符号来标记注释</p>
</li>
</ol>
<hr />
<h1 id="document-环境中的写作"><a class="markdownIt-Anchor" href="#document-环境中的写作"></a> Document 环境中的写作</h1>
<p>首先编辑器段与段之间需要空一行，这样才能让输出文本分段，否则输出文本是一段。</p>
<h2 id="文本的写作"><a class="markdownIt-Anchor" href="#文本的写作"></a> 文本的写作</h2>
<ol>
<li>加粗：<code>\textbf{ }</code></li>
<li>字号
<ol>
<li><code>\normalsize</code></li>
<li><code>\large</code></li>
<li><code>\Large</code></li>
<li><code>\huge</code></li>
<li><code>\Huge</code><br />
字号大小在一个环境内或者{   }之间生效</li>
</ol>
</li>
<li>居中：<code>\begin{center} Contents \end{center}</code></li>
<li>文章标题与作者/日期
<ul>
<li>标题<code>\title{\LaTeX}</code></li>
<li>作者<code>\author{Zorua}</code></li>
<li>日期<code>\date{2020-2-7}</code></li>
<li>生成标题<code>\maketitle</code></li>
</ul>
</li>
<li>章节划分
<ul>
<li>一级章节 <code>\section{ }</code></li>
<li>二级章节 <code>\subsection{ }</code></li>
<li>三级章节 <code>\subsubsection{ }</code></li>
</ul>
</li>
<li>添加目录：<code>\tableofcontents</code></li>
<li>要点列举<br />
建立一个列举环境 <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;enumerate&#125;</span></span></span><br><span class="line">    <span class="tag">\<span class="name">item</span></span></span><br><span class="line">    <span class="tag">\<span class="name">item</span></span></span><br><span class="line"> <span class="tag">\<span class="name">end</span><span class="string">&#123;enumerate&#125;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li>创建新的一页： <code>\newpage</code></li>
</ol>
<h2 id="公式的写作"><a class="markdownIt-Anchor" href="#公式的写作"></a> 公式的写作</h2>
<h3 id="公式环境的创建"><a class="markdownIt-Anchor" href="#公式环境的创建"></a> 公式环境的创建</h3>
<h4 id="行间公式的创建"><a class="markdownIt-Anchor" href="#行间公式的创建"></a> 行间公式的创建</h4>
<p>用<strong>equation</strong>或者<strong>align</strong>，这两个环境都可以让公式<strong>自动编号</strong>。<br />
在后面加一个 * 就可以取消自动编号。</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span></span><br><span class="line">    formula</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span> <span class="comment">%这个环境内公式不可以换行</span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;align&#125;</span></span></span><br><span class="line">    &amp;formula <span class="tag">\<span class="name">\</span></span></span><br><span class="line">    &amp;formula <span class="tag">\<span class="name">\</span></span></span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;align&#125;</span></span> <span class="comment">%这个环境内公式可以并且这样换行</span></span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="comment">%使用如下格式等价于创建了equation环境</span></span><br><span class="line"><span class="comment">%取消编号就用 [ ]</span></span><br><span class="line"><span class="tag">\<span class="name">&#123;</span></span> </span><br><span class="line">    F=ma</span><br><span class="line"><span class="tag">\<span class="name">&#125;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;align&#125;</span></span></span><br><span class="line">    &amp;y=ax <span class="tag">\<span class="name">notag</span></span> <span class="tag">\<span class="name">\</span></span></span><br><span class="line">    &amp;=bx</span><br><span class="line"> <span class="tag">\<span class="name">end</span><span class="string">&#123;align&#125;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="行内公式的创建"><a class="markdownIt-Anchor" href="#行内公式的创建"></a> 行内公式的创建</h4>
<p>直接用$formula$<br />
实现如下效果：<br />
我们假设车辆停留的时间服从正态分布，即在第n个时刻中，停留时间的概率的矩阵为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>P</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>P</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>P</mi><mn>3</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>P</mi><mi>m</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">P=[P_{1},P_{2},P_{3},…,P_{m}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></p>
<h3 id="常见公式命令"><a class="markdownIt-Anchor" href="#常见公式命令"></a> 常见公式命令</h3>
<ul>
<li>上标 x^{   }</li>
<li>下标 x_{   }</li>
<li>分式 \frac{分子}{分母}</li>
<li>求和 \sum^{上限}_{起始}</li>
<li>积分 \int^{上限}_{下限}</li>
<li>微分 \mathrm{d}</li>
<li>希腊字母</li>
</ul>
<table>
<thead>
<tr>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Π</mi></mrow><annotation encoding="application/x-tex">\Pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Π</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span></span></span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td>\alpha</td>
<td>\beta</td>
<td>\delta</td>
<td>\Delta</td>
<td>\pi</td>
<td>\Pi</td>
<td>\epsilon</td>
<td>\rho</td>
<td>\sigma</td>
</tr>
</tbody>
</table>
<ul>
<li>初等函数</li>
</ul>
<table>
<thead>
<tr>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sin</mi><mo>⁡</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\sin{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cos</mi><mo>⁡</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\cos{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>tan</mi><mo>⁡</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\tan{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mop">tan</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ln</mi><mo>⁡</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\ln{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">ln</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>x</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">x</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td>\sin{x}</td>
<td>\cos{x}</td>
<td>\tan{x}</td>
<td>\ln{x}</td>
<td>\sqrt{x}</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>矩阵环境 bmatrix<br />
需要宏包 mathtools</p>
  <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span></span><br><span class="line">A=<span class="tag">\<span class="name">begin</span><span class="string">&#123;bmatrix&#125;</span></span></span><br><span class="line">    1&amp;2&amp;3 <span class="tag">\<span class="name">\</span></span></span><br><span class="line">    4&amp;6&amp;7 <span class="tag">\<span class="name">\</span></span></span><br><span class="line">    <span class="tag">\<span class="name">end</span><span class="string">&#123;bmatrix&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>大括号<br />
需要宏包 mathtools</p>
 <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span></span><br><span class="line">A=<span class="tag">\<span class="name">begin</span><span class="string">&#123;cases&#125;</span></span></span><br><span class="line">     &amp;x^2 <span class="tag">\<span class="name">\</span></span></span><br><span class="line">     &amp;x^2+x <span class="tag">\<span class="name">\</span></span></span><br><span class="line">     <span class="tag">\<span class="name">end</span><span class="string">&#123;cases&#125;</span></span></span><br><span class="line"> <span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>符号说明</p>
<ul>
<li><code>&amp;</code>的意思通常是对齐的意思</li>
<li><code>\\</code>的意思是换行<br />
如果想输出<code>\</code>，那就用<code>\verb|\|</code></li>
</ul>
</li>
</ul>
<h2 id="表格的写作"><a class="markdownIt-Anchor" href="#表格的写作"></a> 表格的写作</h2>
<h3 id="普通表格环境tabular"><a class="markdownIt-Anchor" href="#普通表格环境tabular"></a> 普通表格环境tabular</h3>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;tabular&#125;</span><span class="string">&#123;|l|c|r|&#125;</span></span> <span class="comment">%中间的竖线代表每一列加上竖线，少了哪个哪一列就不加</span></span><br><span class="line"><span class="tag">\<span class="name">hline</span></span></span><br><span class="line">指标1&amp;指标2&amp;指标3<span class="tag">\<span class="name">\</span></span></span><br><span class="line"><span class="tag">\<span class="name">hline</span></span></span><br><span class="line">居左&amp;居中&amp;居右<span class="tag">\<span class="name">\</span></span></span><br><span class="line"><span class="tag">\<span class="name">hiline</span></span></span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;tabular&#125;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="三线表的制作"><a class="markdownIt-Anchor" href="#三线表的制作"></a> 三线表的制作</h3>
<ul>
<li>需要宏包 booktabs</li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;table&#125;</span><span class="string">[!htbp]</span></span> </span><br><span class="line">    <span class="tag">\<span class="name">centering</span></span>            <span class="comment">%用于居中</span></span><br><span class="line">    <span class="tag">\<span class="name">caption</span><span class="string">&#123;标题&#125;</span></span></span><br><span class="line">    <span class="tag">\<span class="name">begin</span><span class="string">&#123;tabular&#125;</span><span class="string">&#123;cccc&#125;</span></span></span><br><span class="line">        <span class="tag">\<span class="name">toprule</span></span>          <span class="comment">%这种rule是线条</span></span><br><span class="line">        &amp;指标一&amp;指标二&amp;指标三<span class="tag">\<span class="name">\</span></span>     <span class="comment">%第零个指标空出来</span></span><br><span class="line">        <span class="tag">\<span class="name">midrule</span></span></span><br><span class="line">        方案一&amp;1&amp;0.5&amp;100<span class="tag">\<span class="name">\</span></span></span><br><span class="line">        方案二&amp;2&amp;0.6&amp;110<span class="tag">\<span class="name">\</span></span></span><br><span class="line">        <span class="tag">\<span class="name">bottomrule</span></span></span><br><span class="line">    <span class="tag">\<span class="name">end</span><span class="string">&#123;tabular&#125;</span></span></span><br><span class="line"> <span class="tag">\<span class="name">end</span><span class="string">&#123;table&#125;</span></span></span><br></pre></td></tr></table></figure>
<p>::: alert-info<br />
<strong>!htbp的含义</strong><br />
『h』当前位置。将图形放置在正文文本中给出该图形环境的地方。如果本页所剩的页面不够，这一参数将不起作用。<br />
『t』顶部。将图形放置在页面的顶部。<br />
『b』底部。将图形放置在页面的底部。<br />
『p』浮动页。将图形放置在一只允许有浮动对象的页面上<br />
:::</p>
<h2 id="图片的插入"><a class="markdownIt-Anchor" href="#图片的插入"></a> 图片的插入</h2>
<ul>
<li>用figure环境</li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;figure&#125;</span><span class="string">[!htbp]</span></span></span><br><span class="line">    <span class="tag">\<span class="name">centering</span></span></span><br><span class="line">    <span class="tag">\<span class="name">includegraphics</span><span class="string">[height=12cm]</span><span class="string">&#123;name.png&#125;</span></span></span><br><span class="line">    <span class="tag">\<span class="name">caption</span><span class="string">&#123;title&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;figure&#125;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="命令label的使用"><a class="markdownIt-Anchor" href="#命令label的使用"></a> 命令Label的使用</h2>
<p>label是标签，用来上下文中引用，相当于给加上标签的东西起了个名字，在上下文中只需要用这个名字就知道是哪个东西。<br />
<code>\label{1:2}</code>其中1代表第一个参数，说明这个东西是什么类型<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>的。</p>
<p>2就是名字了。<br />
比如我有一个公式（如下），给它命名为&quot;NiuDun&quot;</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span></span><br><span class="line">    F=ma <span class="tag">\<span class="name">label</span><span class="string">&#123;eq:NiuDun&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span></span><br></pre></td></tr></table></figure>
<p>如果我想引用，就用<code>\ref{eq:NiuDun}</code>，这个命令的地方就会被替换成<strong>被引用的公式的编号</strong></p>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>类型有 eq公式，tab表格，fig图片。 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>LaTeX</tag>
        <tag>文字排版</tag>
        <tag>论文</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux入门 | 1. Linux的介绍</title>
    <url>/2020/03/29/Linux_0/</url>
    <content><![CDATA[<h1 id="font-facestcaiyun归档font"><a class="markdownIt-Anchor" href="#font-facestcaiyun归档font"></a> <font face="STCAIYUN">归档</font></h1>
<h2 id="关于"><a class="markdownIt-Anchor" href="#关于"></a> 关于</h2>
<blockquote>
<p>Written BY Zorua 2020.3.29<br />
Email: <a href="mailto:zoruasama@qq.com">zoruasama@qq.com</a><br />
Home: <a href="https://zoruasama.gitee.io/">https://zoruasama.gitee.io/</a></p>
</blockquote>
<hr />
<h1 id="linux"><a class="markdownIt-Anchor" href="#linux"></a> Linux</h1>
<p>大多数的00后应该和我一样，第一次接触PC操作系统应该是<code>Windows</code>，那就先来说说与<code>Windows</code>的异同。</p>
<ul>
<li>在<code>Windows 7</code>以前版本的<code>Windows</code>是单用户操作系统，而<code>Linux</code>的设计初衷就是多用户操作系统。</li>
<li>在<code>Linux</code>下，没有驱动器盘符，即没有你在<code>Windows</code>中看到的<code>C:\</code>，<code>D:\</code>，<code>E:\</code>等等，<code>Linux</code>中仅有<code>/</code>，称之为根目录。</li>
<li>在<code>Windows</code>下，普通用户基本都是在纯图形界面下操作使用；而<code>Linux</code>兼具图形界面操作（桌面环境的发行版）和终端操作。几乎可以只用键盘完成一切操作。</li>
<li>世界上绝大多数服务器都正在运行着<code>Linux</code>。</li>
</ul>
<p>当然还有很多不同的地方，我这里就只稍微例举一下下。</p>
<p>以下是百度百科摘取的一段关于<code>Linux</code>的介绍。</p>
<blockquote>
<p>Linux，全称GNU/Linux，是一套免费使用和自由传播的类UNIX操作系统，其内核由林纳斯·本纳第克特·托瓦兹于1991年第一次释出，它主要受到Minix和Unix思想的启发，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的Unix工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。Linux有上百种不同的发行版，如基于社区开发的debian、archlinux，和基于商业开发的Red Hat Enterprise Linux、SUSE、oracle linux等。</p>
</blockquote>
<p>比较著名的发行版本有<code>Debian</code>、<code>RedHat</code>、<code>Centos</code>、<code>Slackware</code>、<code>clearlinux</code>、<code>ubuntu</code>等等。无论何种版本的 Linux 发行版，桌面、应用是<code>Linux</code>的外衣，文件组织、目录结构才是<code>Linux</code>的内心。</p>
<p>我使用的是<code>ubuntu-16.04.6</code>，可以在其官网获取相关镜像。<a href="https://ubuntu.com/download" target="_blank" rel="noopener">Ubuntu官网</a><br />
如果下载速度可能比较缓慢，可以在<a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">清华大学开源软件镜像站</a>或其他镜像站进行下载。<br />
由于技术所限，我并没有在我的计算机上安装双系统，是用虚拟机软件进行模拟的。<br />
常用的虚拟机软件有<code>VirtualBox</code> <code>VMware Workstation</code>  <code>Virtual PC</code>等等。请自行在互联网上获取。</p>
<blockquote>
<p>Windows的Pro版本好像自带一个Hyper-V。</p>
</blockquote>
<h1 id="文件和目录"><a class="markdownIt-Anchor" href="#文件和目录"></a> 文件和目录</h1>
<p>上面说到<code>Linux</code>中仅有根目录<code>/</code>，下面是根目录下，一些常用的目录的简单描述。</p>
<table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>有且仅有一个的根目录，所有的文件都存放在这里。</td>
</tr>
<tr>
<td>/bin、/usr/bin</td>
<td>存放着可执行二进制文件的目录，如常用的命令 ls、cat 等等。</td>
</tr>
<tr>
<td>/home</td>
<td>家目录，用户的家目录都存放在该目录下。</td>
</tr>
<tr>
<td>/etc</td>
<td>系统配置文件存放的目录。</td>
</tr>
<tr>
<td>/dev</td>
<td>存放在系统下的设备文件，访问该目录的文件相当于访问某个设备。</td>
</tr>
</tbody>
</table>
<p>另外还有些<code>/root</code> <code>/proc</code>等就暂且不提辽。<br />
着重提一下家目录，<code>/home</code>下存放着各个用户的家目录，例如一个<code>Ubuntu</code>系统上有<code>Zorua</code> <code>Zoroark</code>两个用户，则<code>/home</code>下就会有两个家目录：<code>/home/Zorua</code> <code>/home/Zoroark</code>。每个用户的家目录大概可以类比为<code>Windows</code>的<code>C:/Users/Zorua</code>这一文件夹吧。<br />
在<code>Linux</code>中，当前用户的家目录路径可以用<code>~</code>来表示，例如当前用户名为<code>Zorua</code>，则<code>~</code>等价于<code>/home/Zorua</code>。<br />
每个用户的家目录下，也有很多的文件夹。<br />
如下，是我的家目录下的文件夹和文件。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">drwxr-xr-x 6 zorua zorua 4096 Apr 12 22:11 Desktop</span><br><span class="line">drwxr-xr-x 2 zorua zorua 4096 Sep 30  2019 Documents</span><br><span class="line">drwxr-xr-x 3 zorua zorua 4096 Apr 12 06:51 Downloads</span><br><span class="line">-rw-r--r-- 1 zorua zorua 8980 Sep 30  2019 examples.desktop</span><br><span class="line">drwxr-xr-x 2 zorua zorua 4096 Apr  5 02:05 Music</span><br><span class="line">drwxr-xr-x 2 zorua zorua 4096 Sep 30  2019 Pictures</span><br><span class="line">drwxr-xr-x 2 zorua zorua 4096 Sep 30  2019 Public</span><br><span class="line">drwxr-xr-x 2 zorua zorua 4096 Sep 30  2019 Templates</span><br><span class="line">drwxr-xr-x 2 zorua zorua 4096 Sep 30  2019 Videos</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>examples.desktop</code>是一个<strong>快捷方式</strong>。详情会在之后的文章里写。</p>
</blockquote>
<ul>
<li>在<code>Linux</code>的目录系统中，文件或文件名前面加一个<code>.</code>，就是<strong>隐藏文件</strong>的意思，隐藏文件默认不能直接在图形界面或终端的<code>ls</code>命令下看到。</li>
<li>有两个特殊的隐藏目录，之所以说是隐藏，是因为只能用<code>ls -a</code>才能看到。一个是<code>..</code>，一个是<code>.</code>。<br />
<code>..</code>表示这个目录的上一级目录，<code>.</code>表示当前目录。这两个目录都是相对路径。<br />
例如对于目录<code>/home/Zorua</code>，它的<code>..</code>就意味着<code>/home</code>，<code>.</code>就意味着<code>/home/Zorua</code>。<br />
这两个目录在任何目录都有的（是的，包括根目录，根目录的 <code>..</code>还是根目录）。</li>
</ul>
<p>#小练习</p>
<div class="note success">
            <p><strong>小练习</strong></p><ul><li>对于用户<code>Zorua</code>，<code>~</code>目录指的是： <span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">C</span></span><br />A.<code>/</code><br />B.<code>/home</code><br />C.<code>/home/Zorua</code><br />D.<code>/Zorua</code></li><li>对于目录<code>/home/Zorua/Desktop</code>，<code>.</code>目录指的是： <span class="hide-inline"><a class="hide-button button--primary button--animated" style="background-color: #FF7242;color: #fff">查看答案<br /></a><span class="hide-content">D</span></span><br />A.<code>/</code><br />B.<code>/home</code><br />C.<code>/home/Zorua</code><br />D.<code>/home/Zorua/Desktop</code></li></ul>
          </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>操作系统</tag>
      </tags>
  </entry>
  <entry>
    <title>机械设计基础笔记</title>
    <url>/2020/03/26/machine_design/</url>
    <content><![CDATA[<h1 id="font-facestcaiyun归档font"><a class="markdownIt-Anchor" href="#font-facestcaiyun归档font"></a> <font face="STCAIYUN">归档</font></h1>
<h2 id="关于"><a class="markdownIt-Anchor" href="#关于"></a> 关于</h2>
<blockquote>
<p>Written BY Zorua 2020.3.10<br />
Email: <a href="mailto:zoruasama@qq.com">zoruasama@qq.com</a><br />
Home: <a href="https://zoruasama.github.io/" target="_blank" rel="noopener">https://zoruasama.github.io/</a></p>
</blockquote>
<h2 id="学习素材"><a class="markdownIt-Anchor" href="#学习素材"></a> 学习素材</h2>
<div class="note primary no-icon">
            <p>来源于智慧树 <a href="https://www.zhihuishu.com/" target="_blank" rel="noopener">机械设计基础B（黑龙江联盟）</a></p>
          </div>
<hr />
<h1 id="平面机构的自由度"><a class="markdownIt-Anchor" href="#平面机构的自由度"></a> 平面机构的自由度</h1>
<h2 id="运动副及其分类"><a class="markdownIt-Anchor" href="#运动副及其分类"></a> 运动副及其分类</h2>
<h3 id="基本定义"><a class="markdownIt-Anchor" href="#基本定义"></a> 基本定义</h3>
<ul>
<li>构件 —— 机构中运动的单元</li>
<li>运动副 —— 两个构件直接接触且具有确定相对运动的联接</li>
<li>运动副元素 —— 两构件相互接触处的几何形状（点、线、面）<br />
运动副可以分为 <strong>平面运动副</strong> 和 <strong>空间运动副</strong>。</li>
</ul>
<h3 id="平面运动副的分类"><a class="markdownIt-Anchor" href="#平面运动副的分类"></a> 平面运动副的分类</h3>
<h4 id="低副"><a class="markdownIt-Anchor" href="#低副"></a> 低副</h4>
<ul>
<li>转动副</li>
<li>移动副</li>
</ul>
<p>特点：面接触、相对转动或相对移动<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303142855389_20519.png" alt="图片" /></p>
<h4 id="高副"><a class="markdownIt-Anchor" href="#高副"></a> 高副</h4>
<ul>
<li>齿轮</li>
<li>凸轮</li>
</ul>
<p>特点：点或线接触、沿接触点切线方向相对移动和绕接触点的转动。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303142923002_7222.png" alt="图片" /></p>
<h3 id="空间运动副的分类"><a class="markdownIt-Anchor" href="#空间运动副的分类"></a> 空间运动副的分类</h3>
<ul>
<li>螺旋副</li>
<li>球面副</li>
</ul>
<h3 id="运动链"><a class="markdownIt-Anchor" href="#运动链"></a> 运动链</h3>
<h4 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h4>
<p>若干构件通过运动副联接而成的可动系统。<br />
若将运动链中的一个构件相对固定，运动链就成为机构。</p>
<h5 id="机构中构件的分类"><a class="markdownIt-Anchor" href="#机构中构件的分类"></a> 机构中构件的分类</h5>
<ol>
<li>机架<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> —— 描述运动的参考系</li>
</ol>
<ol start="2">
<li>原动件 —— 运动规律已知的构件</li>
<li>从动件</li>
</ol>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303172039301_3098.png" alt="曲柄摇杆基本机构" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303172104959_9400.png" alt="椭圆仪" /></p>
<hr />
<h2 id="平面机构运动简图的绘制"><a class="markdownIt-Anchor" href="#平面机构运动简图的绘制"></a> 平面机构运动简图的绘制</h2>
<h3 id="机构运动简图"><a class="markdownIt-Anchor" href="#机构运动简图"></a> 机构运动简图</h3>
<p>忽略与运动无关的<strong>构件外形</strong>和<strong>运动副具体构造</strong>，仅用<strong>简单的线条</strong>和<strong>符号</strong>来表示构件和运动副，并按比例定出各运动副的位置。</p>
<h3 id="与运动有关的因素"><a class="markdownIt-Anchor" href="#与运动有关的因素"></a> 与运动有关的因素</h3>
<ul>
<li>构件数目、运动副数目及类型</li>
<li>运动副之间的相对位置</li>
</ul>
<h3 id="表达方式"><a class="markdownIt-Anchor" href="#表达方式"></a> 表达方式</h3>
<ul>
<li>简单线条 —— 构件</li>
<li>规定符号 —— 运动副</li>
<li>按比例定出运动副的相对位置<br />
用途：分析现有机构，构思设计新机械。</li>
</ul>
<h3 id="运动副符号"><a class="markdownIt-Anchor" href="#运动副符号"></a> 运动副符号</h3>
<h4 id="转动副"><a class="markdownIt-Anchor" href="#转动副"></a> 转动副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303160035117_28851.png" alt="图片" /></p>
<h4 id="移动副"><a class="markdownIt-Anchor" href="#移动副"></a> 移动副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303160116840_13840.png" alt="图片" /></p>
<h4 id="齿轮副"><a class="markdownIt-Anchor" href="#齿轮副"></a> 齿轮副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303160141590_25052.png" alt="图片" /></p>
<h4 id="凸轮副"><a class="markdownIt-Anchor" href="#凸轮副"></a> 凸轮副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303160210851_18137.png" alt="图片" /></p>
<h4 id="构件"><a class="markdownIt-Anchor" href="#构件"></a> 构件</h4>
<p>不管构件形状如何，简单线条表示，带短剖面线表示机架。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303161116948_8882.png" alt="构件" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303162837088_28959.png" alt="机架" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303162926719_9303.png" alt="带运动副元素的构件" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303162955973_6105.png" alt="带运动副元素的构件" /></p>
<h4 id="绘制步骤"><a class="markdownIt-Anchor" href="#绘制步骤"></a> 绘制步骤</h4>
<ol>
<li>确定构件数目及原动件、输出构件；</li>
<li>根据各构件间的相对运动确定运动副的种类和数目;</li>
<li>选定比例尺,按规定符号绘制运动简图;</li>
<li>标明机架、原动件和作图比例尺;</li>
<li>验算自由度。</li>
</ol>
<blockquote>
<p>顺口溜：<br />
先两头，后中间，从头至尾走一遍，数数构件是多少，再看它们怎相连。</p>
</blockquote>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303171518266_6754.png" alt="图片" /></p>
          </div>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200305140804357_20253.png" alt="图片" /></p>
          </div>
<hr />
<h2 id="平面机构自由度的计算"><a class="markdownIt-Anchor" href="#平面机构自由度的计算"></a> 平面机构自由度的计算</h2>
<h3 id="自由度"><a class="markdownIt-Anchor" href="#自由度"></a> 自由度</h3>
<p>定义：构件所具独立运动的个数（确定构件位置所需独立坐标数）<br />
::: alert-info<br />
<strong>示例</strong><br />
一个完全自由的平面运动构件具有三个自由度。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303172242331_3263.png" alt="图片" /><br />
自由度 F=3<br />
:::</p>
<h3 id="平面运动副的约束条件"><a class="markdownIt-Anchor" href="#平面运动副的约束条件"></a> 平面运动副的约束条件</h3>
<p>运动副的形成引入了约束，使构件失去运动自由度。</p>
<h4 id="转动副-2"><a class="markdownIt-Anchor" href="#转动副-2"></a> 转动副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303172538770_7587.png" alt="图片" /><br />
约束数 S=2<br />
自由度 F=1</p>
<h4 id="移动副-2"><a class="markdownIt-Anchor" href="#移动副-2"></a> 移动副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303172646127_18242.png" alt="图片" /><br />
约束数 S=2<br />
自由度 F=1</p>
<h4 id="齿轮副和凸轮副"><a class="markdownIt-Anchor" href="#齿轮副和凸轮副"></a> 齿轮副和凸轮副</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303172702111_30974.png" alt="图片" /><br />
约束数 S=1<br />
自由度 F=2</p>
<h3 id="平面机构的自由度-2"><a class="markdownIt-Anchor" href="#平面机构的自由度-2"></a> 平面机构的自由度</h3>
<h4 id="计算公式"><a class="markdownIt-Anchor" href="#计算公式"></a> 计算公式</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub></mrow><annotation encoding="application/x-tex">F=3n-2P_{L}-P_{H}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>为活动构件数<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">P_L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为低副数，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>H</mi></msub></mrow><annotation encoding="application/x-tex">P_H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为高副数。</p>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303174010085_27677.png" alt="图片" /></p>
          </div>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303174048455_27448.png" alt="图片" /></p><blockquote><p>三个构件通过三个转动副相连，相当于一个构件。</p></blockquote>
          </div>
<h3 id="运动链成为机构的条件"><a class="markdownIt-Anchor" href="#运动链成为机构的条件"></a> 运动链成为机构的条件</h3>
<ul>
<li>有一个机架</li>
<li>自由度大于0</li>
<li>原动件数 = 自由度数</li>
</ul>
<p>对于原动件的选择，其规则通常是：<br />
原动件为<code>含低副构件</code>且<code>与机架相连</code>，只有<code>一个自由度</code>。</p>
<h3 id="注意事项"><a class="markdownIt-Anchor" href="#注意事项"></a> 注意事项</h3>
<h4 id="复合铰链"><a class="markdownIt-Anchor" href="#复合铰链"></a> 复合铰链</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303174647349_8322.png" alt="图片" /><br />
当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>个构件(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>≥</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">m\geq3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>)在同一处构成共轴线的转动副时，<br />
此时的低副是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>个</p>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303181504738_32732.png" alt="图片" /></p>
          </div>
<h4 id="局部自由度"><a class="markdownIt-Anchor" href="#局部自由度"></a> 局部自由度</h4>
<blockquote>
<p>机构中某些构件所具有的局部运动, 并不影响机构运动的自由度。</p>
</blockquote>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303181613794_15467.png" alt="将滑动摩擦变为滚动摩擦" /></p>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303181810465_5935.png" alt="图片" /></p>
          </div>
<h4 id="虚约束"><a class="markdownIt-Anchor" href="#虚约束"></a> 虚约束</h4>
<h5 id="求解方法"><a class="markdownIt-Anchor" href="#求解方法"></a> 求解方法</h5>
<p>定义：不产生实际约束效果的重复约束。</p>
<blockquote>
<p>存在虚约束时，要去除掉重复的约束再计算自由度。</p>
</blockquote>
<ul>
<li>移动副导路<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>平行</li>
<li>转动副轴线重合</li>
<li>平面高副接触点共法线</li>
<li>添加构件前后，点的轨迹重合</li>
<li>添加构件前后，两点的距离不变</li>
<li>对传递运动不起独立作用的重复部分</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303183252477_4866.png" alt="图片" /></p>
<div class="note info">
            <p><strong>示例</strong><br />【1】<br />1个移动副，1个转动副，一个凸轮。<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub><mo>=</mo><mn>3</mn><mo>∗</mo><mn>2</mn><mo>−</mo><mn>2</mn><mo>∗</mo><mn>2</mn><mo>−</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F=3n-2P_L-P_H=3*2-2*2-1=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span><br />【2】<br />1个转动副。<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub><mo>=</mo><mn>3</mn><mo>∗</mo><mn>1</mn><mo>−</mo><mn>2</mn><mo>∗</mo><mn>1</mn><mo>−</mo><mn>0</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F=3n-2P_L-P_H=3*1-2*1-0=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><p>【3】<br />凸轮和从动杆形成两个高副，去除其中一个。<br />1个移动副，1个转动副，一个凸轮。<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub><mo>=</mo><mn>3</mn><mo>∗</mo><mn>2</mn><mo>−</mo><mn>2</mn><mo>∗</mo><mn>2</mn><mo>−</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F=3n-2P_L-P_H=3*2-2*2-1=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><p>【4】<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">C_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是杆2上的C点，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">C_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是滑块3上的C点。两个运动轨迹重合，故C处的构件是虚约束。<br />1个移动副，3个转动副。<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub><mo>=</mo><mn>3</mn><mo>∗</mo><mn>3</mn><mo>−</mo><mn>2</mn><mo>∗</mo><mn>4</mn><mo>−</mo><mn>0</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F=3n-2P_L-P_H=3*3-2*4-0=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><p>【5】<br />中间这根杆上的点和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>−</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">1-3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>这个杆的中点运动轨迹重合，故红色的构件是虚约束。<br />4个转动副。<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub><mo>=</mo><mn>3</mn><mo>∗</mo><mn>3</mn><mo>−</mo><mn>2</mn><mo>∗</mo><mn>4</mn><mo>−</mo><mn>0</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F=3n-2P_L-P_H=3*3-2*4-0=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><p>【6】<br />3个转动副，2个齿轮。<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mn>3</mn><mi>n</mi><mo>−</mo><mn>2</mn><msub><mi>P</mi><mi>L</mi></msub><mo>−</mo><msub><mi>P</mi><mi>H</mi></msub><mo>=</mo><mn>3</mn><mo>∗</mo><mn>3</mn><mo>−</mo><mn>2</mn><mo>∗</mo><mn>3</mn><mo>−</mo><mn>2</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F=3n-2P_L-P_H=3*3-2*3-2=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p>
          </div>
<div class="note info">
            <p><strong>示例</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200303183353683_23179.png" alt="图片" /></p><ul><li>B 复合铰链</li><li>D 局部自由度</li><li>E/F 其中一个为虚约束</li></ul>
          </div>
<h5 id="作用"><a class="markdownIt-Anchor" href="#作用"></a> 作用</h5>
<ol>
<li>改善构件的受力情况，如多个行星轮。</li>
<li>增加机构的刚度，如轴与轴承、机床导轨。</li>
<li>使机构运动顺利，避免运动不确定，如车轮。<br />
各种虚约束的出现都是有条件的。如果条件发生变化，虚约束就会变成实际约束，对机构运动起到限制作用。</li>
</ol>
<h1 id="平面连杆机构"><a class="markdownIt-Anchor" href="#平面连杆机构"></a> 平面连杆机构</h1>
<h2 id="平面连杆机构类型及应用"><a class="markdownIt-Anchor" href="#平面连杆机构类型及应用"></a> 平面连杆机构类型及应用</h2>
<h3 id="特点"><a class="markdownIt-Anchor" href="#特点"></a> 特点</h3>
<ol>
<li>全低副（面接触），有利于润滑、磨损小等特点;</li>
<li>所有的构件均为杆件结构。</li>
</ol>
<h4 id="优点"><a class="markdownIt-Anchor" href="#优点"></a> 优点</h4>
<ol>
<li>各构件之间为面接触，单位面积所受的压力较小，易于润滑，摩擦及磨损较小；</li>
<li>各构件之间的接触面为圆柱面或平面，所以制造比较简单，能获得较高的精度；</li>
<li>各构件之间的接触是靠本身的几何封闭来实现的，不需要锁紧弹簧，所以结构简单；</li>
<li>能够实现多种运动形式的转换，当主动件等速连续运动时，从动件能实现等速、变速连续运动或间歇运动等多种运动规律，以满足生产中不同的运动要求。</li>
</ol>
<h4 id="缺点"><a class="markdownIt-Anchor" href="#缺点"></a> 缺点</h4>
<ol>
<li>组成平面连杆机构的构件和运动副数目多，易产生自锁，累计误差大，降低了机构的运动精度；</li>
<li>机构中作平面复杂运动和往复运动的构件所产生的惯性力难以平衡，这样使机构在高速运转时产生较大的振动和动载荷。因此，连杆机构常用于速度较低的场合。</li>
</ol>
<h3 id="作用-2"><a class="markdownIt-Anchor" href="#作用-2"></a> 作用</h3>
<ol>
<li>近似运动规律的实现；</li>
<li>给定点近似运动轨迹实现的。</li>
</ol>
<h3 id="基本形式"><a class="markdownIt-Anchor" href="#基本形式"></a> 基本形式</h3>
<h4 id="二杆"><a class="markdownIt-Anchor" href="#二杆"></a> 二杆</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307193339940_19570.png" alt="图片" /></p>
<h4 id="三杆"><a class="markdownIt-Anchor" href="#三杆"></a> 三杆</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307193407325_22984.png" alt="图片" /></p>
<h4 id="四杆"><a class="markdownIt-Anchor" href="#四杆"></a> 四杆</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307193438671_16116.png" alt="图片" /></p>
<h4 id="六杆"><a class="markdownIt-Anchor" href="#六杆"></a> 六杆</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307193506112_10138.png" alt="图片" /></p>
<h3 id="铰链四杆机构"><a class="markdownIt-Anchor" href="#铰链四杆机构"></a> 铰链四杆机构</h3>
<h4 id="名称"><a class="markdownIt-Anchor" href="#名称"></a> 名称</h4>
<ul>
<li>机架</li>
<li>连杆</li>
<li>连架杆
<ul>
<li>曲柄  <code>1</code><br />
能够绕轴线作整周回转的。</li>
<li>摇杆（摆杆）<code>3</code><br />
只能绕轴线往复摆动的。</li>
</ul>
</li>
<li>整转副（周转副）<code>A/B</code></li>
<li>摆转副 <code>C/D</code></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307193703269_9751.png" alt="图片" /></p>
<h4 id="均为转动副的四杆机构"><a class="markdownIt-Anchor" href="#均为转动副的四杆机构"></a> 均为转动副的四杆机构</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307194030911_16005.png" alt="图片" /></p>
<h4 id="有一个移动副的四杆机构"><a class="markdownIt-Anchor" href="#有一个移动副的四杆机构"></a> 有一个移动副的四杆机构</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307194248966_24566.png" alt="图片" /></p>
<h4 id="有两个移动副的四杆机构"><a class="markdownIt-Anchor" href="#有两个移动副的四杆机构"></a> 有两个移动副的四杆机构</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200307194455896_25987.png" alt="图片" /></p>
<h3 id="四杆机构的类型"><a class="markdownIt-Anchor" href="#四杆机构的类型"></a> 四杆机构的类型</h3>
<ul>
<li>曲柄摇杆机构</li>
<li>双曲柄机构
<ul>
<li>平行四边形机构</li>
<li>逆平行四边形机构</li>
</ul>
</li>
<li>双摇杆机构
<ul>
<li>等腰梯形机构</li>
</ul>
</li>
</ul>
<h3 id="演化形式"><a class="markdownIt-Anchor" href="#演化形式"></a> 演化形式</h3>
<p><strong>演化的原则：</strong> 不能改变相对运动。<br />
其他型式的四杆机构可以认为是由基本型式的四杆机构演化而来的，其演化方法有：</p>
<ul>
<li>改变构件的形状及运动尺寸</li>
<li>改变运动副的尺寸</li>
<li>选用不同的构件为机架(即机构的倒置)</li>
<li>运动副元素的逆换</li>
</ul>
<h2 id="平面连杆机构基本特性"><a class="markdownIt-Anchor" href="#平面连杆机构基本特性"></a> 平面连杆机构基本特性</h2>
<h3 id="铰链四杆机构有整转副的条件"><a class="markdownIt-Anchor" href="#铰链四杆机构有整转副的条件"></a> 铰链四杆机构有整转副的条件</h3>
<ul>
<li>最短杆与最长杆长度之和小于或等于其余两杆长度之和；</li>
<li>整转副是由最短杆与其相邻杆组成。</li>
</ul>
<p><strong>推论1</strong>：<br />
当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>≤</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">L_{max}+L_{min} \le L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span> 时，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span>为其余两杆长度之和：</p>
<ul>
<li>最短杆是连架杆 —— 曲柄摇杆机构</li>
<li>最短杆是机架 —— 双曲柄机构</li>
<li>最短杆是连杆 —— 双摇杆机构</li>
</ul>
<p><strong>推论2</strong>：<br />
当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>&gt;</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">L_{max}+L_{min} &gt; L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span> 时，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span>为其余两杆长度之和：<br />
同时机构没有整转副。</p>
<h3 id="急回特性"><a class="markdownIt-Anchor" href="#急回特性"></a> 急回特性</h3>
<p><strong>定义：</strong> 从动杆往复运动的平均速度不等的现象。</p>
<h4 id="极位夹角"><a class="markdownIt-Anchor" href="#极位夹角"></a> 极位夹角</h4>
<ul>
<li>对应从动杆的两个极限位置，主动件两个相应位置其一的反向延长线与另一相应位置所夹锐角定义为<strong>极位夹角</strong>，极位夹角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mi mathvariant="normal">≠</mi><mn>0</mn></mrow><annotation encoding="application/x-tex">\theta \ne 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>时有急回特性。</li>
</ul>
<h4 id="行程速比系数"><a class="markdownIt-Anchor" href="#行程速比系数"></a> 行程速比系数</h4>
<ul>
<li><strong>行程速比系数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span></span></span></span>：</strong> 指从动件往复摆动时快速行程（回程）与慢速行程（推程）平均角速度的比值称为行程速比系数，用K表示。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mo>=</mo><mfrac><msub><mi>V</mi><mi mathvariant="normal">快</mi></msub><msub><mi>V</mi><mi mathvariant="normal">慢</mi></msub></mfrac><mo>=</mo><mfrac><msub><mi>V</mi><mi mathvariant="normal">回</mi></msub><msub><mi>V</mi><mi mathvariant="normal">工</mi></msub></mfrac><mo>=</mo><mfrac><mrow><msub><mi>C</mi><mn>2</mn></msub><msub><mi>C</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><msub><mi>t</mi><mi mathvariant="normal">回</mi></msub></mrow><mrow><msub><mi>C</mi><mn>1</mn></msub><msub><mi>C</mi><mn>2</mn></msub><mi mathvariant="normal">/</mi><msub><mi>t</mi><mi mathvariant="normal">工</mi></msub></mrow></mfrac><mo>=</mo><mfrac><msub><mi>t</mi><mi mathvariant="normal">工</mi></msub><msub><mi>t</mi><mi mathvariant="normal">回</mi></msub></mfrac><mo>=</mo><mfrac><mfrac><mrow><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup><mo>+</mo><mi>θ</mi></mrow><msub><mi>ω</mi><mn>1</mn></msub></mfrac><mfrac><mrow><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup><mo>−</mo><mi>θ</mi></mrow><msub><mi>ω</mi><mn>1</mn></msub></mfrac></mfrac><mo>=</mo><mfrac><mrow><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup><mo>+</mo><mi>θ</mi></mrow><mrow><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup><mo>−</mo><mi>θ</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">K=\frac{V_{快}}{V_{慢}}=\frac{V_{回}}{V_{工}}=\frac{C_{2}C_{1}/t_{回}}{C_{1}C_{2}/t_{工}}=\frac{t_{工}}{t_{回}}=\frac{\frac{180^{\circ}+\theta}{\omega_1}}{\frac{180^{\circ}-\theta}{\omega_1}}=\frac{180^{\circ}+\theta}{180^{\circ}-\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3335309999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.22222em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">慢</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.22222em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">快</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3335309999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.22222em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">工</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.22222em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">回</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">/</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">工</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight">/</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">回</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2857559999999997em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8406559999999998em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">回</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">工</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.23229em;vertical-align:-0.8386449999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.393645em;"><span style="top:-2.5519750000000005em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9114642857142857em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3447999999999998em;margin-left:-0.03588em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">1</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29964em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.73845em;"><span style="top:-2.794em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mtight"><span class="mord mtight">∘</span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5580285714285714em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.70062em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9900357142857144em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3447999999999998em;margin-left:-0.03588em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">1</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29964em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.84845em;"><span style="top:-2.904em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mtight"><span class="mord mtight">∘</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5580285714285714em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8386449999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.321256em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9179250000000001em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6034642857142858em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">∘</span></span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">θ</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7484642857142858em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">∘</span></span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mo>≥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K\ge1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mfrac><mrow><mi>K</mi><mo>−</mo><mn>1</mn></mrow><mrow><mi>K</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo>∗</mo><mn>18</mn><msup><mn>0</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">\theta=\frac{K-1}{K+1}*180^{\circ}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.275662em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.674115em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">8</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∘</span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
</ul>
</li>
</ul>
<h4 id="压力角"><a class="markdownIt-Anchor" href="#压力角"></a> 压力角</h4>
<ul>
<li><strong>压力角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>：</strong> 从动杆(运动输出件)受力点的力作用线与该点<br />
速度方位线所夹锐角。(不考虑摩擦)</li>
</ul>
<h4 id="传动角"><a class="markdownIt-Anchor" href="#传动角"></a> 传动角</h4>
<ul>
<li><strong>传动角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span></span></span></span>：</strong> 压力角的余角。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200310195244135_8618.png" alt="图片" /></li>
</ul>
<h4 id="死点位置"><a class="markdownIt-Anchor" href="#死点位置"></a> 死点位置</h4>
<ul>
<li><strong>死点位置：</strong> 连杆与从动件共线的位置。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>γ</mi><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\gamma=0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span>
<ul>
<li>曲柄摇杆机构(摇杆为主动件)有死点位置；</li>
<li>曲柄滑块机构(滑块为主动件)有死点位置；</li>
<li>摆动导杆机构(导杆为主动件)有死点位置。</li>
</ul>
</li>
</ul>
<h2 id="典型平面连杆机构实例分析"><a class="markdownIt-Anchor" href="#典型平面连杆机构实例分析"></a> 典型平面连杆机构实例分析</h2>
<h3 id="例1"><a class="markdownIt-Anchor" href="#例1"></a> 例1</h3>
<p>图示的铰链四杆机构中,各构件的长度为如图。</p>
<ul>
<li>当取杆AD为机架时,该机构为什么没有曲柄?</li>
<li>改变杆4长度如何使该机构有曲柄存在?<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200310200017002_23129.png" alt="图片" /><br />
<strong>解：</strong></li>
<li>根据杆长条件：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>l</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>&gt;</mo><msub><mi>l</mi><mrow><mi>B</mi><mi>C</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>C</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">l_{AB}+l_{AD} &gt; l_{BC}+l_{CD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，所以没有整转副。为双摇杆机构，无曲柄。</li>
<li>AD杆长度减小满足杆长条件后，机构可能存在曲柄。
<ul>
<li>可能1：AD缩短满足杆长条件，且AD仍然是最长杆件。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>l</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>≤</mo><msub><mi>l</mi><mrow><mi>B</mi><mi>C</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>C</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">l_{AB}+l_{AD} \le l_{BC}+l_{CD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 且 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>≥</mo><mn>60</mn></mrow><annotation encoding="application/x-tex">l_{AD}\ge60</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">0</span></span></span></span>。得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>60</mn><mo>≤</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>≤</mo><mn>70</mn></mrow><annotation encoding="application/x-tex">60 \le l_{AD}\le 70</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">6</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">0</span></span></span></span>。</li>
<li>可能2：AD缩短满足杆长条件，且AD不是最长杆件也不是最短杆件。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>l</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>B</mi><mi>C</mi></mrow></msub><mo>≤</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>C</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">l_{AB}+l_{BC} \le l_{AD}+l_{CD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>40</mn><mo>≤</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>&lt;</mo><mn>60</mn></mrow><annotation encoding="application/x-tex">40 \le l_{AD}&lt; 60</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">0</span></span></span></span>。得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>50</mn><mo>≤</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>≤</mo><mn>60</mn></mrow><annotation encoding="application/x-tex">50 \le l_{AD}\le 60</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">0</span></span></span></span>。</li>
<li>可能3：AD缩短满足杆长条件，且AD是最短杆件。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>B</mi><mi>C</mi></mrow></msub><mo>≤</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>B</mi></mrow></msub><mo>+</mo><msub><mi>l</mi><mrow><mi>C</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">l_{AD}+l_{BC} \le l_{AB}+l_{CD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>&lt;</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>&lt;</mo><mn>40</mn></mrow><annotation encoding="application/x-tex">0 &lt; l_{AD}&lt; 40</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span></span></span></span>。得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>≤</mo><msub><mi>l</mi><mrow><mi>A</mi><mi>D</mi></mrow></msub><mo>≤</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">0 \le l_{AD}\le 30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">0</span></span></span></span>。</li>
</ul>
</li>
</ul>
<h3 id="例2"><a class="markdownIt-Anchor" href="#例2"></a> 例2</h3>
<p>图示偏置曲柄滑块机构,试画出滑块行程<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>、极位夹角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>、最大最小压力角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200310201901820_10336.png" alt="图片" /><br />
根据AB和BC的共线和反向共线作图，得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><msub><mi>C</mi><mn>1</mn></msub><msub><mi>C</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s=C_1C_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mi mathvariant="normal">∠</mi><msub><mi>C</mi><mn>1</mn></msub><mi>A</mi><msub><mi>C</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\theta=\angle C_1AC_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84224em;vertical-align:-0.15em;"></span><span class="mord">∠</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">A</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>α</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>=</mo><msup><mn>0</mn><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">\alpha_{min}=0^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.674115em;vertical-align:0em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>α</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mi>arcsin</mi><mo>⁡</mo><mfrac><mrow><mi>a</mi><mo>+</mo><mi>e</mi></mrow><mi>b</mi></mfrac></mrow><annotation encoding="application/x-tex">\alpha_{max}=\arcsin{\frac{a+e}{b}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1473309999999999em;vertical-align:-0.345em;"></span><span class="mop">arcsin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.802331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h1 id="凸轮机构"><a class="markdownIt-Anchor" href="#凸轮机构"></a> 凸轮机构</h1>
<h2 id="凸轮机构的应用和类型"><a class="markdownIt-Anchor" href="#凸轮机构的应用和类型"></a> 凸轮机构的应用和类型</h2>
<h3 id="凸轮机构-2"><a class="markdownIt-Anchor" href="#凸轮机构-2"></a> 凸轮机构</h3>
<p>主要由<code>凸轮</code>、<code>从动件</code>和<code>机架</code>三部分组成。<br />
作用：实现从动件往复运动或<code>摆动任意运动规律</code>。</p>
<p><strong>定义：</strong> 图示为内燃机配气气凸轮机构。具有曲线轮廓的构件1叫做凸轮,当它作等速转动时,其曲线轮廓通过与推杆2的平底接触,使气阀有规律地开启和闭合。凸轮和从动件之间高副连接。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314214730252_15541.png" alt="图片" /></p>
<h4 id="按凸轮的形状分类"><a class="markdownIt-Anchor" href="#按凸轮的形状分类"></a> 按凸轮的形状分类</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314214820391_13025.png" alt="图片" /></p>
<h4 id="按从动杆运动形式分类"><a class="markdownIt-Anchor" href="#按从动杆运动形式分类"></a> 按从动杆运动形式分类</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314214919869_27209.png" alt="图片" /></p>
<h4 id="按从动杆形状分类"><a class="markdownIt-Anchor" href="#按从动杆形状分类"></a> 按从动杆形状分类</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314214937212_25852.png" alt="图片" /></p>
<h4 id="凸轮廓线及名称"><a class="markdownIt-Anchor" href="#凸轮廓线及名称"></a> 凸轮廓线及名称</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314215237121_1551.png" alt="图片" /><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314215529379_21381.png" alt="图片" /></p>
<h2 id="从动件的运动规律与凸轮机构的压力角"><a class="markdownIt-Anchor" href="#从动件的运动规律与凸轮机构的压力角"></a> 从动件的运动规律与凸轮机构的压力角</h2>
<h3 id="等速运动规律"><a class="markdownIt-Anchor" href="#等速运动规律"></a> 等速运动规律</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314215747959_27785.png" alt="图片" /><br />
特点：设计简单，匀速进给，加速度最小，始点末点有刚性冲击。</p>
<h3 id="简谐运动规律"><a class="markdownIt-Anchor" href="#简谐运动规律"></a> 简谐运动规律</h3>
<p>（余弦加速度运动规律）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314215926843_8956.png" alt="图片" /></p>
<h3 id="正弦加速度运动规律"><a class="markdownIt-Anchor" href="#正弦加速度运动规律"></a> 正弦加速度运动规律</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314220020069_10773.png" alt="图片" /></p>
<h3 id="凸轮机构的压力角"><a class="markdownIt-Anchor" href="#凸轮机构的压力角"></a> 凸轮机构的压力角</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200314220223904_18591.png" alt="图片" /><br />
压力角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>与驱动力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span> :压力角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>越小越有利于驱动。<br />
当a大于一定值，机构将发生自锁。<br />
一般情况下，</p>
<ul>
<li>推程[a] = 30° (移动)<br />
[a] = 45° (摆动)</li>
<li>回程[a’] = 70°- 80°<br />
基圆半径越大，压力角越小。<br />
凸轮逆时针转动，从动杆应适当右偏置。<br />
减小推程压力角,但同时增大回程压力角。<br />
凸轮顺时针转动时上面情况相反。</li>
</ul>
<h1 id="齿轮机构"><a class="markdownIt-Anchor" href="#齿轮机构"></a> 齿轮机构</h1>
<h2 id="齿轮机构的特点与类型"><a class="markdownIt-Anchor" href="#齿轮机构的特点与类型"></a> 齿轮机构的特点与类型</h2>
<h3 id="结构特点"><a class="markdownIt-Anchor" href="#结构特点"></a> 结构特点</h3>
<p>圆柱体或圆锥体上均匀分布有大小一样的轮齿。</p>
<h3 id="作用-3"><a class="markdownIt-Anchor" href="#作用-3"></a> 作用</h3>
<p>传递空间任意两轴(平行、相交、交错)的旋转运动或将转动变换为移动。</p>
<h3 id="优点-2"><a class="markdownIt-Anchor" href="#优点-2"></a> 优点</h3>
<ol>
<li>传动比准确、传动平稳</li>
<li>圆周速度大，高达300m/s</li>
<li>传动功率范围大，从几瓦到10万千瓦</li>
<li>效率高、使用寿命长、工作安全可靠</li>
<li>可实现平行轴、相交轴和交错轴之间的传动</li>
</ol>
<h3 id="缺点-2"><a class="markdownIt-Anchor" href="#缺点-2"></a> 缺点</h3>
<ol>
<li>要求较高的制造和安装精度</li>
<li>加工成本高</li>
<li>不适宜远距离传动(如单车)</li>
</ol>
<h3 id="分类"><a class="markdownIt-Anchor" href="#分类"></a> 分类</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200321221549607_20207.png" alt="图片" /></p>
<h2 id="齿廓实现定角速比的条件"><a class="markdownIt-Anchor" href="#齿廓实现定角速比的条件"></a> 齿廓实现定角速比的条件</h2>
<h3 id="工作原理"><a class="markdownIt-Anchor" href="#工作原理"></a> 工作原理</h3>
<h4 id="工作原理-2"><a class="markdownIt-Anchor" href="#工作原理-2"></a> 工作原理</h4>
<p>依靠主动轮齿推动从动轮齿实现运动的传递</p>
<h4 id="啮合"><a class="markdownIt-Anchor" href="#啮合"></a> 啮合</h4>
<p>两条齿廓曲线的相互接触</p>
<h4 id="传动比"><a class="markdownIt-Anchor" href="#传动比"></a> 传动比</h4>
<p>两轮的瞬时角速度比<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mn>12</mn></msub><mo>=</mo><msub><mi>ω</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><msub><mi>ω</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">i_{12}=\omega_1/\omega_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<h4 id="齿廓啮合的基本要求"><a class="markdownIt-Anchor" href="#齿廓啮合的基本要求"></a> 齿廓啮合的基本要求</h4>
<p>基本要求是保证瞬时传动比恒定<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mn>12</mn></msub><mo>=</mo><msub><mi>ω</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><msub><mi>ω</mi><mn>2</mn></msub><mo>=</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">i_{12}=\omega_1/\omega_2=Const</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span></span></span></span><br />
<strong>齿廓啮合基本规律</strong><br />
互相啮合的一对齿轮在任一位置的传动比，都与连心线<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_1,O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>被其啮合齿廓在接触点的公法线所分割的两线段成反比。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mn>12</mn></msub><mo>=</mo><msub><mi>ω</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><msub><mi>ω</mi><mn>2</mn></msub><mo>=</mo><msub><mi>O</mi><mn>2</mn></msub><mi>C</mi><mi mathvariant="normal">/</mi><msub><mi>O</mi><mn>1</mn></msub><mi>C</mi></mrow><annotation encoding="application/x-tex">i_{12}=\omega_1/\omega_2=O_2C/O_1C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span><br />
<strong>推论-定传动比的条件</strong><br />
不论两齿廓在何位置接触，过接触点所作的齿廓公法必须与两齿轮的连心线交于一固定点。</p>
<h3 id="相关基本概念"><a class="markdownIt-Anchor" href="#相关基本概念"></a> 相关基本概念</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200321223042338_17764.png" alt="图片" /></p>
<ul>
<li><strong>节点：</strong> 两齿廓接触点公法线<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">nn</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">n</span></span></span></span>与两轮连心线<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub><msub><mi>O</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">O_1O_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的交点<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span>。</li>
<li><strong>节圆：</strong> 过节点所在的圆<br />
可以视为传动时，两个节圆作纯滚动。</li>
<li><strong>中心距：</strong> 两个节圆半径之和</li>
</ul>
<h3 id="共轭齿廓"><a class="markdownIt-Anchor" href="#共轭齿廓"></a> 共轭齿廓</h3>
<p>凡满足齿廓啮合定律而相互啮合的一对齿廓称为<strong>共轭齿廓</strong>。<br />
渐开线，摆线，圆弧，抛物线。</p>
<h2 id="渐开线齿廓"><a class="markdownIt-Anchor" href="#渐开线齿廓"></a> 渐开线齿廓</h2>
<h3 id="渐开线的形成"><a class="markdownIt-Anchor" href="#渐开线的形成"></a> 渐开线的形成</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200321223630250_21476.png" alt="图片" /><br />
当直线BK沿半径为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">r_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的圆作纯滚动时，该直线上任一点K的轨迹就是该圆的渐开线。</p>
<ul>
<li>发生线BK</li>
<li>基圆<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">r_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>向径<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">r_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>压力角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>α</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
K点所受正压力的方向与K点速度方向之间所夹的锐角。</li>
</ul>
<h4 id="渐开线的性质"><a class="markdownIt-Anchor" href="#渐开线的性质"></a> 渐开线的性质</h4>
<ol>
<li>发生线沿基圆滚过的直线长度等于基圆上被滚过的圆弧长度。</li>
<li>渐开线上任意点的法线必切于基圆。</li>
<li>渐开线上越远离基圆的部分，其压力角越大。</li>
<li>渐开线的形状，取决于基圆大小。</li>
<li>基圆以内无渐开线。<br />
Tips. 基圆处的渐开线曲率半径为0</li>
</ol>
<h3 id="渐开线齿廓的啮合特性"><a class="markdownIt-Anchor" href="#渐开线齿廓的啮合特性"></a> 渐开线齿廓的啮合特性</h3>
<ol>
<li>啮合线为一直线<br />
啮合线是啮合点的轨迹线。</li>
<li>啮合角，啮合线与节圆公切线所夹的锐角称为啮合角。因啮合角不变，所以作用力方向恒定。啮合角在数值上恒等于节圆压力角。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200321224711594_26952.png" alt="图片" /></li>
<li>传动比恒定<br />
公法线不变，与连心线交于固定点</li>
<li>中心可分离性<br />
当安装时中心距略有变化，传动比不变。</li>
</ol>
<h2 id="齿轮各部分名称及标准齿轮的基本尺寸"><a class="markdownIt-Anchor" href="#齿轮各部分名称及标准齿轮的基本尺寸"></a> 齿轮各部分名称及标准齿轮的基本尺寸</h2>
<h3 id="名称-2"><a class="markdownIt-Anchor" href="#名称-2"></a> 名称</h3>
<ul>
<li>齿顶圆<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mi>a</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">d_a,r_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：过轮齿顶部作的圆</li>
<li>齿根圆<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mi>f</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">d_f,r_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>：过轮齿底部作的圆</li>
<li>齿厚<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">s_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：一枚轮齿两侧的弧长</li>
<li>齿槽宽<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">e_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：两枚轮齿之间的弧长</li>
<li>齿距<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">p_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：齿厚+齿槽宽</li>
<li>法向齿距<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">p_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：相邻两个轮齿同侧齿廓之间在法线，即基圆的切线上的距离</li>
<li>分度圆<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo separator="true">,</mo><mi>r</mi><mo separator="true">,</mo><mi>s</mi><mo separator="true">,</mo><mi>e</mi><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mi>s</mi><mo>+</mo><mi>e</mi></mrow><annotation encoding="application/x-tex">d,r,s,e,p=s+e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">e</span></span></span></span>：规定的计算基准圆（用点划线表示）</li>
<li>齿顶高<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">h_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：齿顶圆到分度圆的径向距离。</li>
<li>齿根高<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">h_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>：齿根圆到分度圆的径向距离。</li>
<li>齿全高<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>=</mo><msub><mi>h</mi><mi>a</mi></msub><mo>+</mo><msub><mi>h</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">h=h_a+h_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>：齿顶高+齿根高</li>
<li>齿宽<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200321230742418_7054.png" alt="图片" /></li>
</ul>
<h3 id="齿轮基本参数"><a class="markdownIt-Anchor" href="#齿轮基本参数"></a> 齿轮基本参数</h3>
<ol>
<li>齿数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></li>
<li>模数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span><br />
分度圆周长 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo>=</mo><mi>π</mi><mi>d</mi><mo>=</mo><mi>z</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">l=\pi d=zp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">p</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo>=</mo><mi>z</mi><mfrac><mi>p</mi><mi>m</mi></mfrac></mrow><annotation encoding="application/x-tex">d=z\frac{p}{m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0925em;vertical-align:-0.345em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>=</mo><mfrac><mi>p</mi><mi>π</mi></mfrac></mrow><annotation encoding="application/x-tex">m=\frac{p}{\pi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0925em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">π</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@1.0/img/jixie/20200321231456880_31384.png" alt="图片" /></li>
</ol>
<h1 id="轮系"><a class="markdownIt-Anchor" href="#轮系"></a> 轮系</h1>
<h2 id="定轴轮系传动比计算"><a class="markdownIt-Anchor" href="#定轴轮系传动比计算"></a> 定轴轮系传动比计算</h2>
<h3 id="轮系的传动比"><a class="markdownIt-Anchor" href="#轮系的传动比"></a> 轮系的传动比</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mrow><mi mathvariant="normal">入</mi><mi mathvariant="normal">出</mi></mrow></msub><mo>=</mo><mfrac><msub><mi>ω</mi><mi mathvariant="normal">入</mi></msub><msub><mi>ω</mi><mi mathvariant="normal">出</mi></msub></mfrac><mo>=</mo><mfrac><msub><mi>n</mi><mi mathvariant="normal">入</mi></msub><msub><mi>n</mi><mi mathvariant="normal">出</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">i_{入出}=\frac{\omega_入}{\omega_出}=\frac{n_入}{n_出}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">入</span><span class="mord cjk_fallback mtight">出</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1565919999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">出</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">入</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1565919999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">出</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">入</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
具有<strong>大小</strong>，<strong>转向</strong>。</p>
<h3 id="一对齿轮的传动比"><a class="markdownIt-Anchor" href="#一对齿轮的传动比"></a> 一对齿轮的传动比</h3>
<ol>
<li>大小<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mn>12</mn></msub><mo>=</mo><mfrac><msub><mi>n</mi><mn>1</mn></msub><msub><mi>n</mi><mn>2</mn></msub></mfrac><mo>=</mo><mfrac><msub><mi>z</mi><mn>2</mn></msub><msub><mi>z</mi><mn>1</mn></msub></mfrac></mrow><annotation encoding="application/x-tex">i_{12}=\frac{n_1}{n_2}=\frac{z_2}{z_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1565919999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1565919999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>转向
<ul>
<li>圆柱齿轮——外啮合 <code>-</code> 内啮合 <code>+</code></li>
<li>空间齿轮(圆锥齿轮、蜗杆蜗轮）——在图上画箭头
<ul>
<li>要么头对头、要么尾对尾</li>
<li>左旋左手，右旋右手；四指转向，拇指进向；不进则退，由退定向。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200328190151908_26902.png" alt="" /></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="定轴轮系传动比大小的计算"><a class="markdownIt-Anchor" href="#定轴轮系传动比大小的计算"></a> 定轴轮系传动比大小的计算</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200328184802148_14657.png" alt="" /><br />
<strong>惰轮：</strong> 不对大小产生影响，改变输出轴的回转方向。<br />
<strong>结论</strong><br />
定轴轮系的传动比<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mrow><mn>1</mn><mi>k</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi mathvariant="normal">从</mi></msub><msub><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>→</mo><mi>k</mi></mrow></msub></mrow><mrow><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi mathvariant="normal">主</mi></msub><msub><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>→</mo><mi>k</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">i_{1k}=\frac{\Pi(z_从)_{1→k}}{\Pi(z_主)_{1→k}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">主</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">→</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">从</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">→</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<h3 id="首末两轮转向关系的确定"><a class="markdownIt-Anchor" href="#首末两轮转向关系的确定"></a> 首末两轮转向关系的确定</h3>
<h4 id="对于平面轮系"><a class="markdownIt-Anchor" href="#对于平面轮系"></a> 对于平面轮系</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mrow><mn>1</mn><mi>k</mi></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>m</mi></msup><mfrac><mrow><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi mathvariant="normal">从</mi></msub><msub><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>→</mo><mi>k</mi></mrow></msub></mrow><mrow><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi mathvariant="normal">主</mi></msub><msub><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>→</mo><mi>k</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">i_{1k}=(-1)^m\frac{\Pi(z_从)_{1→k}}{\Pi(z_主)_{1→k}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">主</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">→</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">从</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">→</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>为外啮合齿轮对数</li>
<li>取正<code>+</code> 转向相同</li>
<li>取负<code>-</code> 转向相反</li>
</ul>
<h4 id="对于空间轮系"><a class="markdownIt-Anchor" href="#对于空间轮系"></a> 对于空间轮系</h4>
<p>在图上画箭头表示首末两轮的转向关系<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mrow><mn>1</mn><mi>k</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi mathvariant="normal">从</mi></msub><msub><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>→</mo><mi>k</mi></mrow></msub></mrow><mrow><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi mathvariant="normal">主</mi></msub><msub><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>→</mo><mi>k</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">i_{1k}=\frac{\Pi(z_从)_{1→k}}{\Pi(z_主)_{1→k}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">主</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">→</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.143em;"><span style="top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord cjk_fallback mtight">从</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">→</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200328190420087_9304.png" alt="" /></p>
<h1 id="连接"><a class="markdownIt-Anchor" href="#连接"></a> 连接</h1>
<h2 id="连接概述与螺纹的形成-类型"><a class="markdownIt-Anchor" href="#连接概述与螺纹的形成-类型"></a> 连接概述与螺纹的形成、类型</h2>
<h3 id="连接概述"><a class="markdownIt-Anchor" href="#连接概述"></a> 连接概述</h3>
<p>连接由<strong>被连接件、连接件</strong>组成。</p>
<ul>
<li><strong>被连接件：</strong> 轴与轴上零件(齿轮、飞轮)。<br />
轮类零件的轮圈与轮心、箱体与箱盖、焊接零件中的钢板与型钢等。</li>
<li><strong>连接件(紧固件)：</strong> 螺栓、螺母、销、铆钉。<br />
无专门连接件(紧固件)连接：靠被连接件本身变形组成的过盈配合、利用分子间结合力组成的焊接和粘接等。</li>
</ul>
<h3 id="连接的作用"><a class="markdownIt-Anchor" href="#连接的作用"></a> 连接的作用</h3>
<p>零件→构件→机构→部件→机器</p>
<h3 id="连接的分类"><a class="markdownIt-Anchor" href="#连接的分类"></a> 连接的分类</h3>
<p>三、连接的分类<br />
1、动连接:被连接零件可相对运动一运动副<br />
2.静连接:被连接零件无相对运动一 构件</p>
<ul>
<li>动连接<br />
被连接零件可相对运动——运动副</li>
<li>静连接<br />
被连接零件无相对运动——构件
<ol>
<li>可拆连接:螺纹、键、销、成型连接</li>
<li>不可拆连接:铆接、焊接、粘接</li>
<li>过盈配合:温差法装入——可拆、压入法装入——不可拆</li>
</ol>
</li>
</ul>
<h3 id="螺纹的形成"><a class="markdownIt-Anchor" href="#螺纹的形成"></a> 螺纹的形成</h3>
<p>一动点在一圆柱体的表面上一边绕轴线等速旋转，同时沿轴向作等速移动的轨迹为螺旋线。</p>
<h3 id="螺纹的类型"><a class="markdownIt-Anchor" href="#螺纹的类型"></a> 螺纹的类型</h3>
<ol>
<li>按平面图形形状分：</li>
</ol>
<ul>
<li>矩形螺纹</li>
<li>三角形螺纹</li>
<li>梯形螺纹</li>
<li>锯齿形螺纹</li>
</ul>
<ol start="2">
<li>
<p>按螺旋线的旋向分：</p>
<ol>
<li>以轴线为基准</li>
<li>观察螺旋线的升高方向
<ul>
<li>左旋螺纹</li>
<li>右旋螺纹</li>
</ul>
</li>
</ol>
</li>
<li>
<p>按螺旋线的数目分：</p>
</li>
</ol>
<ul>
<li>单线螺纹</li>
<li>多线螺纹</li>
</ul>
<p>n线螺纹：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>n</mi><mi>P</mi></mrow><annotation encoding="application/x-tex">S=nP</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>，一般：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">n\le 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span></p>
<ol start="4">
<li>按螺纹的位置分：</li>
</ol>
<ul>
<li>内螺纹</li>
<li>外螺纹<br />
两者旋合组成<strong>螺旋副</strong>或称<strong>螺纹副</strong></li>
</ul>
<ol start="5">
<li>按螺纹的用途分：</li>
</ol>
<ul>
<li>连接螺纹</li>
<li>传动螺纹</li>
</ul>
<ol start="6">
<li>按母体的形状分：</li>
</ol>
<ul>
<li>圆柱螺纹</li>
<li>圆锥螺纹</li>
</ul>
<h2 id="螺纹的主要参数"><a class="markdownIt-Anchor" href="#螺纹的主要参数"></a> 螺纹的主要参数</h2>
<p>以三角形螺纹中的普通螺纹为例。</p>
<ul>
<li>大径（外径）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d(D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span><br />
与外螺纹牙顶(或内螺纹牙底)相重合的假想圆柱面直径，亦称公称直径。</li>
<li>小径（内径）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>D</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_1(D_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
与外螺纹牙底(或内螺纹牙顶)相重合的假想圆柱面直径，常用作危险截面的计算直径</li>
<li>中径<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>D</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_2(D_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
在轴向剖面内牙间(沟槽)与牙厚(凸起)宽相等处的假想圆柱面的直径。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo>≈</mo><mn>0.5</mn><mo stretchy="false">(</mo><mi>d</mi><mo>+</mo><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d≈0.5(d+d_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
中径是确定螺纹几何参数和配合性质的直径。</li>
<li>螺距<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span><br />
相邻两牙在中径圆柱面的母线上对应两点间的轴向距离。</li>
<li>导程<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mi>h</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(P_h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
同一螺旋线上相邻两牙在中径圆柱面的母线上对应两点间的轴向距离。</li>
<li>螺纹升角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span></span></span><br />
中径圆柱面上螺旋线的切线与垂直于螺旋线轴线的平面的夹角。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>tan</mi><mo>⁡</mo><mi>ψ</mi><mo>=</mo><mi>n</mi><mi>P</mi><mi mathvariant="normal">/</mi><mi>π</mi><msub><mi>d</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\tan{\psi}=nP/\pi d_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop">tan</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
+牙型角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span><br />
螺纹轴向截面内，螺纹牙型两侧边的夹角。<br />
+牙侧角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span><br />
螺纹牙的侧边与螺纹轴线垂直平面的夹角。</li>
</ul>
<p>对于对称牙型，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi><mo>=</mo><mi>α</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\beta =\alpha /2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord">/</span><span class="mord">2</span></span></span></span></p>
<ul>
<li>螺纹的工作高度h<br />
表示内外螺纹沿径向的接触高度</li>
</ul>
<h2 id="螺旋副的受力分析-效率和自锁"><a class="markdownIt-Anchor" href="#螺旋副的受力分析-效率和自锁"></a> 螺旋副的受力分析、效率和自锁</h2>
<h2 id="机械制造常用螺纹"><a class="markdownIt-Anchor" href="#机械制造常用螺纹"></a> 机械制造常用螺纹</h2>
<table>
<thead>
<tr>
<th>不同牙型螺纹</th>
<th>特点</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>三角形</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">F_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>大，自锁性好，效率低</td>
<td>连接</td>
</tr>
<tr>
<td>矩形</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">F_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>大，自锁性好，效率低</td>
<td>传动</td>
</tr>
<tr>
<td>梯形</td>
<td>强度好于矩形螺纹</td>
<td>传动，应用广</td>
</tr>
<tr>
<td>锯齿形</td>
<td>综合矩形和梯形的优点</td>
<td>多用于单向传动</td>
</tr>
</tbody>
</table>
<h2 id="螺纹连接的基本类型及螺旋紧固件"><a class="markdownIt-Anchor" href="#螺纹连接的基本类型及螺旋紧固件"></a> 螺纹连接的基本类型及螺旋紧固件</h2>
<h2 id="螺旋连接的预紧"><a class="markdownIt-Anchor" href="#螺旋连接的预紧"></a> 螺旋连接的预紧</h2>
<h2 id="螺纹连接的防松"><a class="markdownIt-Anchor" href="#螺纹连接的防松"></a> 螺纹连接的防松</h2>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200407225127286_7210.png" alt="" /></p>
<h1 id="带传动"><a class="markdownIt-Anchor" href="#带传动"></a> 带传动</h1>
<h2 id="带的类型与尺寸计算"><a class="markdownIt-Anchor" href="#带的类型与尺寸计算"></a> 带的类型与尺寸计算</h2>
<h3 id="带的类型"><a class="markdownIt-Anchor" href="#带的类型"></a> 带的类型</h3>
<ul>
<li>平带</li>
<li>V带</li>
<li>多楔带</li>
<li>圆带</li>
<li>同步带（齿轮带）</li>
</ul>
<h3 id="尺寸计算"><a class="markdownIt-Anchor" href="#尺寸计算"></a> 尺寸计算</h3>
<h4 id="包角"><a class="markdownIt-Anchor" href="#包角"></a> 包角</h4>
<p>包角指的是带和带轮相接触的弧段的圆心角。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414221739.png" alt="" /></p>
<h4 id="带长"><a class="markdownIt-Anchor" href="#带长"></a> 带长</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414221750.png" alt="" /></p>
<h2 id="带传动的张紧-特点及应用"><a class="markdownIt-Anchor" href="#带传动的张紧-特点及应用"></a> 带传动的张紧、特点及应用</h2>
<h3 id="张紧方法"><a class="markdownIt-Anchor" href="#张紧方法"></a> 张紧方法</h3>
<ol>
<li>调整中心距
<ul>
<li>调整螺钉</li>
</ul>
</li>
<li>采用张紧轮</li>
<li>自动张紧装置</li>
</ol>
<h3 id="特点-2"><a class="markdownIt-Anchor" href="#特点-2"></a> 特点</h3>
<h4 id="优点-3"><a class="markdownIt-Anchor" href="#优点-3"></a> 优点</h4>
<ol>
<li>适用于中心距较大的传动；</li>
<li>带具有良好的挠性,可缓和冲击、吸收振动；</li>
<li>过载时带与带轮之间会出现打滑,避免了其它零<br />
件的损坏；</li>
<li>结构简单、成本低廉。</li>
</ol>
<h4 id="缺点-3"><a class="markdownIt-Anchor" href="#缺点-3"></a> 缺点</h4>
<ol>
<li>传动的外廓尺寸较大；</li>
<li>需要张紧装置；</li>
<li>由于带的滑动,不能保证固定不变的传动比；</li>
<li>带的寿命较短；</li>
<li>传动效率较低。</li>
</ol>
<h3 id="应用"><a class="markdownIt-Anchor" href="#应用"></a> 应用</h3>
<p>两轴平行、且同向传动的场合（称为开口传动），中小功率电机与工作机之间的动力传递。</p>
<p>V带传动应用最广，带速：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>=</mo><mn>5...30</mn><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">v=5...30m/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">3</span><span class="mord">0</span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span>，传动比：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>≤</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">i \le7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span>，效率：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>η</mi><mo>≈</mo><mn>0.9...0.95</mn></mrow><annotation encoding="application/x-tex">\eta \approx 0.9...0.95</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6775599999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">9</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">0</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span></span></span></span>。</p>
<h2 id="带传动的受力分析"><a class="markdownIt-Anchor" href="#带传动的受力分析"></a> 带传动的受力分析</h2>
<p>初始状态：带两边拉力相等。这个拉力叫做初拉力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。<br />
工作时：</p>
<ul>
<li>拉力增加→紧边  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">F_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 紧边拉力</li>
<li>拉力减少→松边  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">F_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 松边拉力</li>
</ul>
<blockquote>
<p>松紧边的判断<br />
绕进主动轮的一边→紧边<br />
绕出主动轮的一边→松边</p>
</blockquote>
<p>紧边带伸长，松边带缩短。带伸长量=带缩短量。带总长不变。<br />
所以 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><msub><mi>F</mi><mn>1</mn></msub><mo>+</mo><msub><mi>F</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F_0=\frac{1}{2}(F_1+F_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<ul>
<li>有效圆周力：传动带两边的拉力之差。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><msub><mi>F</mi><mn>1</mn></msub><mo>−</mo><msub><mi>F</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">F=F_1-F_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>主动轮受力 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><msub><mi>F</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">F=F_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> ，和有效圆周力相等。</li>
<li>带传递的功率 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>=</mo><mfrac><mrow><mi>F</mi><mi>v</mi></mrow><mn>1000</mn></mfrac><mo stretchy="false">(</mo><mi>k</mi><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P=\frac{Fv}{1000}(kw)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span><span class="mord mtight">0</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><msub><mi>F</mi><mn>2</mn></msub><mo>=</mo><msup><mi>e</mi><mrow><mi>f</mi><mi>α</mi></mrow></msup></mrow><annotation encoding="application/x-tex">F_1/F_2=e^{f\alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span></span></span></span></span></span></span></span></span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200414234027529_25362.png" alt="" /></li>
</ul>
<h2 id="带传动的应力和运动分析"><a class="markdownIt-Anchor" href="#带传动的应力和运动分析"></a> 带传动的应力和运动分析</h2>
<h3 id="应力"><a class="markdownIt-Anchor" href="#应力"></a> 应力</h3>
<h4 id="紧边和松边拉力产生的拉应力"><a class="markdownIt-Anchor" href="#紧边和松边拉力产生的拉应力"></a> 紧边和松边拉力产生的拉应力</h4>
<p>紧边拉应力：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mn>1</mn></msub><mo>=</mo><msub><mi>F</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">\sigma_1=F_1/A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault">A</span></span></span></span><br />
松边拉应力：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mn>2</mn></msub><mo>=</mo><msub><mi>F</mi><mn>2</mn></msub><mi mathvariant="normal">/</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">\sigma_2=F_2/A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault">A</span></span></span></span></p>
<h4 id="离心力产生的拉应力"><a class="markdownIt-Anchor" href="#离心力产生的拉应力"></a> 离心力产生的拉应力</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>c</mi></msub><mo>=</mo><msub><mi>F</mi><mi>c</mi></msub><mi mathvariant="normal">/</mi><mi>A</mi><mo>=</mo><mi>q</mi><msup><mi>v</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">\sigma_c=F_c/A=qv^2/A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault">A</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>为线密度。</p>
<h4 id="弯曲应力"><a class="markdownIt-Anchor" href="#弯曲应力"></a> 弯曲应力</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>为带的中心层到最外层的垂直距离；<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>为带的弹性模量；<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span>为带轮直径。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mi>b</mi></msub><mo>=</mo><mn>2</mn><mi>y</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">\sigma_b=2yE/d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">d</span></span></span></span></p>
<h4 id="最大应力发生位置"><a class="markdownIt-Anchor" href="#最大应力发生位置"></a> 最大应力发生位置</h4>
<p>最大应力出现在紧边与小轮的接触处。</p>
<ul>
<li>最内层为带的离心拉应力。</li>
<li>中间层为紧边拉应力和松边拉应力。</li>
<li>最外层的弯曲应力。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414215036.png" alt="" /></li>
</ul>
<h2 id="运动分析"><a class="markdownIt-Anchor" href="#运动分析"></a> 运动分析</h2>
<h3 id="打滑"><a class="markdownIt-Anchor" href="#打滑"></a> 打滑</h3>
<p>带与带轮间显著滑动现象，称为打滑。</p>
<ul>
<li>原因： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>&gt;</mo><msub><mi>F</mi><mrow><mi>f</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F &gt; F_{fmax}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>分析
<ul>
<li><strong>过载保护作用</strong></li>
<li>打滑先发生在<strong>小带轮处</strong></li>
<li><strong>打滑→带的剧烈磨损→失效</strong></li>
<li>打滑<strong>可以</strong>避免</li>
</ul>
</li>
</ul>
<h3 id="弹性滑动"><a class="markdownIt-Anchor" href="#弹性滑动"></a> 弹性滑动</h3>
<p>主动轮的线速度大于带的线速度，带的线速度大于从动轮的线速度，这种现象称为弹性滑动。</p>
<ul>
<li>原因：带两边拉力不相等，则弹性变形不同，带经过轮时变形量改变，使传动带沿着轮面也产生滑动。</li>
<li>分析
<ul>
<li>传动具有弹性</li>
<li>弹性滑动发生在带离开带轮的那段接触弧上</li>
<li><strong>F↑</strong>→<strong>弹性滑动↑</strong>→<strong>弹性滑动范围↑</strong>，当弹性滑动扩展到整个接触弧时→打滑。</li>
<li>弹性滑动不可避免。</li>
</ul>
</li>
</ul>
<h3 id="传动比-2"><a class="markdownIt-Anchor" href="#传动比-2"></a> 传动比</h3>
<p>由于弹性滑动→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>&gt;</mo><msub><mi>v</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_1&gt;v_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
滑动率：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi><mo>=</mo><mfrac><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>−</mo><msub><mi>v</mi><mn>2</mn></msub></mrow><msub><mi>v</mi><mn>1</mn></msub></mfrac><mo>∗</mo><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">\epsilon=\frac{v_1-v_2}{v_1}*100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.263531em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8184309999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span><br />
传动比：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mfrac><msub><mi>n</mi><mn>1</mn></msub><msub><mi>n</mi><mn>2</mn></msub></mfrac><mo>=</mo><mfrac><msub><mi>d</mi><mn>2</mn></msub><mrow><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>ϵ</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">i=\frac{n_1}{n_2}=\frac{d_2}{d_1(1-\epsilon)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1565919999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.416208em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight">ϵ</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<h2 id="v带的规格"><a class="markdownIt-Anchor" href="#v带的规格"></a> V带的规格</h2>
<ul>
<li>V带：普通V带、窄V带、宽V带、大楔角V带、汽车V带。</li>
<li>普通V带、窄V带应用最广。</li>
<li>普通V带、窄V带已标准化,按截面尺寸的不同，普通V带有七种型号、窄V带有四种型号。</li>
</ul>
<h3 id="组成"><a class="markdownIt-Anchor" href="#组成"></a> 组成</h3>
<ul>
<li>抗拉体：承受负载拉力的主体</li>
<li>顶胶、底胶：分别承受弯曲时的拉伸和弯曲</li>
<li>包布<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414220247.png" alt="" /></li>
</ul>
<h3 id="基本尺寸"><a class="markdownIt-Anchor" href="#基本尺寸"></a> 基本尺寸</h3>
<ul>
<li>节线：带受纵向弯曲时保持原长不变的一-条周线。</li>
<li>中性层(节面)：全部节线所组成的面称作节面。</li>
<li>节面的宽度称作节宽<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">b_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
<h3 id="v带型号"><a class="markdownIt-Anchor" href="#v带型号"></a> V带型号</h3>
<ol>
<li>分类普通V带：Y、Z、A、B、C、D、E</li>
<li>窄V带: SPZ、SPA、SPB、SPC</li>
</ol>
<ul>
<li>当带弯曲时→中性层带长不变→节面<br />
带楔角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span>变化(减小)→带轮轮槽角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo>&lt;</mo><mn>4</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\phi &lt; 40^{。}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414220657.png" alt="" /></li>
</ul>
<h3 id="普通v带"><a class="markdownIt-Anchor" href="#普通v带"></a> 普通V带</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo>=</mo><mn>4</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup><mo separator="true">,</mo><mi>h</mi><mi mathvariant="normal">/</mi><msub><mi>b</mi><mi>d</mi></msub><mo>=</mo><mn>0.7</mn></mrow><annotation encoding="application/x-tex">\phi=40^。,h/b_d=0.7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">h</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">7</span></span></span></span>的V带称为普通V带。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414220823.png" alt="" /></p>
<ul>
<li>在V带轮上，与所配用V带的节面宽度相对应的带轮直径称为基准直径<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span>。</li>
<li>V带在规定的张紧力下，位于带轮基准直径上的周线长度称为基准长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">L_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>(公称长度)。<br />
标注：例 A2240 ——A型带 公称长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub><mo>=</mo><mn>2240</mn><mi>m</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">L_d=2240mm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mord">0</span><span class="mord mathdefault">m</span><span class="mord mathdefault">m</span></span></span></span></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414221021.png" alt="" /></p>
<h3 id="窄v带"><a class="markdownIt-Anchor" href="#窄v带"></a> 窄V带</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo>=</mo><mn>4</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup><mo separator="true">,</mo><mi>h</mi><mi mathvariant="normal">/</mi><msub><mi>b</mi><mi>d</mi></msub><mo>=</mo><mn>0.9</mn></mrow><annotation encoding="application/x-tex">\phi=40^。,h/b_d=0.9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">h</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">9</span></span></span></span>的V带称为窄V带。<br />
与普通V带相比，高度相同时，宽度减小1/3，而承载能力提高1.5-2.5倍，适用于传递动力大而又要求紧凑的场合。</p>
<h2 id="普通v带传动的计算"><a class="markdownIt-Anchor" href="#普通v带传动的计算"></a> 普通V带传动的计算</h2>
<h3 id="已知条件与设计内容"><a class="markdownIt-Anchor" href="#已知条件与设计内容"></a> 已知条件与设计内容</h3>
<ul>
<li>已知条件：</li>
</ul>
<ol>
<li>传动的额定功率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span></li>
<li>主动轮转速<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>从动轮转速<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，或传动比<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span></li>
<li>传动位置要求</li>
<li>工况条件、原动机类型等</li>
</ol>
<ul>
<li>设计内容</li>
</ul>
<ol>
<li>V带的型号、长度和根数</li>
<li>带轮直径和结构</li>
<li>传动中心距<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span></li>
<li>验算带速<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span>和包角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></li>
<li>计算初拉力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和压轴力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>Q</mi></msub></mrow><annotation encoding="application/x-tex">F_Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">Q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></li>
</ol>
<h3 id="失效形式与设计准则"><a class="markdownIt-Anchor" href="#失效形式与设计准则"></a> 失效形式与设计准则</h3>
<ul>
<li>
<p>失效形式<br />
当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>&gt;</mo><msub><mi>F</mi><mrow><mi>f</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><msub><mi>F</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F&gt;F_{fmax}=F_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>→打滑<br />
当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>σ</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>&gt;</mo><mo stretchy="false">[</mo><mi>σ</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\sigma_{max}&gt;[\sigma]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="mclose">]</span></span></span></span>→带疲劳破坏</p>
</li>
<li>
<p>设计准则<br />
保证带传动不打滑并且具有一定的疲劳寿命。</p>
</li>
</ul>
<h3 id="普通v带传动的功率"><a class="markdownIt-Anchor" href="#普通v带传动的功率"></a> 普通V带传动的功率</h3>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414222153.png" alt="" /></p>
<ul>
<li>单根V带的<strong>基本额定功率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">P_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></strong>（特定条件）<br />
特定条件：</li>
</ul>
<ol>
<li>包角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>=</mo><mi>π</mi><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a_1=\pi(i=1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>；</li>
<li>载荷平稳；</li>
<li>带长<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">L_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为特定长度；</li>
<li>抗拉体为化学纤维绳芯结构的条件下</li>
</ol>
<p>单根V带的<strong>许用功率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><msub><mi>P</mi><mn>0</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[P_0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>（实际工作条件）</strong><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><msub><mi>P</mi><mn>0</mn></msub><mo stretchy="false">]</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>P</mi><mn>0</mn></msub><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>P</mi><mn>0</mn></msub><mo stretchy="false">)</mo><msub><mi>K</mi><mi>α</mi></msub><msub><mi>K</mi><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">[P_0]=(P_0+\Delta P_0)K_\alpha K_L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>α</mi></msub></mrow><annotation encoding="application/x-tex">K_\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为包角修正系数。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">K_L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为带长修正系数。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/zoruasama/zorua-pic@latest/img/20200414222633.png" alt="" /></li>
</ul>
<h3 id="普通v带的参数确定"><a class="markdownIt-Anchor" href="#普通v带的参数确定"></a> 普通V带的参数确定</h3>
<p>计算功率：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>c</mi></msub><mo>=</mo><msub><mi>K</mi><mi>A</mi></msub><mi>P</mi></mrow><annotation encoding="application/x-tex">P_c=K_AP</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">K_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>——工作情况系数<br />
根据<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">P_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和小带轮的转速<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，由<strong>选型图</strong>确定带的型号。</p>
<h4 id="根数"><a class="markdownIt-Anchor" href="#根数"></a> 根数</h4>
<p>根数：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi><mo>=</mo><msub><mi>P</mi><mi>c</mi></msub><mi mathvariant="normal">/</mi><mo stretchy="false">[</mo><msub><mi>P</mi><mn>0</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">z=P_c/[P_0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span><br />
即：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi><mo>=</mo><mfrac><msub><mi>P</mi><mi>c</mi></msub><mrow><mo stretchy="false">(</mo><msub><mi>P</mi><mn>0</mn></msub><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>P</mi><mn>0</mn></msub><mo stretchy="false">)</mo><msub><mi>K</mi><mi>α</mi></msub><msub><mi>K</mi><mi>L</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">z=\frac{P_c}{(P_0+\Delta P_0)K_\alpha K_L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.4084309999999998em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight">Δ</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi><mo>&lt;</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">z&lt;10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>建议<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi><mo>≤</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">z\le6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span></p>
<h4 id="带轮直径"><a class="markdownIt-Anchor" href="#带轮直径"></a> 带轮直径</h4>
<p>由带的型号查表确定带轮的直径。<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mn>1</mn></msub><mo>≥</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_1 \ge d_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>直径过小，则带的弯曲应力过大,导致带的寿命降低</li>
<li>直径过大，则带传动的外廓尺寸随之增大</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mn>2</mn></msub><mo>=</mo><mfrac><msub><mi>n</mi><mn>1</mn></msub><msub><mi>n</mi><mn>2</mn></msub></mfrac><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>ϵ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_2=\frac{n_1}{n_2}d_1(1-\epsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1951em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">ϵ</span><span class="mclose">)</span></span></span></span><br />
直径应符合带轮基准直径尺寸系列。</p>
<h4 id="带速"><a class="markdownIt-Anchor" href="#带速"></a> 带速</h4>
<p>带速：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>=</mo><mfrac><mrow><mi>π</mi><msub><mi>d</mi><mn>1</mn></msub><msub><mi>n</mi><mn>1</mn></msub></mrow><mrow><mn>60</mn><mo>∗</mo><mn>1000</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">v=\frac{\pi d_1 n_1}{60*1000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2412079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">0</span><span class="mbin mtight">∗</span><span class="mord mtight">1</span><span class="mord mtight">0</span><span class="mord mtight">0</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">π</span><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<ul>
<li>一般应使v在5-30m/s的范围内。</li>
<li>v过小则传递的功率小，易打滑</li>
<li>v过大则离心力大</li>
</ul>
<h4 id="中心距-带长和包角"><a class="markdownIt-Anchor" href="#中心距-带长和包角"></a> 中心距、带长和包角</h4>
<p>推荐范围：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0.7</mn><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo>+</mo><msub><mi>d</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>&lt;</mo><msub><mi>a</mi><mn>0</mn></msub><mo>&lt;</mo><mn>2</mn><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo>+</mo><msub><mi>d</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">0.7(d_1+d_2) &lt; a_0 &lt;2(d_1+d_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">7</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
初定V带基准长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">L_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，中心距为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>≈</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><mfrac><mrow><msub><mi>L</mi><mi>d</mi></msub><mo>−</mo><msub><mi>L</mi><mn>0</mn></msub></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">a \approx a_0+\frac{L_d-L_0}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.48312em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.239191em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.894191em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.41586em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>考虑带传动的安装、调整和V带张紧的需要，中心距变动范围为：<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>−</mo><mn>0.015</mn><msub><mi>L</mi><mi>d</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mn>0.03</mn><msub><mi>L</mi><mi>d</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a-0.015L_d)...(a+0.03L_d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">1</span><span class="mord">5</span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">3</span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<p>小带轮的包角：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>α</mi><mn>1</mn></msub><mo>=</mo><mn>18</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup><mo>−</mo><mfrac><mrow><msub><mi>d</mi><mn>2</mn></msub><mo>−</mo><msub><mi>d</mi><mn>1</mn></msub></mrow><mi>a</mi></mfrac><mo>∗</mo><mn>57.</mn><msup><mn>3</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha_1=180^。-\frac{d_2-d_1}{a}*57.3^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">8</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.2412079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">7</span><span class="mord">.</span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span><br />
一般应使<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>α</mi><mn>1</mn></msub><mo>≥</mo><mn>12</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha_1 \ge 120^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span>，否则可增大中心距或增设张紧轮。</p>
<h4 id="初拉力"><a class="markdownIt-Anchor" href="#初拉力"></a> 初拉力</h4>
<ul>
<li>保持适当的初拉力是带传动正常工作的首要条件。</li>
<li>初拉力不足，会出现打滑。</li>
<li>初拉力过大，将增大轴和轴承上的压力，并降低带的寿命。<br />
计算公式：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub><mo>=</mo><mfrac><mrow><mn>500</mn><msub><mi>P</mi><mi>c</mi></msub></mrow><mrow><mi>z</mi><mi>v</mi></mrow></mfrac><mo stretchy="false">(</mo><mfrac><mn>2.5</mn><msub><mi>K</mi><mi>a</mi></msub></mfrac><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>q</mi><msup><mi>v</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">F_0=\frac{500P_c}{zv}(\frac{2.5}{K_a}-1)+qv^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3335309999999998em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mord mtight">0</span><span class="mord mtight">0</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.07153em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">.</span><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><br />
其中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">P_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为计算功率；<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>为V带根数；<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span>为带速；<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>为V带线密度；<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>α</mi></msub></mrow><annotation encoding="application/x-tex">K_\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为包角修正系数。</li>
</ul>
<h4 id="压轴力"><a class="markdownIt-Anchor" href="#压轴力"></a> 压轴力</h4>
<p>设计支撑带轮的轴和轴承时，需要<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>Q</mi></msub><mo>=</mo><mn>2</mn><mi>z</mi><msub><mi>F</mi><mn>0</mn></msub><mi>sin</mi><mo>⁡</mo><mfrac><msub><mi>α</mi><mn>1</mn></msub><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">F_Q=2zF_0 \sin{\frac{\alpha_1}{2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">Q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.056492em;vertical-align:-0.345em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.0037em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h4 id="带传动的设计步骤"><a class="markdownIt-Anchor" href="#带传动的设计步骤"></a> 带传动的设计步骤</h4>
<ol>
<li>求计算功率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">P_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>选择普通V带型号</li>
<li>求带轮的基准直径<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">d_1,d_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>验算带速<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span></li>
<li>求V带的基准长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">L_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和中心距<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></li>
<li>验算小带轮的包角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>α</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\alpha_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>求V带根数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></li>
<li>求作用在带轮轴上的压力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>Q</mi></msub></mrow><annotation encoding="application/x-tex">F_Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">Q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>带轮的结构设计</li>
</ol>
<p>注意事项：</p>
<ul>
<li>中心距应可调</li>
<li>带传动一般松边在上（可增大包角）</li>
<li>带传动作用于轴上的径向压轴力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>Q</mi></msub></mrow><annotation encoding="application/x-tex">F_Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">Q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>较大(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">F_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>← <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">F_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)</li>
<li>带传动应设置在高速轴<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>较小→高速轴<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span></span>较小<br />
带传动具减震缓冲的作用→高速轴要求传动平稳</li>
</ul>
<h1 id="轴"><a class="markdownIt-Anchor" href="#轴"></a> 轴</h1>
<h2 id="轴的功用-类型和材料"><a class="markdownIt-Anchor" href="#轴的功用-类型和材料"></a> 轴的功用、类型和材料</h2>
<h3 id="轴的功用"><a class="markdownIt-Anchor" href="#轴的功用"></a> 轴的功用</h3>
<ul>
<li>支承旋转零件</li>
<li>使所有零件有固定的工作位置（轴向、周向）</li>
<li>传递转矩</li>
</ul>
<h3 id="轴的类型"><a class="markdownIt-Anchor" href="#轴的类型"></a> 轴的类型</h3>
<ol>
<li>按形状分类
<ul>
<li>直轴
<ul>
<li>光轴</li>
<li>阶梯轴</li>
</ul>
</li>
<li>曲轴</li>
<li>挠性轴</li>
</ul>
</li>
<li>按载荷性质分类
<ul>
<li>心轴：只承受弯矩不传递转矩（固定、转动）</li>
<li>传动轴：只承受弯矩不传递转矩（固定、转动）</li>
<li>转轴：既承受弯矩又传递转矩</li>
</ul>
</li>
</ol>
<h3 id="轴的材料"><a class="markdownIt-Anchor" href="#轴的材料"></a> 轴的材料</h3>
<ol>
<li>钢
<ol>
<li>碳素钢</li>
<li>合金钢</li>
</ol>
</li>
<li>球墨铸铁</li>
</ol>
<ul>
<li>为改善材料力学性能,应进行相应的热处理。</li>
<li>轴的热处理和表面强化可提高轴的疲劳强度。</li>
<li>采用合金钢并不能提高轴的刚度。</li>
<li>合金钢对应力集中敏感。</li>
</ul>
<h2 id="轴设计解决的问题和轴的结构设计内容"><a class="markdownIt-Anchor" href="#轴设计解决的问题和轴的结构设计内容"></a> 轴设计解决的问题和轴的结构设计内容</h2>
<h3 id="轴设计解决的问题"><a class="markdownIt-Anchor" href="#轴设计解决的问题"></a> 轴设计解决的问题</h3>
<ol>
<li>结构问题——选材料并确定轴的形状和尺寸</li>
<li>强度问题——防止轴发生疲劳断裂</li>
<li>刚度问题——防止轴发生过大的弹性变形</li>
<li>振动稳定性问题——防止轴发生共振</li>
</ol>
<h4 id="轴的结构设计"><a class="markdownIt-Anchor" href="#轴的结构设计"></a> 轴的结构设计</h4>
<ol>
<li>拟定轴上零件装配方案</li>
<li>估算轴的最小直径<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>确定各段直径及长度</li>
<li>确定轴的结构要素（轴肩、键槽、花键槽、中心孔、螺纹、轴端倒角、过渡圆角、退刀槽、砂轮越程槽）</li>
</ol>
<h4 id="轴的强度计算"><a class="markdownIt-Anchor" href="#轴的强度计算"></a> 轴的强度计算</h4>
<ol>
<li>许用切应力法（扭转强度）</li>
<li>许用弯曲应力法（弯扭合成强度）</li>
<li>安全系数计算法：疲劳强度计算（确定变应力下轴的安全程度）、静强度计算（评定轴对塑性变形的抵抗能力）</li>
</ol>
<h3 id="轴的结构设计内容"><a class="markdownIt-Anchor" href="#轴的结构设计内容"></a> 轴的结构设计内容</h3>
<ul>
<li>轴头：轴和旋转零件的配合部分</li>
<li>轴颈：轴和轴承配合的部分</li>
<li>轴身：连接轴颈与轴头部分</li>
<li>轴肩（轴环）：轴的直径变化所形成的阶梯处</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418220242.png" alt="" /></p>
<p>设计内容就是<strong>外形、各段直径和长度、结构要素尺寸</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418220326.png" alt="" /></p>
<h2 id="轴的结构设计要求"><a class="markdownIt-Anchor" href="#轴的结构设计要求"></a> 轴的结构设计要求</h2>
<ol>
<li>轴与轴上零件要有准确的工作位置（定位、固定）</li>
<li>轴上零件要易于装拆、调整</li>
<li>轴应有良好的制造工艺</li>
<li>尽量减少应力集中,改善轴的受力状态</li>
</ol>
<h3 id="准确工作位置"><a class="markdownIt-Anchor" href="#准确工作位置"></a> 准确工作位置</h3>
<ul>
<li>周向定位固定→不能有周向摆动</li>
<li>轴向定位固定→不能有轴向窜动</li>
<li>定位——轴与轴上零件要有准确的工作位置</li>
<li>固定——零件在轴上的位置牢固可靠</li>
</ul>
<h4 id="轴向定位及固定"><a class="markdownIt-Anchor" href="#轴向定位及固定"></a> 轴向定位及固定</h4>
<ul>
<li>定位
<ul>
<li>轴肩</li>
<li>套筒</li>
<li>圆锥形轴头</li>
<li>被固定的零件</li>
</ul>
</li>
<li>固定
<ul>
<li>轴肩</li>
<li>套筒</li>
<li>圆螺母+止动垫圈</li>
<li>双圆螺母</li>
<li>压板+螺钉</li>
<li>紧定螺钉</li>
<li>弹性挡圈</li>
</ul>
</li>
</ul>
<h5 id="使用轴肩-周环的要求"><a class="markdownIt-Anchor" href="#使用轴肩-周环的要求"></a> 使用轴肩、周环的要求:</h5>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi mathvariant="normal">轴</mi></msub><mo>&lt;</mo><msub><mi>R</mi><mi mathvariant="normal">孔</mi></msub></mrow><annotation encoding="application/x-tex">r_{轴} &lt; R_{孔}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">轴</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">孔</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi mathvariant="normal">轴</mi></msub><mo>&lt;</mo><msub><mi>C</mi><mi mathvariant="normal">孔</mi></msub></mrow><annotation encoding="application/x-tex">r_{轴} &lt; C_{孔}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">轴</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">孔</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>&gt;</mo><msub><mi>R</mi><mi mathvariant="normal">孔</mi></msub></mrow><annotation encoding="application/x-tex">h&gt;R_孔</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">孔</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>&gt;</mo><msub><mi>C</mi><mi mathvariant="normal">孔</mi></msub></mrow><annotation encoding="application/x-tex">h&gt;C_孔</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">孔</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>≈</mo><mo stretchy="false">(</mo><mn>0.07</mn><mi>d</mi><mo>+</mo><mn>3</mn><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mn>0.1</mn><mi>d</mi><mo>+</mo><mn>5</mn><mo stretchy="false">)</mo><mi>m</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">h \approx (0.07d+3)-(0.1d+5)mm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">7</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mclose">)</span><span class="mord mathdefault">m</span><span class="mord mathdefault">m</span></span></span></span><br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418220933.png" alt="" /></li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418221113.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418221140.png" alt="" /></p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418221246.png" alt="" /></p>
<h4 id="周向定位及固定"><a class="markdownIt-Anchor" href="#周向定位及固定"></a> 周向定位及固定</h4>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418221317.png" alt="" /></p>
<p>键连接最为常用。</p>
<h3 id="便于装拆-调整"><a class="markdownIt-Anchor" href="#便于装拆-调整"></a> 便于装拆、调整</h3>
<ol>
<li>轴做成阶梯形</li>
<li>非定位轴肩，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>=</mo><mn>1.5</mn><mo>⋯</mo><mn>2</mn><mi>m</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">h=1.5\cdots 2mm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord mathdefault">m</span><span class="mord mathdefault">m</span></span></span></span></li>
<li>轴端及各轴段端部有倒角</li>
<li>零件间留必要的轴向间隙</li>
</ol>
<h3 id="良好的制造工艺"><a class="markdownIt-Anchor" href="#良好的制造工艺"></a> 良好的制造工艺</h3>
<ul>
<li>轴的设计要便于加工及热处理，因而要注意：</li>
</ul>
<ol>
<li>轴肩处的过渡圆角尽量统一</li>
<li>键槽应位于同一母线上
<ol>
<li>螺纹退刀槽</li>
<li>砂轮越程槽<br />
保证加工到位；保证装配时相邻零件的断面靠紧。</li>
</ol>
</li>
</ol>
<ul>
<li>加工方法不同，轴的结构也可能不同</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418221752.png" alt="" /></p>
<h3 id="减少应力集中改善受力状态"><a class="markdownIt-Anchor" href="#减少应力集中改善受力状态"></a> 减少应力集中，改善受力状态</h3>
<h4 id="减少应力集中"><a class="markdownIt-Anchor" href="#减少应力集中"></a> 减少应力集中</h4>
<ul>
<li>轴肩处要有过渡圆角，相邻轴径的变化不宜太大</li>
<li>重要结构可增大圆角半径、过渡肩环、凹切圆角、增加卸载槽B。</li>
</ul>
<h4 id="改善受力状态"><a class="markdownIt-Anchor" href="#改善受力状态"></a> 改善受力状态</h4>
<ol>
<li>改善零件位置及结构，以改善轴的受力状态。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418221951.png" alt="" /></li>
<li>改善零件结构→改善轴的受力状态（减小弯矩）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418222024.png" alt="" /></li>
<li>改变零件位置→以改善轴的受力状态（减小扭矩）<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200418222129.png" alt="" /></li>
</ol>
<h1 id="滚动轴承"><a class="markdownIt-Anchor" href="#滚动轴承"></a> 滚动轴承</h1>
<h2 id="概述和基本类型"><a class="markdownIt-Anchor" href="#概述和基本类型"></a> 概述和基本类型</h2>
<h3 id="轴承功用"><a class="markdownIt-Anchor" href="#轴承功用"></a> 轴承功用</h3>
<ul>
<li>支承轴及轴上零件,并保证旋转精度减少轴与支承间的<br />
摩擦与磨损</li>
</ul>
<h3 id="类型"><a class="markdownIt-Anchor" href="#类型"></a> 类型</h3>
<ol>
<li>滚动轴承</li>
<li>滑动轴承</li>
</ol>
<h3 id="滚动轴承的结构"><a class="markdownIt-Anchor" href="#滚动轴承的结构"></a> 滚动轴承的结构</h3>
<ol>
<li><strong>内圈</strong>：装在轴颈上</li>
<li><strong>外圈</strong>：装在轴承座孔内</li>
<li><strong>滚动体</strong>：球、滚子</li>
<li><strong>保持架</strong>：冲压、实心 → 均匀隔开滚动体</li>
</ol>
<p>滚动体接触的地方<strong>有滚道</strong>，将<strong>点接触</strong>变为<strong>线接触</strong>，并且<strong>限制滚动体轴向移动</strong>。<br />
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200421172818.png" alt="" /></p>
<h3 id="滚动轴承的材料"><a class="markdownIt-Anchor" href="#滚动轴承的材料"></a> 滚动轴承的材料</h3>
<ul>
<li><strong>内圈、外圈、滚动体</strong>：<br />
高硬度、高接触疲劳强度、良好耐磨性和冲击韧性</li>
<li><strong>材料</strong>：<br />
含铬轴承钢，硬度61-65HRC ,工作表面需经磨削和抛光。</li>
<li><strong>保持架</strong>：<br />
避免滚动体直接接触,减少发热和磨损</li>
<li><strong>材料</strong>：<br />
低碳钢;高速轴承多采用铜、铝、工程塑料</li>
</ul>
<h3 id="公称接触角"><a class="markdownIt-Anchor" href="#公称接触角"></a> 公称接触角</h3>
<p>滚动体与外圈接触处的法线与轴承的径向平面之间的夹角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>。</p>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200421174409.png" alt="" /></p>
<h3 id="滚动轴承类型"><a class="markdownIt-Anchor" href="#滚动轴承类型"></a> 滚动轴承类型</h3>
<ol>
<li>按滚动体形状分
<ol>
<li>球轴承</li>
<li>滚子轴承</li>
<li>球轴承、圆柱滚子轴承、圆锥滚子轴承、球面滚子轴承、滚针轴承</li>
</ol>
</li>
<li>按受载方向或公称接触角分
<ol>
<li>向心轴承（径向接触）： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha=0^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></li>
<li>向心轴承（角接触） ：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup><mo>&lt;</mo><mi>α</mi><mo>≤</mo><mn>4</mn><msup><mn>5</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">0^。&lt;\alpha\le 45^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></li>
<li>推力轴承（角接触） ：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><msup><mn>5</mn><mi mathvariant="normal">。</mi></msup><mo>&lt;</mo><mi>α</mi><mo>&lt;</mo><mn>9</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">45^。&lt;\alpha &lt; 90^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">4</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></li>
<li>推力轴承（轴向接触）：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><mn>9</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha=90^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></li>
</ol>
</li>
</ol>
<ul>
<li><strong>向心轴承</strong>：主要用于承受径向载荷</li>
<li><strong>推力轴承</strong>：主要用于承受轴向载荷</li>
</ul>
<h2 id="滚动轴承的特点"><a class="markdownIt-Anchor" href="#滚动轴承的特点"></a> 滚动轴承的特点</h2>
<h3 id="向心轴承-alpha0"><a class="markdownIt-Anchor" href="#向心轴承-alpha0"></a> 向心轴承 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha=0^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></h3>
<h4 id="深沟球轴承"><a class="markdownIt-Anchor" href="#深沟球轴承"></a> 深沟球轴承</h4>
<ul>
<li>6类→极限转速<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mrow><mi>l</mi><mi>i</mi><mi>m</mi></mrow></msub></mrow><annotation encoding="application/x-tex">n_{lim}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>最高、价廉，优先采用。</li>
<li>受力类型：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>及不大的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（双向）</li>
</ul>
<p><strong>极限转速</strong>：在一定载荷和润滑条件下，允许的最高转速。</p>
<h4 id="圆柱滚子轴承"><a class="markdownIt-Anchor" href="#圆柱滚子轴承"></a> 圆柱滚子轴承</h4>
<ul>
<li>N类→承载力较大</li>
<li>受力类型：很大的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，不能承受轴向力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</li>
</ul>
<h4 id="滚针轴承"><a class="markdownIt-Anchor" href="#滚针轴承"></a> 滚针轴承</h4>
<ul>
<li>NA类→内外圈可分离，径向尺寸小</li>
<li>受力类型：很大的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，不能承受轴向力<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</li>
</ul>
<h3 id="调心轴承-alpha0"><a class="markdownIt-Anchor" href="#调心轴承-alpha0"></a> 调心轴承 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha=0^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></h3>
<ul>
<li><strong>角偏差</strong>：
<ul>
<li>轴承由于安装误差或轴的变形等引起内、外圈中心线发生相对倾斜的倾斜角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>。</li>
<li>角偏差变大→影响轴承正常运转</li>
</ul>
</li>
<li><strong>调心性能</strong>：
<ul>
<li>调心轴承的外圈滚道是球面，能自动补偿两滚道轴心线的角偏差，保证轴承正常工作。</li>
</ul>
</li>
</ul>
<h4 id="调心球轴承"><a class="markdownIt-Anchor" href="#调心球轴承"></a> 调心球轴承</h4>
<ul>
<li>1类→调心性能最好</li>
<li>受力类型：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，不大的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（双向）。</li>
</ul>
<h4 id="调心滚子轴承"><a class="markdownIt-Anchor" href="#调心滚子轴承"></a> 调心滚子轴承</h4>
<ul>
<li>2类→调心性能好、承载力较大</li>
<li>受力类型：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，不大的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（双向）。</li>
</ul>
<h3 id="向心角接触轴承-0-alphale-45"><a class="markdownIt-Anchor" href="#向心角接触轴承-0-alphale-45"></a> 向心角接触轴承 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup><mo>&lt;</mo><mi>α</mi><mo>≤</mo><mn>4</mn><msup><mn>5</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">0^。&lt;\alpha\le 45^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></h3>
<h4 id="角接触球轴承"><a class="markdownIt-Anchor" href="#角接触球轴承"></a> 角接触球轴承</h4>
<ul>
<li>7类，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mn>1</mn><msup><mn>5</mn><mi mathvariant="normal">。</mi></msup><mi mathvariant="normal">、</mi><mn>2</mn><msup><mn>5</mn><mi mathvariant="normal">。</mi></msup><mi mathvariant="normal">、</mi><mn>4</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">a=15^。、25^。、40^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord">2</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord">4</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></li>
<li>受力类型：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，单向<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
<h4 id="圆锥滚子轴承"><a class="markdownIt-Anchor" href="#圆锥滚子轴承"></a> 圆锥滚子轴承</h4>
<ul>
<li>3类</li>
<li>受力类型：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">F_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，单向<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
<h3 id="推力轴承-alpha90"><a class="markdownIt-Anchor" href="#推力轴承-alpha90"></a> 推力轴承 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><mn>9</mn><msup><mn>0</mn><mi mathvariant="normal">。</mi></msup></mrow><annotation encoding="application/x-tex">\alpha=90^。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.363em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">。</span></span></span></span></span></span></span></span></span></span></span></h3>
<h4 id="推力球轴承"><a class="markdownIt-Anchor" href="#推力球轴承"></a> 推力球轴承</h4>
<ul>
<li>5类</li>
<li>受力类型：只承受轴向（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">F_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>）</li>
<li>单列：承受单向轴向力</li>
<li>双列：承受双向轴向力</li>
</ul>
<h3 id="各类轴承的性能比较"><a class="markdownIt-Anchor" href="#各类轴承的性能比较"></a> 各类轴承的性能比较</h3>
<ol>
<li>承载能力
<ol>
<li>滚子&gt;球（线&gt;点）</li>
<li>重&gt;中&gt;轻&gt;特轻</li>
</ol>
</li>
<li>极限转速
<ol>
<li>球&gt;滚子</li>
<li>特轻&gt;轻&gt;中&gt;重</li>
<li>实心保持架&gt;冲压</li>
</ol>
</li>
<li>调心性能
<ol>
<li>调心&gt;非调心</li>
<li>球&gt;滚子</li>
</ol>
</li>
</ol>
<h2 id="滚动轴承的代号"><a class="markdownIt-Anchor" href="#滚动轴承的代号"></a> 滚动轴承的代号</h2>
<ul>
<li>
<p>滚动轴承为标准件、类型多、各类轴承具有不同结构、尺寸、公差等级和技术要求,为便3 F组织生产和选用,GB/T 272-1993规定了滚动轴承的代号。</p>
</li>
<li>
<p>我国滚动轴承的代号由<strong>基本代号</strong>、<strong>前置代号</strong>和<strong>后置代号</strong>构成。</p>
</li>
<li>
<p>基本代号</p>
<ul>
<li>表示轴承的基本类型、结构和尺寸，是轴承代号的基础。</li>
<li>表明轴承的内径、直径系列、宽度系列、类型。</li>
</ul>
</li>
<li>
<p>后置代号</p>
<ul>
<li>表示轴承内部结构、密封与防尘、保持架及其材料、轴承材料及公差等级等。</li>
</ul>
</li>
<li>
<p>前置代号</p>
<ul>
<li>表示轴承的分部件。</li>
</ul>
</li>
</ul>
<hr />
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200421200708.png" alt="" /></p>
<hr />
<h3 id="内径尺寸代号"><a class="markdownIt-Anchor" href="#内径尺寸代号"></a> 内径尺寸代号</h3>
<ul>
<li>右起第1、2位数字</li>
<li>内径d（即轴的直径）：
<ul>
<li>00——10mm</li>
<li>01——12mm</li>
<li>02——15mm</li>
<li>03——17mm</li>
<li>04-99——数字<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">\times 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">×</span><span class="mord">5</span></span></span></span>mm</li>
</ul>
</li>
<li>对于内径（<strong>500mm</strong>，以及<strong>22mm、28mm、32mm</strong>的轴承，用公称内径数值直接表示，但在与尺寸系列代号之间用“<strong>/</strong>”分开。</li>
</ul>
<h3 id="尺寸系列代号"><a class="markdownIt-Anchor" href="#尺寸系列代号"></a> 尺寸系列代号</h3>
<ul>
<li><strong>直径系列代号、宽度系列代号</strong>：指结构相同、内径相同的轴承使用不同直径的滚动体，在外径和宽度方面的变化系列</li>
</ul>
<h4 id="直径系列代号"><a class="markdownIt-Anchor" href="#直径系列代号"></a> 直径系列代号</h4>
<ul>
<li>右起第三位数字
<ul>
<li>7——超特轻</li>
<li>8,9——超轻</li>
<li>0,1——特轻</li>
<li>2——轻</li>
<li>3——中</li>
<li>4——重</li>
</ul>
</li>
</ul>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200421203824.png" alt="" /></p>
<h4 id="宽度系列代号"><a class="markdownIt-Anchor" href="#宽度系列代号"></a> 宽度系列代号</h4>
<ul>
<li>右起第四位数字,常与直径系列代号同时使用。</li>
<li>表示同一内径和外径的轴承可以有不同的宽度。
<ul>
<li>0——窄</li>
<li>1——正常</li>
<li>2——宽</li>
<li>3、4、5、6——特宽</li>
<li>8——特窄</li>
<li>代号为0可略去（2、3类轴承除外）</li>
<li>有时代号为1、2也被省略</li>
</ul>
</li>
</ul>
<h3 id="类型代号"><a class="markdownIt-Anchor" href="#类型代号"></a> 类型代号</h3>
<ul>
<li>第五位（从右到左数），用数字或字母表示。</li>
</ul>
<table>
<thead>
<tr>
<th>轴承类型</th>
<th>代号</th>
<th>轴承类型</th>
<th>代号</th>
</tr>
</thead>
<tbody>
<tr>
<td>双列角接触球轴承</td>
<td>0省略</td>
<td>角接触球轴承</td>
<td>7</td>
</tr>
<tr>
<td>调心球轴承</td>
<td>1</td>
<td>推力滚子轴承</td>
<td>8</td>
</tr>
<tr>
<td>调心滚子轴承</td>
<td>2</td>
<td>推力圆锥滚子轴承</td>
<td>9</td>
</tr>
<tr>
<td>推力调心滚子轴承</td>
<td>29</td>
<td>圆柱滚子轴承</td>
<td>N</td>
</tr>
<tr>
<td>圆锥滚子轴承</td>
<td>3</td>
<td>滚针轴承</td>
<td>NA</td>
</tr>
<tr>
<td>双列深沟球轴承</td>
<td>4</td>
<td>外球面球轴承</td>
<td>U</td>
</tr>
<tr>
<td>推力球轴承</td>
<td>5</td>
<td>直线轴承</td>
<td>L</td>
</tr>
<tr>
<td>深沟球轴承</td>
<td>6</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="后置代号"><a class="markdownIt-Anchor" href="#后置代号"></a> 后置代号</h3>
<ul>
<li>用字母（+数字）表示</li>
<li><strong>公差等级（精度）代号</strong>：
<ul>
<li>0（省略）、6x、6、5、4、2六级精度，逐渐增高</li>
<li>表示成：/P0、/P6x、/P6、 /P5、 /P4、/P2</li>
</ul>
</li>
<li><strong>内部结构代号</strong>：
<ul>
<li>如角接触球轴承: C——<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>=15°、 AC——<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>=25°、B——<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>=40°</li>
</ul>
</li>
<li>轴承径向游隙系列代号:
<ul>
<li>/C1、/C2、/CO、 /C3、/C4、/C5六组游隙,由小到大<br />
0组（/CO）游隙常优先采用，可省略。</li>
</ul>
</li>
</ul>
<h3 id="前置代号"><a class="markdownIt-Anchor" href="#前置代号"></a> 前置代号</h3>
<ul>
<li>用字母表示-表示轴承的分部件</li>
</ul>
<ol>
<li>L-可分离轴承的内外圈</li>
<li>K-滚动体与保持架组件</li>
</ol>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><strong>机架：</strong> 一个机构中机架的数目不受限制，但所有的机架算一个构件，而一个完整的机构至少有一个机架。 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><strong>活动构件数：</strong> 确定它的唯一依据就是该构件具不具备自由度，有一个自由度也是活动构件。 <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><strong>移动副导路：</strong> 构件的导路相当于该构件上各点在运动中形成的轨迹的集合。机构在t时刻的导路其实就代表了该机构在t时刻的位置。移动副的任意时刻（或任意位置）的速度瞬心垂直于该时刻（或该位置）各点导路的切线。或许可以理解成<strong>导路就是移动副中的移动构件运动的那条轨迹</strong>。 <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>机械设计</tag>
      </tags>
  </entry>
</search>
