<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Zorua&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zoruasama.gitee.io/"/>
  <updated>2020-09-26T15:34:25.701Z</updated>
  <id>https://zoruasama.gitee.io/</id>
  
  <author>
    <name>Zorua</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>正则表达式 | 初入茅庐[0-9]+</title>
    <link href="https://zoruasama.gitee.io/2020/09/26/regexp_0/"/>
    <id>https://zoruasama.gitee.io/2020/09/26/regexp_0/</id>
    <published>2020-09-26T03:51:02.000Z</published>
    <updated>2020-09-26T15:34:25.701Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p>正则表达式描述了一种字符串匹配的模式是怎么回事呢？正则表达式相信大家都很熟悉，但是正则表达式描述了一种字符串匹配的模式是怎么回事呢，下面就让小编带大家一起了解吧。</p><p>正则表达式描述了一种字符串匹配的模式，其实就是正则表达式可以用来匹配字符串，大家可能会很惊讶正则表达式怎么会描述了一种字符串匹配的模式呢？但事实就是这样，小编也感到非常惊讶。</p><p>这就是关于正则表达式描述了一种字符串匹配的模式的事情了，大家有什么想法呢，欢迎在评论区告诉小编一起讨论哦！【大雾】</p><h1 id="是什么"><a class="markdownIt-Anchor" href="#是什么"></a> 是什么</h1><p>在阐述我自己的理解前，先搬出<a href="https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1700215?fr=aladdin" target="_blank" rel="noopener">百度百科</a>的内容撑撑场面。</p><div class="snote quote"><p class="p subtitle">度娘百科</p><p><b>正则表达式</b>，又称规则表达式。（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。</p></div><blockquote><p>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p></blockquote><blockquote><p>正则表达式是对字符串（包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为“元字符”））操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。正则表达式是一种文本模式，该模式描述在搜索文本时要匹配的一个或多个字符串。</p></blockquote><blockquote><p>给定一个正则表达式和另一个字符串，我们可以达到如下的目的：</p><ol><li>给定的字符串是否符合正则表达式的过滤逻辑（称作“匹配”）</li><li>可以通过正则表达式，从字符串中获取我们想要的特定部分。</li></ol></blockquote><p>从上面三段内容可以看到，关键词<strong>检索、过滤、匹配</strong>。而这些工作让我想到了 <code>?</code> <code>*</code>。<br />我相信大多数人对 <code>?</code> <code>*</code>的作用应该不陌生。在Word文档中，<code>?</code>用于匹配单一字符，<code>*</code>用于匹配多个字符。</p><p>例如下面这个例子。我在编辑这篇文章时，发现我居然蠢到把每一个<strong>正则表达式</strong>都打错了。只有<strong>第一个字</strong>和<strong>最后一个字</strong>是正确的。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423223525.png" alt="" /></p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423223654.png" alt="" /></p><p>于是我果断地按下了 <code>Ctrl</code> <code>H</code>，勾选了使用通配符。由于<strong>第一个字</strong>和<strong>最后一个字</strong>是正确的，因此查找的内容只需为<code>正*式</code>即可检索到所有错误的<strong>正则表达式</strong>文本。然后点击<strong>全部替换</strong>。便轻松愉快地全部修正了。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200423223902.png" alt="" /></p><p>或许这时候你要问了。就这？就这？就这？<s>怎么可能会有sabi犯这种错误啊</s>这玩意儿有什么用？<br />嗐。您可别着急。如果说<strong>正则表达式</strong>并不是这种简单的<code>?</code>和<code>*</code>呢？</p><hr /><h1 id="快速上手"><a class="markdownIt-Anchor" href="#快速上手"></a> 快速上手</h1><h2 id="最简单的匹配情况"><a class="markdownIt-Anchor" href="#最简单的匹配情况"></a> 最简单的匹配情况</h2><p>最简单的匹配情况相当容易想到，即表达式本身等同于要匹配的表达式。例如使用<code>China</code>匹配下面的文本。就会匹配到下面两个<code>China</code>子字符串。</p><p>I love <span class="inline-tag red">China</span>. Long live <span class="inline-tag red">China</span>!</p><h2 id="简单的几个符号"><a class="markdownIt-Anchor" href="#简单的几个符号"></a> 简单的几个符号</h2><p>再来介绍几个简单的符号，引用我本学期的「编译原理」课程PPT中的一张图片。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200923230150.png" alt="" /></p><h3 id="选项-choice-among-alternatives"><a class="markdownIt-Anchor" href="#选项-choice-among-alternatives"></a> 选项 Choice among alternatives</h3><p>令<code>r</code>和<code>s</code>是两个正则表达式，那么<code>r|s</code>既可以匹配<code>r</code>能匹配的字符串，也能匹配<code>s</code>能匹配的字符串。<br />例如使用正则表达式<code>China|Long</code>就能匹配到三个子字符串了。</p><p>I love <span class="inline-tag red">China</span>. <span class="inline-tag red">Long</span> live <span class="inline-tag red">China</span>!<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211645.png" alt="" /></p><h3 id="连接-concatenation"><a class="markdownIt-Anchor" href="#连接-concatenation"></a> 连接 Concatenation</h3><p>连接<strong>没有符号</strong>，直接把一个正则表达式与另一个正则表达式相连即可。<br />例如之前举过的例子<code>China</code>能够匹配字符串中的<code>China</code>子串。这里是五个字符直接相连的正则表达式。<br />又例如，<code>(a|b)c</code>，能够匹配字符串 <code>ac</code>或<code>bc</code>。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211619.png" alt="" /></p><h3 id="重复-repetition"><a class="markdownIt-Anchor" href="#重复-repetition"></a> 重复 Repetition</h3><p>重复也被称作是<strong>闭包(closure)</strong>，用符号<code>*</code>表示，其内涵是<strong>可以把<code>*</code>所作用的表达式重复0次或多次</strong>。<br />注意，作用的表达式是<code>*</code>前的字符串，如果没有打括号的话，就只有一个字符。<br />例如<code>a*</code>能够匹配<strong>空字符串</strong>、<code>a</code>、<code>aa</code>、<code>aaa</code>等等。<br />再例如对于正则表达式<code>(a|bb)*</code>，能够匹配<strong>空字符串</strong>，<code>a</code>，<code>bb</code>，<code>aa</code>，<code>abb</code>，<code>bba</code>，<code>bbbb</code>，<code>aaa</code>，<code>aabbbba</code>，<code>abbabbabbbba</code>等等。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211425.png" alt="" /></p><h2 id="更多符号"><a class="markdownIt-Anchor" href="#更多符号"></a> 更多符号</h2><h3 id="熟悉的老朋友通配符"><a class="markdownIt-Anchor" href="#熟悉的老朋友通配符"></a> 熟悉的老朋友通配符 .</h3><p>这里的<code>.</code>的作用等同于我在<strong>是什么</strong>那一节中举例的Word软件中的<code>?</code>。<br />它可以匹配一个除了换行符以外的字符。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211912.png" alt="" /></p><h3 id="加号"><a class="markdownIt-Anchor" href="#加号"></a> 加号 +</h3><p>和重复<code>*</code>类似，不过加号是匹配子表达式<strong>一次或多次</strong>。<br /><code>zo(rua)+</code>能够匹配<code>zorua</code>，<code>zoruarua</code>，<code>zoruaruarua</code>等等。但是不能匹配<code>zo</code>。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926211347.png" alt="" /></p><h3 id="问号"><a class="markdownIt-Anchor" href="#问号"></a> 问号 ?</h3><p>还是和重复<code>*</code>类似，不过问号是匹配子表达式<strong>0次或一次</strong>。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926212040.png" alt="" /></p><h3 id="字符集合"><a class="markdownIt-Anchor" href="#字符集合"></a> 字符集合 [  ]</h3><p>匹配所包含的任意一个字符。例如，<code>[abc]</code> 可以匹配<code>plain</code>中的<code>a</code>。<code>[a-z]</code>表示一个范围，可以匹配二十六个字母。<br /><code>[a-cf-l]</code>表示字母的<code>a</code>到<code>c</code>，然后<code>f</code>到<code>l</code>。也可以使用数字<code>[0-9]</code><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231016.png" alt="" /></p><h4 id="否定符号"><a class="markdownIt-Anchor" href="#否定符号"></a> 否定符号 ^</h4><p><code>[^xyz]</code>是对<code>[xyz]</code>的否定，即匹配除去<code>xyz</code>三个字母后的其他字符。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231300.png" alt="" /></p><h3 id="匹配次数大括号"><a class="markdownIt-Anchor" href="#匹配次数大括号"></a> 匹配次数大括号 {  }</h3><p>大括号内填写一个非负整数。<br />代表前面的表达式应该被匹配的次数。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231822.png" alt="" /></p><h4 id="限制下限"><a class="markdownIt-Anchor" href="#限制下限"></a> 限制下限</h4><p>如果填写为<code>{n,}</code>的形式，则可以匹配<code>n</code>次以上。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231914.png" alt="" /></p><h4 id="限制下限上限"><a class="markdownIt-Anchor" href="#限制下限上限"></a> 限制下限上限</h4><p>如果填写为<code>{n,m}</code>的形式，则可以匹配<code>n</code>次以上，最多<code>m</code>次。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926232001.png" alt="" /></p><h2 id="转义符号"><a class="markdownIt-Anchor" href="#转义符号"></a> 转义符号</h2><p><code>\</code>将下一个字符标记为一个<strong>特殊字符</strong>、或一个<strong>原义字符</strong>、或一个 <strong>向后引用</strong>、或一个<strong>八进制转义符</strong>。例如，‘n’ 匹配字符 “n”。’\n’ 匹配一个换行符。序列 <code>\\</code> 匹配 <code>\</code> 而 <code>\(</code> 则匹配 <code>(</code>。</p><p>转义符号的设计使得一些难以输入的字符可以被匹配，或已被使用的字符(例如问号<code>?</code>被在正则表达式里被认为是0,1次匹配。)<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200926231557.png" alt="" /></p><h1 id="在线测试正则表达式"><a class="markdownIt-Anchor" href="#在线测试正则表达式"></a> 在线测试正则表达式</h1><p>除了可以在程序内调试正则表达式外，也可以使用在线的一些工具测试正则表达式。例如下面的几个网站。</p><ul><li><a href="https://c.runoob.com/front-end/854" target="_blank" rel="noopener">菜鸟工具 - 正则表达式在线测试</a></li><li><a href="http://tool.chinaz.com/regex/" target="_blank" rel="noopener">站长工具 - 正则表达式在线测试</a></li><li><a href="https://www.w3cschool.cn/tools/index?name=reg" target="_blank" rel="noopener">w3school 在线正则表达式测试</a></li></ul><h1 id="写在最后"><a class="markdownIt-Anchor" href="#写在最后"></a> 写在最后</h1><p>关于正则表达式的内容还有很多，一篇文章难以详尽。日后如果有时间，我会再次学习。<br />在本篇文章中，多处参考了我的朋友Kooer的博文，在此表示对他衷心感谢。<br />您可以在<a href="https://dooerlly.github.io/2020/09/22/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" target="_blank" rel="noopener">这个链接</a>看到他的博文。</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#前言&quot;&gt;
      
    
    </summary>
    
    
      <category term="其他" scheme="https://zoruasama.gitee.io/categories/%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="正则表达式" scheme="https://zoruasama.gitee.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>数据库原理 | 一些填空题的摘录</title>
    <link href="https://zoruasama.gitee.io/2020/09/11/database_x/"/>
    <id>https://zoruasama.gitee.io/2020/09/11/database_x/</id>
    <published>2020-09-11T03:51:02.000Z</published>
    <updated>2020-09-11T08:37:09.972Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="关于"><a class="markdownIt-Anchor" href="#关于"></a> 关于</h1><p>本文档由Zorua自行整理，如果有错误请在评论区反馈，或投递邮件至zoruasama@qq.com。<br />文档采用<code>CC BY-NC-ND 4.0许可协议</code>。转载本文档请保留本文档地址。<br />(?)如果您对此留有任何疑问，可以访问<a href="https://zh.wikipedia.org/wiki/%E5%89%B5%E4%BD%9C%E5%85%B1%E7%94%A8%E6%8E%88%E6%AC%8A%E6%A2%9D%E6%AC%BE" target="_blank" rel="noopener">知识共享许可协议</a>以获取帮助。</p><h1 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h1><ol><li>数据管理技术经历了<strong>人工管理、文件系统、数据库管理</strong>三个阶段。</li><li>数据库系统中常用的三种模型有<strong>层次模型、网状模型、关系模型</strong>。</li><li>数据模型的三要素包括<strong>数据结构、数据操纵或操作、数据的完整性约束</strong>。</li><li>实体之间的联系可抽象为三类，它们是<strong>一对一、一对多、多对多</strong>。</li><li>在数据库设计中，<strong>数据字典</strong>是系统中各类数据描述的集合，是进行详细的数据收集和数据分析所获得的主要成果。</li><li>数据库系统一般由<strong>数据库、数据库应用系统、数据库管理系统、数据库管理员</strong>和用户构成。</li><li>数据库系统在运行过程中，可能会发生故障。故障主要有<strong>事务故障、系统故障、介质故障和计算机病毒</strong>四类。</li><li>并发控制的主要方法是采用<strong>封锁</strong>机制，其类型有<strong>共享锁</strong>和<strong>排它锁</strong>两种。</li><li>数据库的完整性是指数据的<strong>正确性</strong>和<strong>相容性</strong>。</li><li>在SQL语言中，为了数据库的安全性，设置了对数据的存取进行控制的语句，对用户授权使用<strong>GRANT</strong>语句，收回所授的权限使用<strong>REVOKE</strong>语句。</li><li><strong>数据库</strong>是长期存储在计算机内的、有组织、可共享的数据集合。</li><li>数据库系统的三级模式结构是指数据库系统是由<strong>模式</strong>、<strong>外模式</strong>、<strong>内模式</strong>三级构成的。</li><li>E-R图一般在数据库设计的<strong>概念结构设计</strong>阶段使用。</li><li><strong>事务</strong>是用户定义的一个数据库操作序列，是一个不可分割的工作单位，它具有<strong>原子性</strong>、<strong>一致性</strong>、<strong>隔离性</strong>、<strong>持续性</strong>四个特性。</li><li>数据库系统中，系统故障通常称为<strong>软故障</strong>，介质故障称为<strong>硬故障</strong>。</li><li>关系操作的特点是<strong>集合</strong>操作。</li><li>若事务T对数据对象A加了S锁，则其他事务只能对数据A再加<strong>S</strong>锁，不能加<strong>X</strong>锁，直到事务T释放A上的锁。</li><li>现实世界进行第一层抽象的模型，称为<strong>概念</strong>模型；对现实世界进行第二层抽象的模型，称为<strong>数据</strong>模型。</li><li>在数据库技术中，编写应用程序的语言仍然是C—类高级语言，这些语言被称为<strong>宿主语言或主语言</strong>。</li><li>层次、网状的DML属于<strong>过程性</strong>语言，而关系型DML属于<strong>非过程性</strong>语言。</li><li>关系模式的操作异常问题往往是由<strong>数据冗余</strong>引起的。</li><li>恢复的基本原则是<strong>冗余</strong>。要使数据库具有可恢复性，在平时要做好两件事：<strong>转储</strong>备份和<strong>记“日志”</strong>。</li><li>如果对数据库的并发操作不加以控制，则会带来的问题：<strong>丢失更新</strong>、<strong>读“脏数据”<strong>和</strong>不可重复读</strong>。</li><li>事务的执行次序称为<strong>调度</strong>。</li><li>判断一个并发调度是否正确，可以用<strong>可串行化</strong>概念来解决。</li><li>封锁能避免错误的发生，但会引起<strong>活锁和死锁</strong>问题。</li><li>S封锁增加了并发度，但缺点是<strong>容易发生死锁</strong>。</li><li>两段式封锁是可串行化的<strong>充分</strong>条件。</li><li>SQL中的安全性机制，主要有两个：<strong>视图</strong>和<strong>授权</strong>。</li><li>数据库的基本特点是<strong>数据可以共享</strong>或<strong>数据结构化、数据独立性、数据冗余度小，易扩充、统一管理和控制</strong>。</li><li>数据库技术中采取分级方法将数据库的结构划分成多个层次，是为了提高数据库的<strong>逻辑独立性</strong>和<strong>物理独立性</strong>。</li><li>数据库是长期存储在计算机内，有<strong>组织</strong>的，可<strong>共享</strong>的数据集合</li><li>现实世界的事物反映到人的头脑中经过思维加工是数据，这一过程要经历三个领域，依次是<strong>现实世界</strong>，<strong>信息世界</strong>和<strong>计算机世界</strong>。</li><li>关系数据库规范化是为解决关系数据库中<strong>插入、删除和数据冗余</strong>问题而引入的。</li><li>关系规范中的删除操作异常是指<strong>不该删除的数据被删除</strong>，插入操作异常是指<strong>应该插入的数据未被插入</strong>。</li><li>设计性能较优的关系模式称为规范化，规范化主要的理论依据是<strong>关系规范化理论</strong>。</li><li>规范化理论是关系数据库进行逻辑设计的理论依据。根据这个理论，关系数据库中的关系必须满足：其每一属性都是<strong>不可分解的</strong>。</li><li>关系模型是把实体之间的联系用<strong>二维表格</strong>表示。</li><li>在关系数据库中，当关系的类型改变时，用户程序也可以不变，这是<strong>数据的逻辑独立性</strong>。</li><li>当数据库的存储结构改变时，可相应修改<strong>模式/内模式映像</strong>，从而保持模式不变。</li><li>在数据库系统的三级模式体系结构中，描述数据在数据库中的物理结构或存储方式的是<strong>内模式</strong>。</li><li>在数据库系统的三级组织结构中，DBA视图是<strong>概念模式</strong>，系统程序员视图是<strong>内模式</strong>，用户视图是<strong>外模式</strong>。</li><li>在数据库的三级模式体系结构中，模式与内模式之间的映象<strong>模式/内模式</strong>，实现了数据库的<strong>物理</strong>独立性。</li><li>描述概念模型常用的方法是<strong>实体–联系方法</strong>。</li><li>在数据库设计中，将E-R图转换成关系数据模型的过程属于<strong>逻辑设计阶段</strong>。</li><li>在数据库设计的4个阶段中，每个阶段都有自己的设计内容。“在哪些表、在哪些属性上、建什么样的索引”，这一内容应该属于<strong>物理</strong>设计阶段。</li><li>在登录日志文件时，应该先<strong>登录日志文件</strong>，后<strong>更新数据库</strong>。</li><li>对数据对象施加封锁，可能会引起活锁和死锁问题。预防死锁通常有<strong>一次封锁法</strong>和<strong>顺序封锁法</strong>两种方法。</li><li>数据库管理系统通常提供授权功能来控制不同用户访问数据的权限，这主要是为了实现数据库的<strong>安全性</strong>。</li></ol><h1 id="测试"><a class="markdownIt-Anchor" href="#测试"></a> 测试</h1><p><button>隐藏答案</button></p><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script>$('button').on('click',function(){        console.log("By Zorua");         $('strong').css('color',"white");     })</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;关于&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#关于&quot;&gt;
      
    
    </summary>
    
    
      <category term="数据库原理" scheme="https://zoruasama.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="数据库原理" scheme="https://zoruasama.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
    
      <category term="数据库" scheme="https://zoruasama.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>数据库原理 | 7. 关系数据理论</title>
    <link href="https://zoruasama.gitee.io/2020/09/07/database_6/"/>
    <id>https://zoruasama.gitee.io/2020/09/07/database_6/</id>
    <published>2020-09-07T03:51:02.000Z</published>
    <updated>2020-09-07T08:13:30.598Z</updated>
    
    <content type="html"><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1><blockquote class="pullquote mindmap mindmap-md"><ul><li>关系数据理论<ul><li>问题的提出</li><li>函数依赖<ul><li>函数依赖</li><li>平凡函数依赖与非平凡函数依赖</li><li>完全函数依赖与部分函数依赖</li><li>传递函数依赖</li></ul></li><li>码</li><li>范式<ul><li>1NF</li><li>2NF<ul><li>SLC不是一个好的关系模式</li><li>原因及解决办法</li><li>2NF的定义</li></ul></li><li>3NF<ul><li>解决方法</li><li>3NF的定义</li></ul></li><li>BC 范式<ul><li>解决方法</li><li>3NF与BCNF的关系</li><li>BCNF的关系模式所具有的性质</li></ul></li><li>规范化<ul><li>关系模式规范化的基本步骤</li><li>规范化的基本思想</li></ul></li></ul></li><li>数据依赖的公理系统<ul><li>Armstrong公理系统</li><li>导出规则</li><li>函数依赖闭包<ul><li>关于闭包的引理</li></ul></li><li>函数依赖集等价<ul><li>最小依赖集</li><li>极小化过程</li></ul></li></ul></li></ul></li></ul></blockquote><h1 id="问题的提出"><a class="markdownIt-Anchor" href="#问题的提出"></a> 问题的提出</h1><ul><li>关系数据库逻辑设计<ul><li>针对具体问题，如何构造一个适合于它的数据模式</li><li>数据库逻辑设计的工具──关系数据库的规范化理论</li></ul></li></ul><h1 id="函数依赖"><a class="markdownIt-Anchor" href="#函数依赖"></a> 函数依赖</h1><h2 id="函数依赖-2"><a class="markdownIt-Anchor" href="#函数依赖-2"></a> 函数依赖</h2><p>设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>是一个属性集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>上的关系模式，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>的子集。<br />若对于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>的任意一个可能的关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>中不可能存在两个元组在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>上的属性值相等， 而在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>上的属性值不等， 则称 <strong>X函数确定Y</strong> 或<strong>Y函数依赖于X</strong>，记作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。<br />X称为这个函数依赖的<strong>决定属性集</strong>(Determinant)。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Y=f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></p><ol><li>函数依赖不是指关系模式R的某个或某些关系实例满足的约束条件，而是指R的<strong>所有关系实例</strong>均要满足的约束条件。</li><li>函数依赖是<strong>语义范畴</strong>的概念。只能根据数据的语义来确定函数依赖。<br />例如“姓名→年龄”这个函数依赖只有在不允许有同名人的条件下成立</li><li>数据库设计者可以对现实世界作强制的规定。例如规定不允许同名人出现，函数依赖“姓名→年龄”成立。所插入的元组必须满足规定的函数依赖，若发现有同名人存在， 则拒绝装入该元组。</li></ol><blockquote><p><strong>例</strong><br />Student(Sno, Sname, Ssex, Sage, Sdept)<br />假设不允许重名，则有:<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>s</mi><mi>e</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Ssex</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span></span></span></span>， <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Sage</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span></span></span></span> , <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span>，<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>←</mo><mo>→</mo><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>→</mo><mi>S</mi><mi>s</mi><mi>e</mi><mi>x</mi><mo separator="true">,</mo><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>→</mo><mi>S</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">Sno \leftarrow \rightarrow Sname, Sname \rightarrow Ssex, Sname \rightarrow Sage</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span></span></span></span><br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sname \rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span><br />但<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>s</mi><mi>e</mi><mi>x</mi><mo>→</mo><mi>S</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">Ssex \rightarrow Sage</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span></span></span></span><br />若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，并且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>,  则记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>←</mo><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\leftarrow \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。<br />若Y不函数依赖于X,   则记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>↛</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\not\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</p></blockquote><h2 id="平凡函数依赖与非平凡函数依赖"><a class="markdownIt-Anchor" href="#平凡函数依赖与非平凡函数依赖"></a> 平凡函数依赖与非平凡函数依赖</h2><p>在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>中，对于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>的子集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，<br />如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，但<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊈</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\not\subseteq X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，则称X→Y是<strong>非平凡的函数依赖</strong><br />若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，但<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊆</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\subseteq X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>,   则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是<strong>平凡的函数依赖</strong></p><blockquote><p><strong>例</strong><br />在关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SC(Sno, Cno, Grade)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span>中，</p><ol><li>非平凡函数依赖： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mo>→</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \rightarrow Grade</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span></span></span></span></li><li>平凡函数依赖：     <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mo>→</mo><mi>S</mi><mi>n</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \rightarrow Sno</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mo>→</mo><mi>C</mi><mi>n</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \rightarrow Cno</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span></span></span></span></li></ol></blockquote><p>任一关系模式，平凡函数依赖都是必然成立的，它不反映新的语义，因此若不特别声明， 我们总是讨论非平凡函数依赖。</p><h2 id="完全函数依赖与部分函数依赖"><a class="markdownIt-Anchor" href="#完全函数依赖与部分函数依赖"></a> 完全函数依赖与部分函数依赖</h2><p>在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>中，如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，并且对于X的任何一个真子集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">X&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>，都有</p><ul><li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal">′</mo></msup><mo>↛</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X&#x27;\not\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.946332em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>, 则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>完全函数依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，记作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mover><mo><mo>→</mo></mo><mi>f</mi></mover><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\mathop{\rightarrow}\limits^{f} Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.200086em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.200086em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.613978em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</li><li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，但Y不完全函数依赖于X，则称Y部分函数依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，记作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mover><mo><mo>→</mo></mo><mi>P</mi></mover><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \mathop{\rightarrow}\limits^{P}   Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1452010000000001em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1452010000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</li></ul><h2 id="传递函数依赖"><a class="markdownIt-Anchor" href="#传递函数依赖"></a> 传递函数依赖</h2><p>在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>中，如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊈</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\not\subseteq X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span><strong>传递函数依赖于</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>。<br />注: 如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>， 即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>←</mo><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\leftarrow \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span><strong>直接依赖</strong>于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>。</p><blockquote><p><strong>例</strong><br />在关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>t</mi><mi>d</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Std(Sno, Sdept, Sloc)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">t</span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span></span></span></span>中，有：<br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno \rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo>→</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sdept \rightarrow Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span><br /><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span>传递函数依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">Sno</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span></span></span></span></p></blockquote><h1 id="码"><a class="markdownIt-Anchor" href="#码"></a> 码</h1><p>设K为关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>中的属性或属性组合。若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mover><mo><mo>→</mo></mo><mi>f</mi></mover><mi>U</mi></mrow><annotation encoding="application/x-tex">K \mathop{\rightarrow}\limits^{f} U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.200086em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.200086em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.613978em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，则K称为R的一个候选码（Candidate Key）。若关系模式R有多个候选码，则选定其中的一个做为主码（Primary key）。</p><h1 id="范式"><a class="markdownIt-Anchor" href="#范式"></a> 范式</h1><ul><li>范式是符合某一种级别的关系模式的集合。</li><li>关系数据库中的关系必须满足一定的要求。满足不同程度要求的为不同范式。</li><li>范式的种类：<ul><li>第一范式(1NF)</li><li>第二范式(2NF)</li><li>第三范式(3NF)</li><li>BC范式(BCNF)</li><li>第四范式(4NF)</li><li>第五范式(5NF)</li></ul></li><li>各种范式之间存在联系：<ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>2</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>3</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">C</mi><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>4</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mo>⊃</mo><mn>5</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">1\mathrm{NF} \supset 2\mathrm{NF} \supset 3\mathrm{NF} \supset \mathrm{BCNF} \supset 4\mathrm{NF} \supset 5\mathrm{NF}F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">3</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord mathrm">B</span><span class="mord mathrm">C</span><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">4</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li></ul></li><li>某一关系模式R为第n范式，可简记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>n</mi><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow></mrow><annotation encoding="application/x-tex">R\in n\mathrm{NF}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span></span></span></span>。</li></ul><h2 id="1nf"><a class="markdownIt-Anchor" href="#1nf"></a> 1NF</h2><ul><li>1NF的定义<ul><li>如果<strong>一个关系模式R的所有属性</strong>都是不可分的基本数据项，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>1</mn><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">F</mi></mrow></mrow><annotation encoding="application/x-tex">R\in 1\mathrm{NF}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">F</span></span></span></span></span>。</li><li>第一范式是对关系模式的最起码的要求。不满足第一范式的数据库模式不能称为关系数据库。</li><li>但是满足第一范式的关系模式并不一定是一个好的关系模式。</li></ul></li></ul><h2 id="2nf"><a class="markdownIt-Anchor" href="#2nf"></a> 2NF</h2><ul><li><p>例: 关系模式   SLC(Sno, Sdept, Sloc, Cno, Grade)</p></li><li><pre><code>Sloc为学生住处，假设每个系的学生住在同一个地方。</code></pre></li><li><p>函数依赖包括：</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mover><mo><mo>→</mo></mo><mi>f</mi></mover><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \mathop{\rightarrow}\limits^f     Grade</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.450086em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.200086em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.613978em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo><mo>→</mo></mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno \mathop{\rightarrow} Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">→</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mover><mo><mo>→</mo></mo><mi>P</mi></mover><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \mathop{\rightarrow}\limits^P     Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3952010000000001em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1452010000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo><mo>→</mo></mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sno \mathop{\rightarrow} Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">→</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo stretchy="false">)</mo><mover><mo><mo>→</mo></mo><mi>P</mi></mover><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">(Sno, Cno) \mathop{\rightarrow}\limits^P     Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3952010000000001em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1452010000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo><mo>→</mo></mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sdept \mathop{\rightarrow} Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">→</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></li></ul></li></ul><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200519200344.png" alt="" /></p><ul><li>SLC的码为(Sno, Cno)</li><li>SLC满足第一范式。</li><li>非主属性Sdept和Sloc部分函数依赖于码(Sno, Cno)</li></ul><h3 id="slc不是一个好的关系模式"><a class="markdownIt-Anchor" href="#slc不是一个好的关系模式"></a> SLC不是一个好的关系模式</h3><ol><li>插入异常<br />假设Sno＝95102，Sdept＝IS，Sloc＝N的学生还未选课，因课程号是主属性，因此该学生的信息无法插入SLC。</li><li>删除异常<br />假定某个学生本来只选修了3号课程这一门课。现在因身体不适，他连3号课程也不选修了。因课程号是主属性，此操作将导致该学生信息的整个元组都要删除。</li><li>数据冗余度大<br />如果一个学生选修了10门课程，那么他的Sdept和Sloc值就要重复存储了10次。</li><li>修改复杂<br />例如学生转系，在修改此学生元组的Sdept值的同时，还可能需要修改住处（Sloc）。如果这个学生选修了K门课，则必须无遗漏地修改K个元组中全部Sdept、Sloc信息。</li></ol><h3 id="原因及解决办法"><a class="markdownIt-Anchor" href="#原因及解决办法"></a> 原因及解决办法</h3><ul><li>Sdept、 Sloc部分函数依赖于码。</li><li>SLC分解为两个关系模式，以消除这些部分函数依赖<ul><li>SC（Sno， Cno， Grade）</li><li>SL（Sno， Sdept， Sloc）<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200519202552.png" alt="" /></li></ul></li></ul><h3 id="2nf的定义"><a class="markdownIt-Anchor" href="#2nf的定义"></a> 2NF的定义</h3><ul><li><p>若关系模式R∈1NF，并且每一个非主属性都完全函数依赖于R的码，则R∈2NF。</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>1</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SLC(Sno, Sdept, Sloc, Cno, Grade) \in 1NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SLC(Sno, Sdept, Sloc, Cno, Grade) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>C</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SC(Sno, Cno, Grade) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SL(Sno, Sdept, Sloc) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li></ul></li><li><p>采用投影分解法将一个1NF的关系分解为多个2NF的关系，可以在一定程度上减轻原1NF关系中存在的插入异常、删除异常、数据冗余度大、修改复杂等问题。</p></li><li><p>将一个1NF关系分解为多个2NF的关系，并不能完全消除关系模式中的各种异常情况和数据冗余。</p></li></ul><h2 id="3nf"><a class="markdownIt-Anchor" href="#3nf"></a> 3NF</h2><ul><li><p>例：2NF关系模式SL(Sno, Sdept, Sloc)中<br />函数依赖：</p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Sno\rightarrow Sdept</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo>→</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sdept\rightarrow Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>n</mi><mi>o</mi><mo>→</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Sno\rightarrow Sloc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span></span></span></span><br />Sloc传递函数依赖于Sno，即SL中存在非主属性对码的传递函数依赖。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520211845.png" alt="" /></p></li></ul><h3 id="解决方法"><a class="markdownIt-Anchor" href="#解决方法"></a> 解决方法</h3><p>采用投影分解法，把SL分解为两个关系模式，以消除传递函数依赖：</p><ul><li>SD（Sno, Sdept）</li><li>DL（Sdept, Sloc）<br />SD的码为Sno， DL的码为Sdept。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520225001.png" alt="" /></li></ul><h3 id="3nf的定义"><a class="markdownIt-Anchor" href="#3nf的定义"></a> 3NF的定义</h3><p>关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>中若不存在这样的码X、属性组Y及非主属性Z（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>⊈</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">Z\not\subseteq Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>）, 使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mo separator="true">,</mo><mi>Y</mi><mo>→</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y,Y\rightarrow X,Y\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，成立，则称<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>。</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SL(Sno, Sdept, Sloc) \in 2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SL(Sno, Sdept, Sloc) \in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>D</mi><mo stretchy="false">(</mo><mi>S</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SD(Sno, Sdept) \in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">n</span><span class="mord mathdefault">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>S</mi><mi>l</mi><mi>o</mi><mi>c</mi><mo stretchy="false">)</mo><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">DL(Sdept, Sloc)\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li></ul><hr /><ul><li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，则R的每一个非主属性既不部分函数依赖于候选码也不传递函数依赖于候选码。</li><li>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，则R也是2NF。</li><li>采用投影分解法将一个2NF的关系分解为多个3NF的关系，可以在一定程度上解决原2NF关系中存在的插入异常、删除异常、数据冗余度大、修改复杂等问题。</li><li>将一个2NF关系分解为多个3NF的关系后，并不能完全消除关系模式中的各种异常情况和数据冗余。</li></ul><h2 id="bc-范式"><a class="markdownIt-Anchor" href="#bc-范式"></a> BC 范式</h2><ul><li>设关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo><mo>∈</mo><mn>1</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;\in 1NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，如果对于R的每个函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，若Y不属于X，则X必含有候选码，那么<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>。</li><li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span><ul><li>每一个决定属性集（因素）都包含（候选）码</li><li>R中的所有属性（主，非主属性）都完全函数依赖于码</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>（证明）</li><li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>    则  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>不一定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span><br />例：在关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>T</mi><mi>J</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>T</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">STJ(S,T,J)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span></span></span></span>中，S表示学生，T表示教师，J表示课程。<br />每一教师只教一门课。每门课由若干教师教，某一学生选定某门课，就确定了一个固定的教师。某个学生选修某个教师的课就确定了所选课的名称 ：                <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo><mo>→</mo><mi>T</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>T</mi><mo stretchy="false">)</mo><mo>→</mo><mi>J</mi><mo separator="true">,</mo><mi>T</mi><mo>→</mo><mi>J</mi></mrow><annotation encoding="application/x-tex">(S,J)\rightarrow T,(S,T)\rightarrow J,T\rightarrow J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span></span></span></span><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520230033.png" alt="" /></li></ul></li></ul><h3 id="解决方法-2"><a class="markdownIt-Anchor" href="#解决方法-2"></a> 解决方法</h3><ul><li>将STJ分解为二个关系模式：</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>J</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi><mi mathvariant="normal">，</mi><mi>T</mi><mi>J</mi><mo stretchy="false">(</mo><mi>T</mi><mo separator="true">,</mo><mi>J</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">SJ(S,J) \in BCNF， TJ(T,J)\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li>没有<strong>任何属性</strong>对码的部分函数依赖和传递函数依赖</li></ul><h3 id="3nf与bcnf的关系"><a class="markdownIt-Anchor" href="#3nf与bcnf的关系"></a> 3NF与BCNF的关系</h3><ul><li>如果关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，必定有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li><li>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in 3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，且R只有一个候选码，则必定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∈</mo><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">R\in BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>。</li></ul><h3 id="bcnf的关系模式所具有的性质"><a class="markdownIt-Anchor" href="#bcnf的关系模式所具有的性质"></a> BCNF的关系模式所具有的性质</h3><ol><li>所有<strong>非主属性</strong>都完全函数依赖于每个候选码</li><li>所有<strong>主属性</strong>都完全函数依赖于每个不包含它的候选码</li><li>没有任何属性完全函数依赖于<strong>非码</strong>的任何一组属性</li></ol><h2 id="规范化"><a class="markdownIt-Anchor" href="#规范化"></a> 规范化</h2><ul><li>关系数据库的规范化理论是数据库逻辑设计的工具。</li><li>一个关系只要其分量都是不可分的数据项，它就是规范化的关系，但这只是最基本的规范化。</li><li>规范化程度可以有多个不同的级别</li><li>规范化程度过低的关系不一定能够很好地描述现实世界，可能会存在插入异常、删除异常、修改复杂、数据冗余等问题</li><li>一个低一级范式的关系模式，通过模式分解可以转换为若干个高一级范式的关系模式集合，这种过程就叫<strong>关系模式的规范化</strong></li></ul><h3 id="关系模式规范化的基本步骤"><a class="markdownIt-Anchor" href="#关系模式规范化的基本步骤"></a> 关系模式规范化的基本步骤</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520230604.png" alt="" /></p><h3 id="规范化的基本思想"><a class="markdownIt-Anchor" href="#规范化的基本思想"></a> 规范化的基本思想</h3><ul><li>消除不合适的数据依赖</li><li>使模式中的各关系模式达到某种程度的“分离”</li><li>采用“一事一地”的模式设计原则<ul><li>让一个关系描述一个概念、一个实体或者实体间的一种联系。若多于一个概念就把它“分离”出去</li></ul></li><li>所谓规范化实质上是<strong>概念的单一化</strong></li><li>不能说规范化程度越高的关系模式就越好</li><li>在设计数据库模式结构时，必须对现实世界的实际情况和用户应用需求作进一步分析，确定一个合适的、能够反映现实世界的模式</li><li>上面的规范化步骤可以在其中任何一步终止</li></ul><h1 id="数据依赖的公理系统"><a class="markdownIt-Anchor" href="#数据依赖的公理系统"></a> 数据依赖的公理系统</h1><p>对于满足一组<strong>函数依赖</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>的关系模式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>，其任何一个关系<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，若函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>都成立, 则称F<strong>逻辑蕴含</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>。</p><h2 id="armstrong公理系统"><a class="markdownIt-Anchor" href="#armstrong公理系统"></a> Armstrong公理系统</h2><ul><li>一套推理规则，是模式分解算法的理论基础</li><li>用途<ul><li>求给定关系模式的码</li><li>从一组函数依赖求得蕴含的函数依赖</li></ul></li></ul><hr /><p>关系模式R &lt;U，F &gt;来说有以下的推理规则：</p><ul><li>自反律（Reflexivity）：若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊆</mo><mi>X</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">Y \subseteq X \subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含。</li><li>增广律（Augmentation）：若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>为F所蕴含，且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">Z \subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mi>Z</mi><mo>→</mo><mi>Y</mi><mi>Z</mi></mrow><annotation encoding="application/x-tex">XZ\rightarrow YZ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含。</li><li>传递律（Transitivity）：若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>及<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">Y\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>所蕴含。</li></ul><p>注意：由自反律所得到的函数依赖均是平凡的函数依赖，自反律的使用并不依赖于F</p><h2 id="导出规则"><a class="markdownIt-Anchor" href="#导出规则"></a> 导出规则</h2><p>根据A1，A2，A3这三条推理规则可以得到下面三条推理规则：</p><ul><li>合并规则：由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mo separator="true">,</mo><mi>X</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y, X\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow YZ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>。</li><li>伪传递规则：由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi><mo separator="true">,</mo><mi>W</mi><mi>Y</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y, WY\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mi>W</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">XW\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>。</li><li>分解规则：由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>及 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>⊆</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">Z\subseteq Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>。</li></ul><hr /><ul><li>引理：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo>⋯</mo><msub><mi>A</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">X→A_1,A_2\cdots A_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>成立的充分必要条件是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X\rightarrow A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>成立<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mi>l</mi><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i=l,2,\cdots,k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>。</li></ul><h2 id="函数依赖闭包"><a class="markdownIt-Anchor" href="#函数依赖闭包"></a> 函数依赖闭包</h2><ul><li>在关系模式R&lt;U，F&gt;中为F所逻辑蕴含的函数依赖的全体叫作<strong>F的闭包</strong>，记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>F</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>。</li><li>设F为属性集U上的一组函数依赖，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">X\subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>， <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span> ={A|X→A能由F根据Armstrong公理导出}，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span>称为<strong>属性集X关于函数依赖集F的闭包</strong>。</li></ul><h3 id="关于闭包的引理"><a class="markdownIt-Anchor" href="#关于闭包的引理"></a> 关于闭包的引理</h3><ul><li><strong>内容</strong>：设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>为属性集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>上的一组函数依赖，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>⊆</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">X,Y \subseteq U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>能由F 根据Armstrong公理导出的充分必要条件是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>⊆</mo><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">Y\subseteq X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span></li><li><strong>用途</strong>：将判定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是否能由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>根据Armstrong公理导出的问题，就转化为求出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span> ，判定<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>是否为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mi>F</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X_F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span>的子集的问题。</li></ul><h2 id="函数依赖集等价"><a class="markdownIt-Anchor" href="#函数依赖集等价"></a> 函数依赖集等价</h2><p>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>G</mi><mo>+</mo></msup><mo>=</mo><msup><mi>F</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">G^+=F^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>，就说函数依赖集F<strong>覆盖</strong>G（F是G的覆盖，或G是F的覆盖），或F与G<strong>等价</strong>。</p><h3 id="最小依赖集"><a class="markdownIt-Anchor" href="#最小依赖集"></a> 最小依赖集</h3><p>如果函数依赖集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>满足下列条件，则称F为一个<strong>极小函数依赖集</strong>。亦称为<strong>最小依赖集</strong>或<strong>最小覆盖</strong>。</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>中任一函数依赖的右部仅含有一个属性。</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>中不存在这样的函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">X\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>，使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>−</mo><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow></mrow><annotation encoding="application/x-tex">F-{X\rightarrow A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span></span></span></span></span>等价。</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>中不存在这样的函数依赖<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">X\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>， X有真子集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span>使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>−</mo><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><mo>∪</mo><mrow><mi>Z</mi><mo>→</mo><mi>A</mi></mrow></mrow><annotation encoding="application/x-tex">F-{X\rightarrow A}\cup{Z\rightarrow A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span></span></span></span></span>与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>等价。</li></ul><h3 id="极小化过程"><a class="markdownIt-Anchor" href="#极小化过程"></a> 极小化过程</h3><p>每一个函数依赖集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>均等价于一个极小函数依赖集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">F_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。此<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">F_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>称为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>的最小依赖集。</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;思维导图&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#思维导图&quot;&gt;&lt;/a&gt; 思维导图&lt;/h1&gt;
&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;关系数据理论
&lt;ul&gt;
      
    
    </summary>
    
    
      <category term="数据库原理" scheme="https://zoruasama.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="数据库原理" scheme="https://zoruasama.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
    
      <category term="数据库" scheme="https://zoruasama.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>Linux入门 | 3.常用命令</title>
    <link href="https://zoruasama.gitee.io/2020/08/27/Linux_2/"/>
    <id>https://zoruasama.gitee.io/2020/08/27/Linux_2/</id>
    <published>2020-08-27T13:00:00.000Z</published>
    <updated>2020-09-10T06:31:50.666Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="基础命令"><a class="markdownIt-Anchor" href="#基础命令"></a> 基础命令</h1><p>在<a href="/2020/04/14/Linux_1/#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4">上一篇文章</a>中，我写到了在<code>Linux</code>系统中常用了8个命令，在这篇文章中，将会对这8个命令作较为详细的解析。<br />如果各位读者对本文有所不清晰或认为有错误的地方，欢迎来评论区指出。我会及时确认并修正。</p><table><thead><tr><th>序号</th><th>命令</th><th>对应英语</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>ls</td><td>list</td><td>列出指定文件夹下的内容</td></tr><tr><td>02</td><td>pwd</td><td>print work directory</td><td>显示当前工作路径</td></tr><tr><td>03</td><td>cd</td><td>change directory</td><td>改变当前工作路径</td></tr><tr><td>04</td><td>touch</td><td>touch</td><td>新建一个空白文件</td></tr><tr><td>05</td><td>mkdir</td><td>make directory</td><td>创建一个新的目录</td></tr><tr><td>06</td><td>rm</td><td>remove</td><td>删除指定文件</td></tr><tr><td>07</td><td>clear</td><td>clear</td><td>清除当前屏幕上的信息（新建一屏）</td></tr><tr><td>08</td><td>reset</td><td>reset</td><td>重置终端</td></tr></tbody></table><h1 id="命令格式"><a class="markdownIt-Anchor" href="#命令格式"></a> 命令格式</h1><p>在终端中，命令通常是按照如下格式进行的：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> [-options] [parameter]</span><br></pre></td></tr></table></figure><ul><li><code>command</code>：命令名称，</li><li><code>[-options]</code>：选项，可用来对命令进行控制，实现不同的效果。这一项可以省略。</li><li><code>parameter</code>：传给命令的参数，可以是 <strong>零个</strong>、<strong>一个</strong> 或者 <strong>多个</strong></li></ul><h1 id="ls-命令说明"><a class="markdownIt-Anchor" href="#ls-命令说明"></a> ls 命令说明</h1><ul><li><code>ls</code> 是<strong>list</strong> 的缩写，功能是列出指定文件夹下的内容，可以类比于 <strong>DOS</strong> 下的 <code>dir</code> 命令。</li><li><code>ls path</code>显示path路径的目录下的内容。</li><li>如果直接使用<code>ls</code>，等价于<code>ls .</code>（下文有解释<code>.</code>）。</li></ul><h2 id="ls-常用选项"><a class="markdownIt-Anchor" href="#ls-常用选项"></a> ls 常用选项</h2><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示指定目录下所有子目录与文件，包括<strong>隐藏文件</strong></td></tr><tr><td>-l</td><td>以<strong>列表方式</strong>显示文件的详细信息</td></tr><tr><td>-h</td><td>配合 -l 以人性化的方式显示文件大小</td></tr></tbody></table><h2 id="linux-系统的文件和目录的特点"><a class="markdownIt-Anchor" href="#linux-系统的文件和目录的特点"></a> Linux 系统的文件和目录的特点</h2><ul><li><strong>文件</strong> 或者 <strong>目录</strong> 名称最长可以有 <code>256</code> 个字符</li><li>以 <code>.</code> 开头的文件为隐藏文件，需要用 -a 参数才能显示</li><li><strong>.</strong> 代表当前目录，也可以叫做工作目录（或者工作路径）</li><li><strong>…</strong> 代表上一级目录</li><li>上面这两个目录严格来说也是<code>.</code>开头的，所以也是在 -a 参数下才能显示。</li></ul><h3 id="绝对路径与相对路径"><a class="markdownIt-Anchor" href="#绝对路径与相对路径"></a> 绝对路径与相对路径</h3><p>在Linux中，以path作为参数时，可分为绝对路径和相对路径。</p><ul><li><p><strong>绝对路径</strong><br />从<strong>根目录</strong><code>/</code>开始，依次将各级子目录的名字组合起来，形成的路径就称为某个文件的绝对路径。例如，根目录（/）下有目录usr，usr目录下有子目录bin，bin目录下有文件chsh，则chsh文件的绝对路径就是：/usr/bin/chsh。</p></li><li><p><strong>相对路径</strong><br />相对当前所在路径的位置，例如当前所在的位置为/usr，也就是在根目录的usr子目录下，则chsh文件相对当前位置的路径为：bin/chsh。</p></li></ul><div class="snote guide"><p>相对路径就是相对于当前工作目录的路径。例如我想显示当前工作目录的上一级目录下的文件：ls ..</p></div><h2 id="ls-通配符的使用"><a class="markdownIt-Anchor" href="#ls-通配符的使用"></a> ls 通配符的使用</h2><p>在<code>ls</code>命令的参数中，可以使用通配符。</p><table><thead><tr><th>通配符</th><th>含义</th></tr></thead><tbody><tr><td>*</td><td>代表任意个数个字符</td></tr><tr><td>?</td><td>代表任意一个字符，至少 1 个</td></tr><tr><td>[]</td><td>表示可以匹配字符组中的任一一个</td></tr><tr><td>[abc]</td><td>匹配 a、b、c 中的任意一个</td></tr><tr><td>[a-f]</td><td>匹配从 a 到 f 范围内的的任意一个字符</td></tr></tbody></table><h2 id="演示"><a class="markdownIt-Anchor" href="#演示"></a> 演示</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827191622.gif" alt="" /></p><h1 id="pwd-命令说明"><a class="markdownIt-Anchor" href="#pwd-命令说明"></a> pwd 命令说明</h1><ul><li><code>pwd</code> 命令相对比较简单，就是显示当前工作目录。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827192734.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827192945.png" alt="" /></li></ul><h2 id="演示-2"><a class="markdownIt-Anchor" href="#演示-2"></a> 演示</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827191855.gif" alt="" /></p><h1 id="cd-命令说明"><a class="markdownIt-Anchor" href="#cd-命令说明"></a> cd 命令说明</h1><h2 id="使用cd命令"><a class="markdownIt-Anchor" href="#使用cd命令"></a> 使用cd命令</h2><ul><li>如果单纯地使用<code>cd</code>命令，等价于<code>cd ~</code>或<code>cd /home/username</code><ul><li>即切换到家目录</li></ul></li><li><code>cd</code>后面可以接<strong>绝对路径</strong>或<strong>相对路径</strong>作为参数。</li><li><code>cd -</code>可以来回切换目录，即<strong>访问上一次访问的目录</strong>。</li></ul><h2 id="演示-3"><a class="markdownIt-Anchor" href="#演示-3"></a> 演示</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827192449.gif" alt="" /></p><h1 id="touch-命令说明"><a class="markdownIt-Anchor" href="#touch-命令说明"></a> touch 命令说明</h1><p><code>touch</code>用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，<strong>系统会建立一个新的文件</strong>。<br />作为入门级教程，我们只需要知道<code>touch</code>命令可以创建一个空白文件就行了。<br />语法：<code>touch filename</code></p><h2 id="演示-4"><a class="markdownIt-Anchor" href="#演示-4"></a> 演示</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827200707.gif" alt="" /></p><h1 id="mkdir-命令说明"><a class="markdownIt-Anchor" href="#mkdir-命令说明"></a> mkdir 命令说明</h1><ul><li><code>mkdir path</code>会创建一个path目录。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827203633.gif" alt="" /></li></ul><hr /><p>如果path是一个较长的路径，例如<code>aaa/bbb/ccc/ddd</code>这个例子，需要确保<code>aaa``bbb``ccc</code>文件夹都已经存在。<br />如果加一个<code>-p</code>选项（递归创建目录），则不需要确保这些文件夹都已经存在。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827204408.gif" alt="" /></p><h1 id="rm-命令说明"><a class="markdownIt-Anchor" href="#rm-命令说明"></a> rm 命令说明</h1><p>使用<code>rm</code>时请<strong>万分小心</strong>，<code>rm</code>是删除文件或目录，是<strong>不可逆操作</strong>。<br /><code>rm</code>后接文件名就可以了。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827204738.gif" alt="" /></p><h2 id="选项"><a class="markdownIt-Anchor" href="#选项"></a> 选项</h2><p>如果想用<code>rm</code>删除目录，则应该加一个<code>-r</code>选项，代表递归删除。<br />如果想用<code>rm</code>删除前进行提示，则应该加一个<code>-i</code>选项。<br />如果想用<code>rm</code>强制删除，则应该加一个<code>-f</code>选项。<br />下面是这些选项的演示：</p><h3 id="递归删除"><a class="markdownIt-Anchor" href="#递归删除"></a> 递归删除</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827205022.gif" alt="" /></p><h3 id="删除前提示"><a class="markdownIt-Anchor" href="#删除前提示"></a> 删除前提示</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200827205304.gif" alt="" /></p><h1 id="查阅命令帮助信息"><a class="markdownIt-Anchor" href="#查阅命令帮助信息"></a> 查阅命令帮助信息</h1><blockquote><p>提示</p><ul><li>现阶段只需要 <strong>知道</strong> 通过以下两种方式可以查询命令的帮助信息</li><li>先学习<strong>常用命令</strong>及<strong>常用选项</strong>的使用即可，工作中如果遇到问题可以借助 <strong>网络搜索</strong></li></ul></blockquote><h2 id="-help"><a class="markdownIt-Anchor" href="#-help"></a> <code>--help</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul><li>显示 <code>command</code> 命令的帮助信息</li><li>示例：<code>pwd --help</code></li></ul><h2 id="man"><a class="markdownIt-Anchor" href="#man"></a> man</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul><li>查阅 <code>command</code> 命令的使用手册</li><li>示例：<code>man pwd</code></li></ul><blockquote><p><code>man</code> 是 <strong>manual</strong> 的缩写，是 Linux 提供的一个 <strong>手册</strong>，包含了绝大部分的命令、函数的详细使用说明</p></blockquote><p>使用 <code>man</code> 时的操作键：</p><table><thead><tr><th>操作键</th><th>功能</th></tr></thead><tbody><tr><td>空格键</td><td>显示手册页的下一屏</td></tr><tr><td>Enter 键</td><td>一次滚动手册页的一行</td></tr><tr><td>b</td><td>回滚一屏</td></tr><tr><td>f</td><td>前滚一屏</td></tr><tr><td>q</td><td>退出</td></tr><tr><td>/word</td><td>搜索 <strong>word</strong> 字符串</td></tr></tbody></table><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;基础命令&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#基础
      
    
    </summary>
    
    
      <category term="Linux" scheme="https://zoruasama.gitee.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://zoruasama.gitee.io/tags/Linux/"/>
    
      <category term="操作系统" scheme="https://zoruasama.gitee.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 20. 答辩的终稿</title>
    <link href="https://zoruasama.gitee.io/2020/08/20/training_20/"/>
    <id>https://zoruasama.gitee.io/2020/08/20/training_20/</id>
    <published>2020-08-20T11:30:00.000Z</published>
    <updated>2020-09-07T08:24:29.277Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>今天是8月14日，实训的第20天。实训的最后一天。<br />今天我如预期一样地完成了答辩，两位老师似乎对我的项目及答辩都还很满意。<br />看着自己完整的项目和老师的认可，我感到非常有成就感。<br />我能在这取得一个小小的进步，离不开孟老师的耐心教导，同学们友爱的帮助。<br />由于我今天中午又加了一些新的内容，所以也在这里再对昨天的内容进行补充。</p><h1 id="事先准备"><a class="markdownIt-Anchor" href="#事先准备"></a> 事先准备</h1><ul><li>另一块屏幕用来播放本文档</li><li>已经开启服务的项目（原项目，处于登录状态，数据仅有一页）</li><li>ZOL手机报价网站</li><li>360安全浏览器</li></ul><h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1><ul><li>名称：指上云霄手机信息查阅系统</li><li>功能：提供爬虫和数据可视化两部分功能。<ul><li>爬虫：可以在页面上调用后台接口，爬取ZOL手机报价网站上的数据并存储到数据库中。</li><li>数据可视化：可以在页面上显示手机的相关数据信息。</li></ul></li></ul><h1 id="介绍数据爬取来源"><a class="markdownIt-Anchor" href="#介绍数据爬取来源"></a> 介绍数据爬取来源</h1><ul><li>手机报价首页</li><li>手机配置参数页</li><li>手机评价页面</li><li>bilibili搜索</li></ul><p>难点：ZOL手机报价的页面很多都不一样。对于一些没有评价或未上市的手机数据不予爬取。</p><h1 id="应用页面"><a class="markdownIt-Anchor" href="#应用页面"></a> 应用页面</h1><p>应用的页面有<strong>登录注册页面</strong>、<strong>数据可视化首页</strong>、<strong>爬虫页面</strong>、<strong>数据柱状图页面</strong>、<strong>关于页面</strong>五个页面。</p><h2 id="登录注册页面"><a class="markdownIt-Anchor" href="#登录注册页面"></a> 登录注册页面</h2><ul><li>在图1中点击注册按钮可切换为图2界面，图2界面点击返回按钮可切换为图1界面。</li><li>在<strong>注册登录界面</strong>，对填充的文本内容有长度和字符内容的限制。例如用户名和密码只能为字母和数字组成。</li><li>在此界面注册后，密码将以加密后的文本进行存储。</li><li><strong>如果还未登录，企图访问其他网页，则会自动跳转至登录注册页面</strong>。反之，若在登录后，访问该登录注册页面，将会自动跳转至首页。</li></ul><h2 id="数据可视化首页"><a class="markdownIt-Anchor" href="#数据可视化首页"></a> 数据可视化首页</h2><ul><li>数据可视化首页会在顶部显示<strong>当前的数据库条目数量</strong>。</li><li>数据可视化首页显示的手机信息的序列，将是一个<strong>随机序列</strong>。</li><li><strong>在刚载入页面时，首页只会显示8条数据。当滚轮被滑到底部时，将会再次载入至多4条数据。实现了动态加载数据的过程，直至数据库的所有数据都已呈现</strong>。<ul><li>每次载入的数据都是从后端被渲染完毕后，以HTML的形式插入的。</li></ul></li><li><strong>每个标签左侧会读取数据库中的基本信息并显示，右侧会以echarts雷达图的形式显示当前的数据和平均的数据。</strong></li><li>点击名字可以弹出bilibili的视频。</li></ul><h2 id="爬虫页面"><a class="markdownIt-Anchor" href="#爬虫页面"></a> 爬虫页面</h2><p>在文本框填入要爬取数据的第几页，点击爬虫，即可爬取数据。<br />数据来源是<strong>ZOL手机报价</strong>。</p><ul><li>如果选择的页号已经被爬取到数据库中，后端将会拒绝该爬取请求。</li><li>如果选择的页号不符合要求，后端也会拒绝该爬取请求。</li><li>清空数据库前，需要填入事先在后端设置好的密码。</li></ul><h2 id="数据柱状图页面"><a class="markdownIt-Anchor" href="#数据柱状图页面"></a> 数据柱状图页面</h2><p>该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。<br />该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。</p><ul><li>单击柱状条可以在下方显示手机信息卡片。</li><li>双击柱状条会自动跳转到和这个手机相关的B站视频链接。</li></ul><h2 id="关于页面"><a class="markdownIt-Anchor" href="#关于页面"></a> 关于页面</h2><p>关于页面比较简单，仅仅只是显示了本文档的<strong>简介</strong>部分的内容。在此不再赘述。</p><h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1><p>接口分成两个模块，UserInfo模块和echarts模块。</p><h2 id="userinfo"><a class="markdownIt-Anchor" href="#userinfo"></a> UserInfo</h2><ul><li>index，被请求时，将会返回<strong>登录注册页面</strong>。</li><li>user_login，仅能被POST请求，参数为username和password。用于登录。</li><li>user_register，仅能被POST请求，参数为username和password及emailAddress。用于注册。</li><li>user_activate，能被GET请求，参数为id。用于注册账号的激活。将会返回一个JsonResponse。</li><li>is_login，参数为id。被请求时，会检查浏览器的session，查看是否登录。</li><li>user_logout，参数为id。被请求时，将会删除浏览器的session。</li></ul><h2 id="echarts"><a class="markdownIt-Anchor" href="#echarts"></a> echarts</h2><ul><li>空，被请求时，返回<strong>数据可视化首页</strong>。</li><li>run_page，被请求时，返回<strong>爬虫页面</strong>。</li><li>hot_page，被请求时，返回<strong>数据柱状图页面</strong>。</li><li>about，被请求时，返回<strong>关于页面</strong>。</li><li>timenow，被请求时，返回含有系统现行时间信息的JsonResponse。</li><li>run，参数为index，仅能被POST请求。被请求后，将会启动爬虫程序。</li><li>get_hot_json，被请求时，返回一个字典。字典内容为数据库中所有手机的名称、价格、分数数据。</li><li>delete，仅能被POST请求。将会清空数据库数据。</li><li>get_data，参数为index，将会从数据库中读取序号为index的手机数据并返回一个JsonResponse。</li><li>get_random_dict，以列表的形式产生一个随机的序列。</li><li>get_average，被请求时，将以JsonResponse返回数据库中所有数据的评分的平均值。</li><li>init_zorua_box，参数为index，将读取数据库中的数据，并对指定的HTML文件进行渲染，然后<strong>将渲染后的HTML文件返回</strong>。</li></ul><h1 id="数据库结构"><a class="markdownIt-Anchor" href="#数据库结构"></a> 数据库结构</h1><ul><li>User(id,username,password,is_activate)</li><li>Phone(id,name,price,img,score)</li><li>config(phone,soc,camera,camera_vice,ram,battery,screen_size,image)</li><li>evaluation(phone,cost_performance,performance,endurance,design,photograph)</li></ul><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;今天是8月14日，实训的第20天。实训的最后一天。&lt;br /&gt;
今天我如预期一样地完成了答辩，两位老师似乎对我的项目及答辩都还很满意。&lt;br /
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 19. 答辩的准备</title>
    <link href="https://zoruasama.gitee.io/2020/08/13/training_19/"/>
    <id>https://zoruasama.gitee.io/2020/08/13/training_19/</id>
    <published>2020-08-13T11:30:00.000Z</published>
    <updated>2020-09-07T08:24:12.539Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>今天是8月13日，实训的第19天。实训即将步入尾声。<br />今天是答辩的第一天。<br />而我是在第二天答辩。今天准备了一下答辩的思路。</p><h1 id="事先准备"><a class="markdownIt-Anchor" href="#事先准备"></a> 事先准备</h1><ul><li>另一块屏幕用来播放本文档</li><li>已经开启服务的项目（原项目，处于登录状态，数据仅有一页）</li><li>ZOL手机报价网站</li><li>360安全浏览器</li></ul><h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1><ul><li>名称：指上云霄手机信息查阅系统</li><li>功能：提供爬虫和数据可视化两部分功能。<ul><li>爬虫：可以在页面上调用后台接口，爬取ZOL手机报价网站上的数据并存储到数据库中。</li><li>数据可视化：可以在页面上显示手机的相关数据信息。</li></ul></li></ul><h1 id="介绍数据爬取来源"><a class="markdownIt-Anchor" href="#介绍数据爬取来源"></a> 介绍数据爬取来源</h1><ul><li>手机报价首页</li><li>手机配置参数页</li><li>手机评价页面</li><li>bilibili搜索</li></ul><p>难点：ZOL手机报价的页面很多都不一样。对于一些没有评价或未上市的手机数据不予爬取。</p><h1 id="应用页面"><a class="markdownIt-Anchor" href="#应用页面"></a> 应用页面</h1><p>应用的页面有<strong>登录注册页面</strong>、<strong>数据可视化首页</strong>、<strong>爬虫页面</strong>、<strong>数据柱状图页面</strong>、<strong>关于页面</strong>五个页面。</p><h2 id="登录注册页面"><a class="markdownIt-Anchor" href="#登录注册页面"></a> 登录注册页面</h2><ul><li>在图1中点击注册按钮可切换为图2界面，图2界面点击返回按钮可切换为图1界面。</li><li>在<strong>注册登录界面</strong>，对填充的文本内容有长度和字符内容的限制。例如用户名和密码只能为字母和数字组成。</li><li>在此界面注册后，密码将以加密后的文本进行存储。</li><li><strong>如果还未登录，企图访问其他网页，则会自动跳转至登录注册页面</strong>。反之，若在登录后，访问该登录注册页面，将会自动跳转至首页。</li></ul><h2 id="数据可视化首页"><a class="markdownIt-Anchor" href="#数据可视化首页"></a> 数据可视化首页</h2><ul><li>数据可视化首页会在顶部显示<strong>当前的数据库条目数量</strong>。</li><li>数据可视化首页显示的手机信息的序列，将是一个<strong>随机序列</strong>。</li><li><strong>在刚载入页面时，首页只会显示8条数据。当滚轮被滑到底部时，将会再次载入至多4条数据。实现了动态加载数据的过程，直至数据库的所有数据都已呈现</strong>。<ul><li>每次载入的数据都是从后端被渲染完毕后，以HTML的形式插入的。</li></ul></li><li><strong>每个标签左侧会读取数据库中的基本信息并显示，右侧会以echarts雷达图的形式显示当前的数据和平均的数据。</strong></li><li>点击名字可以弹出bilibili的视频。</li></ul><h2 id="爬虫页面"><a class="markdownIt-Anchor" href="#爬虫页面"></a> 爬虫页面</h2><p>在文本框填入要爬取数据的第几页，点击爬虫，即可爬取数据。<br />数据来源是<strong>ZOL手机报价</strong>。</p><ul><li>如果选择的页号已经被爬取到数据库中，后端将会拒绝该爬取请求。</li><li>如果选择的页号不符合要求，后端也会拒绝该爬取请求。</li><li>清空数据库前，需要填入事先在后端设置好的密码。</li></ul><h2 id="数据柱状图页面"><a class="markdownIt-Anchor" href="#数据柱状图页面"></a> 数据柱状图页面</h2><p>该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。</p><h2 id="关于页面"><a class="markdownIt-Anchor" href="#关于页面"></a> 关于页面</h2><p>关于页面比较简单，仅仅只是显示了本文档的<strong>简介</strong>部分的内容。在此不再赘述。</p><h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1><p>接口分成两个模块，UserInfo模块和echarts模块。</p><h2 id="userinfo"><a class="markdownIt-Anchor" href="#userinfo"></a> UserInfo</h2><ul><li>index，被请求时，将会返回<strong>登录注册页面</strong>。</li><li>user_login，仅能被POST请求，参数为username和password。用于登录。</li><li>user_register，仅能被POST请求，参数为username和password及emailAddress。用于注册。</li><li>user_activate，能被GET请求，参数为id。用于注册账号的激活。将会返回一个JsonResponse。</li><li>is_login，参数为id。被请求时，会检查浏览器的session，查看是否登录。</li><li>user_logout，参数为id。被请求时，将会删除浏览器的session。</li></ul><h2 id="echarts"><a class="markdownIt-Anchor" href="#echarts"></a> echarts</h2><ul><li>空，被请求时，返回<strong>数据可视化首页</strong>。</li><li>run_page，被请求时，返回<strong>爬虫页面</strong>。</li><li>hot_page，被请求时，返回<strong>数据柱状图页面</strong>。</li><li>about，被请求时，返回<strong>关于页面</strong>。</li><li>timenow，被请求时，返回含有系统现行时间信息的JsonResponse。</li><li>run，参数为index，仅能被POST请求。被请求后，将会启动爬虫程序。</li><li>get_hot_json，被请求时，返回一个字典。字典内容为数据库中所有手机的名称、价格、分数数据。</li><li>delete，仅能被POST请求。将会清空数据库数据。</li><li>get_data，参数为index，将会从数据库中读取序号为index的手机数据并返回一个JsonResponse。</li><li>get_random_dict，以列表的形式产生一个随机的序列。</li><li>get_average，被请求时，将以JsonResponse返回数据库中所有数据的评分的平均值。</li><li>init_zorua_box，参数为index，将读取数据库中的数据，并对指定的HTML文件进行渲染，然后<strong>将渲染后的HTML文件返回</strong>。</li></ul><h1 id="数据库结构"><a class="markdownIt-Anchor" href="#数据库结构"></a> 数据库结构</h1><ul><li>User(id,username,password,is_activate)</li><li>Phone(id,name,price,img,score)</li><li>config(phone,soc,camera,camera_vice,ram,battery,screen_size,image)</li><li>evaluation(phone,cost_performance,performance,endurance,design,photograph)</li></ul><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;今天是8月13日，实训的第19天。实训即将步入尾声。&lt;br /&gt;
今天是答辩的第一天。&lt;br /&gt;
而我是在第二天答辩。今天准备了一下答辩的思路
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 18. 我的项目介绍</title>
    <link href="https://zoruasama.gitee.io/2020/08/12/training_18/"/>
    <id>https://zoruasama.gitee.io/2020/08/12/training_18/</id>
    <published>2020-08-12T11:30:00.000Z</published>
    <updated>2020-09-07T08:23:51.677Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>今天是8月12日，实训的第18天。实训即将步入尾声。<br />今天孟老师依然全天给同学们进行答疑。<br />我整理了一下我的项目的相关信息以准备明天后天的答辩。<br />整理内容如下。</p><h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1><ul><li>名称：指上云霄手机信息查阅系统</li><li>功能：提供爬虫和数据可视化两部分功能。<ul><li>爬虫：可以在页面上调用后台接口，爬取ZOL手机报价网站上的数据并存储到数据库中。</li><li>数据可视化：可以在页面上显示手机的相关数据信息。</li></ul></li><li>开发工具：PyCharm</li><li>后台开发语言：Python3</li><li>前端开发语言：HTML5+CSS+JavaScript</li><li>作者：张仁忠(Zorua) 2018065527</li><li>指导老师：孟老师（mzm5466）</li></ul><h1 id="应用页面"><a class="markdownIt-Anchor" href="#应用页面"></a> 应用页面</h1><p>应用的页面有<strong>登录注册页面</strong>、<strong>数据可视化首页</strong>、<strong>爬虫页面</strong>、<strong>数据柱状图页面</strong>、<strong>关于页面</strong>五个页面。</p><h2 id="登录注册页面"><a class="markdownIt-Anchor" href="#登录注册页面"></a> 登录注册页面</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240970_20200812210057628_27841.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240972_20200812210113431_24575.png" alt="" /></p><ul><li>在图1中点击注册按钮可切换为图2界面，图2界面点击返回按钮可切换为图1界面。</li><li>在<strong>注册登录界面</strong>，对填充的文本内容有长度和字符内容的限制。例如用户名和密码只能为字母和数字组成。</li><li>在此界面注册后，密码将以加密后的文本进行存储。</li><li><strong>如果还未登录，企图访问其他网页，则会自动跳转至登录注册页面</strong>。反之，若在登录后，访问该登录注册页面，将会自动跳转至首页。</li></ul><h2 id="数据可视化首页"><a class="markdownIt-Anchor" href="#数据可视化首页"></a> 数据可视化首页</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240973_20200812210444412_15098.png" alt="" /></p><ul><li>数据可视化首页会在顶部显示<strong>当前的数据库条目数量</strong>。</li><li>数据可视化首页显示的手机信息的序列，将是一个<strong>随机序列</strong>。</li><li><strong>在刚载入页面时，首页只会显示8条数据。当滚轮被滑到底部时，将会再次载入至多4条数据。实现了动态加载数据的过程，直至数据库的所有数据都已呈现</strong>。<ul><li>每次载入的数据都是从后端被渲染完毕后，以HTML的形式插入的。</li></ul></li><li><strong>每个标签左侧会读取数据库中的基本信息并显示，右侧会以echarts雷达图的形式显示当前的数据和平均的数据。</strong></li></ul><h2 id="爬虫页面"><a class="markdownIt-Anchor" href="#爬虫页面"></a> 爬虫页面</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240973_20200812212702692_31578.png" alt="" /><br />在文本框填入要爬取数据的第几页，点击爬虫，即可爬取数据。<br />数据来源是<strong>ZOL手机报价</strong>。</p><ul><li>如果选择的页号已经被爬取到数据库中，后端将会拒绝该爬取请求。</li><li>如果选择的页号不符合要求，后端也会拒绝该爬取请求。</li><li>清空数据库前，需要填入事先在后端设置好的密码。</li></ul><h2 id="数据柱状图页面"><a class="markdownIt-Anchor" href="#数据柱状图页面"></a> 数据柱状图页面</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240973_20200812212945780_14328.png" alt="" /><br />该页面将会呈现数据库中所有条目的售价以及得分状况。通过调节图像四周的工具，可以获取不同的信息。</p><h2 id="关于页面"><a class="markdownIt-Anchor" href="#关于页面"></a> 关于页面</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1597240974_20200812214757439_29652.png" alt="" /><br />关于页面比较简单，仅仅只是显示了本文档的<strong>简介</strong>部分的内容。在此不再赘述。</p><h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1><p>接口分成两个模块，UserInfo模块和echarts模块。</p><h2 id="userinfo"><a class="markdownIt-Anchor" href="#userinfo"></a> UserInfo</h2><ul><li>index，被请求时，将会返回<strong>登录注册页面</strong>。</li><li>user_login，仅能被POST请求，参数为username和password。用于登录。</li><li>user_register，仅能被POST请求，参数为username和password及emailAddress。用于注册。</li><li>user_activate，能被GET请求，参数为id。用于注册账号的激活。将会返回一个JsonResponse。</li><li>is_login，参数为id。被请求时，会检查浏览器的session，查看是否登录。</li><li>user_logout，参数为id。被请求时，将会删除浏览器的session。</li></ul><h2 id="echarts"><a class="markdownIt-Anchor" href="#echarts"></a> echarts</h2><ul><li>空，被请求时，返回<strong>数据可视化首页</strong>。</li><li>run_page，被请求时，返回<strong>爬虫页面</strong>。</li><li>hot_page，被请求时，返回<strong>数据柱状图页面</strong>。</li><li>about，被请求时，返回<strong>关于页面</strong>。</li><li>timenow，被请求时，返回含有系统现行时间信息的JsonResponse。</li><li>run，参数为index，仅能被POST请求。被请求后，将会启动爬虫程序。</li><li>get_hot_json，被请求时，返回一个字典。字典内容为数据库中所有手机的名称、价格、分数数据。</li><li>delete，仅能被POST请求。将会清空数据库数据。</li><li>get_data，参数为index，将会从数据库中读取序号为index的手机数据并返回一个JsonResponse。</li><li>get_random_dict，以列表的形式产生一个随机的序列。</li><li>get_average，被请求时，将以JsonResponse返回数据库中所有数据的评分的平均值。</li><li>init_zorua_box，参数为index，将读取数据库中的数据，并对指定的HTML文件进行渲染，然后<strong>将渲染后的HTML文件返回</strong>。</li></ul><h1 id="数据库结构"><a class="markdownIt-Anchor" href="#数据库结构"></a> 数据库结构</h1><ul><li>User(id,username,password,is_activate)</li><li>Phone(id,name,price,img,score)</li><li>config(phone,soc,camera,camera_vice,ram,battery,screen_size,image)</li><li>evaluation(phone,cost_performance,performance,endurance,design,photograph)</li></ul><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;今天是8月12日，实训的第18天。实训即将步入尾声。&lt;br /&gt;
今天孟老师依然全天给同学们进行答疑。&lt;br /&gt;
我整理了一下我的项目的相关信
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 17. 一些乱七八糟的随笔</title>
    <link href="https://zoruasama.gitee.io/2020/08/11/training_17/"/>
    <id>https://zoruasama.gitee.io/2020/08/11/training_17/</id>
    <published>2020-08-11T11:30:00.000Z</published>
    <updated>2020-09-07T08:23:32.393Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>今天是8月11日，实训的第17天。实训即将步入尾声。<br />今天孟老师全程在给同学答疑，但是由于我的大作业已经完成了，基本上没有什么问题需要向孟老师询问。<br />所以今天的日志就写一写，在答疑过程中，收获的几个比较有意思的知识点吧。</p><h1 id="eval"><a class="markdownIt-Anchor" href="#eval"></a> eval()</h1><h2 id="描述"><a class="markdownIt-Anchor" href="#描述"></a> 描述</h2><p>eval() 函数是python内置函数，用来执行一个字符串表达式，并返回表达式的值。</p><h3 id="语法"><a class="markdownIt-Anchor" href="#语法"></a> 语法</h3><p>以下是 eval() 方法的语法:<br />eval(expression[, globals[, locals]])</p><h3 id="参数"><a class="markdownIt-Anchor" href="#参数"></a> 参数</h3><ul><li>expression – 表达式。</li><li>globals – 变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。</li><li>locals – 变量作用域，局部命名空间，如果被提供，可以是任何映射对象。</li></ul><h3 id="返回值"><a class="markdownIt-Anchor" href="#返回值"></a> 返回值</h3><p>返回表达式计算结果。</p><h2 id="实例"><a class="markdownIt-Anchor" href="#实例"></a> 实例</h2><p>以下展示了使用 eval() 方法的实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;x &#x3D; 7</span><br><span class="line">&gt;&gt;&gt; eval( &#39;3 * x&#39; )</span><br><span class="line">21</span><br><span class="line">&gt;&gt;&gt; eval(&#39;pow(2,2)&#39;)</span><br><span class="line">4</span><br><span class="line">&gt;&gt;&gt; eval(&#39;2 + 2&#39;)</span><br><span class="line">4</span><br><span class="line">&gt;&gt;&gt; n&#x3D;81</span><br><span class="line">&gt;&gt;&gt; eval(&quot;n + 4&quot;)</span><br><span class="line">85</span><br></pre></td></tr></table></figure><h2 id="感悟"><a class="markdownIt-Anchor" href="#感悟"></a> 感悟</h2><p>用这个eval()函数，我可以将一个列表以字符串的形式存储在一个文件中，然后读取文件并把数据作为eval()的函数，就可变成python中的列表对象。<br />我将这个特性应用在了我的大作业中，体现在可以“对已经爬取过数据的页码进行存档”。</p><h1 id="html的for循环"><a class="markdownIt-Anchor" href="#html的for循环"></a> html的for循环</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.top</span>&#123;</span></span><br><span class="line">                float: left;</span><br><span class="line">                margin-left: 22px;</span><br><span class="line">                margin-top: 30px;</span><br><span class="line">                height: 320px;</span><br><span class="line">                width: 240px;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.top</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line">                width: 100%;</span><br><span class="line">                height: 100%;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"tu1"</span> <span class="attr">src</span>=<span class="string">"../pic/1.jpg"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//1、先用js获取到div的内容</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementsByClassName(<span class="string">'top'</span>).innerHTML;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> re = <span class="string">""</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> tu = <span class="number">1</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span></span><br><span class="line">        tu++;</span><br><span class="line"><span class="handlebars"><span class="xml">        re += '<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span>' +</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            '<span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"tu1"</span> <span class="attr">src</span>=<span class="string">"../pic/'+tu+'.jpg"</span>&gt;</span>' +</span></span></span><br><span class="line"><span class="actionscript">            <span class="string">'&lt;/div&gt;'</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.writeln(re);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>就像上面这段代码一样，可以在html里应用“for”循环来重复div元素。<br />众所周知，html并不被认为是一种编程语言，我也是这么想的，但是html里还有for循环实在让我有些惊讶。<br />可用来实现画面的渲染。（但是我的大作业中不是以这种方式实现的，而是以后端渲染html页面后，插入到已存在的标签中。）</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;今天是8月11日，实训的第17天。实训即将步入尾声。&lt;br /&gt;
今天孟老师全程在给同学答疑，但是由于我的大作业已经完成了，基本上没有什么问题需
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 16. 服务器的部署</title>
    <link href="https://zoruasama.gitee.io/2020/08/10/training_16/"/>
    <id>https://zoruasama.gitee.io/2020/08/10/training_16/</id>
    <published>2020-08-10T11:30:00.000Z</published>
    <updated>2020-09-07T08:23:04.666Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>今天是8月10日，实训的第16天。<br />上午孟老师演示了如何将Django项目部署在云服务器上。<br />由于我没有云服务器，因此用装有Centos7的虚拟机来代替。<br />将项目部署在虚拟机上的过程也不算容易，途中遇到了不少坎坷。例如我的centos在刚开始时连不上网络，rc命令无法上传等等。<br />靠着不断百度到的CSDN的资料还是艰难地克服了难题，完成了部署。<br />今天还有部分关于Nginx的还未讲授完，为保证该笔记的一体性，我也加上去了。</p><h1 id="ssh设置"><a class="markdownIt-Anchor" href="#ssh设置"></a> SSH设置</h1><h2 id="启动ssh服务"><a class="markdownIt-Anchor" href="#启动ssh服务"></a> 启动ssh服务</h2><p>在打开centos虚拟机后，先用<code>yum install openssh* -y</code>安装开启SSH必备的程序。<br />而后用<code>vi /etc/ssh/sshd config</code>命令打开sshd的配置文件。<br />修改内容为：</p><ul><li><code>ListenAddress 0.0.0.0</code>和<code>ListenAddress ::</code>的井号去掉。</li><li><code>PermitRootLogin</code>前的井号去掉。</li></ul><p>完成这些操作后，用<code>systemctl restart sshd</code>指令重启sshd服务。</p><h2 id="查询ip地址"><a class="markdownIt-Anchor" href="#查询ip地址"></a> 查询IP地址</h2><p>接下来使用<code>ifconfig</code>来查询虚拟机的IP地址。<br />由于我的centos7没有内置ifconfig命令，因此需要进行额外的安装。<br />通过<code>yum search ifconfig</code>命令发现，ifconfig命令在net-tools.x86_64这个包里。<br />因此使用<code>yum install net-tools.x86_64</code>命令来进行安装。</p><h2 id="建立ssh连接"><a class="markdownIt-Anchor" href="#建立ssh连接"></a> 建立SSH连接</h2><p>在配置完SSH服务和获取IP地址后，在本机上的XShell或者其他能SSH连接的shell中输入<code>ssh ip address</code>进行连接。<br />通过命令<code>sudo apt install lrzsz unzip -y</code>解压缩上传工具，但由于我安装成功后也无法使用<code>rc</code>命令，因此只能采用<code>scp</code>命令。<br />形如<code>scp a.txt root@ip:/home</code>的命令，来完成文件的上传。</p><p>ln -s /usr/local/python3/bin/uwsgi /usr/bin/uwsgi 创建软连接</p><h1 id="安装python3"><a class="markdownIt-Anchor" href="#安装python3"></a> 安装python3</h1><p>centos自带了一个python2，但是没有python3。因此需要安装一个python3。依照以下步骤即可完成python3的安装。</p><ol><li>拉取远程包<code>yum install wget -y</code></li><li>安装编译时需要的程序<code>yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel python-devel gcc make -y</code></li><li>在home创建一个目录<code>mkdir python37</code></li><li>切换到目标文件夹 <code>cd python37/</code></li><li>获取python的源文件 <code>wget https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz</code><ul><li>直接从官网获取速度会比较慢，因此也可以使用阿里云的源<code>https://npm.taobao.org/mirrors/python/3.7.2/Python-3.7.2.tar.xz</code></li></ul></li><li>使用tar命令进行解压 <code>tar -xvJf Python-3.7.2.tar.xz</code></li><li>进入解压后的目录，指定编译路径 <code>./configure prefix=/usr/local/python3</code></li><li>进行文件的编译<code>make &amp;&amp; make install</code><ul><li>如果报错ModuleNotFoundError: No module named ‘_ctypes’，则<code>yum install libffi-devel –y</code></li></ul></li><li>删除旧的python2 <code>rm -rf /usr/bin/python</code></li><li>创建软连接 <code>ln -s /usr/local/python3/bin/python3 /usr/bin/python</code></li><li>修改yum vim <code>/usr/bin/yum</code></li><li><code>vim /usr/libexec/urlgrabber-ext-down</code></li><li>永久换pip源  <code>mkdir ~/.pip</code></li><li>vim <code>~/.pip/pip.conf</code></li><li>在前一步文件都迁移过来后，安装工程项目所需的包。</li></ol><pre><code>+ `python -m pip install -r r.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`+ 其中`r.txt`的内容是，工程项目所需要的包的名字。一行一个。</code></pre><h1 id="uwsgi部署"><a class="markdownIt-Anchor" href="#uwsgi部署"></a> uwsgi部署</h1><p>uwsgi --ini uwsgi.ini 前台以http方式启动uwsgi<br />uwsgi -d --ini uwsgi.ini 以后台运行uwsgi<br />pkill -f uwsgi -9 杀死uwsgi服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line">chdir &#x3D; &#x2F;home&#x2F;qd201909dj #设置项目根目录</span><br><span class="line">module &#x3D; qd201909dj.wsgi:application #设置项目启动器</span><br><span class="line">master &#x3D; true  #设置主节点</span><br><span class="line">processes &#x3D; 1  #设置进程数</span><br><span class="line">http &#x3D; 0.0.0.0:80  #以http形式访问</span><br><span class="line">chmod-socket &#x3D; 644</span><br><span class="line">vacuum &#x3D; true #服务停止杀死pid</span><br><span class="line">logto &#x3D; &#x2F;home&#x2F;qd201909dj&#x2F;test.log  #输出日志</span><br><span class="line">pidfile &#x3D; &#x2F;home&#x2F;qd201909dj&#x2F;uwsgi.pid  #pid文件</span><br><span class="line">static-map &#x3D; &#x2F;static &#x3D;  &#x2F;home&#x2F;qd201909dj&#x2F; 静态文件</span><br><span class="line">py-autoreload &#x3D; 1  #修改后自动重启项目（生产不可用）</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Nginx</span><br><span class="line">server&#123;</span><br><span class="line">    listen        80;</span><br><span class="line">    server_name   39.100.6.138;</span><br><span class="line">    charset       utf-8;</span><br><span class="line"></span><br><span class="line">    client_max_body_size 75M;</span><br><span class="line"></span><br><span class="line">    location &#x2F;static &#123;</span><br><span class="line">        alias &#x2F;home&#x2F;qd201909dj;</span><br><span class="line">    &#125;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        uwsgi_pass 127.0.0.1:8888;</span><br><span class="line">        include     &#x2F;etc&#x2F;nginx&#x2F;uwsgi_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="生成文件服务器"><a class="markdownIt-Anchor" href="#生成文件服务器"></a> 生成文件服务器</h2><ol><li>yum install httpd-tools -y</li><li>htpasswd -bc /home/htpasswd python（用户名） python2019（密码）</li><li>配置文件</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen        9999;</span><br><span class="line">    server_name   39.100.6.138;</span><br><span class="line">    charset       utf-8;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">       auth_basic &quot;input your user name and password&quot;;</span><br><span class="line">       auth_basic_user_file     &#x2F;home&#x2F;htpasswd;#密码文件</span><br><span class="line">       autoindex on;  #自动展示索引文件</span><br><span class="line">       root &#x2F;home&#x2F;;  #显示的目录</span><br><span class="line">    &#125;</span><br><span class="line">    location ^*\.(*)$ &#123;</span><br><span class="line">        add_header Content-Type text&#x2F;plain;</span><br><span class="line">        root &#x2F;home&#x2F;;   ##匹配下载的目录</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;今天是8月10日，实训的第16天。&lt;br /&gt;
上午孟老师演示了如何将Django项目部署在云服务器上。&lt;br /&gt;
由于我没有云服务器，因此用
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 15. Django打分系统示例</title>
    <link href="https://zoruasama.gitee.io/2020/08/07/training_15/"/>
    <id>https://zoruasama.gitee.io/2020/08/07/training_15/</id>
    <published>2020-08-07T11:30:00.000Z</published>
    <updated>2020-09-07T08:22:02.012Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>今天是8月7日，实训的第15天。<br />上午孟老师演示了如何用Django做一个打分系统，先是分析需求——<br />打分系统需要满足：</p><ul><li>录入学生信息</li><li>添加评委账号</li><li>企业打分占比50%</li><li>校内打分占比50%</li><li>成绩汇总显示</li><li>导出成绩 查询账号 可查分数 学号</li></ul><p>下午主要是帮助同学们答疑。由于我的项目已经接近尾声，所以我比较闲，我也就跟着帮助同学了。</p><h1 id="打分系统"><a class="markdownIt-Anchor" href="#打分系统"></a> 打分系统</h1><h2 id="数据库的建立"><a class="markdownIt-Anchor" href="#数据库的建立"></a> 数据库的建立</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserTeacher</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    username =models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'用户名'</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'密码'</span>)</span><br><span class="line">    nickname =  models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'昵称'</span>)</span><br><span class="line">    kind = models.IntegerField(verbose_name=<span class="string">'是否企业老师'</span>) <span class="comment">#0不是 1 是</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.nickname</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'教师账号'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StundentInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    username = models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'用户名'</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'密码'</span>,default=<span class="string">'123456'</span>)</span><br><span class="line">    nickname =  models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">'昵称'</span>)</span><br><span class="line">    score = models.IntegerField(verbose_name=<span class="string">'总得分'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.username+<span class="string">"_"</span>+self.nickname</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'学生账号'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CompanyScore</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    score1 = models.IntegerField(verbose_name=<span class="string">'寻求解决方案的能力'</span>)</span><br><span class="line">    score2 = models.IntegerField(verbose_name=<span class="string">'综合应用分析的能力'</span>)</span><br><span class="line">    score3 = models.IntegerField(verbose_name=<span class="string">'考虑社会等因素'</span>)</span><br><span class="line">    score4 = models.IntegerField(verbose_name=<span class="string">'工具的选择和使用能力'</span>)</span><br><span class="line">    score5 = models.IntegerField(verbose_name=<span class="string">'沟通交流能力'</span>)</span><br><span class="line">    score6 = models.IntegerField(verbose_name=<span class="string">'考勤'</span>)</span><br><span class="line">    student = models.ForeignKey(StundentInfo,on_delete=models.CASCADE,verbose_name=<span class="string">'学生'</span>)</span><br><span class="line">    teacher = models.ForeignKey(UserTeacher,on_delete=models.CASCADE,verbose_name=<span class="string">'老师'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.student.nickname,self.teacher.nickname,self.student.username</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'企业打分'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SchoolScore</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    score1 = models.IntegerField(verbose_name=<span class="string">'实习日志'</span>)</span><br><span class="line">    score2 = models.IntegerField(verbose_name=<span class="string">'实习报告'</span>)</span><br></pre></td></tr></table></figure><h2 id="视图的建立"><a class="markdownIt-Anchor" href="#视图的建立"></a> 视图的建立</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,redirect</span><br><span class="line"><span class="keyword">from</span> api.models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.forms.models <span class="keyword">import</span> model_to_dict</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">'POST'</span>:</span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        user_check=UserTeacher.objects.filter(username=username,password=password)</span><br><span class="line">        <span class="keyword">if</span> user_check:</span><br><span class="line">            request.session[<span class="string">'techer_id'</span>]=user_check.first().id</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">'/student_page/'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'登陆失败'</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">'login.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_score_by_company</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">'POST'</span>:</span><br><span class="line">        username=request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        teacher_id=request.session[<span class="string">'techer_id'</span>]</span><br><span class="line">        has_score=CompanyScore.objects.filter(teacher_id=teacher_id)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_score:</span><br><span class="line">            student_id=StundentInfo.objects.get(username=username).id</span><br><span class="line">            systemDict = &#123;&#125;</span><br><span class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> request.POST:</span><br><span class="line">                systemDict[key] = request.POST.get(key)</span><br><span class="line">            <span class="keyword">del</span> systemDict[<span class="string">'username'</span>]</span><br><span class="line">            CompanyScore.objects.create(**systemDict,teacher_id=teacher_id,student_id=student_id).save()</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'打分成功'</span>&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'您已经为该同学打过分了，请勿重复打分'</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'company_score.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_score_by_school</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">'POST'</span>:</span><br><span class="line">        username=request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        teacher_id=request.session[<span class="string">'techer_id'</span>]</span><br><span class="line">        has_score=SchoolScore.objects.filter(teacher_id=teacher_id)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_score:</span><br><span class="line">            student_id=StundentInfo.objects.get(username=username).id</span><br><span class="line">            systemDict = &#123;&#125;</span><br><span class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> request.POST:</span><br><span class="line">                systemDict[key] = request.POST.get(key)</span><br><span class="line">            <span class="keyword">del</span> systemDict[<span class="string">'username'</span>]</span><br><span class="line">            SchoolScore.objects.create(**systemDict,teacher_id=teacher_id,student_id=student_id).save()</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'打分成功'</span>&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'您已经为该同学打过分了，请勿重复打分'</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'shcool_score.html'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">score_all</span><span class="params">(request)</span>:</span></span><br><span class="line">    username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">    student_id = StundentInfo.objects.get(username=username).id</span><br><span class="line">    cs = CompanyScore.objects.filter(student_id=student_id)</span><br><span class="line">    ss = SchoolScore.objects.filter(student_id=student_id)</span><br><span class="line">    list_cs=[]</span><br><span class="line">    list_ss=[]</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> cs:</span><br><span class="line">        list_cs.append(model_to_dict(c,exclude=[<span class="string">'student_id'</span>,<span class="string">'teacher_id'</span>]))</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> ss:</span><br><span class="line">        list_ss.append(model_to_dict(s,exclude=[<span class="string">'student_id'</span>,<span class="string">'teacher_id'</span>]))</span><br><span class="line">    cs_all=zip(*map(<span class="keyword">lambda</span> x: (x[<span class="string">'score1'</span>], x[<span class="string">'score2'</span>],x[<span class="string">'score3'</span>],x[<span class="string">'score4'</span>],x[<span class="string">'score5'</span>],x[<span class="string">'score6'</span>]), list_cs))</span><br><span class="line">    sum_cs=<span class="number">0</span> <span class="comment">#((1,2),(3,4),(5,6))</span></span><br><span class="line">    <span class="keyword">for</span> index,i <span class="keyword">in</span> enumerate(cs_all):</span><br><span class="line">        sum_cs+=sum(list(i))/len(i)</span><br><span class="line">    ss_all=zip(*map(<span class="keyword">lambda</span> x: (x[<span class="string">'score1'</span>], x[<span class="string">'score2'</span>],x[<span class="string">'score3'</span>]), list_ss))</span><br><span class="line">    sum_ss=<span class="number">0</span> <span class="comment">#((1,2),(3,4),(5,6))</span></span><br><span class="line">    <span class="keyword">for</span> index,i <span class="keyword">in</span> enumerate(ss_all):</span><br><span class="line">        sum_ss+=sum(list(i))/len(i)</span><br><span class="line">    total_score = sum_cs + sum_ss</span><br><span class="line">    StundentInfo.objects.filter(username=username).update(score=total_score)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'data'</span>: <span class="string">'成绩核算成功'</span>&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student_list</span><span class="params">(request)</span>:</span></span><br><span class="line">    all_stus=StundentInfo.objects.all()</span><br></pre></td></tr></table></figure><h2 id="登录界面"><a class="markdownIt-Anchor" href="#登录界面"></a> 登录界面</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/login/"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登陆"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="学生列表界面"><a class="markdownIt-Anchor" href="#学生列表界面"></a> 学生列表界面</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;学生列表&lt;/title&gt;</span><br><span class="line">    &lt;script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;序号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;学号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;姓名&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;操作&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">'/student_list/'</span>,</span><br><span class="line">        type:<span class="string">'get'</span>,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        success:function (res) &#123;</span><br><span class="line">          <span class="keyword">for</span>(var i = <span class="number">0</span>;i&lt;res.data.length;i++)&#123;</span><br><span class="line">              var htmlStr=<span class="string">'&lt;tr&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;'</span>+(i+<span class="number">1</span>)+<span class="string">'&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;'</span>+res.data[i].username+<span class="string">'&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;'</span>+res.data[i].nickname+<span class="string">'&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'        &lt;td&gt;&lt;button class="company"&gt;企业&lt;/button&gt;&lt;button class="school"&gt;学校&lt;/button&gt;&lt;/td&gt;\n'</span> +</span><br><span class="line">                  <span class="string">'    &lt;/tr&gt;'</span></span><br><span class="line">              $(<span class="string">'tbody'</span>).append(htmlStr);</span><br><span class="line">          &#125;</span><br><span class="line">          company();</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    function company()&#123;</span><br><span class="line">        $(<span class="string">".company"</span>).click(function()&#123;</span><br><span class="line">            var username=$(this).parent().parent().find(<span class="string">'td:eq(1)'</span>).text();</span><br><span class="line">            window.location.href=<span class="string">'/msbc/?username='</span>+username+<span class="string">''</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="公司评分界面"><a class="markdownIt-Anchor" href="#公司评分界面"></a> 公司评分界面</h2></head><body><h1></h1><div>寻求解决方案的能力<input id="score1" type="text" placeholder="满分：16" value="0"></div><div>综合应用分析的能力<input id="score2" type="text" placeholder="满分：23" value="0"></div><div>考虑社会等因素<input id="score3" type="text" placeholder="满分：15" value="0"></div><div>工具的选择和使用能力<input id="score4" type="text" placeholder="满分：22" value="0"></div><div>沟通交流能力<input id="score5" type="text" placeholder="满分：4" value="0"></div><div>考勤<input id="score6" type="text" placeholder="满分：20" value="0"></div><div><span>目前分</span><span id="score"></span></div><button id="submit">提交成绩</button></body><script>    function getUrlParam(name) { //a标签跳转获取参数        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");        var r = window.location.search.substr(1).match(reg);        if(r != null) return decodeURI(r[2]);        return null;    }    var username = getUrlParam('username');    $('h1').text(username);    $("#submit").click(function () {         $.ajax({        url:'/msbc/',        type:'post',        dataType:'json',        data:{            username:username,            score1:$("#score1").val(),            score2:$("#score2").val(),            score3:$("#score3").val(),            score4:$("#score4").val(),            score5:$("#score5").val(),            score6:$("#score6").val(),        },        success:function (res) {            alert(res.data);        },    })    });    $("input").change(function(){       $("#score").empty();       var sum = 0;       var a=$("input").each(function(){var value = $(this).val();sum+=parseInt(value)});       $("#score").text(sum);    });</script></html><h2 id="获取上一链接的参数"><a class="markdownIt-Anchor" href="#获取上一链接的参数"></a> 获取上一链接的参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getUrlParam(name) &#123; &#x2F;&#x2F;a标签跳转获取参数</span><br><span class="line">var reg &#x3D; new RegExp(&quot;(^|&amp;)&quot; + name + &quot;&#x3D;([^&amp;]*)(&amp;|$)&quot;, &quot;i&quot;);</span><br><span class="line">var r &#x3D; window.location.search.substr(1).match(reg);</span><br><span class="line">if(r !&#x3D; null) return decodeURI(r[2]);</span><br><span class="line">return null;</span><br><span class="line">&#125;</span><br><span class="line">var username &#x3D; getUrlParam(&#39;username&#39;);</span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;今天是8月7日，实训的第15天。&lt;br /&gt;
上午孟老师演示了如何用Django做一个打分系统，先是分析需求——&lt;br /&gt;
打分系统需要满足：
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 14. 调用第三方API</title>
    <link href="https://zoruasama.gitee.io/2020/08/06/training_14/"/>
    <id>https://zoruasama.gitee.io/2020/08/06/training_14/</id>
    <published>2020-08-06T11:30:00.000Z</published>
    <updated>2020-09-07T08:21:45.301Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年8月6日。是实训的第14天。<br />今天上午孟老师带我们学习了如何将调用第三方的公开API以及如何使用HBuilder将web应用快速打包成安卓可以使用的apk包。<br />调用第三方的公开API，是以高德地图为例的。说实话，高德地图作为一个成熟的商业地图导航提供商，它的API调用并不算太简单。<br />老师还演示了如何将其他地方下载过来的数据与高德地图API结合的过程，过程十分繁琐，但也有趣。</p><h1 id="调用api"><a class="markdownIt-Anchor" href="#调用api"></a> 调用API</h1><h2 id="高德地图"><a class="markdownIt-Anchor" href="#高德地图"></a> 高德地图</h2><p>打开<a href="https://lbs.amap.com/" target="_blank" rel="noopener">高德地图开放平台</a>。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/1596676271_20200806090924741_16028.png" alt="" /><br />点击注册并完成个人开发者认证。<br />点击控制台，在我的应用-应用管理中，创建新应用。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806091127.png" alt="" /><br />点击左上角的添加，选择Web端的服务平台。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806091200.png" alt="" /><br />注意这个Key，后续会使用到。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806091649.png" alt="" /></p><p>点击开发支持，有API文档可供阅读。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806092049.png" alt="" /><br />复制一个示例到html文件中。点击运行，则可看到地图效果。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806093048.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200806093122.png" alt="" /></p><h2 id="pandas-to_dict-的用法"><a class="markdownIt-Anchor" href="#pandas-to_dict-的用法"></a> pandas to_dict 的用法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.test <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_excel(<span class="string">'黑龙江gps.xlsx'</span>)</span><br><span class="line">data_dict=data.to_dict(orient=<span class="string">'split'</span>)</span><br><span class="line">print(data_dict[<span class="string">'data'</span>])</span><br></pre></td></tr></table></figure><p>pandas 中的to_dict 可以对DataFrame类型的数据进行转换<br />可以选择六种的转换类型，分别对应于参数 ‘dict’, ‘list’, ‘series’, ‘split’, ‘records’, ‘index’，下面逐一介绍每种的用法。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Help on method to_dict <span class="keyword">in</span> module pandas.core.frame:</span><br><span class="line"></span><br><span class="line">to_dict(orient=<span class="string">'dict'</span>) method of pandas.core.frame.DataFrame instance</span><br><span class="line">    Convert DataFrame to dictionary.</span><br><span class="line"></span><br><span class="line">    Parameters</span><br><span class="line">    ----------</span><br><span class="line">    orient : str &#123;<span class="string">'dict'</span>, <span class="string">'list'</span>, <span class="string">'series'</span>, <span class="string">'split'</span>, <span class="string">'records'</span>, <span class="string">'index'</span>&#125;</span><br><span class="line">        Determines the type of the values of the dictionary.</span><br><span class="line"></span><br><span class="line">        - dict (default) : dict like &#123;column -&gt; &#123;index -&gt; value&#125;&#125;</span><br><span class="line">        - list : dict like &#123;column -&gt; [values]&#125;</span><br><span class="line">        - series : dict like &#123;column -&gt; Series(values)&#125;</span><br><span class="line">        - split : dict like</span><br><span class="line">          &#123;index -&gt; [index], columns -&gt; [columns], data -&gt; [values]&#125;</span><br><span class="line">        - records : list like</span><br><span class="line">          [&#123;column -&gt; value&#125;, ... , &#123;column -&gt; value&#125;]</span><br><span class="line">        - index : dict like &#123;index -&gt; &#123;column -&gt; value&#125;&#125;</span><br><span class="line"></span><br><span class="line">          .. versionadded:: <span class="number">0.17</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">        Abbreviations are allowed. `s` indicates `series` <span class="keyword">and</span> `sp`</span><br><span class="line">        indicates `split`.</span><br><span class="line"></span><br><span class="line">    Returns</span><br><span class="line">    -------</span><br><span class="line">    result : dict like &#123;column -&gt; &#123;index -&gt; value&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="选择参数orientdict"><a class="markdownIt-Anchor" href="#选择参数orientdict"></a> 选择参数orient=‘dict’</h3><p>dict也是默认的参数，下面的data数据类型为DataFrame结构, 会形成 {column -&gt; {index -&gt; value}}这样的结构的字典，可以看成是一种双重字典结构。</p><ul><li>单独提取每列的值及其索引，然后组合成一个字典</li><li>再将上述的列属性作为关键字（key），值（values）为上述的字典</li></ul><p>查询方式为 ：<code>data_dict[key1][key2]</code></p><ul><li>data_dict 为参数选择orient=’dict’时的数据名</li><li>key1 为列属性的键值（外层）</li><li>key2 为内层字典对应的键值</li></ul><h3 id="选择参数orientlist"><a class="markdownIt-Anchor" href="#选择参数orientlist"></a> 选择参数orient=‘list’</h3><p>和1中比较相似，只不过内层变成了一个列表，结构为{column -&gt; [values]}<br />查询方式为： data_list[keys][index]</p><h3 id="选择参数orientseries"><a class="markdownIt-Anchor" href="#选择参数orientseries"></a> 选择参数orient=‘series’</h3><p>形成结构**{column -&gt; Series(values)}**<br />调用格式为：data_series[key1][key2]或data_dict[key1]</p><ul><li>data_series 为数据对应的名字</li><li>key1 为列属性的键值，如本例中的’age’ , ‘embarked’等</li><li>key2 使用数据原始的索引（可选）</li></ul><h3 id="选择参数orientsplit"><a class="markdownIt-Anchor" href="#选择参数orientsplit"></a> 选择参数orient=‘split’</h3><p>形成**{index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}**的结构，是将数据、索引、属性名单独脱离出来构成字典<br />调用方式有 data_split[‘index’],data_split[‘data’],data_split[‘columns’]+ data_list 为关键字orient=‘list’ 时对应的数据名</p><ul><li>keys 为列属性的键值，如本例中的’age’ , 'embarked’等</li><li>index 为整型索引，从0开始到最后</li></ul><h3 id="选择参数orientrecords时"><a class="markdownIt-Anchor" href="#选择参数orientrecords时"></a> 选择参数orient='records’时</h3><p>形成***[{column -&gt; value}, … , {column -&gt; value}]***的结构<br />整体构成一个列表，内层是将原始数据的每行提取出来形成字典<br />调用格式为data_records[index][key1]</p><h3 id="选择参数orientindex时"><a class="markdownIt-Anchor" href="#选择参数orientindex时"></a> 选择参数orient='index’时</h3><p>形成{index -&gt; {column -&gt; value}}的结构，调用格式正好和’dict’对应的反过来，请读者自己思考</p><h1 id="django-cors-headers-解决跨域问题"><a class="markdownIt-Anchor" href="#django-cors-headers-解决跨域问题"></a> django-cors-headers 解决跨域问题</h1><p>浏览器具有 “同源策略的限制”，导致 <code>发送ajax请求</code> + <code>跨域</code> 存在无法获取数据。</p><ul><li>简单请求，发送一次请求。</li><li>复杂请求，先options请求做预检，然后再发送真正请求</li></ul><p><strong>1. pip安装</strong><br /><code>pip install django-cors-headers</code><br /><strong>2. 添加到setting的app中</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS &#x3D; (</span><br><span class="line">...</span><br><span class="line">&#39;corsheaders&#39;,</span><br><span class="line">...</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>3. 添加中间件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE &#x3D; [  # Or MIDDLEWARE_CLASSES on Django &lt; 1.10</span><br><span class="line">...</span><br><span class="line">&#39;corsheaders.middleware.CorsMiddleware&#39;,</span><br><span class="line">&#39;django.middleware.common.CommonMiddleware&#39;,</span><br><span class="line">...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>4. setting下面添加下面的配置</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">CORS_ALLOW_CREDENTIALS &#x3D; True</span><br><span class="line">CORS_ORIGIN_ALLOW_ALL &#x3D; True</span><br><span class="line">CORS_ORIGIN_WHITELIST &#x3D; (</span><br><span class="line">&#39;*&#39;</span><br><span class="line">)</span><br><span class="line">CORS_ALLOW_METHODS &#x3D; (</span><br><span class="line">&#39;DELETE&#39;,</span><br><span class="line">&#39;GET&#39;,</span><br><span class="line">&#39;OPTIONS&#39;,</span><br><span class="line">&#39;PATCH&#39;,</span><br><span class="line">&#39;POST&#39;,</span><br><span class="line">&#39;PUT&#39;,</span><br><span class="line">&#39;VIEW&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CORS_ALLOW_HEADERS &#x3D; (</span><br><span class="line">&#39;XMLHttpRequest&#39;,</span><br><span class="line">&#39;X_FILENAME&#39;,</span><br><span class="line">&#39;accept-encoding&#39;,</span><br><span class="line">&#39;authorization&#39;,</span><br><span class="line">&#39;content-type&#39;,</span><br><span class="line">&#39;dnt&#39;,</span><br><span class="line">&#39;origin&#39;,</span><br><span class="line">&#39;user-agent&#39;,</span><br><span class="line">&#39;x-csrftoken&#39;,</span><br><span class="line">&#39;x-requested-with&#39;,</span><br><span class="line">&#39;Pragma&#39;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>启动项目时，使用<code>python manage.py runserver 0.0.0.0:8000</code></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;2020年8月6日。是实训的第14天。&lt;br /&gt;
今天上午孟老师带我们学习了如何将调用第三方的公开API以及如何使用HBuilder将web应
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 13. Flask的工程化</title>
    <link href="https://zoruasama.gitee.io/2020/08/05/training_13/"/>
    <id>https://zoruasama.gitee.io/2020/08/05/training_13/</id>
    <published>2020-08-05T11:30:00.000Z</published>
    <updated>2020-09-07T08:21:17.013Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年8月5日。是实训的第13天。<br />今天上午孟老师带我们学习了如何将flask工程化。<s>其实是flask的django化。</s><br />flask作为一个轻量级的框架，把路由、数据库、项目启动全都放到了一起，虽然这样子一来开发的速度很快，但是内容一旦多起来，在一页代码中寻找会非常的麻烦。而且flask没有现成的数据库迁移工具。<br />所谓flask工程化，就是将app.py拆分开多个文件。<br />完成flask工程化后，flask稍微显得不那么轻量了（但是对比于django还是属于轻量水准的），但是工程化能使开发流程更加系统全面。<br />讲完flask的工程化后，时间还有剩余。孟老师向我们询问还有什么想知道的。我想起他之前说过django的session，便想让他在这时讲解一下。他很豪爽地讲解了。只用了短短10分钟。原来session这么简单啊。</p><h1 id="flask工程化"><a class="markdownIt-Anchor" href="#flask工程化"></a> flask工程化</h1><h2 id="文件配置"><a class="markdownIt-Anchor" href="#文件配置"></a> 文件配置</h2><p>复制app.py的内容，然后粘贴到新建的app_config.py，略加修改，只应用在配置中使用到的包。<br />将<code>app = Flask(__name__)</code>修改为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__,</span><br><span class="line">template_folder=<span class="string">'templates'</span>,</span><br><span class="line">static_folder=<span class="string">"static"</span>,</span><br><span class="line">            )</span><br></pre></td></tr></table></figure><p>同时新建两个文件夹：<code>templates</code>和<code>static</code>。<br />修改完的app_config.py全文如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_cors <span class="keyword">import</span> CORS</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">app = Flask(__name__,</span><br><span class="line">template_folder=<span class="string">'templates'</span>,</span><br><span class="line">static_folder=<span class="string">"static"</span>,</span><br><span class="line">            )</span><br><span class="line">BASEDIR = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">'sqlite:///'</span>+os.path.join(BASEDIR,<span class="string">'data.sqlite'</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">如果设置成 True (默认情况)，Flask-SQLAlchemy 将会追踪对象的修改并且发送信号。这需要额外的内存， 如果不必要的可以禁用它。</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">CORS(app)</span><br></pre></td></tr></table></figure><h2 id="数据库迁移工具"><a class="markdownIt-Anchor" href="#数据库迁移工具"></a> 数据库迁移工具</h2><p>先使用<code>pip install flask-migrate</code>和<code>pip install flask-script</code>安装两个包。<br />安装完毕后，新建一个database.py文件。编写如下代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> app_config <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate,MigrateCommand</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line">migrate = Migrate(app,db)</span><br><span class="line"></span><br><span class="line">manager.add_command(<span class="string">'db'</span>,MigrateCommand)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure><p>接下来在命令行使用<code>python database.py db init</code>命令，就可以初始化数据库。<br />使用<code>python database.py db migrate</code>命令，就可以生成迁移文件。<br />使用<code>python database.py db upgrade</code>命令，就可以生成数据表。</p><h2 id="模型"><a class="markdownIt-Anchor" href="#模型"></a> 模型</h2><p>新建models.py文件。将app.py中关于models的复制到这里，也略加修改。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> app_config <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__=<span class="string">'info2'</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>))</span><br><span class="line">    category = db.Column(db.String(<span class="number">60</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;info.&gt;%s '</span> % self.title</span><br></pre></td></tr></table></figure><h2 id="主程序"><a class="markdownIt-Anchor" href="#主程序"></a> 主程序</h2><p>新建run.py文件。将app.py关于路由和运行的复制到这里，略加修改。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,jsonify,render_template,request</span><br><span class="line"><span class="keyword">from</span> app_config <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Info,db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#函数和路由不可重复</span></span><br><span class="line"><span class="meta">@app.route('/',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span> <span class="comment">#视图函数</span></span><br><span class="line">    info1 = Info(id=<span class="number">1</span>,title=<span class="string">'新闻1'</span>,category=<span class="string">'娱乐新闻'</span>)</span><br><span class="line">    info2 = Info(id=<span class="number">2</span>,title=<span class="string">'新闻2'</span>,category=<span class="string">'工作新闻'</span>)</span><br><span class="line">    db.session.add_all([info1,info2]) <span class="comment">#将数据添加到会话</span></span><br><span class="line">    db.session.commit() <span class="comment">#提交会话</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:<span class="string">'Zorua'</span>,<span class="string">'age'</span>:<span class="number">20</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/query',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">()</span>:</span></span><br><span class="line">    results=Info.query.all()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> results:</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/update',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).update(&#123;<span class="string">'category'</span>:<span class="string">'改后新闻'</span>&#125;)</span><br><span class="line">    db.session.commit()  <span class="comment"># 提交会话</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/delete',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).delete()</span><br><span class="line">    db.session.commit()  <span class="comment"># 提交会话</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/index',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    name = request.form.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.form.get(<span class="string">'age'</span>)</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:name,<span class="string">'age'</span>:age&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>,host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8888</span>)</span><br></pre></td></tr></table></figure><p>接下来运行项目只用在run.py中运行即可。</p><h1 id="django的session"><a class="markdownIt-Anchor" href="#django的session"></a> django的session</h1><p><code>session</code>就相当于是一个字典。<br /><code>request.session['user_id'] = User.objects.get(username=username).id</code><br />就可以在session中新增user_id字段并记录下来。<br />session中的记录是有有效期的。</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;&lt;/a&gt; 总述&lt;/h1&gt;
&lt;p&gt;2020年8月5日。是实训的第13天。&lt;br /&gt;
今天上午孟老师带我们学习了如何将flask工程化。&lt;s&gt;其实是flask的django化。&lt;
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 12. Flask框架</title>
    <link href="https://zoruasama.gitee.io/2020/08/04/training_12/"/>
    <id>https://zoruasama.gitee.io/2020/08/04/training_12/</id>
    <published>2020-08-04T11:30:00.000Z</published>
    <updated>2020-09-07T08:20:42.493Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年8月4日。是实训的第12天。<br />今天上午孟老师带我们回顾了过去在Django这一块所学的一些知识，然后开始讲授flask。完成从flask的创建到部署，再是路由、跨域、连接数据库等等任务。</p><div class="snote quote">Flask 是一个微型的 Python 开发的 Web 框架，基于Werkzeug WSGI工具箱和Jinja2模板引擎。 Flask使用BSD授权。 Flask也被称为“microframework”，因为它使用简单的核心，用extension增加其他功能。Flask没有默认使用的数据库、窗体验证工具。然而，Flask保留了扩增的弹性，可以用Flask-extension加入这些功能：ORM、窗体验证工具、文件上传、各种开放式身份验证技术。</div><p>通过今天的学习，我确实感受到了Flask比Django要简单一些。花费较少的精力和时间就能达到和Django同样的效果。但是即便如此，我依然决定在我的大作业上使用Django。因为就我自身而言，我对Django更加熟悉。</p><p>今天的知识把握程度还行，基于对Django的理解上再去学习Flask就没有那么难。但是对于ajax嵌套，我仍是有一些不明白的地方。</p><p>Flask的优势：</p><ul><li>Flask是一个轻量级的可定制框架</li><li>插件超级多，不用自己造轮子</li></ul><h1 id="新建flask项目"><a class="markdownIt-Anchor" href="#新建flask项目"></a> 新建Flask项目</h1><p>在Pycharm中点击新建，选择Flask项目，即可完成项目的创建。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804092656.png" alt="" /></p><p>项目创建完毕后，可以看到如下的文件夹结构。Flask框架确实比Django框架要轻量得多。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804092804.png" alt="" /></p><h2 id="运行测试"><a class="markdownIt-Anchor" href="#运行测试"></a> 运行测试</h2><p>先来对主要的app.py的代码，作一些注释。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 路由不可重复，函数也不可重复。</span></span><br><span class="line"><span class="meta">@app.route('/') #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span> <span class="comment">#视图函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()  <span class="comment">#会在这里启动。所以Flask不用像Django一样输入命令行启动。直接运行即可。</span></span><br></pre></td></tr></table></figure><p>运行的结果如下图所示。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804095707.png" alt="" /></p><p>一般，我们想要的数据，是json数据，在此引入一个包。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify</span><br></pre></td></tr></table></figure><p>有了这样一个包，</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:<span class="string">'Zorua'</span>,<span class="string">'age'</span>:<span class="number">20</span>&#125;&#125;)</span><br><span class="line"><span class="comment">#等价于之前在Django的JsonResponse</span></span><br></pre></td></tr></table></figure><p>测试效果<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804095648.png" alt="" /></p><h2 id="部署修改"><a class="markdownIt-Anchor" href="#部署修改"></a> 部署修改</h2><p>现在这个站点是部署在本地的，如果部署在云服务器上，或需要修改端口。<br />可在<code>app.run()</code>中加入参数，如下所示。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.run(host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8888</span>)</span><br></pre></td></tr></table></figure><p>这个效果不能马上生效，还需要添加新的配置。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804094850.png" alt="" /><br />选择Python，然后在右侧，名称写为<code>app.py</code>，Script Path为该文件的绝对路径。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804093304.png" alt="" /></p><p>最后在命令行键入<code>python app.py</code>即可生效。</p><h2 id="debug模式"><a class="markdownIt-Anchor" href="#debug模式"></a> DEBUG模式</h2><p>Flask默认是没有开启debug模式的，开启debug模式有很多好处：</p><ul><li>可以帮助我们查找代码里面的错误</li><li>每次修改代码不需要重新运行代码</li></ul><p>为开启DEBUG模式，只需要在<code>app.run()</code>的参数中增加一个<code>debug=True</code>，或者在其下面加一句<code>app.debug=True</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.run(debug=<span class="literal">True</span>,host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8888</span>)</span><br><span class="line">app.debug = <span class="literal">True</span></span><br></pre></td></tr></table></figure><h1 id="前后端分离"><a class="markdownIt-Anchor" href="#前后端分离"></a> 前后端分离</h1><h2 id="添加新的路由"><a class="markdownIt-Anchor" href="#添加新的路由"></a> 添加新的路由</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/index') #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line">    <span class="comment">#为使用上面这个语句，需要引入包：</span></span><br><span class="line">    <span class="comment"># from flask import render_template</span></span><br></pre></td></tr></table></figure><p>再在templates文件夹中，新建一个<code>index.html</code></p><p>运行查看一下效果：<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804095612.png" alt="" /></p><h3 id="请求类型"><a class="markdownIt-Anchor" href="#请求类型"></a> 请求类型</h3><p>对于路由的请求类型，可以在装饰器的函数里面加一个参数<code>methods=['GET','POST']</code>。<br />即</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>如果想获取参数的话，需要引入一个包：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    name = request.args.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.args.get(<span class="string">'age'</span>)</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:name,<span class="string">'age'</span>:age&#125;&#125;)</span><br></pre></td></tr></table></figure><p>之后和Django类似，使用<code>request.args.get()</code>函数来获取参数。<br />对于post请求，只需要把上面的args改成form就可以了。<br />即：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">@app.route('/api',methods=['POST','GET']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api</span><span class="params">()</span>:</span>  <span class="comment"># 视图函数</span></span><br><span class="line">    name = request.form.get(<span class="string">'name'</span>)</span><br><span class="line">    age = request.form.get(<span class="string">'age'</span>)</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:&#123;<span class="string">'name'</span>:name,<span class="string">'age'</span>:age&#125;&#125;)</span><br></pre></td></tr></table></figure><h2 id="跨域"><a class="markdownIt-Anchor" href="#跨域"></a> 跨域</h2><p>引用包<code>flask_cors</code>，然后调用<code>flask_cors.CORS(app)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> flask_cors</span><br><span class="line">flask_cors.CORS(app)</span><br></pre></td></tr></table></figure><p>跨域能够实现前后端分离：</p><ul><li>前端：对json数据进行渲染，ajax请求后台接口</li><li>后端：数据打包json，提供可以被调用的api</li></ul><h2 id="ajax"><a class="markdownIt-Anchor" href="#ajax"></a> ajax</h2><p>和之前的Django类似，不同的地方在于url。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>wow<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Wow awesome</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">        url:<span class="string">'http://127.0.0.1:8888/api'</span>,</span></span><br><span class="line"><span class="actionscript">        type:<span class="string">'post'</span>,</span></span><br><span class="line"><span class="actionscript">        dataType:<span class="string">'json'</span>,</span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="actionscript">          name:<span class="string">'Zorua'</span>,</span></span><br><span class="line">          age:13</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        success:<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(res.data)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="连接数据库"><a class="markdownIt-Anchor" href="#连接数据库"></a> 连接数据库</h2><h3 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h3><p>先安装一个库。在命令行中键入<code>pip install Flask-SQLAlchemy</code>并按下回车键。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#数据库连接</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">'sqlite:///'</span>+os.path.join(BASEDIR,<span class="string">'data.sqlite'</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">如果设置成 True（默认情况），Flask-SQLAlchemy将会追踪对象的修改并且发送信号 这需要额外的内存 如果不必要的话可以禁用它</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>]=<span class="literal">False</span></span><br></pre></td></tr></table></figure><h3 id="创建数据库"><a class="markdownIt-Anchor" href="#创建数据库"></a> 创建数据库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db = SQLAlchemy(app)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>))</span><br><span class="line">    category = db.Column(db.String(<span class="number">60</span>))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;info.&gt;%s '</span> %  self.title</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804145108.png" alt="" /><br />创建完毕后，再命令行中键入flask shell。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804145346.png" alt="" /></p><h3 id="插入数据"><a class="markdownIt-Anchor" href="#插入数据"></a> 插入数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info1 = Info(id=<span class="number">1</span>,title=<span class="string">'新闻1'</span>,category=<span class="string">'娱乐新闻'</span>)</span><br><span class="line">info2 = Info(id=<span class="number">2</span>,title=<span class="string">'新闻2'</span>,category=<span class="string">'工作新闻'</span>)</span><br><span class="line">db.session.add_all([info1,info2]) <span class="comment">#将数据添加到会话</span></span><br><span class="line">db.session.commit() <span class="comment">#提交会话</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804152306.png" alt="" /></p><h3 id="查询数据"><a class="markdownIt-Anchor" href="#查询数据"></a> 查询数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/query',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">()</span>:</span></span><br><span class="line">    results=Info.query.all()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> results:</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200804152941.png" alt="" /></p><h3 id="更新数据"><a class="markdownIt-Anchor" href="#更新数据"></a> 更新数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/update',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).update(&#123;<span class="string">'category'</span>:<span class="string">'改后新闻'</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br></pre></td></tr></table></figure><h3 id="删除数据"><a class="markdownIt-Anchor" href="#删除数据"></a> 删除数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/update',methods=['GET','POST']) #装饰器路由</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">()</span>:</span></span><br><span class="line">    Info.query.filter(Info.title==<span class="string">'新闻1'</span>).delete()</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">'data'</span>:<span class="string">'Success'</span>&#125;)</span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 11. 数据的可视化</title>
    <link href="https://zoruasama.gitee.io/2020/08/03/training_11/"/>
    <id>https://zoruasama.gitee.io/2020/08/03/training_11/</id>
    <published>2020-08-03T11:30:00.000Z</published>
    <updated>2020-09-07T08:20:15.719Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年8月3日。到了实训的第三周的第一天。<br />今天主要讲了如何用echarts实现<strong>数据的可视化</strong>。<br />主要的活动有：</p><ul><li>数据打包</li><li>echarts远程包</li><li>echarts本地包（重点）<br />数据可视化主要旨在借助于图形化手段，清晰有效地传达与沟通信息。但是，这并不就意味着数据可视化就一定因为要实现其功能用途而令人感到枯燥乏味，或者是为了看上去绚丽多彩而显得极端复杂。为了有效地传达思想概念，美学形式与功能需要齐头并进，通过直观地传达关键的方面与特征，从而实现对于相当稀疏而又复杂的数据集的深入洞察。然而，设计人员往往并不能很好地把握设计与功能之间的平衡，从而创造出华而不实的数据可视化形式，无法达到其主要目的，也就是传达与沟通信息。<br />因此，我们不仅要掌握数据可视化的办法，也更要懂得如何让组织形式使得传达与沟通的效益最大化。<br />今天圆满地完成了主要工作，不仅完成了一边听课一边记录笔记，而且课中也没有遇到什么疑难杂症而纠结良久。</li></ul><p>今天的操作流程，一言以蔽之。对于本地存在的Excel数据、CSV数据等等，可以使用<code>pandas</code>或<code>xlrd</code>来进行提取，而后用<code>echarts</code>把它绘制在网页上。</p><div class="snote quote">ECharts 是一个使用 JavaScript 实现的开源可视化库，涵盖各行业图表，满足各种需求。ECharts 遵循 Apache-2.0 开源协议，免费商用。ECharts 兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等）及兼容多种设备，可随时随地任性展示。</div><h1 id="pandasxlrd"><a class="markdownIt-Anchor" href="#pandasxlrd"></a> pandas&amp;xlrd</h1><div class="snote quote">Pandas是一个强大的分析结构化数据的工具集；它的使用基础是Numpy（提供高性能的矩阵运算）；用于数据挖掘和数据分析，同时也提供数据清洗功能。</div><div class="snote quote">Python中操作excel主要用到xlrd和xlwt这两个库，即xlrd是读excel，xlwt是写excel的库。</div><h2 id="安装流程"><a class="markdownIt-Anchor" href="#安装流程"></a> 安装流程</h2><p>在Terminal中键入<code>pip install pandas</code>即可完成pandas的安装（如果没装过numpy和dateutil也会一并装了）。<br />出现了以下字样的安装成功信息。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Successfully installed numpy-1.19.1 pandas-1.1.0 python-dateutil-2.8.1</span><br></pre></td></tr></table></figure><p>再在Terminal中键入<code>pip install xlrd</code>即可完成xlrd的安装。</p><h2 id="数据的获取"><a class="markdownIt-Anchor" href="#数据的获取"></a> 数据的获取</h2><p>除了可以用爬虫自己获取网页上的数据外，还可以上<a href="https://tianchi.aliyun.com/dataset/" target="_blank" rel="noopener">阿里云-天池</a>来获取数据。<br />为了方便练习，选择一些数据量不大的数据集。这里老师选择了<a href="http://www.stat-nba.com/" target="_blank" rel="noopener">NBA数据</a>中的球员勒布朗-詹姆斯的数据。<br />将网页表格复制到Excel中，得到如下结果。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803093457.png" alt="" /></p><h2 id="应用伊始"><a class="markdownIt-Anchor" href="#应用伊始"></a> 应用伊始</h2><p>键入<code>python manage.py startapp echarts</code>新建一个应用。<br />将<code>james.xlsx</code>复制到该应用的文件夹下。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803094147.png" alt="" /></p><p>在 <code>tests.py</code> 文件中，键入如下代码以进行测试。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.test <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># Create your tests here.</span></span><br><span class="line">data = pd.read_excel(<span class="string">'james.xlsx'</span>)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure><p>可以看到输出结果为如下所示。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803094359.png" alt="" /></p><h2 id="dataframe"><a class="markdownIt-Anchor" href="#dataframe"></a> DataFrame</h2><div class="snote quote">DataFrame是一种表格型数据结构，它含有一组有序的列，每列可以是不同的值。DataFrame既有行索引，也有列索引，它可以看作是由Series组成的字典，不过这些Series公用一个索引。</div><p>DataFrame的创建有多种方式，不过最重要的还是根据dict进行创建，以及读取csv或者txt文件来创建。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>将刚刚的测试代码修改为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.test <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># Create your tests here.</span></span><br><span class="line">data = pd.read_excel(<span class="string">'james.xlsx'</span>)</span><br><span class="line">df = pd.DataFrame(data=data,index=range(<span class="number">1</span>,<span class="number">17</span>)) <span class="comment">#创建了DataFrame, index是行索引, range是列索引</span></span><br><span class="line"><span class="comment"># 输出不同的形式，以便于观察DataFrame。</span></span><br><span class="line">print(list(df[<span class="string">'赛季'</span>])) <span class="comment">#强制转换为list, 方便后续使用。</span></span><br><span class="line">print(type(df[<span class="string">'得分'</span>]))</span><br><span class="line">print(df[<span class="string">'篮板'</span>])</span><br></pre></td></tr></table></figure><p>输出结果为：<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803101318.png" alt="" /></p><blockquote><p>个人觉得用不用DataFrame，区别仅在于会不会去掉NaN数据。</p></blockquote><h2 id="views的配置"><a class="markdownIt-Anchor" href="#views的配置"></a> views的配置</h2><p>按照之前的实训经验，完成views的配置。<br />为了使列表的数据以赛季递增，在列表后加入<code>[::-1]</code>完成倒装。</p><blockquote><p>上课时，我以为用<code>list.reverse()</code>，但是<code>reverse()</code>方法是没有返回值的。<br />这意味着，不能直接将这个方法写在<code>print</code>函数里。<br />所以为使代码简短，使用<code>[::-1]</code>确实是最佳解。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api_echarts</span><span class="params">(request)</span>:</span></span><br><span class="line">    data = pd.read_excel(<span class="string">'james.xlsx'</span>)  <span class="comment"># 这里还有一个路径的问题，如果是现行的代码，会报错，参考下面的图。</span></span><br><span class="line">    df = pd.DataFrame(data=data,index=range(<span class="number">1</span>,<span class="number">17</span>))</span><br><span class="line">    print(df)</span><br><span class="line">    season = (list(df[<span class="string">'赛季'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    score = (list(df[<span class="string">'得分'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    lanban = (list(df[<span class="string">'篮板'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    zhugong = (list(df[<span class="string">'助攻'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'season'</span>:season,<span class="string">'score'</span>:score,<span class="string">'lanban'</span>:lanban,<span class="string">'zhugong'</span>:zhugong&#125;)</span><br></pre></td></tr></table></figure><div class="hide-block"><a class="hide-button button--primary button--animated" style="background-color: red;color: white">出现的错误    </a><span class="hide-content"><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803104215.png" alt="" /></p></span></div><p>为解决这个错误，将代码更改为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">import</span> os   <span class="comment">#新增行</span></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) <span class="comment">#新增行，获取项目的绝对路径</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">api_echarts</span><span class="params">(request)</span>:</span></span><br><span class="line">    data = pd.read_excel(os.path.join(BASE_DIR,<span class="string">'echarts'</span>,<span class="string">'james.xlsx'</span>)) <span class="comment">#修改行</span></span><br><span class="line">    df = pd.DataFrame(data=data,index=range(<span class="number">1</span>,<span class="number">17</span>))</span><br><span class="line">    print(df)</span><br><span class="line">    season = (list(df[<span class="string">'赛季'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    score = (list(df[<span class="string">'得分'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    lanban = (list(df[<span class="string">'篮板'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    zhugong = (list(df[<span class="string">'助攻'</span>])[::<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'season'</span>:season,<span class="string">'score'</span>:score,<span class="string">'lanban'</span>:lanban,<span class="string">'zhugong'</span>:zhugong&#125;)</span><br></pre></td></tr></table></figure><p>这样就可以成功获取数据了。</p><div class="snote link blue">语法：<code>os.path.abspath(__file__)</code><p>功能：获取当前运行文件的绝对路径</p><p>语法：<code>os.path.dirname(path)</code></p><p>功能：去掉文件名，返回目录</p></div><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803104638.png" alt="" /></p><p>完成后，为了和下文的HTML文件对接，还需要在view.py中加入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">echarts_page</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">'echarts.html'</span>)</span><br></pre></td></tr></table></figure><h2 id="urls的配置"><a class="markdownIt-Anchor" href="#urls的配置"></a> urls的配置</h2><p>在项目的路由配置里，加入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">'echarts/'</span>,include(<span class="string">'echarts.urls'</span>)),</span><br></pre></td></tr></table></figure><p>在echarts应用的路由里，加入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">'api_echarts/'</span>,api_echarts),</span><br><span class="line">path(<span class="string">'echarts_page'</span>,echarts_page),</span><br></pre></td></tr></table></figure><h1 id="echarts远程包"><a class="markdownIt-Anchor" href="#echarts远程包"></a> echarts远程包</h1><div class="snote quote">远程包：调用CDN需要请求网络资源。</div><p>在templates文件夹下新建一个<code>echarts.html</code></p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803105734.png" alt="" /><br />在头部，添加对jQuery和echarts的引用。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/echarts/4.8.0/echarts.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接下来，再在body部分建一个容器来使用echarts。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">style</span>=<span class="string">"width:900px;height:500px;background: rgba(106,11,233,0.4)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后，新建一个<code>script</code>标签，在其中键入以下代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mycharts = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'box'</span>));   <span class="comment">//mycharts的内容放在box容器里</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">       url: <span class="string">'/echarts/api_echarts/'</span>,</span><br><span class="line">       type: <span class="string">'get'</span>,</span><br><span class="line">       dataType:<span class="string">'json'</span>,</span><br><span class="line">       success:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(res);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>打开<a href="https://echarts.apache.org/examples/zh/index.html?theme=light" target="_blank" rel="noopener">echarts官网</a>获取一个实例的代码。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803112146.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803112219.png" alt="" /><br />复制左边的代码，到script标签的funtion(res)中，修改数据部分为项目的内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: <span class="string">'category'</span>,</span><br><span class="line">        data: res.season,</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        type: <span class="string">'value'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    series: [&#123;</span><br><span class="line">        data: res.score,</span><br><span class="line">        type: <span class="string">'line'</span>,</span><br><span class="line">        smooth: <span class="literal">true</span></span><br><span class="line">    &#125;]</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>然后在之后加入以下代码来绘制图形。结果如下图所示。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mycharts.setOption(option);</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803112915.png" alt="" /></p><h2 id="绘制表格"><a class="markdownIt-Anchor" href="#绘制表格"></a> 绘制表格</h2><p>在HTML的body部分加入以下代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--table是表格标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>&lt;thead&gt;</code>标签定义表格的表头。该标签用于组合 HTML 表格的表头内容。</li><li>thead 元素应该与 tbody 和 tfoot 元素结合起来使用。</li><li>tbody 元素用于对 HTML 表格中的主体内容进行分组，而 tfoot 元素用于对 HTML 表格中的表注（页脚）内容进行分组。</li><li>tr 代表一行；td 代表一列。</li><li>table的属性中有一个<code>border</code>，默认<code>border</code>=“0”，为无边框。这里就是无边框。<br />在Script标签中加入以下代码：</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;res.score.length;i++)&#123;</span><br><span class="line">                $(<span class="string">'thead tr'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.season[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加表头</span></span><br><span class="line">                $(<span class="string">'tbody tr:eq(0)'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.score[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加得分</span></span><br><span class="line">                $(<span class="string">'tbody tr:eq(1)'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.lanban[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加篮板</span></span><br><span class="line">                $(<span class="string">'tbody tr:eq(2)'</span>).append(<span class="string">'&lt;td&gt;'</span>+res.zhugong[i]+<span class="string">'&lt;/td&gt;'</span>);<span class="comment">//追加助攻</span></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><p>结果如图所示。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803142332.png" alt="" /></p><h1 id="echarts本地包"><a class="markdownIt-Anchor" href="#echarts本地包"></a> echarts本地包</h1><p>重点。<br />调用本地资源，不需要网络。<br />拓展-静态文件的展示、图片或者文件的上传</p><h2 id="调用本地图片"><a class="markdownIt-Anchor" href="#调用本地图片"></a> 调用本地图片</h2><p>如果直接在网页中写以下代码时，浏览器并不能找到该资源。因此需进行路由配置。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/bg1.jpg"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注意到settings.py里有如下内容。因此在项目的根目录新建一个<code>static</code>文件夹。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803144502.png" alt="" /><br />然后在这句代码的下面，加入下面的代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">STATICFILES_DIRS=[</span><br><span class="line">    os.path.join(BASE_DIR,<span class="string">'static'</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>对于这段代码，援引一段来自Django官方文档的解释。</p><div class="snote link"><p class="p subtitle">提供文件/Serving the files</p>In addition to these configuration steps, you’ll also need to actually serve the static files.During development, if you use django.contrib.staticfiles, this will be done automatically by runserver when DEBUG is set to True (see django.contrib.staticfiles.views.serve()).This method is grossly inefficient and probably insecure, so it is unsuitable for production.See Deploying static files for proper strategies to serve static files in production environments.<p>除了这些配置步骤之外，您还需要实际提供静态文件。<br />在开发过程中，如果使用django.contrib.staticfiles，这将是自动完成的runserver，当DEBUG设置为True（见django.contrib.staticfiles.views.serve()）。<br />此方法效率极低，并且可能不安全，因此不适合生产。<br />有关在生产环境中提供静态文件的正确策略，请参阅部署静态文件。</p></div class><p><strong>然后在urls.py中配置static文件夹资源的路由。</strong><br />先引入下面这几个包并获取项目绝对路径。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> re_path <span class="comment">#正则表达式路径</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> static</span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))<span class="comment">#项目绝对路径</span></span><br></pre></td></tr></table></figure><p>然后配置下面这条路由。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">r'^static/(?&lt;path&gt;.*)$'</span>,static.serve,&#123;<span class="string">'document_root'</span>:os.path.join(BASE_DIR,<span class="string">'static'</span>)&#125;),</span><br></pre></td></tr></table></figure><p>完成后，图片就可以正常的访问了。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803150646.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803150731.png" alt="" /></p><h2 id="调用本地js或css"><a class="markdownIt-Anchor" href="#调用本地js或css"></a> 调用本地JS或CSS</h2><p>在配置完毕上面的路由之后。也可以调用本地的JS或CSS资源。<br />以jQuery为例，直接打开<a href="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js" target="_blank" rel="noopener">其CDN链接</a>。复制其中的内容到一个本地的js文件中放在static文件夹下即可。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/js/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="echarts增加细节"><a class="markdownIt-Anchor" href="#echarts增加细节"></a> echarts增加细节</h1><p>更多的细节可以查询echarts的<a href="https://echarts.apache.org/zh/api.html" target="_blank" rel="noopener">API手册</a>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">                color: [<span class="string">'red'</span>,<span class="string">'orange'</span>],   <span class="comment">//图线颜色</span></span><br><span class="line">                xAxis: &#123;</span><br><span class="line">                    type: <span class="string">'category'</span>,</span><br><span class="line">                    data: res.season,</span><br><span class="line">                &#125;,</span><br><span class="line">                tooltip:&#123;</span><br><span class="line">                  trigger: <span class="string">'axis'</span>,</span><br><span class="line">                  axisPointer:&#123;</span><br><span class="line">                      type:<span class="string">'shadow'</span>         <span class="comment">//当鼠标移动在点上时的提示窗口</span></span><br><span class="line">                  &#125;,</span><br><span class="line">                  show:<span class="literal">true</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                legend:&#123;</span><br><span class="line">                    data:[<span class="string">'篮板'</span>,<span class="string">'助攻'</span>]    <span class="comment">//图例</span></span><br><span class="line">                &#125;,</span><br><span class="line">                yAxis: &#123;</span><br><span class="line">                    type: <span class="string">'value'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                series: [&#123;</span><br><span class="line">                    data: res.lanban,</span><br><span class="line">                    type: <span class="string">'line'</span>,</span><br><span class="line">                    name:<span class="string">'篮板'</span>,    <span class="comment">//系列名称</span></span><br><span class="line">                    smooth: <span class="literal">true</span></span><br><span class="line">                &#125;,&#123;</span><br><span class="line">                    data: res.zhugong,</span><br><span class="line">                    type: <span class="string">'line'</span>,</span><br><span class="line">                    name: <span class="string">'助攻'</span>,    <span class="comment">//系列名称</span></span><br><span class="line">                    smooth: <span class="literal">true</span>,</span><br><span class="line">                &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;;</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200803162734.png" alt="" /></p><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>参考资料：<a href="https://www.jianshu.com/p/8024ceef4fe2" target="_blank" rel="noopener">https://www.jianshu.com/p/8024ceef4fe2</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 04. 简单的爬虫</title>
    <link href="https://zoruasama.gitee.io/2020/07/23/training_3/"/>
    <id>https://zoruasama.gitee.io/2020/07/23/training_3/</id>
    <published>2020-07-23T11:30:00.000Z</published>
    <updated>2020-10-04T12:25:04.703Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年7月22日。今天主要讲的内容有：</p><ul><li>使用Requests包和BeautifulSoup4进行简单的网页爬虫</li></ul><h1 id="爬虫"><a class="markdownIt-Anchor" href="#爬虫"></a> 爬虫</h1><p>网络爬虫（又称为网页蜘蛛，网络机器人，在FOAF社区中间，更经常的称为网页追逐者），是一种按照一定的规则，自动地抓取万维网信息的程序或者脚本。另外一些不常使用的名字还有蚂蚁、自动索引、模拟程序或者蠕虫。</p><p>我们知道，在WWW上我们访问的网页基本上都是用HTML文档来进行描述的。在浏览器按下<code>F12</code>键，可以打开开发者工具，选择<code>Elements</code>页签，即可查看HTML的文档内容。如图所示：</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930202616.png" alt="" /></p><p>我们就可以从HTML中获取想要的数据/信息。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930203042.png" alt="" /></p><p>如果我们要进行对某个网页的爬虫，需要解决的问题有两个：</p><ul><li>获取HTML文档的内容</li><li>解析这个HTML文档，按照一定规则获取其中的信息/数据</li></ul><p>对于上面两个问题，进行针对性的解决：</p><ul><li>用Requests包来获取HTML文档</li><li>用BeautifulSoup4来解析HTML文档</li></ul><h1 id="requests"><a class="markdownIt-Anchor" href="#requests"></a> Requests</h1><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://requests.readthedocs.io/zh_CN/latest/_static/requests-sidebar.png" alt="" /><br /><a href="https://requests.readthedocs.io/zh_CN/latest/user/quickstart.html" target="_blank" rel="noopener">在线文档</a></p><h2 id="简单介绍"><a class="markdownIt-Anchor" href="#简单介绍"></a> 简单介绍</h2><p>引用以下来自官方文档的内容：</p><blockquote><p>Requests 唯一的一个非转基因的 Python HTTP 库，人类可以安全享用。<br />警告：非专业使用其他 HTTP 库会导致危险的副作用，包括：安全缺陷症、冗余代码症、重新发明轮子症、啃文档症、抑郁、头疼、甚至死亡。<br />Requests 允许你发送纯天然，植物饲养的 HTTP/1.1 请求，无需手工劳动。你不需要手动为 URL 添加查询字串，也不需要对 POST 数据进行表单编码。Keep-alive 和 HTTP 连接池的功能是 100% 自动化的，一切动力都来自于根植在 Requests 内部的 urllib3。</p></blockquote><h2 id="简单使用"><a class="markdownIt-Anchor" href="#简单使用"></a> 简单使用</h2><p>如果你还没有安装Requests包，可以在命令行使用如下命令进行安装。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure><p>安装完毕后，键入如下代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line">print(response.status_code) <span class="comment">#HTTP状态码</span></span><br></pre></td></tr></table></figure><p>这是以<code>GET</code>请求方式来访问<code>https://www.baidu.com</code>，然后返回一个HTTP状态码。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930205853.png" alt="" /></p><div class="snote guide"><p>复习一下一些常见的HTTP状态码</p><p>200 请求成功</p><p>301/302 重定向</p><p>403 禁止访问  404 找不到资源 405 Method not allow</p><p>500 服务器问题  502 Bad Gateway 网关错误</p></div><p>上图返回的代码是200，即请求成功了。<br />请求成功后，可以获取一些其他信息。读者可以自行尝试输出查看内容。<br />这里主要说明<code>response.text</code>和<code>response.content</code>。<br />前者这个属性，获取了HTML文档，就解决了我们在前文提出的爬虫的第一个问题。<br />后者主要被用于存储图片和文件，例如访问的URL为<code>https://zoruasama.gitee.io/img/zorua.png</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print(response.text) <span class="comment">#获取HTML文档</span></span><br><span class="line">print(response.url)  <span class="comment">#获取请求的URL</span></span><br><span class="line">print(response.headers)  <span class="comment">#获取请求头</span></span><br><span class="line">print(response.cookies)  <span class="comment">#获取cookies # cookies和session的概念</span></span><br><span class="line">print(response.content)  <span class="comment">#以字节流返回数据 存图片或文件用</span></span><br></pre></td></tr></table></figure><p>如图所示是<code>response.text</code>返回的字符串内容。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930210531.png" alt="" /></p><p>接下来说明如何使用BeautifulSoup4来获取HTML文档中的信息。</p><h1 id="beautifulsoup4"><a class="markdownIt-Anchor" href="#beautifulsoup4"></a> BeautifulSoup4</h1><h2 id="简单介绍-2"><a class="markdownIt-Anchor" href="#简单介绍-2"></a> 简单介绍</h2><p><a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/" target="_blank" rel="noopener">在线文档</a><br />Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库。它能够通过你喜欢的转换器实现惯用的文档导航，查找，修改文档的方式。Beautiful Soup会帮你节省数小时甚至数天的工作时间。<br />HTML 文档本身是<strong>结构化的文本</strong>，有<strong>一定的规则</strong>，通过它的结构可以简化信息提取。于是，就有了lxml、pyquery、BeautifulSoup等网页信息提取库。一般我们会用这些库来提取网页信息。<br />在下文中BeautifulSoup4将被简称为BS4。</p><h2 id="简单使用-2"><a class="markdownIt-Anchor" href="#简单使用-2"></a> 简单使用</h2><p>我们引用官方的例子来介绍如何使用BS4来进行工作。<br />先安装BS4，在命令行键入如下语句：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure><p>假如我们已经使用某种方式获取到了某个网页的HTML文档（例如上文介绍的Requests），然后将这个文档字符串存储在<code>html_doc</code>这个变量中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">html_doc = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure><p>而后从bs4中引入BeautifulSoup，解析上面的文档，就能得到一个BeautifulSoup对象，并将之赋值给soup变量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">'html.parser'</span>) <span class="comment">#参数1是解析的文档内容, 参数2是选择的解析器</span></span><br></pre></td></tr></table></figure><p>使用对象的<code>prettify()</code>方法可以以标准缩进的形式呈现soup的HTML文档内容。<br />以下的内容需要一定的<strong>HTML基础</strong>。需要知道什么是<code>标签</code>，<code>ID</code>，<code>Class</code>等知识。<br />由于这不是本文主要内容，因此不再这里赘述，只会在下文简要说明。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930212424.png" alt="" /></p><p>我们再来看看关于<code>BeautifulSoup</code>对象的其他方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(soup.title)        <span class="comment">#获取标题标签</span></span><br><span class="line">print(soup.title.text)   <span class="comment">#获取内容</span></span><br><span class="line">print(soup.title.attrs)   <span class="comment">#获取属性</span></span><br><span class="line">print(soup.title.get(<span class="string">'class'</span>))  <span class="comment">#获取属性的值</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930213035.png" alt="" /></p><p>接下来来解释一下上面这些名词。</p><h3 id="souptitle"><a class="markdownIt-Anchor" href="#souptitle"></a> soup.title</h3><p>我们可以观察一下被解析的这个HTML文档，里面有一行：<code>&lt;title&gt;The Dormouse's story&lt;/title&gt;</code>，两边用<code>title</code>标签裹着的。<br />因此<code>soup.title</code>就是在<strong>原先的整个文档中截取了这一部分</strong>。<br />同理，如果选择<code>soup.body</code>，那么就是输出<code>body</code>标签裹着的内容。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930213316.png" alt="" /></p><p>进一步再选择<code>soup.body.p</code>，这会输出<code>body</code>标签下的<code>p</code>标签，而<code>p</code>标签有多个，所以只会选择<strong>第一个</strong>并输出。</p><h3 id="souptitletext"><a class="markdownIt-Anchor" href="#souptitletext"></a> soup.title.text</h3><p>虽然本节的标题是<code>soup.title.text</code>，但是<code>text</code>属性<strong>并不是</strong><code>title</code><strong>独有的</strong>，这一点在接下来的属性或方法介绍也是如此。只要是<code>BeautifulSoup</code>对象，<strong>都有这些方法</strong>。</p><p><code>.text</code>属性是用于获取标签内部的“<strong>正文</strong>”，如下图的<strong>橙色部分</strong>。<br />它没有在<code>&lt; &gt;</code>这对括号内，所以把它视为“正文”。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930214353.png" alt="" /></p><p>上面这段字符串，实际是通过<code>soup.body.a</code>来获取的。<br />接下来获取其中的“正文”。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930214713.png" alt="" /></p><h3 id="souptitleattrs"><a class="markdownIt-Anchor" href="#souptitleattrs"></a> soup.title.attrs</h3><p>在上文演示这个方法时，输出的是一个空字典。<br />这是因为<code>soup.title</code>并不具备属性。在本节我们拿上一节的<code>soup.body.a</code>作演示。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930214843.png" alt="" /></p><p>可以看到，在<code>&lt; &gt;</code>这对括号里的内容，以字典的形式被返回了。如果读者还没有遗忘如何从字典从取值的方法的话，很容易可以联想到：<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930215000.png" alt="" /></p><p>可以这样做，但是事实上，BS4还提供了一个优雅的做法：<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930215116.png" alt="" /></p><h3 id="souptitlegetclass"><a class="markdownIt-Anchor" href="#souptitlegetclass"></a> soup.title.get(‘class’)</h3><p>接续上节，获取<code>&lt; &gt;</code>内的内容，还可以使用本节标题的形式。<br />例如：<code>soup.body.a.get('href')</code><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200930215334.png" alt="" /></p><h2 id="查找标签"><a class="markdownIt-Anchor" href="#查找标签"></a> 查找标签</h2><p>大多数情况下，上述的简单使用总是只能获取到<strong>第一个匹配项</strong>，显得有些鸡肋、不够用。<br />而且对于标签的选择总是不够精准。<br />因此我们在这里介绍<strong>查找标签</strong>的方法。查找标签的方法主要有两个：<code>.find()</code>和<code>.findall()</code>。<br />前者也是查找<strong>第一个满足条件</strong>的标签并以字符串的形式返回，后者是查找<strong>所有满足条件</strong>的标签并以列表的形式返回。<br />除此以外，这两个方法在参数上大同小异。</p><ul><li><code>name</code>，标签的名字，例如<code>p</code>,<code>a</code>,<code>title</code>等。</li><li><code>**kwargs</code>，利用属性键值对来进行过滤。如<code>id</code>和<code>class_</code>等。</li><li>其他的参数不再作解释。读者若感兴趣可以自行查阅文档。</li></ul><h3 id="查找指定id的标签"><a class="markdownIt-Anchor" href="#查找指定id的标签"></a> 查找指定id的标签</h3><p>我们再次使用上面的HTML文档为例进行演示。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004133730.png" alt="" /><br />为了获取其中标为橙色的内容，我们可以<code>soup.find('a',id=&quot;link2&quot;)</code>。</p><h3 id="查找指定class的标签"><a class="markdownIt-Anchor" href="#查找指定class的标签"></a> 查找指定class的标签</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004133909.png" alt="" /></p><p>为了获取其中所有绿色的内容，我们可以<code>soup.find_all('a',class_='sister')</code><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004134113.png" alt="" /><br />返回的内容是<strong>一个含有三个元素的列表</strong>。</p><h2 id="css选择器"><a class="markdownIt-Anchor" href="#css选择器"></a> CSS选择器</h2><p>如果您对CSS有了解的话，您肯定对 id 和 class 选择器不陌生。<br />使用<code>soup.select()</code>方法就可以像CSS的规则一样进行选择。<br />此处不再赘述。<br />例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'a'</span>))</span><br><span class="line">print(soup.select(<span class="string">'.sister'</span>))  <span class="comment"># class是用 . 号</span></span><br><span class="line">print(soup.select(<span class="string">'#link1'</span>))   <span class="comment"># id是用 # 号</span></span><br></pre></td></tr></table></figure><h1 id="实战演练"><a class="markdownIt-Anchor" href="#实战演练"></a> 实战演练</h1><h2 id="爬取百度贴吧帖子中的图片并下载"><a class="markdownIt-Anchor" href="#爬取百度贴吧帖子中的图片并下载"></a> 爬取百度贴吧帖子中的图片并下载</h2><p>首先，我们先找一个<strong>百度贴吧帖子</strong>作为目标。<br />笔者选择了<strong>火影忍者</strong>吧的这一帖子作为目标 <a href="https://tieba.baidu.com/p/6970148254" target="_blank" rel="noopener">链接</a>。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004135044.png" alt="" /></p><h3 id="获取html文档"><a class="markdownIt-Anchor" href="#获取html文档"></a> 获取HTML文档</h3><p>先使用<code>requests</code>获取文档。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">html = requests.get(<span class="string">'https://tieba.baidu.com/p/6970148254'</span>)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br></pre></td></tr></table></figure><h3 id="用beautifulsoup解析"><a class="markdownIt-Anchor" href="#用beautifulsoup解析"></a> 用BeautifulSoup解析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br></pre></td></tr></table></figure><h3 id="对网页元素进行选择"><a class="markdownIt-Anchor" href="#对网页元素进行选择"></a> 对网页元素进行选择</h3><p>为了方便对HTML文档的阅读，我们使用浏览器的F12工具进行阅读。这个工具只需在浏览器中按下F12键即可打开。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004135639.png" alt="" /></p><p>观察文档可知，第一张图片的标签为<code>&lt;img class=&quot;BDE_Image&quot; src=&quot;http://tiebapic.baidu.com/forum/w%3D580/sign=219b01688545d688a302b2ac94c37dab/f3e3241f95cad1c845e0347c683e6709c83d5144.jpg&quot; size=&quot;905080&quot; changedsize=&quot;true&quot; width=&quot;560&quot; height=&quot;817&quot;&gt;</code>。</p><blockquote><p>您可以把鼠标悬浮在图片上，然后按下<code>Ctrl+Shift+C</code>进行快速定位。</p></blockquote><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004135857.png" alt="" /><br />观察后面几张图片，发现<strong>共性</strong>为img标签，class为<strong>BDE_Image</strong>，而我们只需要获得src链接即可。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20201004140033913_32281.png" alt="" /><br />橙色是共性，绿色是需要爬取的内容。</p><h3 id="查找标签-2"><a class="markdownIt-Anchor" href="#查找标签-2"></a> 查找标签</h3><p>由上面的分析易得，我们需要写的代码为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">images = soup.find_all(<span class="string">'img'</span>,class_=<span class="string">'BDE_Image'</span>) <span class="comment">#这将返回含有每个图片元素的一个列表</span></span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">    print(img[<span class="string">'src'</span>])</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20201004140632114_5447.png" alt="" /></p><p>可以看到我们获得了大量的链接。<br />接下来只需要下载这些链接的内容即可。</p><h3 id="下载图片"><a class="markdownIt-Anchor" href="#下载图片"></a> 下载图片</h3><p>此处先直接贴出代码再做解释。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">    print(<span class="string">'*'</span>*<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">with</span> open(str(int(time.time()))+<span class="string">'.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:  <span class="comment"># 使用with语句打开文件（文件不存在则会创建, 用时间戳命名文件）</span></span><br><span class="line">       f.write(requests.get(img[<span class="string">'src'</span>]).content)    <span class="comment"># 写入字节集</span></span><br><span class="line">       <span class="comment"># requests.get(img['src']) 是用requests访问目标链接 然后用 .content属性去获取二进制内容</span></span><br><span class="line">       time.sleep(<span class="number">4</span>)</span><br></pre></td></tr></table></figure><h3 id="完整代码"><a class="markdownIt-Anchor" href="#完整代码"></a> 完整代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">html = requests.get(<span class="string">'https://tieba.baidu.com/p/6970148254'</span>)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br><span class="line">images = soup.find_all(<span class="string">'img'</span>,class_=<span class="string">'BDE_Image'</span>) <span class="comment">#这将返回含有每个图片元素的一个列表</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">    print(<span class="string">'*'</span>*<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">with</span> open(str(int(time.time()))+<span class="string">'.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:  <span class="comment"># 使用with语句打开文件（文件不存在则会创建, 用时间戳命名文件）</span></span><br><span class="line">       f.write(requests.get(img[<span class="string">'src'</span>]).content)    <span class="comment"># 写入字节集</span></span><br><span class="line">       <span class="comment"># requests.get(img['src']) 是用requests访问目标链接 然后用 .content属性去获取二进制内容</span></span><br><span class="line">       time.sleep(<span class="number">4</span>)  <span class="comment"># 等待4秒 以防止来不及下载</span></span><br></pre></td></tr></table></figure><h2 id="爬取豆瓣影评"><a class="markdownIt-Anchor" href="#爬取豆瓣影评"></a> 爬取豆瓣影评</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先引用包</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004193912.png" alt="" /><br />找到要爬取的目标，我选择了这个《我和我的家乡》的影评。<a href="https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score" target="_blank" rel="noopener">链接</a></p><h3 id="获取html文档-2"><a class="markdownIt-Anchor" href="#获取html文档-2"></a> 获取HTML文档</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194033.png" alt="" /><br />我们可以看到，直接进行GET请求，返回的状态号为418，并没有成功。<br />这可能是网站检测出非正常访问，所以我们要伪装成真实人物来访问。<br />这里就涉及一个<code>User-Agent</code>的概念了，简称<code>UA</code>。这里不解释<code>UA</code>是什么。只说明如何利用。<br />如何找到<code>UA</code>呢？下面介绍两个方法：</p><h4 id="方法一"><a class="markdownIt-Anchor" href="#方法一"></a> 方法一</h4><p>打开F12工具，刷新一下网页。选择Network页签，在左边的选项中随便点一个，在右边的Headers中找到user-agent字段。<br />即 <code>Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36</code></p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004180427.png" alt="" /></p><h4 id="方法二"><a class="markdownIt-Anchor" href="#方法二"></a> 方法二</h4><p>打开浏览器，在地址栏输入<code>about://version</code>并回车。可以方便地找到<code>UA</code>字段。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004180711.png" alt="" /></p><h3 id="headers"><a class="markdownIt-Anchor" href="#headers"></a> headers</h3><p>创建一个字典headers，将刚刚找到的<code>UA</code>，作为字段<code>User-Agent</code>的值写入其中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">             <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36'</span>,</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><p>接下来将之前的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>)</span><br></pre></td></tr></table></figure><p>修改为</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>,headers=headers)</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194227.png" alt="" /></p><p>这个时候就可以发现能成功请求了。</p><h3 id="用beautifulsoup解析-2"><a class="markdownIt-Anchor" href="#用beautifulsoup解析-2"></a> 用BeautifulSoup解析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br></pre></td></tr></table></figure><h3 id="对网页元素进行选择-2"><a class="markdownIt-Anchor" href="#对网页元素进行选择-2"></a> 对网页元素进行选择</h3><p>我们要爬取的目标是，该电影的影评，最好爬取到尽可能多的内容。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194838.png" alt="" /></p><p>拟定对图上每一个用户的昵称、评分、时间、评论内容、赞成数进行爬取。</p><p>打开F12工具进行分析，我们发现每一个用户的评论和其相关信息都在一个<code>div</code>标签，<code>class</code>为<code>comment-item</code>的容器（共同点）中。<br /><strong>注：容器是为方便陈述自己拟定的非正式称谓。</strong></p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004194326.png" alt="" /></p><h3 id="查找标签-3"><a class="markdownIt-Anchor" href="#查找标签-3"></a> 查找标签</h3><p>思路：我们可以先把页面上所有的<strong>容器</strong>选出来，再从每个容器中选取自己想要的信息。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boxes = soup.find_all(<span class="string">'div'</span>,class_=<span class="string">'comment-item'</span>)</span><br></pre></td></tr></table></figure><p>这样就找到了所有的<strong>容器</strong>，并以列表的形式返回。<br />然后我们<strong>遍历每个容器</strong>，提取自己想要的信息。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> box <span class="keyword">in</span> boxes:</span><br><span class="line">   <span class="comment"># 在box中提取信息</span></span><br></pre></td></tr></table></figure><p>这个时候，每个容器中的内容应类似这样（部分内容被隐去）：</p><details green><summary> <p>容器内容</p> </summary>              <div class='content'>              <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-item "</span> <span class="attr">data-cid</span>=<span class="string">"2455502478"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-item "</span> <span class="attr">data-cid</span>=<span class="string">"2538318284"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">"Username"</span> <span class="attr">href</span>=<span class="string">"https://www.douban.com/people/0000000/"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://img1.doubanio.com/icon/u0000000-17.jpg"</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-vote"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"votes vote-count"</span>&gt;</span>2217<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"2538318284"</span> <span class="attr">type</span>=<span class="string">"hidden"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">data-id</span>=<span class="string">"2538318284"</span> <span class="attr">class</span>=<span class="string">"j a_show_login"</span> <span class="attr">onclick</span>=<span class="string">""</span>&gt;</span>有用<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 删除短评 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-info"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.douban.com/people/0000000/"</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>看过<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"allstar50 rating"</span> <span class="attr">title</span>=<span class="string">"力荐"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-time "</span> <span class="attr">title</span>=<span class="string">"2020-09-20 20:16:27"</span>&gt;</span></span><br><span class="line">                    2020-09-20</span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">" comment-content"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">class="short"</span>&gt;</span>徐峥的才华确实被低估了。“乡村教师”这个题材的电影展现出他某个程度的细腻——他很擅长从一个小的切角去展开一个宏大叙题，这样的融合不会过于煽情，却分外让人感动。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>然后我们再对<strong>每个容器</strong>进行分析：<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195144.png" alt="" /></p><h4 id="赞成数"><a class="markdownIt-Anchor" href="#赞成数"></a> 赞成数</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195424.png" alt="" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'votes'</span>)</span><br></pre></td></tr></table></figure><p><strong>注：我们观察到上面的类写的是 class=“votes vote-count”，这不是一个类的名字，而是两个类的名字，也就是说这个span既属于votes也属于vote-count。</strong></p><p>为了提取其中的<strong>正文</strong>，我们加上<code>.text</code>属性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'votes'</span>).text</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195541.png" alt="" /></p><h4 id="用户名"><a class="markdownIt-Anchor" href="#用户名"></a> 用户名</h4><p>那么如何提取用户名呢？用户名的class为空。和上面提取赞成数类似。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'a'</span>,class_=<span class="string">''</span>).text</span><br></pre></td></tr></table></figure><p>但是不建议使用这个方法，似乎是会出现BUG。（这个条件太弱了，满足条件可能不止这一个）<br />所以我们可以采用连续查找的方式，先查找<code>span</code>,<code>class_=&quot;comment-info&quot;</code>，再在里面查找<code>a</code>标签。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195830.png" alt="" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-info'</span>).find(<span class="string">'a'</span>).text</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004195944.png" alt="" /></p><h4 id="评分"><a class="markdownIt-Anchor" href="#评分"></a> 评分</h4><p>关于评分，我们可以在文档中观察到，没有直接的数字或文本来表示，它是用<strong>一个类名来表示</strong>的。<br />所以我们可以想办法获取到这个类名。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200220.png" alt="" /><br />在上面那个语句后加一个<code>[0]</code>来获取第一个元素，然后把<code>allstar</code>去掉。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)[<span class="number">0</span>].replace(<span class="string">"allstar"</span>)</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200455.png" alt="" /></p><p>通过观察可知，30其实是三颗星。所以我们可以简单地换算一下。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int(box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)[<span class="number">0</span>].replace(<span class="string">"allstar"</span>,<span class="string">""</span>))//<span class="number">10</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200639.png" alt="" /></p><h4 id="评论内容"><a class="markdownIt-Anchor" href="#评论内容"></a> 评论内容</h4><p>这个也非常简单。<br />只需要：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'short'</span>).text</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200810.png" alt="" /></p><h4 id="时间"><a class="markdownIt-Anchor" href="#时间"></a> 时间</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-time'</span>).text.strip()</span><br><span class="line"><span class="comment">#不使用strip()的话两边会有空格或换行, 用这个方法来去掉这些我们不要的东西。</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004200953.png" alt="" /></p><hr /><p>也可以从属性中取得更详细的时间。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-time'</span>)[<span class="string">'title'</span>]</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004201110.png" alt="" /></p><h3 id="完整代码-2"><a class="markdownIt-Anchor" href="#完整代码-2"></a> 完整代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">headers = &#123;</span><br><span class="line">             <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36'</span>,</span><br><span class="line">            &#125;</span><br><span class="line">html = requests.get(<span class="string">'https://movie.douban.com/subject/35051512/comments?limit=20&amp;status=P&amp;sort=new_score'</span>,headers=headers)</span><br><span class="line">print(html.status_code) <span class="comment"># 返回200即为请求成功</span></span><br><span class="line">print(html.text)  <span class="comment"># html.text 即为我们想要的HTML文档</span></span><br><span class="line">soup = BeautifulSoup(html.text,<span class="string">'html.parser'</span>)</span><br><span class="line">boxes = soup.find_all(<span class="string">'div'</span>,class_=<span class="string">'comment-item'</span>)</span><br><span class="line"><span class="keyword">for</span> box <span class="keyword">in</span> boxes:</span><br><span class="line">    print(<span class="string">"用户名"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-info'</span>).find(<span class="string">'a'</span>).text)</span><br><span class="line">    print(<span class="string">"赞成数"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'votes'</span>).text)</span><br><span class="line">    print(<span class="string">"时间"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'comment-time'</span>).text.strip())</span><br><span class="line">    print(<span class="string">"星数"</span>,int(box.find(<span class="string">'span'</span>,class_=<span class="string">'rating'</span>).get(<span class="string">'class'</span>)[<span class="number">0</span>].replace(<span class="string">"allstar"</span>,<span class="string">""</span>))//<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">"评论内容"</span>,box.find(<span class="string">'span'</span>,class_=<span class="string">'short'</span>).text)</span><br><span class="line">    print(<span class="string">"-"</span>*<span class="number">10</span>) <span class="comment">#分隔符</span></span><br></pre></td></tr></table></figure><p>运行效果如下图所示：<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20201004202132.png" alt="" /></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 03. 函数、包和数据库</title>
    <link href="https://zoruasama.gitee.io/2020/07/22/training_2/"/>
    <id>https://zoruasama.gitee.io/2020/07/22/training_2/</id>
    <published>2020-07-22T11:30:00.000Z</published>
    <updated>2020-09-30T13:07:34.583Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年7月22日。今天主要讲的内容有：</p><ul><li><span class="inline-tag yellow">条件与循环</span></li><li><span class="inline-tag green">函数的定义</span></li><li><span class="inline-tag red">包的引用</span></li><li><span class="inline-tag blue">连接MySQL</span></li><li><span class="inline-tag yellow">连接MongoDB</span></li></ul><h1 id="条件与循环"><a class="markdownIt-Anchor" href="#条件与循环"></a> 条件与循环</h1><p>注意，以下语句都用到了此前提到过的<strong>代码块</strong>概念，若您已经忘记了，可以查看之前的章节复习。</p><h2 id="条件if"><a class="markdownIt-Anchor" href="#条件if"></a> 条件if</h2><p>使用类似如下的结构，即可在Python中创建一个条件分歧语句。可以把</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition_1:</span><br><span class="line">    statement_block_1 <span class="comment">#当条件表达式1为真值时执行的代码块</span></span><br><span class="line"><span class="keyword">elif</span> condition_2:     <span class="comment">#如果不需要条件2, 可以省略这一块</span></span><br><span class="line">    statement_block_2 <span class="comment">#当条件表达式1为假值时, 条件表达式2为真值执行的代码块</span></span><br><span class="line"><span class="keyword">else</span>:                 <span class="comment">#如果不需要不满足1,2的情况, 可以省略这一块</span></span><br><span class="line">    statement_block_3 <span class="comment">#当条件表达式1为假值时, 条件表达式2为假值执行的代码块</span></span><br></pre></td></tr></table></figure><p>例如，要编写一段程序，判断输入的数字是否为1。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num = input()</span><br><span class="line"><span class="keyword">if</span> num.isdigit() == <span class="literal">False</span>:</span><br><span class="line">    print(<span class="string">"输入的含有非数字内容"</span>)</span><br><span class="line"><span class="keyword">elif</span> int(num) == <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"输入的是1"</span>)</span><br><span class="line"><span class="keyword">elif</span> int(num)&gt;<span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"输入的比1大"</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    print(<span class="string">"输入的比1小"</span>)</span><br></pre></td></tr></table></figure><h2 id="循环for"><a class="markdownIt-Anchor" href="#循环for"></a> 循环for</h2><p><code>for</code>循环在其他编程语言中一般用来写已知循环次数的循环。Python也同样可以这样子做。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><h2 id="循环while"><a class="markdownIt-Anchor" href="#循环while"></a> 循环while</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">astring = <span class="string">"Hello, Python."</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> astring[i] != <span class="string">','</span>:</span><br><span class="line">    print(astring[i])</span><br><span class="line">    i = i + <span class="number">1</span></span><br></pre></td></tr></table></figure><p>输出的内容是<code>Hello</code>。<br />在Python中没有类似<code>do……while</code>的语句。<br />如果想创建一个无限循环，可以使用<code>while True:</code>的条件。</p><h2 id="循环else"><a class="markdownIt-Anchor" href="#循环else"></a> 循环else</h2><p>在上面的<code>for</code>和<code>while</code>循环中，都可以再额外加入一个<code>else:</code>语句。<br />类似下面的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">astring = <span class="string">"Hello, Python."</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> astring[i] != <span class="string">','</span>:</span><br><span class="line">    print(astring[i])</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(astring[i])</span><br></pre></td></tr></table></figure><p><code>else:</code>语句的作用便是，在条件不满足时跳转到该代码块。</p><h2 id="循环break"><a class="markdownIt-Anchor" href="#循环break"></a> 循环break</h2><p><code>break</code>可以用于终止整个循环。例如在下面的例子中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span>: <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>不过需要注意的是，<code>break</code>仅会终止一个循环，对于嵌套的循环，它只会终止最接近的循环。</p><h2 id="循环continue"><a class="markdownIt-Anchor" href="#循环continue"></a> 循环continue</h2><p><code>continue</code>可以用于终止当前这次循环，之后会马上进入下一次循环，例如在下面的例子中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span>: <span class="keyword">continue</span></span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><p>上述代码的结果是，除了5以外的1~9的数字。因为当<code>i</code>的值为5时，剩余的循环体代码被直接跳过了。</p><h1 id="函数的定义"><a class="markdownIt-Anchor" href="#函数的定义"></a> 函数的定义</h1><p>函数是一个有入口，有出口的程序段。它的作用有：</p><ol><li>减少代码冗余</li><li>代码结构清晰</li><li>保持代码一致性</li></ol><h2 id="定义函数"><a class="markdownIt-Anchor" href="#定义函数"></a> 定义函数</h2><p>定义函数使用<code>def</code>关键字即可。和大多数编程语言不同的是，Python在定义函数时不需要指定<strong>函数是否具有返回值/返回值类型/参数类型</strong>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">(param1,param2,param3)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>上例中的<code>pass</code>关键字，是一个<strong>占位符</strong>。即你定义了某个函数，但是你还没有想好这个函数的具体内容时，用一个<code>pass</code>来占位以防止程序出错。<br />对于<code>pass</code>关键字，前面介绍的<strong>条件与循环</strong>中也是可以使用的。<br />例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a == b:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>接下来我们定义函数：输入两个数字，输出这两个数字的平均数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zorua_average</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (a+b)/<span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>上例的<code>return</code>关键字，就是用于指示函数的返回值。<strong>在函数返回以后，函数就结束了</strong>。例如下面的例子。</p><details blue><summary> <p>栗子</p> </summary>              <div class='content'>              <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zorua_average</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (a+b)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">print</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>调用上面这个函数时，只会输出1，而不会输出2。</p>              </div>            </details><p>当然<strong>返回值</strong>并不是函数必须的。<br />由于Python在定义函数时做了极简，如果想像其他语言一样<strong>严格限定参数的类型</strong>，则需要进行参数变量的检查。<strong>这样也算是做到了类似函数重载的效果。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">typeof</span><span class="params">(variate)</span>:</span></span><br><span class="line">    type=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(variate,int):</span><br><span class="line">        type = <span class="string">"int"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,str):</span><br><span class="line">        type = <span class="string">"str"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,float):</span><br><span class="line">        type = <span class="string">"float"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,list):</span><br><span class="line">        type = <span class="string">"list"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,tuple):</span><br><span class="line">        type = <span class="string">"tuple"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,dict):</span><br><span class="line">        type = <span class="string">"dict"</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(variate,set):</span><br><span class="line">        type = <span class="string">"set"</span></span><br><span class="line">    <span class="keyword">return</span> type</span><br></pre></td></tr></table></figure><h3 id="默认参数"><a class="markdownIt-Anchor" href="#默认参数"></a> 默认参数</h3><p>在定义函数时，可以给参数一些缺省值，这样在调用函数，没有给该参数的值时，参数会有一个默认的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">(param1=<span class="number">1</span>,param2=<span class="number">2</span>,param3=<span class="number">3</span>)</span>:</span></span><br><span class="line">    print(param1,param2,param3)</span><br></pre></td></tr></table></figure><p>调用函数<code>functionname()</code>的结果为<strong>输出了1 2 3</strong>，等价于<code>functionname(1,2,3)</code>；<br /><code>functionname(4,5)</code>的<strong>结果为输出了4 5 3</strong>，等价于<code>functionname(4,5,3)</code>。</p><div class="snote danger"><p>默认参数应该要在函数定义时靠右写，有缺省值的参数在没有缺省值参数的右边。否则会产生二义性。例如<code>def func(param1=1,param2,param3)</code>的函数定义，那么<code>func(3,4)</code>的3和4到底是赋值给参数1和2，还是2和3呢？</p></div><h3 id="关键字参数"><a class="markdownIt-Anchor" href="#关键字参数"></a> 关键字参数</h3><p>对于上例，读者会发现，缺省参数只能依次填充。<br />如果我想做到<strong>param1,param2使用缺省值，而param3用自定义值</strong>，该如何做呢？<br />Python提供的方案是：<code>functionname(param3=5)</code>，结果为<strong>结果为输出了1 2 5</strong>，等价于<code>functionname(1,2,5)</code>。<br />利用关键字参数，还可以改变参数的顺序。例如<code>functionname(param3=5,param2=5,param1=5)</code></p><h3 id="可变参数"><a class="markdownIt-Anchor" href="#可变参数"></a> 可变参数</h3><p>在编程时，我们可能会出现的需求。<br />例如，参数数量是变化的一些函数：cal_sum(求和函数)。</p><ul><li>cal_sum(1,2)→1+2=3</li><li>cal_sum(1,2,3,1)→1+2+3+1=7</li></ul><p>那么，这在Python中该如何实现呢？<br />只需在这一个接受“多个内容”的参数的参数名前，加一个<code>*</code>即可。<br />值是以元组的形式传入的<br />例如下面的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cal_sum</span><span class="params">(*number)</span>:</span></span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> number:</span><br><span class="line">        result += i</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906103611.png" alt="" /></p><h3 id="命名关键字参数"><a class="markdownIt-Anchor" href="#命名关键字参数"></a> 命名关键字参数</h3><p>对于关键字参数，函数的调用者可以传入任意不受限制的关键字参数。<br />至于到底传入了哪些，就需要在函数内部通过kw检查。<br />关键字参数的参数名前有<code>**</code>，值是以字典的形式传入的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buy_item</span><span class="params">(id, number, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'discount'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># 有discount参数</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'pay'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># 有job参数</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw)</span><br></pre></td></tr></table></figure><p>但是这个时候，调用者仍可以传入不受限制的关键字参数。<br />例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buy_item(<span class="number">233</span>,<span class="number">2333</span>,discount=<span class="number">0.8</span>,pay=<span class="number">12345</span>,name=<span class="string">"Zorua"</span>)</span><br><span class="line"><span class="comment">#传入的关键字参数，名字是任意的</span></span><br></pre></td></tr></table></figure><hr /><p>另外还有一种形式的命名关键字参数，需要一个特殊分隔符<code>*</code>，<code>*</code>后面的参数被视为命名关键字参数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buy_item</span><span class="params">(id, number, *, discount, pay)</span>:</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'discount:'</span>, discount,<span class="string">'pay'</span>,pay)</span><br></pre></td></tr></table></figure><p>调用方式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">buy_item(<span class="number">233</span>,<span class="number">2333</span>,discount=<span class="number">0.8</span>,pay=<span class="number">12345</span>)</span><br><span class="line"><span class="comment">#传入的关键字参数，名字是任意的</span></span><br><span class="line"><span class="comment">#命名关键字参数必须传入参数名，这和位置参数不同。如果没有传入参数名，调用将报错</span></span><br></pre></td></tr></table></figure><p>如果函数中有一个<strong>可变参数</strong>，上述的<code>*</code>可以用可变参数来代替。<br />即<code>def buy_item(id, number, *args, discount, pay):</code></p><h3 id="参数顺序"><a class="markdownIt-Anchor" href="#参数顺序"></a> 参数顺序</h3><p>在<strong>默认参数</strong>这节中提到了默认参数应该在函数定义时靠右写，如果有更多类型的参数，则应按下面这个顺序从左到右：<br /><strong>基本参数、默认参数、可变参数、命名关键字参数和关键字参数</strong></p><h1 id="包的引入"><a class="markdownIt-Anchor" href="#包的引入"></a> 包的引入</h1><div class="snote quote"><p>Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。<br>模块让你能够有逻辑地组织你的 Python 代码段。<br>把相关的代码分配到一个模块里能让你的代码更好用，更易懂。<br>模块能定义函数，类和变量，模块里也能包含可执行的代码。<br></p></div>一个模块只会被导入一次，不管你执行了多少次import。这样可以防止导入模块被一遍又一遍地执行。比如要引用模块`math`，就可以在文件最开始的地方用`import math`来引入。在调用`math`模块中的函数时，必须这样引用：`模块名.函数名`<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接引入包</span></span><br><span class="line"><span class="keyword">import</span> os,random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从包中引入功能</span></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time,timezone</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从包中引入所有功能</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入包并取别名</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime <span class="keyword">as</span> dt   <span class="comment"># as 取别名</span></span><br></pre></td></tr></table></figure><h2 id="自定义包"><a class="markdownIt-Anchor" href="#自定义包"></a> 自定义包</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906110927.png" alt="" /><br />创建Python Package后，新建一个py文件，命名为<code>__init__.py</code><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906110447.png" alt="" /><br /><code>__init__.py</code> 把文件夹变成包。<br />接下来就可以在其他代码中，使用<code>import wow</code>来引用这个包了。</p><h2 id="导入顺序"><a class="markdownIt-Anchor" href="#导入顺序"></a> 导入顺序</h2><p>当你导入一个模块，Python 解析器对模块位置的搜索顺序是：</p><ul><li>当前目录</li><li>如果不在当前目录，Python 则搜索在 shell 变量 PYTHONPATH 下的每个目录。</li><li>如果都找不到，Python会察看默认路径。UNIX下，默认路径一般为<code>/usr/local/lib/python/</code>。</li><li>模块搜索路径存储在 system 模块的 sys.path 变量中。变量里包含当前目录，PYTHONPATH和由安装过程决定的默认目录。</li></ul><h2 id="pip工具"><a class="markdownIt-Anchor" href="#pip工具"></a> pip工具</h2><p>pip 是 Python 包管理工具，该工具提供了对Python 包的查找、下载、安装、卸载的功能。<br />一般在安装Python后，会自带这个工具。<br />在本篇文章中，只需要知道可以在命令行中使用<code>pip install</code>来进行包的安装即可。<br />后续如果有时间的话，我会额外写一篇文章来介绍pip3工具。</p><h1 id="连接mysql"><a class="markdownIt-Anchor" href="#连接mysql"></a> 连接MySQL</h1><div class="snote quote"><p><b>援引自百度百科。</b></p><p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p><p>MySQL是一种关系型数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。</p><p>MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。</p></div><h2 id="引入包"><a class="markdownIt-Anchor" href="#引入包"></a> 引入包</h2><p>使用<code>import pymysql</code>语句引入包，如果还没有这个包，可以使用<code>pip3 install pymysql</code>进行安装。</p><h2 id="连接数据库"><a class="markdownIt-Anchor" href="#连接数据库"></a> 连接数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db = pymysql.connect(host=<span class="string">'152.*.*.*'</span>,user=<span class="string">'root'</span>,password=<span class="string">'abc123456'</span>,database=<span class="string">'Zorua0307'</span>,port=<span class="number">3309</span>)</span><br></pre></td></tr></table></figure><p><strong>注：<code>*</code>是须替换的部分，下同。</strong></p><p>参数说明：</p><ul><li>host - 你的数据库地址，如果是本地的话，使用<code>192.168.0.*</code>即可或者<code>localhost</code>。</li><li>user -  用户名</li><li>password - 密码</li><li>database - 数据库名</li><li>port - 数据库服务端口</li></ul><h2 id="创建游标"><a class="markdownIt-Anchor" href="#创建游标"></a> 创建游标</h2><p>游标（Cursor）是处理数据的一种方法，为了查看或者处理结果集中的数据，游标提供了在结果集中一次一行或者多行前进或向后浏览数据的能力。<br />可以简单地把游标认为是<strong>记录的指针</strong>，以如下形式创建的话，默认为元组的形式（如图所示）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cursor = db.cursor()</span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906133206.png" alt="" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cursor = db.cursor(pymysql.cursors.DictCursor) <span class="comment">#默认是元组 换成字典</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200906133336.png" alt="" /></p><h2 id="执行sql语句"><a class="markdownIt-Anchor" href="#执行sql语句"></a> 执行SQL语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cursor.execute(<span class="string">'select * from students'</span>)</span><br><span class="line">cursor.execute(<span class="string">"update students set Slesson1='Counter Strike' where Sname='Zorua'"</span>)</span><br></pre></td></tr></table></figure><p>使用<code>cursor.execute()</code>的方法可以执行类似上述的SQL语句。</p><h2 id="获取数据"><a class="markdownIt-Anchor" href="#获取数据"></a> 获取数据</h2><p>在执行完SQL的查询后，可以使用<code>cursor.fetchone()</code>将获取查询到的第一条数据。<br /><code>cursor.fetchall()</code>获取到查询到的所有数据。</p><h2 id="更新数据库"><a class="markdownIt-Anchor" href="#更新数据库"></a> 更新数据库</h2><p>执行关于更新（插入、修改等）的SQL语句后，需要提交才能完成对数据库的更新。可以参考下面这个代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sql = <span class="string">"insert into student (name,age) values ('app',11)"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    db.commit()   <span class="comment">#提交</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    db.rollback() <span class="comment">#提交失败，对事务进行回滚</span></span><br></pre></td></tr></table></figure><h2 id="关闭数据库"><a class="markdownIt-Anchor" href="#关闭数据库"></a> 关闭数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭游标</span></span><br><span class="line">cursor.close()</span><br><span class="line"><span class="comment">#关闭连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure><h1 id="连接mongodb"><a class="markdownIt-Anchor" href="#连接mongodb"></a> 连接MongoDB</h1><p>上一节简单介绍了，在Python中连接关系数据库MySQL。<br />这一节再简单介绍一下，连接非关系数据库MongoDB的过程。</p><details ><summary> <p>关系数据库与非关系数据库</p> </summary>              <div class='content'>              <ul><li>关系型数据库<ul><li>一开始就定义好表的结构</li></ul></li><li>非关系型数据库<ul><li>可以随时增减字段 可以横向扩展</li><li>敏捷性和扩展性</li><li>学习成本低，降低企业费用</li><li>故障率低</li><li>跨平台</li></ul></li></ul>              </div>            </details><p>由于笔者对MongoDB也不甚熟悉，所以下面仅仅直接举出一些例子，暂时不作详解。<br />待日后学习，会及时跟进笔记。<s>没错我又挖坑。</s></p><h2 id="引入包-2"><a class="markdownIt-Anchor" href="#引入包-2"></a> 引入包</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br></pre></td></tr></table></figure><p>使用上述语句引入包，如果没有该包可以使用：<code>pip3 install pymongo</code>进行安装。</p><h2 id="连接数据库-2"><a class="markdownIt-Anchor" href="#连接数据库-2"></a> 连接数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn = MongoClient(<span class="string">'152.*.*.*'</span>,<span class="number">27019</span>)</span><br></pre></td></tr></table></figure><p>如果是本地，可以使用<code>localhost</code>。</p><h2 id="建立数据库"><a class="markdownIt-Anchor" href="#建立数据库"></a> 建立数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db = conn[<span class="string">'zorua'</span>]</span><br></pre></td></tr></table></figure><p>使用上述语句，将创建一个名为<code>zorua</code>的数据库。</p><h2 id="创建集合表"><a class="markdownIt-Anchor" href="#创建集合表"></a> 创建集合(表)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_set = db[<span class="string">'zorua_set'</span>]  <span class="comment">#集合相当于表</span></span><br></pre></td></tr></table></figure><p>使用上述语句，将创建一个名为<code>zorua_set</code>的集合。</p><h2 id="插入一条数据"><a class="markdownIt-Anchor" href="#插入一条数据"></a> 插入一条数据</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_set.insert_one(&#123;<span class="string">'name'</span>: <span class="string">'zorua'</span>, <span class="string">'age'</span>: <span class="number">19</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="更新一个数据记录"><a class="markdownIt-Anchor" href="#更新一个数据记录"></a> 更新一个数据记录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_set.update_one(&#123;<span class="string">'name'</span>:<span class="string">'zorua'</span>&#125;,&#123;<span class="string">'$set'</span>:&#123;<span class="string">'age'</span>:<span class="number">5</span>&#125;&#125;)</span><br></pre></td></tr></table></figure><h2 id="更新多个数据记录"><a class="markdownIt-Anchor" href="#更新多个数据记录"></a> 更新多个数据记录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_set.update_many(&#123;<span class="string">'name'</span>:<span class="string">'zorua'</span>&#125;,&#123;<span class="string">'$set'</span>:&#123;<span class="string">'age'</span>:<span class="number">5</span>&#125;&#125;)</span><br></pre></td></tr></table></figure><h2 id="删除多个数据记录"><a class="markdownIt-Anchor" href="#删除多个数据记录"></a> 删除多个数据记录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_set.delete_many(&#123;<span class="string">'name'</span>:<span class="string">'zorua'</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="查询记录"><a class="markdownIt-Anchor" href="#查询记录"></a> 查询记录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">result = my_set.find()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">result = my_set.find(&#123;<span class="string">'age'</span>:&#123;<span class="string">"$gte"</span>:<span class="number">7</span>&#125;&#125;)</span><br><span class="line">print(<span class="string">"大于等于7岁的有："</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">    print(i)</span><br><span class="line"><span class="comment"># $gt:等于</span></span><br><span class="line"><span class="comment"># $lt:小于</span></span><br><span class="line"><span class="comment"># $gte:大于等于</span></span><br><span class="line"><span class="comment"># $lte:小于等于</span></span><br></pre></td></tr></table></figure><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>Windows | 应用程序的Zorua有机分类使用管理办法</title>
    <link href="https://zoruasama.gitee.io/2020/07/22/windows_0/"/>
    <id>https://zoruasama.gitee.io/2020/07/22/windows_0/</id>
    <published>2020-07-22T11:30:00.000Z</published>
    <updated>2020-07-22T11:47:40.846Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引言"><a class="markdownIt-Anchor" href="#引言"></a> 引言</h1><p><code>Windows</code>作为广泛地被使用的个人计算机操作系统，在学习和工作中发挥着举足轻重的作用。但是，就我身边的人而言，大家似乎都是到手即用，而没有事先对其作一番设置让自己使用得更加舒适。本文简要地谈谈，我是怎么样理解并发挥<code>Windows</code>提供的一些功能的，仅供参考。<br />正如题文的<strong>应用程序的Zorua有机分类使用管理办法</strong>，这是我随意地对这篇见解起的名字，英文名为<strong>Zorua Organic Rating Utilization Administration</strong>，简称<strong>ZORUA</strong>。</p><h1 id="应用程序的启动"><a class="markdownIt-Anchor" href="#应用程序的启动"></a> 应用程序的启动</h1><p>在我们日常使用计算机的时候，必然是需要启动应用程序的。按照使用频率，我把这些应用程序分成如下几类：</p><ul><li><strong>强必定启动项</strong>：每次开启计算机，必定会启动的应用程序，但是希望它是自动启动</li><li><strong>弱必定启动项</strong>：每次开启计算机，必定会启动的应用程序，但是希望它是手动启动</li><li><strong>偶尔启动项</strong>：正在进行工作时，出于一时的需求需要启动的应用程序</li><li><strong>非必定启动项</strong>：其他不常使用的应用程序</li></ul><p>对于不同类别的应用程序，全部都使用桌面快捷方式，是非常不科学高效的。</p><ul><li>桌面壁纸混搭各种风格的图标，美观度下降</li><li>桌面图标过多，难以迅速找到自己需要启动应用程序，尤其是在桌面图标被重新排序后</li></ul><blockquote><p><span class="inline-tag grey">P.S.</span> 笔者的桌面上图标也挺多的，但是主要都是<strong>文件</strong>，而不是<strong>软件</strong>，且这些文件通常具有时间上的<strong>局域性</strong>，会定期清理。<br />对于常用的软件、游戏等，使用了<strong>Fences+文件夹</strong>的方式进行了管理。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722172753.png" alt="" /></p></blockquote><p><strong>因此，不同类别就应该使用不同的管理方式。</strong></p><h2 id="强必定启动项"><a class="markdownIt-Anchor" href="#强必定启动项"></a> 强必定启动项</h2><p><strong>强必定启动项</strong>，或许用术语来称呼，应为<strong>开机启动项</strong>。对于这些程序，我们在启动<code>Windows</code>完毕后，它们就会自动运行，这样可以省去我们每次手动运行的繁琐。<br />但是，需要注意的是，<strong>过多的开机启动项可能会影响开机时间</strong>，但也<strong>切忌刻意地优化开机时间</strong>，极端地追求过短的开机时间。即使你的计算机能很快的开机并打败了全国99%的用户，这时你也还得花费时间启动软件，得不偿失。除非你是常年不关机。</p><h3 id="管理办法"><a class="markdownIt-Anchor" href="#管理办法"></a> 管理办法</h3><p>打开任务管理员，切换到<code>启动</code>标签页便可以进行启用/禁用。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722171507.png" alt="" /></p><h3 id="示例我的应用"><a class="markdownIt-Anchor" href="#示例我的应用"></a> 示例：我的应用</h3><p>在我的计算机上，我设置的该类应用：</p><ul><li>TrafficMonitor：在任务栏实时显示资源使用情况</li><li>坚果云：文件同步网盘</li><li>Snipaste：截图工具</li><li>火柴：类everything软件</li><li>火绒安全软件</li><li>Fences：桌面管理软件</li></ul><h2 id="弱必定启动项"><a class="markdownIt-Anchor" href="#弱必定启动项"></a> 弱必定启动项</h2><p>对于这类应用，和前文所述的<strong>强必定启动项</strong>几乎一致，差别只在<strong>希望它是手动启动</strong>。<br />可能有读者会问了，既然它们也是必定会启动的，为什么不直接归到上一类中，而要<strong>希望它是手动启动</strong>呢？</p><p>在回答这个问题前，我们来看下面这张图片。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722173818.png" alt="" /></p><p>我相信不少用户对登录QQ时弹出的这个新闻窗口是反感的，上面的新闻你或许偶尔会看，但是大部分时候不看。而它并不懂得迎合，只会每次精准无误地弹出，造成了打扰。</p><p>试想一下，<strong>弱必定启动项</strong>一般会有什么呢？</p><ul><li>每天都会登录的QQ</li><li>每天都会登录的微信</li><li>每天都会打开的浏览器</li><li>每天都会打开的文件资源管理器</li><li>……</li></ul><p>上面提到的频度是每天，而不是每次。</p><blockquote><p>我某次开机准备拷贝计算机中的一个文件到同学的U盘时，突然弹出QQ登录窗口。<br />类似上述这样的场景，实质上也是会像那个迷你版新闻弹窗一样充满打扰感的。</p></blockquote><p>而真正配得开机自运行的，就应该是那种静默运行的应用程序。</p><h3 id="管理方法"><a class="markdownIt-Anchor" href="#管理方法"></a> 管理方法</h3><p>那么，言归正传。<br />那么对于这类应用，应该如何管理呢？</p><p>我认为，最好就是将其锁定在任务栏中（但是QQ仍然不适合，我会在下文解释原因）。<br />先分析一下锁定任务栏的优缺点：</p><ul><li>锁定在任务栏中的优点：除全屏应用外（如游戏、电影），你可以在任何场景下打开这个应用。</li><li>锁定在任务栏中的缺点：在未运行时，它将一直占着位置，使得任务栏能容下的应用按钮位置少了。</li></ul><p>基于上面两点，可以得出的结论是——</p><ul><li><strong>任务栏锁定应用可以处理场景中的插入事件，例如——</strong><ul><li><strong>正写着代码，要打开浏览器查一些资料</strong></li><li><strong>正聊着天，突然被催促着提交某个报告</strong></li></ul></li><li><strong>任务栏锁定应用尽量不要太多</strong></li><li><strong>任务栏锁定应用在运行后，应该是<code>理想状态</code></strong></li></ul><p>为了表述简洁，上述提到了一个词，叫做<code>理想状态</code>，现在我对它下一个不严谨的定义。<br /><span class="inline-tag red">定义</span> <strong>理想状态</strong>是指，被锁定在任务栏的应用被运行后，<strong>再次点击任务栏上的图标</strong>，将会出现<strong>已经运行的程序窗口</strong>，而不是另行再运行一次程序的状态。<br />处于理想状态的好处是，相当于<strong>在运行时，锁定在任务栏的缺点被避免了</strong>。</p><p>这是什么意思呢？以腾讯QQ为例，当把腾讯QQ锁定在任务栏上后，点击腾讯QQ，将会运行并打开QQ登录界面。<br />这时输入账号密码登录，在登录完成后，点击QQ，依然打开的是QQ登录界面。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722175337.png" alt="" /></p><p>再以360安全浏览器为例，将360安全浏览器锁定在任务栏上后，点击它，将会运行并打开，当我再次点击时，它打开的是我已经打开的界面。</p><p>如果你还是很难明白上面的举例，那只需要知道，在点击运行之后，下方应显示一条亮横线。如图中的蓝色亮横线。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200704212859.png" alt="" /></p><h3 id="示例我的应用-2"><a class="markdownIt-Anchor" href="#示例我的应用-2"></a> 示例：我的应用</h3><p>在我的计算机上，我设置的该类应用：</p><ul><li>文件资源管理器</li><li>360安全浏览器（其他浏览器当然也可以……）</li></ul><p>当然，适合这种情况的应用还有很多。你可以根据自己的实际情况来进行配置。</p><h2 id="偶尔启动项"><a class="markdownIt-Anchor" href="#偶尔启动项"></a> 偶尔启动项</h2><p><strong>偶尔启动项</strong>，我将其描述为<strong>正在进行工作时，出于一时的需求需要启动的应用程序</strong>。这种场景其实也有很多。<br />例如——</p><ul><li>正在进行编写文档的工作，为了确定自己的工作节奏，查看一下今天的日程安排。</li><li>正在写英语论文，一时需要查询一个单词。</li><li>正在浏览网页，看到有价值的内容想记录在word文档中。</li><li>正在做PPT的时候，临时对某个图片使用PS进行处理。</li><li>正在敲代码，一时需要打开一个word文档查看需求。</li><li>正在写markdown文档，为插入图片，打开图床工具。</li><li>正在使用PR进行剪辑，一时需要使用AU为音频进行处理。</li></ul><p>最典型的就是<strong>打开计算器</strong>，<strong>打开画图</strong>，<strong>打开文本文档</strong>了。</p><p>对于<strong>偶尔启动项</strong>，通常的情况为 <em>ABA</em>。<br />即正在进行A任务时，突然进行B任务，待B任务进行完毕后，再恢复A任务。</p><p>因此显然，对管理方法有如下要求：</p><ul><li>实行起来快速且高效</li><li>对工作思路的干扰小</li></ul><p>第一点不难理解。我来着重提一下第二点。因为B的插入对A这个任务产生了中断，如果想让这个中断对A任务的思路延续性影响最小的话，应该做到<strong>进行B任务时前后处理时间短</strong>或<strong>进行B任务时屏幕内容变化不大</strong>。这个B任务往往很少符合前一点，但是对于后一点，我想绝大多数人使用QQ回复聊天时，一定是窗口化的，而不是最大化的。因为窗口化的B界面只需要直接关掉就好了，或者再点击回A界面就能延续任务。</p><p>而不少人使用的<strong>切到桌面</strong>→<strong>找到软件并双击运行</strong>→<strong>还原工作界面</strong>，这个流程的前后处理时间不短，而且屏幕内容变化极大，主要就是花在了<strong>还原工作界面</strong>这个过程中。而且鼠标或键盘需要连续操作。</p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722184308.png" alt="" /></p><h3 id="管理方法-2"><a class="markdownIt-Anchor" href="#管理方法-2"></a> 管理方法</h3><p>我推荐的是，Windows开始菜单。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722184443.png" alt="" /></p><p>首先Windows菜单只需要占用一半不到的屏幕，对<strong>屏幕内容变化</strong>影响极小，其次整个动作只需要<strong>按Win键打开菜单</strong>→<strong>点击程序运行</strong>，鼠标或键盘只需要操作两到三下即可完成。</p><h3 id="示例我的应用-3"><a class="markdownIt-Anchor" href="#示例我的应用-3"></a> 示例：我的应用</h3><p>在我的计算机上，我设置的该类应用：</p><ul><li>……</li><li>上面都发图了……</li><li>自己看吧……</li></ul><h2 id="非必定启动项"><a class="markdownIt-Anchor" href="#非必定启动项"></a> 非必定启动项</h2><p>这些没有什么值得好说的了。<br />我是把他们放在桌面上或者桌面上的文件夹。<br />即，下面这张图片。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200722172753.png" alt="" /></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;引言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#引言&quot;&gt;&lt;/a&gt; 引言&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;Windows&lt;/code&gt;作为广泛地被使用的个人计算机操作系统，在学习和工作中发挥着举足轻重的作用。但是，就我身边的人而言，大家似
      
    
    </summary>
    
    
      <category term="其他" scheme="https://zoruasama.gitee.io/categories/%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="操作系统" scheme="https://zoruasama.gitee.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="Windows" scheme="https://zoruasama.gitee.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 02. 有趣的数据结构们</title>
    <link href="https://zoruasama.gitee.io/2020/07/21/training_1/"/>
    <id>https://zoruasama.gitee.io/2020/07/21/training_1/</id>
    <published>2020-07-21T11:30:00.000Z</published>
    <updated>2020-09-05T13:20:25.626Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><h1 id="总述"><a class="markdownIt-Anchor" href="#总述"></a> 总述</h1><p>2020年7月21日。今天主要讲了一些Python比之其他编程语言特有的一些数据结构。<br />有<span class="inline-tag green">列表</span>  <span class="inline-tag red">元组</span>  <span class="inline-tag blue">字典</span>  <span class="inline-tag yellow">集合</span>。</p><p>他们之中有共同点，也有差异。重点把握<strong>列表</strong>和<strong>字典</strong>即可。</p><h1 id="列表"><a class="markdownIt-Anchor" href="#列表"></a> 列表</h1><div class="snote idea yellow">定义：一个有序的，可修改的，元素以逗号分割的，以中括号包裹的，元素可以是任何数据类型的序列。</div><p>创建一个列表，只要把<strong>逗号分隔</strong>的各个数据项使用方括号括起来即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">thislist = [<span class="string">'Zorua'</span>, <span class="string">'Blog'</span>, <span class="number">2000</span>, <span class="number">2020</span>]</span><br><span class="line">emptylist = [ ] <span class="comment">#空列表</span></span><br></pre></td></tr></table></figure><p>除此以外，也可以使用<code>list</code>函数来创建列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">thislist = list((<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="number">123</span>)) <span class="comment">#参数是元组</span></span><br></pre></td></tr></table></figure><p><code>list</code>函数中的参数应是一个<strong>可迭代的对象</strong>，例如字符串、元组等等。<code>list</code>函数将<strong>可迭代对象的元素</strong>重新返回为列表。</p><ul><li>将字典类型的数据作为参数时，返回的是<strong>字典的键</strong>（后文会提及）。</li><li>将<code>range()</code>函数作为参数，返回的是一个整数元素的列表。</li><li>无参数时，返回的是一个空列表。</li></ul><h2 id="访问列表中的值"><a class="markdownIt-Anchor" href="#访问列表中的值"></a> 访问列表中的值</h2><p>列表同样也可以像字符串一样使用<strong>索引</strong>/<strong>切片</strong>来访问其中的值。规则大致相同，可以参考<a href="https://zoruasama.gitee.io/2020/07/20/training_0/">前章内容</a>。<br />以下是示例。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">thislist = [<span class="string">'Zorua'</span>,<span class="string">'Blog'</span>,<span class="number">2000</span>,<span class="number">2020</span>]</span><br><span class="line">print(thislist[<span class="number">0</span>])     <span class="comment">#输出结果为 Zorua</span></span><br><span class="line">print(thislist[<span class="number">0</span>:<span class="number">1</span>])   <span class="comment">#输出结果为 ['Zorua']，这是仅有一个元素的列表</span></span><br><span class="line">print(thislist[<span class="number">0</span>:<span class="number">2</span>])   <span class="comment">#输出结果为 ['Zorua','Blog']</span></span><br></pre></td></tr></table></figure><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802222219.png" alt="" /><br />上图的示例是创建了一个0-39整数的列表，然后以<code>step=2</code>来切分出了其中的偶数。</p><h2 id="更新列表"><a class="markdownIt-Anchor" href="#更新列表"></a> 更新列表</h2><p>列表的数据项可以被修改，或添加删除。</p><h3 id="更新列表项"><a class="markdownIt-Anchor" href="#更新列表项"></a> 更新列表项</h3><p>接续前文的0-39整数列表示例。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">thislist[<span class="number">0</span>:<span class="number">9</span>:<span class="number">2</span>]=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>] <span class="comment">#thislist[0:9:2]原来是[0,2,4,6,8]</span></span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1, 1, 1, 3, 1, 5, 1, 7, 1, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]</span></span><br><span class="line"><span class="comment">#注意到里面仅修改了其中的五个位置。</span></span><br><span class="line">thislist[<span class="number">39</span>]=<span class="number">1000</span></span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1, 1, 1, 3, 1, 5, 1, 7, 1, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 1000]</span></span><br></pre></td></tr></table></figure><h3 id="添加列表项"><a class="markdownIt-Anchor" href="#添加列表项"></a> 添加列表项</h3><h4 id="append"><a class="markdownIt-Anchor" href="#append"></a> append</h4><p><span class="inline-tag green">作用</span>  在列表的尾端加入一个新的元素。<br /><span class="inline-tag green">使用方法</span>  <code>listname.append(elem)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">thislist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#注意这里的列表变成了 [1,2,3,[1,2,3,4,5,6]]实际上是列表中嵌套了一个作为元素的列表</span></span><br><span class="line"><span class="comment">#而不是加入了多个元素</span></span><br><span class="line"><span class="comment">#append还是只能加入一个元素</span></span><br><span class="line">thislist.append(<span class="number">1123</span>)</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#在最末尾又添加了一个新的元素，1123。</span></span><br><span class="line"><span class="comment">#输出结果为[1,2,3,[1,2,3,4,5,6],1123]</span></span><br></pre></td></tr></table></figure><h4 id="insert"><a class="markdownIt-Anchor" href="#insert"></a> insert</h4><p><span class="inline-tag green">作用</span>  在列表的指定位置后加入一个新的元素。<br /><span class="inline-tag green">使用方法</span>  <code>listname.insert(position,elem)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">thislist.insert(<span class="number">1</span>,<span class="number">123</span>)</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1,2,123,3]</span></span><br></pre></td></tr></table></figure><h4 id="extend"><a class="markdownIt-Anchor" href="#extend"></a> extend</h4><p>之前在<code>append</code>尝试加入多个元素失败后，其实加入多个元素应该使用<code>extend</code>。<br /><span class="inline-tag green">作用</span>  在列表的尾端拼接一个列表。<br /><span class="inline-tag green">使用方法</span>  <code>listname.extend(listname2)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">thislist.extend([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为[1,2,3,1,2,3,4]</span></span><br></pre></td></tr></table></figure><p>除了可以使用<code>extend</code>来拼接列表以外，使用语句<code>thislist = thislist + [1,2,3,4]</code>同样也能达到上述代码的效果。</p><h3 id="删除列表项"><a class="markdownIt-Anchor" href="#删除列表项"></a> 删除列表项</h3><p>可以使用<code>del</code>函数来删除列表项。<br />如下示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">thislist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">del</span> thislist[<span class="number">1</span>]</span><br><span class="line">print(thislist)</span><br><span class="line"><span class="comment">#输出结果为 [1,3]</span></span><br></pre></td></tr></table></figure><p>此外，也可以使用list对象的方法<code>pop(index=-1)</code>来删除。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">thislist.pop()     <span class="comment">#参数缺省值为-1，因此会删除列表最后一个元素</span></span><br><span class="line">thislist.pop(<span class="number">1</span>)   <span class="comment">#和上面的del示例代码一样，删除第二个元素</span></span><br></pre></td></tr></table></figure><h2 id="列表推导式"><a class="markdownIt-Anchor" href="#列表推导式"></a> 列表推导式</h2><p>这是Python中很棒的一个语法糖。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><div class="snote msg cyan">语法结构：<code>out_list = [out_express for out_express in input_list if out_express_condition]</code></div>例如要生成一个偶数的list。由于至此为止，我的实训日志还没有讲解到Python的循环，因此下面我们试着用C语言来实现**外面的循环结构**。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;= <span class="number">10</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">         thislist.append(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样一来，总是需要一个多行的结构。<br />而使用列表推导式的话：<code>[i for i in range(10) if i % 2 == 0]</code>，只需要一行。<br />当然，为了增加代码可读性，可以为上式断行。(Python允许在中括号、花括号之间断行)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">result = [</span><br><span class="line">    i</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><hr /><p>其他示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#交换字典的value和key。</span></span><br><span class="line">changed = &#123;value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> input_dict.items()&#125;</span><br><span class="line"><span class="comment">#用一个列表的所有单词的首字母生成一个集合。</span></span><br><span class="line">chars = &#123;w[<span class="number">0</span>] <span class="keyword">for</span> w <span class="keyword">in</span> words_list&#125;</span><br></pre></td></tr></table></figure><h2 id="列表常见函数与方法"><a class="markdownIt-Anchor" href="#列表常见函数与方法"></a> 列表常见函数与方法</h2><p>以下内容援引自菜鸟教程。</p><details red><summary> <p>列表常见函数与方法</p> </summary>              <div class='content'>              <table><thead><tr><th>序号</th><th>函数</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.runoob.com/python3/python3-att-list-len.html" target="_blank" rel="noopener">len(list)</a>  列表元素个数</td></tr><tr><td>2</td><td><a href="https://www.runoob.com/python3/python3-att-list-max.html" target="_blank" rel="noopener">max(list)</a>  返回列表元素最大值</td></tr><tr><td>3</td><td><a href="https://www.runoob.com/python3/python3-att-list-min.html" target="_blank" rel="noopener">min(list)</a>  返回列表元素最小值</td></tr><tr><td>4</td><td><a href="https://www.runoob.com/python3/python3-att-list-list.html" target="_blank" rel="noopener">list(seq)</a>  将元组转换为列表</td></tr></tbody></table><table><thead><tr><th>序号</th><th>方法</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.runoob.com/python3/python3-att-list-append.html" target="_blank" rel="noopener">list.append(obj)</a>  在列表末尾添加新的对象</td></tr><tr><td>2</td><td><a href="https://www.runoob.com/python3/python3-att-list-count.html" target="_blank" rel="noopener">list.count(obj)</a>  统计某个元素在列表中出现的次数</td></tr><tr><td>3</td><td><a href="https://www.runoob.com/python3/python3-att-list-extend.html" target="_blank" rel="noopener">list.extend(seq)</a>  在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表）</td></tr><tr><td>4</td><td><a href="https://www.runoob.com/python3/python3-att-list-index.html" target="_blank" rel="noopener">list.index(obj)</a>  从列表中找出某个值第一个匹配项的索引位置</td></tr><tr><td>5</td><td><a href="https://www.runoob.com/python3/python3-att-list-insert.html" target="_blank" rel="noopener">list.insert(index, obj)</a>  将对象插入列表</td></tr><tr><td>6</td><td><a href="https://www.runoob.com/python3/python3-att-list-pop.html" target="_blank" rel="noopener">list.pop([index=-1])</a>  移除列表中的一个元素（默认最后一个元素），并且返回该元素的值</td></tr><tr><td>7</td><td><a href="https://www.runoob.com/python3/python3-att-list-remove.html" target="_blank" rel="noopener">list.remove(obj)</a>  移除列表中某个值的第一个匹配项</td></tr><tr><td>8</td><td><a href="https://www.runoob.com/python3/python3-att-list-reverse.html" target="_blank" rel="noopener">list.reverse()</a>  反向列表中元素</td></tr><tr><td>9</td><td><a href="https://www.runoob.com/python3/python3-att-list-sort.html" target="_blank" rel="noopener">list.sort( key=None, reverse=False)</a>  对原列表进行排序</td></tr><tr><td>10</td><td><a href="https://www.runoob.com/python3/python3-att-list-clear.html" target="_blank" rel="noopener">list.clear()</a>  清空列表</td></tr><tr><td>11</td><td><a href="https://www.runoob.com/python3/python3-att-list-copy.html" target="_blank" rel="noopener">list.copy()</a>  复制列表</td></tr></tbody></table>              </div>            </details><h1 id="元组"><a class="markdownIt-Anchor" href="#元组"></a> 元组</h1><div class="snote idea yellow">定义：一个有序的，不可修改的，元素以逗号分割的，以小括号包裹，元素可以是任何数据类型的序列。</div><p>创建一个元组，和创建一个列表差不多。只要把<strong>逗号分隔</strong>的各个数据项使用小括号括起来即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">thistuple = (<span class="string">'Zorua'</span>, <span class="string">'Blog'</span>, <span class="number">2000</span>, <span class="number">2020</span>)</span><br><span class="line">thistuple = <span class="string">'Zorua'</span>, <span class="string">'Blog'</span>, <span class="number">2000</span>, <span class="number">2020</span> <span class="comment">#其实不需要括号也是可以的哦</span></span><br><span class="line">emptytuple = () <span class="comment">#创建空元组</span></span><br><span class="line">tup1 = (<span class="number">1</span>)   <span class="comment">#注意，这样写的话，tup1是整数型变量。</span></span><br><span class="line">tup2 = (<span class="number">1</span>,)  <span class="comment">#而加了一个逗号，编译器才会认为tup2是只有一个元素的元组</span></span><br></pre></td></tr></table></figure><p>除此以外，也可以使用<code>tuple</code>函数来创建元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">thistuple = tuple((<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="number">123</span>)) <span class="comment">#参数是元组</span></span><br></pre></td></tr></table></figure><p><code>tuple</code>函数中的参数应是一个<strong>可迭代的对象</strong>，例如字符串、元组等等。<code>tuple</code>函数将<strong>可迭代对象的元素</strong>重新返回为元组。<br /><s>类似的话前面说过一次了……</s></p><ul><li>将字典类型的数据作为参数时，返回的是<strong>字典的键</strong>（后文会提及）。</li><li>将<code>range()</code>函数作为参数，返回的是一个整数元素的元组。</li><li>无参数时，返回的是一个空元组。</li></ul><h2 id="访问元组中的值"><a class="markdownIt-Anchor" href="#访问元组中的值"></a> 访问元组中的值</h2><p>这块内容和上面<strong>列表</strong>的差不多。不再赘述。</p><h2 id="修改元组"><a class="markdownIt-Anchor" href="#修改元组"></a> 修改元组</h2><p>前面的定义说了，元组<strong>不给改</strong>的嗷。<br />但是可以通过类似于列表的<code>+</code>来扩展元组。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">tup2 = (<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>)</span><br><span class="line">tup3 = tup1 + tup2</span><br><span class="line">print(tup3)</span><br><span class="line"><span class="comment">#输出内容为 (1,2,3,'1','2','3')</span></span><br></pre></td></tr></table></figure><h2 id="元组常见函数"><a class="markdownIt-Anchor" href="#元组常见函数"></a> 元组常见函数</h2><p>以下内容援引自菜鸟教程。</p><details red><summary> <p>元组常见函数</p> </summary>              <div class='content'>              <table><thead><tr><th>序号</th><th>方法及描述</th></tr></thead><tbody><tr><td>1</td><td>len(tuple)  计算元组元素个数。</td></tr><tr><td>2</td><td>max(tuple)  返回元组中元素最大值。</td></tr><tr><td>3</td><td>min(tuple)  返回元组中元素最小值。</td></tr><tr><td>4</td><td>tuple(iterable)  将可迭代系列转换为元组。</td></tr></tbody></table>              </div>            </details><h1 id="字典"><a class="markdownIt-Anchor" href="#字典"></a> 字典</h1><div class="snote idea yellow">定义：一个无序的，可修改的，元素以键值对呈现，以花括号包裹，键和值可以是任何数据类型的序列。</div><ul><li>键：就是存的值的编号</li><li>值：就是要存放的数据<br />由上可知，<strong>键肯定是唯一的，且不可变的</strong>。<br />创建一个字典时，字典的每个键值(key=&gt;value)对用冒号<code>:</code>分割，每个对之间用逗号<code>,</code>分割，整个字典包括在花括号<code>{ }</code>中。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="访问字典里的值"><a class="markdownIt-Anchor" href="#访问字典里的值"></a> 访问字典里的值</h2><p>把相应的键放入到方括号中即可访问字典里的值，如下示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line"><span class="keyword">print</span> (dict[<span class="string">'name'</span>])  <span class="comment">#输出 Zorua</span></span><br><span class="line"><span class="keyword">print</span> (dict[<span class="string">'class'</span>]) <span class="comment">#输出 5</span></span><br></pre></td></tr></table></figure><h2 id="更新字典"><a class="markdownIt-Anchor" href="#更新字典"></a> 更新字典</h2><h3 id="更新字典项"><a class="markdownIt-Anchor" href="#更新字典项"></a> 更新字典项</h3><p>在上面<strong>访问字典里的值的基础上，加一个赋值</strong>即可。<br />即：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line">dict[<span class="string">'hobby'</span>] = <span class="string">'manga'</span></span><br><span class="line"><span class="keyword">print</span> (dict[<span class="string">'hobby'</span>])  <span class="comment">#输出 manga</span></span><br></pre></td></tr></table></figure><h3 id="新增字典项"><a class="markdownIt-Anchor" href="#新增字典项"></a> 新增字典项</h3><p>虽然说，在<strong>访问字典里的值</strong>里，如果填写的键是不存在的键，则会出错。<br />但是在新增字典项里，在<strong>刚刚的基础上，加一个赋值</strong>即可。示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line">dict[<span class="string">'age'</span>] = <span class="number">20</span></span><br><span class="line"><span class="keyword">print</span> (dict)  <span class="comment">#输出 &#123; 'name':'Zorua','class':5,'hobby':'game','age':20&#125;</span></span><br></pre></td></tr></table></figure><h3 id="删除字典项"><a class="markdownIt-Anchor" href="#删除字典项"></a> 删除字典项</h3><p>删除字典中的一个键值对，可以用<code>del dict[key]</code>来实现。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line"><span class="keyword">del</span> dict[<span class="string">'class'</span>]</span><br><span class="line"><span class="keyword">print</span> (dict)  <span class="comment">#输出 &#123; 'name':'Zorua','hobby':'game'&#125;</span></span><br></pre></td></tr></table></figure><p>如果要删除整个字典，可以用<code>del dict</code>。<br />如果要清空字典，可以用<code>dict.clear()</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br><span class="line">dict.clear()</span><br><span class="line"><span class="keyword">print</span> (dict)  <span class="comment">#输出 &#123; &#125;</span></span><br></pre></td></tr></table></figure><h2 id="字典常见函数与方法"><a class="markdownIt-Anchor" href="#字典常见函数与方法"></a> 字典常见函数与方法</h2><p>以下内容援引自菜鸟教程。</p><details red><summary> <p>字典常见函数与方法</p> </summary>              <div class='content'>              <table><thead><tr><th>序号</th><th>函数及描述</th></tr></thead><tbody><tr><td>1</td><td>len(dict)  计算字典元素个数，即键的总数。</td></tr><tr><td>2</td><td>str(dict)  输出字典，以可打印的字符串表示。</td></tr><tr><td>3</td><td>type(variable)  返回输入的变量类型，如果变量是字典就返回字典类型。</td></tr></tbody></table><table><thead><tr><th>序号</th><th>函数及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-clear.html" target="_blank" rel="noopener">radiansdict.clear()</a>  删除字典内所有元素</td></tr><tr><td>2</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-copy.html" target="_blank" rel="noopener">radiansdict.copy()</a>  返回一个字典的浅复制</td></tr><tr><td>3</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-fromkeys.html" target="_blank" rel="noopener">radiansdict.fromkeys()</a>  创建一个新字典，以序列seq中元素做字典的键，val为字典所有键对应的初始值</td></tr><tr><td>4</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-get.html" target="_blank" rel="noopener">radiansdict.get(key, default=None)</a>  返回指定键的值，如果键不在字典中返回 default 设置的默认值</td></tr><tr><td>5</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-in.html" target="_blank" rel="noopener">key in dict</a>  如果键在字典dict里返回true，否则返回false</td></tr><tr><td>6</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-items.html" target="_blank" rel="noopener">radiansdict.items()</a>  以列表返回可遍历的(键, 值) 元组数组</td></tr><tr><td>7</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-keys.html" target="_blank" rel="noopener">radiansdict.keys()</a>  返回一个迭代器，可以使用 list() 来转换为列表</td></tr><tr><td>8</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-setdefault.html" target="_blank" rel="noopener">radiansdict.setdefault(key, default=None)</a>  和get()类似, 但如果键不存在于字典中，将会添加键并将值设为default</td></tr><tr><td>9</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-update.html" target="_blank" rel="noopener">radiansdict.update(dict2)</a>  把字典dict2的键/值对更新到dict里</td></tr><tr><td>10</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-values.html" target="_blank" rel="noopener">radiansdict.values()</a>  返回一个迭代器，可以使用 list() 来转换为列表</td></tr><tr><td>11</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-pop.html" target="_blank" rel="noopener">pop(key[,default])</a>  删除字典给定键 key 所对应的值，返回值为被删除的值。key值必须给出。 否则，返回default值。</td></tr><tr><td>12</td><td><a href="https://www.runoob.com/python3/python3-att-dictionary-popitem.html" target="_blank" rel="noopener">popitem()</a>  随机返回并删除字典中的最后一对键和值。</td></tr></tbody></table>              </div>            </details><h1 id="集合"><a class="markdownIt-Anchor" href="#集合"></a> 集合</h1><div class="snote idea yellow">定义：一个无序的，可修改的，无重复的，以花括号包裹，元素可以是任何数据类型的序列。</div><div class="snote error">但是集合中的元素须是可哈希的类型。前面说的列表、字典还有集合本身不能作为元素(元组可以)。</div><p>这个定义和数学上对集合的定义差不多，但是Python中当然没有无限集合。<br />可以使用大括号 <code>{ }</code> 或者 <code>set()</code> 函数创建集合。</p><div class="snote error">注意：创建一个空集合必须用<code>set()</code>而不是<code>{ }</code>，因为<code>{ }</code> 是用来创建一个空字典。</div><p>例如下面的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">thisset = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">print(thisset) <span class="comment">#输出结果为 &#123;1,2,3,4&#125; 由此可见，集合里的元素不能重复</span></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">thisset = set((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure><p><code>set</code>函数中的参数应是一个<strong>可迭代的对象</strong>，例如字符串、元组等等。<code>set</code>函数将<strong>可迭代对象的元素</strong>重新返回为元组。<br /><s>类似的话前面说过两次了……</s></p><p>集合中还可以分为可变集合和<strong>不可变集合(frozenset)</strong>。使用<code>frozenset</code>函数来创建时，会返回一个冻结的集合，冻结后集合不能再添加或删除任何元素。</p><h2 id="集合的运算"><a class="markdownIt-Anchor" href="#集合的运算"></a> 集合的运算</h2><p>数学上定义的集合可以进行并集、交集、差集等等运算，Python中的集合也可以。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">b = &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line">print(a | b)  <span class="comment">#a或b都包含的元素, 即a并b, 结果为&#123;1,2,3,4,5,6,7&#125;</span></span><br><span class="line">print(a &amp; b)  <span class="comment">#a和b都包含的元素, 即a交b, 结果为&#123;4,5&#125;</span></span><br><span class="line">print(a ^ b)  <span class="comment">#不同时包含于a和b的元素, 即对称差集, 结果为&#123;1,2,3,6,7&#125;</span></span><br><span class="line">print(a - b)  <span class="comment">#在a中但不在b中的元素, 即a对b的差集, 结果为&#123;1,2,3&#125;</span></span><br></pre></td></tr></table></figure><h2 id="更新集合"><a class="markdownIt-Anchor" href="#更新集合"></a> 更新集合</h2><h3 id="添加元素"><a class="markdownIt-Anchor" href="#添加元素"></a> 添加元素</h3><p>语法格式为：<code>setname.add(elem)</code><br />例如下面这个例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lang = &#123;<span class="string">'java'</span>,<span class="string">'python'</span>,<span class="string">'ruby'</span>&#125;</span><br><span class="line">lang.add(<span class="string">'c/c++'</span>)</span><br><span class="line">print(lang)</span><br><span class="line"><span class="comment"># 输出结果为 &#123;'java','python','ruby','c/c++'&#125;</span></span><br></pre></td></tr></table></figure><hr /><p>除了用<code>add()</code>以外，也可以用<code>update()</code>。<br />语法格式为：<code>setname.update(elem)</code>。update的参数可以为列表，元组，字典等。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lang = &#123;<span class="string">'java'</span>,<span class="string">'python'</span>,<span class="string">'ruby'</span>&#125;</span><br><span class="line">lang.update([<span class="string">'c'</span>,<span class="string">'c++'</span>])</span><br><span class="line">print(lang)</span><br><span class="line"><span class="comment"># 输出结果为 &#123;'java','python','ruby','c','c++'&#125;</span></span><br><span class="line"><span class="comment"># 注意, 这里的结果并不是 &#123;'java','python','ruby',['c','c++']&#125;</span></span><br></pre></td></tr></table></figure><h3 id="删除元素"><a class="markdownIt-Anchor" href="#删除元素"></a> 删除元素</h3><p>语法格式为：<code>setname.remove(elem)</code>，使用这个方法时，如果元素不存在，将发生错误。如果想避免这种情况，可以使用<code>setname.discard(elem)</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lang = &#123;<span class="string">'java'</span>,<span class="string">'python'</span>,<span class="string">'ruby'</span>&#125;</span><br><span class="line">lang.remove(<span class="string">'python'</span>)</span><br><span class="line">print(lang)</span><br><span class="line"><span class="comment"># 输出结果为 &#123;'java','ruby'&#125;</span></span><br></pre></td></tr></table></figure><hr /><p>随机删除一个集合中的元素，可以使用<code>setname.pop()</code></p><h2 id="集合常见方法"><a class="markdownIt-Anchor" href="#集合常见方法"></a> 集合常见方法</h2><p>以下内容援引自菜鸟教程。</p><details red><summary> <p>元组常见函数</p> </summary>              <div class='content'>              <table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/python3/ref-set-add.html" target="_blank" rel="noopener">add()</a></td><td>为集合添加元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-clear.html" target="_blank" rel="noopener">clear()</a></td><td>移除集合中的所有元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-copy.html" target="_blank" rel="noopener">copy()</a></td><td>拷贝一个集合</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-difference.html" target="_blank" rel="noopener">difference()</a></td><td>返回多个集合的差集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-difference_update.html" target="_blank" rel="noopener">difference_update()</a></td><td>移除集合中的元素，该元素在指定的集合也存在。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-discard.html" target="_blank" rel="noopener">discard()</a></td><td>删除集合中指定的元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-intersection.html" target="_blank" rel="noopener">intersection()</a></td><td>返回集合的交集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-intersection_update.html" target="_blank" rel="noopener">intersection_update()</a></td><td>返回集合的交集。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-isdisjoint.html" target="_blank" rel="noopener">isdisjoint()</a></td><td>判断两个集合是否包含相同的元素，如果没有返回 True，否则返回 False。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-issubset.html" target="_blank" rel="noopener">issubset()</a></td><td>判断指定集合是否为该方法参数集合的子集。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-issuperset.html" target="_blank" rel="noopener">issuperset()</a></td><td>判断该方法的参数集合是否为指定集合的子集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-pop.html" target="_blank" rel="noopener">pop()</a></td><td>随机移除元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-remove.html" target="_blank" rel="noopener">remove()</a></td><td>移除指定元素</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-symmetric_difference.html" target="_blank" rel="noopener">symmetric_difference()</a></td><td>返回两个集合中不重复的元素集合。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-symmetric_difference_update.html" target="_blank" rel="noopener">symmetric_difference_update()</a></td><td>移除当前集合中在另外一个指定集合相同的元素，并将另外一个指定集合中不同的元素插入到当前集合中。</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-union.html" target="_blank" rel="noopener">union()</a></td><td>返回两个集合的并集</td></tr><tr><td><a href="https://www.runoob.com/python3/ref-set-update.html" target="_blank" rel="noopener">update()</a></td><td>给集合添加元素</td></tr></tbody></table>              </div>            </details><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>参考资料：<a href="https://www.cnblogs.com/amiza/p/10159293.html" target="_blank" rel="noopener">https://www.cnblogs.com/amiza/p/10159293.html</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://use.fontawesome.com/releases/v5.0.13/css/all.css&quot;&gt;
&lt;h1 id=&quot;总述&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#总述&quot;&gt;
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>实训日记 | Day 01. Hello Python.</title>
    <link href="https://zoruasama.gitee.io/2020/07/20/training_0/"/>
    <id>https://zoruasama.gitee.io/2020/07/20/training_0/</id>
    <published>2020-07-20T11:30:00.000Z</published>
    <updated>2020-09-27T13:31:09.378Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p>2020年7月20日，实训开始了。<br />这个日记系列将用于记录我在这一个月内的成长与收获。由于一天的工作量很大，很难再安排时间进行整理😂。<br />先说说这个实训相关的一些情况叭。</p><div class="tabs" id="tab-id"><ul class="nav-tabs"><li class="tab active"><a href="#tab-id-1">日程安排</a></li><li class="tab"><a href="#tab-id-2">使用到的工具</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>7月20日到8月14日，周末正常休息。</p><table><thead><tr><th style="text-align:center">节次</th><th style="text-align:center">时间</th></tr></thead><tbody><tr><td style="text-align:center">1–2节</td><td style="text-align:center">🕣 8:30–10:00</td></tr><tr><td style="text-align:center">3–4节</td><td style="text-align:center">🕙 10:15–11:45</td></tr><tr><td style="text-align:center">5–6节</td><td style="text-align:center">🕜 13:30–15:00</td></tr><tr><td style="text-align:center">7–8节</td><td style="text-align:center">🕞15:15–16:45</td></tr></tbody></table></div><div class="tab-pane" id="tab-id-2"><p><span class="inline-tag green">Python 3.7.4</span><br /><span class="inline-tag green">Pycharm</span><br /><span class="inline-tag yellow">Navicat</span><br /><span class="inline-tag red">腾讯QQ</span><br /><span class="inline-tag blue">腾讯会议 WeMeet</span></p></div></div></div><h1 id="什么是python"><a class="markdownIt-Anchor" href="#什么是python"></a> 什么是Python</h1><blockquote><p>以下内容援引自<strong>百度百科</strong>。<br />Python是一种跨平台的计算机程序设计语言。 是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。最初被设计用于编写自动化脚本(shell)，随着版本的不断更新和语言新功能的添加，越多被用于独立的、大型项目的开发。<br />Python是一种解释型脚本语言，可以应用于以下领域：</p><ul><li>Web 和 Internet开发</li><li>科学计算和统计</li><li>人工智能</li><li>桌面界面开发</li><li>软件开发</li><li>后端开发</li><li>网络爬虫</li></ul></blockquote><blockquote><p>以下内容援引自<strong>菜鸟教程</strong>。<br />Python 是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。<br />Python 的设计具有很强的可读性，相比其他语言经常使用英文关键字，其他语言的一些标点符号，它具有比其他语言更有特色语法结构。</p><ul><li>Python 是一种解释型语言： 这意味着开发过程中没有了编译这个环节。类似于PHP和Perl语言。</li><li>Python 是交互式语言： 这意味着，您可以在一个 Python 提示符 <code>&gt;&gt;&gt;</code> 后直接执行代码。</li><li>Python 是面向对象语言: 这意味着Python支持面向对象的风格或代码封装在对象的编程技术。</li><li>Python 是初学者的语言：Python 对初级程序员而言，是一种伟大的语言，它支持广泛的应用程序开发，从简单的文字处理到 WWW 浏览器再到游戏。</li></ul></blockquote><h2 id="项目新建"><a class="markdownIt-Anchor" href="#项目新建"></a> 项目新建</h2><p>按下<code>Alt</code>+<code>INSERT</code>新建项目。<br />除了可以选择<strong>项目位置</strong>以外，还可以<strong>配置项目的解释器</strong>。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802133103.png" alt="" /><br />在文件夹下右键，<strong>新建-Python File</strong>可创建*.py文件。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802133333.png" alt="" /></p><h1 id="python文件的声明"><a class="markdownIt-Anchor" href="#python文件的声明"></a> Python文件的声明</h1><p>一般的*.py文件都会以如下的代码开头。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br></pre></td></tr></table></figure><p>这是作什么用处的呢？<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h2 id="第一行"><a class="markdownIt-Anchor" href="#第一行"></a> 第一行</h2><p>通常为<code>#!/usr/bin/env python3</code>或<code>#!/usr/bin/python</code>。<br />作用为<strong>指定解释器，增强代码可移植性</strong>。<br />必须处在第一行，用来指定本脚本用什么Interpreter来执行。<br />那么，刚刚在新建项目时已经指定了Interpreter了，为什么这里还需要呢？<br />因为有时候，我们执行*.py文件，是直接在shell里使用<code>./</code>来执行。这里的声明，就是为了这种执行提供了解释器位置。</p><h2 id="第二行"><a class="markdownIt-Anchor" href="#第二行"></a> 第二行</h2><p>通常为以下三种之一：</p><ul><li><code># coding=utf-8</code></li><li><code># coding:utf-8</code></li><li><code># -*- coding:utf-8 -*-</code></li></ul><p>声明Python文件使用UTF-8编码（无此声明时，默认为ASCII编码），以解决python2中有中文字符（包括注释中的）会报错的情况。<br />必须处在首行或第二行，格式满足正则表达式<code>^[ \t\f]*#.*?coding[:=][ \t]*([-_.a-zA-Z0-9]+)</code>即可。</p><h1 id="python语法特点"><a class="markdownIt-Anchor" href="#python语法特点"></a> Python语法特点</h1><h2 id="无需结尾符"><a class="markdownIt-Anchor" href="#无需结尾符"></a> 无需结尾符</h2><p><code>C/C++</code>和<code>Java</code>等等编程语言，每一条语句都以<code>;</code>进行结尾，Python以换行符结尾。</p><h2 id="强调缩进"><a class="markdownIt-Anchor" href="#强调缩进"></a> 强调缩进</h2><p>在<code>C/C++</code>中，代码块以<code>{ }</code>分割开，而Python中则以缩进来表示。<br />同一级的代码，缩进的空格数量应该一致。<br />例如下面两个代码，执行的结果是不一样的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Over"</span>) <span class="comment">#这个语句和if判断语句是同级的</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"Over"</span>)<span class="comment">#这个语句和输出false的语句是同级的</span></span><br></pre></td></tr></table></figure><h2 id="同一语句多行"><a class="markdownIt-Anchor" href="#同一语句多行"></a> 同一语句多行</h2><p>如果一行代码很长，影响阅读或观感，可以使用<code>\</code>来实现多行语句。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">averylongvariablename = anotherverylongvariablename + \</span><br><span class="line">wowawesomeman + \</span><br><span class="line">thatsmyveryfirsttime</span><br></pre></td></tr></table></figure><p>效果等价于<code>averylongvariablename = anotherverylongvariablename + wowawesomeman + thatsmyveryfirsttime</code><br />在<code>[ ]</code>, <code>{ }</code>,  <code>( )</code> ,<code>''' '''</code>的多行语句，不需要使用<code>\</code>就可以换行，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic1 = &#123; <span class="string">'name'</span>:<span class="string">'Zorua'</span>,</span><br><span class="line">         <span class="string">'class'</span>:<span class="number">5</span>,</span><br><span class="line">         <span class="string">'hobby'</span>:<span class="string">'game'</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="同一行多个语句"><a class="markdownIt-Anchor" href="#同一行多个语句"></a> 同一行多个语句</h2><p>由于Python不再使用<code>;</code>而是使用换行符来分割语句，因此如果想在同一行写多个语句的话，应使用<code>;</code>来进行分割。<br />例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">100</span>;i = i + <span class="number">100</span>;print(i)</span><br></pre></td></tr></table></figure><h2 id="区分大小写"><a class="markdownIt-Anchor" href="#区分大小写"></a> 区分大小写</h2><p>python中是区分大小写的，不管是<strong>变量、函数、还是类</strong>，都要严格的区分大小写。<br />例如，zorua和Zorua是两个不同的变量，name和Name也是完全不同的两个变量。</p><h1 id="标识符命名规则"><a class="markdownIt-Anchor" href="#标识符命名规则"></a> 标识符命名规则</h1><ul><li>可以以<strong>字母</strong>或下划线<code>_</code>打头。</li><li>由<strong>字母、数字、下划线</strong>组成。</li><li>标识符对大小写敏感。<br />即使在Python3中，使用中文命名也是可以的，但仍不建议这样使用(因为切换输入法挺麻烦的)。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/Snipaste_2020-08-02_13-57-26.png" alt="" /></li></ul><h1 id="关键字"><a class="markdownIt-Anchor" href="#关键字"></a> 关键字</h1><p>关键字也叫保留字，类似C语言中的<code>for``while</code>等词，不能被用于变量命名的，具有特别意义的标识符。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(keyword.kwlist)</span><br></pre></td></tr></table></figure><p>上面的代码可以输出<span class="inline-tag green">Python</span>中的关键字。<br />输出的结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'async'</span>, <span class="string">'await'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></table></figure><h1 id="注释"><a class="markdownIt-Anchor" href="#注释"></a> 注释</h1><p>不论在何种编程语言中，都有注释这一设计存在。注释可以增加代码的可阅读性；在调试代码时，注释也可被用于阻止某一代码的进行。<br />Python中的注释以<code>#</code>开头。<br />在Pycharm中，快速注释/取消注释可以使用<code>Ctrl</code>+<code>/</code>的快捷键。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以顶格写注释。</span></span><br><span class="line">print(<span class="string">'Hello, world!'</span>) <span class="comment">#也可以在代码句后写注释。</span></span><br></pre></td></tr></table></figure><p>如果需要块注释，可以使用<code>'''</code>或<code>&quot;&quot;&quot;</code>（连续三个单引号或双引号），作用等同于C/C++中的<code>/* */</code></p><h1 id="序列解包"><a class="markdownIt-Anchor" href="#序列解包"></a> 序列解包</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">i,j = <span class="number">100</span>,<span class="number">50</span></span><br><span class="line">print(i)</span><br><span class="line">print(j)</span><br></pre></td></tr></table></figure><p><code>i,j = 100,50</code>等价于<code>i=100 j=50</code><br />以此类推，还可以实现<code>i,j,k = 1,2,3</code>，<code>i,j,k=[1,2],1,(1,2)</code>等等。需要注意左右的表达式元素数量相同。</p><h1 id="输出及输入"><a class="markdownIt-Anchor" href="#输出及输入"></a> 输出及输入</h1><ul><li>输出 print()</li><li>输入 input()</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = input(<span class="string">"Please input your name:"</span>)   <span class="comment">#括号里是提示语</span></span><br><span class="line">print(<span class="string">"&#123;0&#125; &#123;1&#125;"</span>.format(name,<span class="string">"   Hello"</span>))  <span class="comment">#格式化的输出</span></span><br></pre></td></tr></table></figure><p>格式化的输出除了可以使用上述形式以外，也可以使用如下形式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"%s %s"</span> % (name,<span class="string">"   Hello"</span>))</span><br></pre></td></tr></table></figure><p>其中的<code>%s</code>为占位符。占位符的表示形式和C/C++的一样，也就是说，上述语句用C语言写就是：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"%s %s"</span>,name,<span class="string">"  Hello"</span>);</span><br></pre></td></tr></table></figure><p>不过，需要注意的是，这些格式化字符串除了能用在print语句以外，也可以在其他场合格式化字符串。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802143329.png" alt="" /><br />另外，<code>print()</code>函数也能接收多个参数来进行输出，中间会自动添加一个空格(由sep参数来指定)。</p><h2 id="不换行的输出"><a class="markdownIt-Anchor" href="#不换行的输出"></a> 不换行的输出</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200802143056.png" alt="" /><br /><code>print()</code> 函数中的<code>end</code>参数，默认为<code>\n</code>。因此每次在输出语句后，它会自动补充一个换行符。<br />如果想不换行的输出，可以将其改为<code>print(123,end='')</code>。<br />同理，如果想在每次输出后，自动补充一个空格，可以为<code>print(123,end=' ')</code>。</p><h2 id="input函数的其他用法"><a class="markdownIt-Anchor" href="#input函数的其他用法"></a> input函数的其他用法</h2><p>当你想实现如同C语言语句中的<code>system(&quot;pause&quot;)</code>（请按任意键继续）的效果时，可以键入：<br /><code>input('请按回车键继续')</code></p><h1 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h1><p>运算符号和其他编程语言大同小异。在此简要地说明一些和其他语言所有区别的。</p><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">作用</th><th style="text-align:center">示例</th></tr></thead><tbody><tr><td style="text-align:center">**</td><td style="text-align:center">幂</td><td style="text-align:center">3**2 -&gt; 9</td></tr><tr><td style="text-align:center">//</td><td style="text-align:center">取整除</td><td style="text-align:center">9//4 -&gt; 2</td></tr><tr><td style="text-align:center">in</td><td style="text-align:center">如果在指定的序列中找到值返回 True，否则返回 False。</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">is</td><td style="text-align:center">is 是判断两个标识符是不是引用自一个对象</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">:=</td><td style="text-align:center">海象运算符，可在表达式内部为变量赋值。</td><td style="text-align:center"><a href="https://www.cnblogs.com/wongbingming/p/12743802.html" target="_blank" rel="noopener">详情可以看这篇文章</a></td></tr></tbody></table><h1 id="常见的函数"><a class="markdownIt-Anchor" href="#常见的函数"></a> 常见的函数</h1><p>以下内容援引自菜鸟教程。</p><h2 id="数学函数"><a class="markdownIt-Anchor" href="#数学函数"></a> 数学函数</h2><table><thead><tr><th>函数</th><th>返回值 ( 描述 )</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/python3/python3-func-number-abs.html" target="_blank" rel="noopener">abs(x)</a></td><td>返回数字的绝对值，如abs(-10) 返回 10</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-ceil.html" target="_blank" rel="noopener">ceil(x)</a></td><td>返回数字的上入整数，如math.ceil(4.1) 返回 5</td></tr><tr><td>cmp(x, y)</td><td>如果 x &lt; y 返回 -1, 如果 x == y 返回 0, 如果 x &gt; y 返回 1。 <strong>Python 3 已废弃，使用 (x&gt;y)-(x&lt;y) 替换</strong>。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-exp.html" target="_blank" rel="noopener">exp(x)</a></td><td>返回e的x次幂(e<sup>x</sup>),如math.exp(1) 返回2.718281828459045</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-fabs.html" target="_blank" rel="noopener">fabs(x)</a></td><td>返回数字的绝对值，如math.fabs(-10) 返回10.0</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-floor.html" target="_blank" rel="noopener">floor(x)</a></td><td>返回数字的下舍整数，如math.floor(4.9)返回 4</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-log.html" target="_blank" rel="noopener">log(x)</a></td><td>如math.log(math.e)返回1.0,math.log(100,10)返回2.0</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-log10.html" target="_blank" rel="noopener">log10(x)</a></td><td>返回以10为基数的x的对数，如math.log10(100)返回 2.0</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-max.html" target="_blank" rel="noopener">max(x1, x2,…)</a></td><td>返回给定参数的最大值，参数可以为序列。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-min.html" target="_blank" rel="noopener">min(x1, x2,…)</a></td><td>返回给定参数的最小值，参数可以为序列。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-modf.html" target="_blank" rel="noopener">modf(x)</a></td><td>返回x的整数部分与小数部分，两部分的数值符号与x相同，整数部分以浮点型表示。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-pow.html" target="_blank" rel="noopener">pow(x, y)</a></td><td></td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-round.html" target="_blank" rel="noopener">round(x [,n])</a></td><td>返回浮点数 x 的四舍五入值，如给出 n 值，则代表舍入到小数点后的位数。<strong>其实准确的说是保留值将保留到离上一位更近的一端。</strong></td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-sqrt.html" target="_blank" rel="noopener">sqrt(x)</a></td><td>返回数字x的平方根。</td></tr></tbody></table><h2 id="随机数函数"><a class="markdownIt-Anchor" href="#随机数函数"></a> 随机数函数</h2><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/python3/python3-func-number-choice.html" target="_blank" rel="noopener">choice(seq)</a></td><td>从序列的元素中随机挑选一个元素，比如random.choice(range(10))，从0到9中随机挑选一个整数。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-randrange.html" target="_blank" rel="noopener">randrange ([start,] stop [,step])</a></td><td>从指定范围内，按指定基数递增的集合中获取一个随机数，基数默认值为 1</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-random.html" target="_blank" rel="noopener">random()</a></td><td>随机生成下一个实数，它在[0,1)范围内。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-seed.html" target="_blank" rel="noopener">seed([x])</a></td><td>改变随机数生成器的种子seed。如果你不了解其原理，你不必特别去设定seed，Python会帮你选择seed。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-shuffle.html" target="_blank" rel="noopener">shuffle(lst)</a></td><td>将序列的所有元素随机排序</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-uniform.html" target="_blank" rel="noopener">uniform(x, y)</a></td><td>随机生成下一个实数，它在[x,y]范围内。</td></tr></tbody></table><h3 id="三角函数"><a class="markdownIt-Anchor" href="#三角函数"></a> 三角函数</h3><h2 id="三角函数-2"><a class="markdownIt-Anchor" href="#三角函数-2"></a> 三角函数</h2><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/python3/python3-func-number-acos.html" target="_blank" rel="noopener">acos(x)</a></td><td>返回x的反余弦弧度值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-asin.html" target="_blank" rel="noopener">asin(x)</a></td><td>返回x的反正弦弧度值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-atan.html" target="_blank" rel="noopener">atan(x)</a></td><td>返回x的反正切弧度值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-atan2.html" target="_blank" rel="noopener">atan2(y, x)</a></td><td>返回给定的 X 及 Y 坐标值的反正切值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-cos.html" target="_blank" rel="noopener">cos(x)</a></td><td>返回x的弧度的余弦值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-hypot.html" target="_blank" rel="noopener">hypot(x, y)</a></td><td>返回欧几里德范数 sqrt(x*x + y*y)。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-sin.html" target="_blank" rel="noopener">sin(x)</a></td><td>返回的x弧度的正弦值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-tan.html" target="_blank" rel="noopener">tan(x)</a></td><td>返回x弧度的正切值。</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-degrees.html" target="_blank" rel="noopener">degrees(x)</a></td><td>将弧度转换为角度,如degrees(math.pi/2) ， 返回90.0</td></tr><tr><td><a href="https://www.runoob.com/python3/python3-func-number-radians.html" target="_blank" rel="noopener">radians(x)</a></td><td>将角度转换为弧度</td></tr></tbody></table><h2 id="数学常量"><a class="markdownIt-Anchor" href="#数学常量"></a> 数学常量</h2><table><thead><tr><th>常量</th><th>描述</th></tr></thead><tbody><tr><td>pi</td><td>数学常量 pi（圆周率，一般以π来表示）</td></tr><tr><td>e</td><td>数学常量 e，e即自然常数（自然常数）。</td></tr></tbody></table><h1 id="字符串"><a class="markdownIt-Anchor" href="#字符串"></a> 字符串</h1><p>定义：一个<strong>有序的</strong>，<strong>不可修改的</strong>，<strong>以引号包围</strong>的序列。<br />可以使用单引号<code>'</code>或<code>&quot;</code>创建字符串。<br />如果要创建多行的字符串，可以使用<code>'''</code>或<code>&quot;&quot;&quot;</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strHello1 = <span class="string">'Hello World!'</span></span><br><span class="line">strHello2 = <span class="string">"Hello World!"</span></span><br><span class="line">strHello3 = <span class="string">'''Hello</span></span><br><span class="line"><span class="string">World!'''</span></span><br></pre></td></tr></table></figure><h2 id="访问字符串的值"><a class="markdownIt-Anchor" href="#访问字符串的值"></a> 访问字符串的值</h2><p>Python中没有类似C语言中的char类型，即使是单个字符，也会被认为是字符串。<br />可以使用<strong>索引</strong>/<strong>切片</strong>来访问字符串的值。格式为<code>str[start:end:step]</code>，效果是左闭右开 [a,b)。<br />例如<code>str[0:3:1]</code>会从str的第一个字符取到第二个字符。<br />可以省略其中的几个参数。</p><ul><li>start缺省值为0，是起始位置。</li><li>end缺省值为字符串长度-1，是终止位置。</li><li>step缺省值为1，是间隔字符。</li><li>参数为负数时，是从右到左数的索引。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">strAlphaBet7=<span class="string">'abcdefg'</span></span><br><span class="line">print(strAlphaBet7[<span class="number">-1</span>])   <span class="comment">#1</span></span><br><span class="line">print(strAlphaBet7[<span class="number">6</span>])    <span class="comment">#2</span></span><br><span class="line">print(strAlphaBet7[<span class="number">6</span>:<span class="number">7</span>]    <span class="comment">#3</span></span><br><span class="line">print(strAlphaBet7[len(strAlphaBet7)<span class="number">-1</span>])    <span class="comment">#4</span></span><br><span class="line">print(strAlphaBet7[<span class="number">0</span>:<span class="number">3</span>:<span class="number">1</span>])    <span class="comment">#5</span></span><br><span class="line">print(strAlphaBet7[<span class="number">0</span>:<span class="number">3</span>])      <span class="comment">#6</span></span><br><span class="line">print(strAlphaBet7[<span class="number">3</span>:<span class="number">0</span>:<span class="number">-1</span>])   <span class="comment">#7</span></span><br><span class="line">print(strAlphaBet7[<span class="number">-7</span>:<span class="number">-4</span>])    <span class="comment">#8</span></span><br><span class="line">print(strAlphaBet7[<span class="number">0</span>:<span class="number">7</span>:<span class="number">2</span>])    <span class="comment">#9</span></span><br><span class="line">print(strAlphaBet7[:<span class="number">3</span>])        <span class="comment">#10</span></span><br><span class="line">print(strAlphaBet7[<span class="number">2</span>:])        <span class="comment">#11</span></span><br></pre></td></tr></table></figure><p>上面的前四行输出语句，全都可以输出字符串<code>g</code>。<br />5-8条语句，会输出字符串<code>abc</code>。<br />9-11条语句，会输出不同的内容。感兴趣的读者可以自行测试。</p><h2 id="分割字符串"><a class="markdownIt-Anchor" href="#分割字符串"></a> 分割字符串</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'123ab456ab1'</span>.split(<span class="string">'ab'</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><p>上述语句输出的结果为<code>['123','456','1']</code>。</p><ul><li>第一个参数是按照什么字符串来分割</li><li>第二个参数是分割几次。分割2次，就是分割成3部分。</li></ul><h2 id="替换字符串"><a class="markdownIt-Anchor" href="#替换字符串"></a> 替换字符串</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'aBcDabcdabcd'</span>.replace(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><p>上述语句输出的结果为<code>ABcDAbcdabcd</code>。</p><ul><li>第一个参数是原字符。</li><li>第二个参数是替换字符。</li><li>第三个参数是替换次数。</li></ul><h2 id="字符串查找"><a class="markdownIt-Anchor" href="#字符串查找"></a> 字符串查找</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strFind=<span class="string">"My name is aaabc"</span></span><br><span class="line">print(<span class="string">"the position of bc = %d"</span>%strFind.find(<span class="string">'bc'</span>))</span><br></pre></td></tr></table></figure><p>上述语句输出的结果为<code>the position of bc = 14</code>。<br /><code>find</code>函数将在字符串中找到首个匹配的字符串的起始位置。</p><h2 id="字符串计数"><a class="markdownIt-Anchor" href="#字符串计数"></a> 字符串计数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">strCount=<span class="string">"My name is aaabc"</span></span><br><span class="line">print(<span class="string">"the amount of a = %d"</span>%str5.count(<span class="string">'a'</span>))</span><br><span class="line">print(<span class="string">"the amount of aa = %d"</span>%str5.count(<span class="string">'aa'</span>))</span><br></pre></td></tr></table></figure><p>上述语句输出的结果为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">the amount of a &#x3D; 4</span><br><span class="line">the amount of aa &#x3D; 1</span><br></pre></td></tr></table></figure><p>注意，第二条计数，查找<code>aa</code>，并不会认为字符串<code>aaa</code>中存在两个<code>aa</code>。</p><h2 id="字符串位置"><a class="markdownIt-Anchor" href="#字符串位置"></a> 字符串位置</h2><p>该系列的函数可以通过填充字符来调节原字符串的位置。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'aaa'</span>.center(<span class="number">10</span>))</span><br><span class="line">print(<span class="string">'aaa'</span>.center(<span class="number">10</span>,<span class="string">'0'</span>))   <span class="comment">#居中</span></span><br><span class="line">print(<span class="string">'aaa'</span>.ljust(<span class="number">10</span>,<span class="string">'0'</span>))   <span class="comment">#居左</span></span><br><span class="line">print(<span class="string">'aaa'</span>.rjust(<span class="number">10</span>,<span class="string">'0'</span>))   <span class="comment">#居右</span></span><br></pre></td></tr></table></figure><p>输出结果为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   aaa    </span><br><span class="line">000aaa0000</span><br><span class="line">aaa0000000</span><br><span class="line">0000000aaa</span><br></pre></td></tr></table></figure><ul><li>第一个参数为参考的长度值。</li><li>第二个参数是填充字符。缺省值为空格。</li></ul><h2 id="去空格"><a class="markdownIt-Anchor" href="#去空格"></a> 去空格</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strWhitespace=<span class="string">'    abc    '</span></span><br><span class="line">print(strWhitespace.strip())  <span class="comment">#去掉两边空格</span></span><br><span class="line">print(strWhitespace.lstrip()) <span class="comment">#去掉左边空格</span></span><br><span class="line">print(strWhitespace.rstrip()) <span class="comment">#去掉右边空格</span></span><br></pre></td></tr></table></figure><h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2><p><strong>只例举了一些可能比较常用的。</strong></p><table><thead><tr><th>函数名称</th><th>功能</th></tr></thead><tbody><tr><td>lower</td><td>将字符串里的字符全变成小写</td></tr><tr><td>upper</td><td>将字符串里的字符全变成大写</td></tr><tr><td>isupper</td><td>判断字符串当中的字母是否完全是大写</td></tr><tr><td>islower</td><td>判断字符串当中的字母是否完全是小写</td></tr><tr><td>istitle</td><td>判断字符申是否满足title格式</td></tr><tr><td>isspace</td><td>判断字符串是否完全由空格组成</td></tr><tr><td>startswith</td><td>判断字符串的开头字符，也可以截取判断</td></tr><tr><td>endswith</td><td>判断字符串的结尾字符，也可以截取判断</td></tr><tr><td>isalnum</td><td>判断是否完全由字母和数字组成</td></tr><tr><td>isalpha</td><td>判断是否完全由字母组成</td></tr><tr><td>isdigit</td><td>判断是否完全由数字组成</td></tr></tbody></table><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>参考资料：<a href="https://blog.csdn.net/u010871448/article/details/96476455" target="_blank" rel="noopener">https://blog.csdn.net/u010871448/article/details/96476455</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;前言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#前言&quot;&gt;&lt;/a&gt; 前言&lt;/h1&gt;
&lt;p&gt;2020年7月20日，实训开始了。&lt;br /&gt;
这个日记系列将用于记录我在这一个月内的成长与收获。由于一天的工作量很大，很难再安排时间进行整理�
      
    
    </summary>
    
    
      <category term="实训日记" scheme="https://zoruasama.gitee.io/categories/%E5%AE%9E%E8%AE%AD%E6%97%A5%E8%AE%B0/"/>
    
    
      <category term="Python" scheme="https://zoruasama.gitee.io/tags/Python/"/>
    
      <category term="实训" scheme="https://zoruasama.gitee.io/tags/%E5%AE%9E%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络 | 4. 网络层</title>
    <link href="https://zoruasama.gitee.io/2020/05/21/network_3/"/>
    <id>https://zoruasama.gitee.io/2020/05/21/network_3/</id>
    <published>2020-05-21T05:14:00.000Z</published>
    <updated>2020-05-21T10:25:19.143Z</updated>
    
    <content type="html"><![CDATA[<h1 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h1><blockquote class="pullquote mindmap mindmap-md"><ul><li>网络层<ul><li>网络层提供的两种服务<ul><li>虚电路是逻辑连接</li><li>因特网采用的设计思路</li><li>尽最大努力交付的好处</li><li>虚电路服务与数据报服务的对比</li></ul></li><li>网际协议 IP<ul><li>虚拟互连网络<ul><li>网络互相连接起来要使用一些中间设备</li><li>网络互连使用路由器</li><li>虚拟互连网络的意义</li><li>从网络层看 IP 数据报的传送</li></ul></li><li>分类的 IP 地址<ul><li>IP 地址及其表示方法</li><li>IP 地址的编址方法</li><li>分类 IP 地址</li><li>点分十进制记法</li><li>常用的三种类别的 IP 地址</li><li>IP 地址的一些重要特点</li></ul></li><li>IP 地址与硬件地址</li><li>地址解析协议 ARP 与逆地址解析协议 RARP<ul><li>地址解析协议 ARP<ul><li>ARP 高速缓存的作用</li><li>应当注意的问题</li><li>使用 ARP 的四种典型情况</li><li>什么我们不直接使用硬件地址进行通信？</li></ul></li><li>逆地址解析协议 RARP</li></ul></li><li>IP 数据报的格式</li><li>IP 层转发分组的流程<ul><li>查找路由表</li><li>特定主机路由</li><li>默认路由(default route)</li><li>必须强调指出</li></ul></li></ul></li><li>划分子网和构造超网<ul><li>划分子网<ul><li>三级的 IP 地址</li><li>划分子网的基本思路</li><li>划分子网后变成了三级结构</li></ul></li><li>子网掩码<ul><li>默认子网掩码</li><li>子网掩码是一个重要属性</li></ul></li><li>使用子网时分组转发</li><li>无分类编址 CIDR（构造超网）<ul><li>网络前缀</li><li>IP 编址问题的演进</li><li>CIDR 最主要的特点</li></ul></li><li>无分类的两级编址<ul><li>CIDR 地址块</li><li>路由聚合</li><li>CIDR 记法的其他形式</li><li>构成超网</li><li>CIDR 地址块划分举例</li><li>最长前缀匹配</li><li>使用二叉线索查找路由表</li></ul></li></ul></li><li>网际控制报文协议 ICMP<ul><li>ICMP 报文的种类</li><li>ICMP 差错报告报文共有 5 种<ul><li>不应发送 ICMP 差错报告报文的几种情况</li><li>ICMP 询问报文有两种</li></ul></li><li>ICMP 的应用举例<ul><li>PING</li><li>Traceroute</li></ul></li></ul></li><li>因特网的路由选择协议<ul><li>有关路由选择协议的几个基本概念<ul><li>关于“最佳路由”</li><li>从路由算法的自适应性考虑</li><li>分层次的路由选择协议</li><li>自治系统 AS<ul><li>因特网有两大类路由选择协议</li></ul></li><li>因特网的路由选择协议</li></ul></li><li>内部网关协议 RIP<ul><li>工作原理<ul><li>距离</li></ul></li><li>RIP 协议的三个要点</li><li>路由表的建立<ul><li>距离向量算法</li><li>路由器之间交换信息</li></ul></li><li>RIP2 协议的报文格式<ul><li>RIP2 的报文由首部和路由部分组成</li><li>RIP 协议的优缺点</li></ul></li></ul></li><li>内部网关协议 OSPF<ul><li>OSPF 协议的基本特点</li><li>三个要点</li><li>链路状态数据库<ul><li>OSPF 的区域(area)</li><li>划分区域</li></ul></li><li>OSPF 直接用 IP 数据报传送</li><li>OSPF 的其他特点</li><li>OSPF 的五种分组类型</li><li>OSPF的基本操作</li><li>OSPF 使用的是可靠的洪泛法</li><li>OSPF 的其他特点</li><li>指定的路由器(designated router)</li></ul></li><li>外部网关协议 BGP<ul><li>BGP 使用的环境却不同</li><li>BGP 发言人</li><li>BGP 交换路由信息</li><li>BGP 发言人和自治系统 AS 的关系<ul><li>AS 的连通图举例</li><li>BGP 发言人交换路径向量</li></ul></li><li>BGP 协议的特点</li><li>BGP-4 共使用四种报文</li><li>BGP 报文具有通用的首部</li></ul></li><li>路由器的构成<ul><li>“转发”和“路由选择”的区别</li><li>输入端口对线路上收到的分组的处理</li><li>输出端口将交换结构传送来的分组发送到线路</li><li>分组丢弃</li><li>交换结构</li></ul></li></ul></li><li>IP 多播<ul><li>IP 多播的基本概念<ul><li>多播可明显地减少网络中资源的消耗</li><li>IP 多播的一些特点</li></ul></li><li>在局域网上进行硬件多播<ul><li>D 类 IP 地址与以太网多播地址的映射关系</li></ul></li><li>因特网组管理协议 IGMP 和多播路由选择协议<ul><li>IP多播需要两种协议</li><li>IGMP 使多播路由器知道多播组成员信息</li><li>IGMP 的本地使用范围</li><li>多播路由选择协议比单播路由选择协议复杂得多</li><li>网际组管理协议 IGMP<ul><li>IGMP 是整个网际协议 IP 的一个组成部分</li><li>IGMP 可分为两个阶段</li><li>IGMP 采用的一些具体措施</li></ul></li><li>多播路由选择</li><li>转发多播数据报使用的方法<ul><li>洪泛与剪除<ul><li>RPB 的要点</li></ul></li><li>反向路径广播 RPB 和剪除</li><li>隧道技术</li><li>基于核心的发现技术</li></ul></li><li>几种多播路由选择协议</li></ul></li></ul></li><li>虚拟专用网 VPN 和网络地址转换 NAT<ul><li>虚拟专用网 VPN<ul><li>RFC 1918 指明的专用地址(private address)</li><li>用隧道技术实现虚拟专用网<ul><li>内联网 intranet 和外联网 extranet（都是基于 TCP/IP 协议）</li><li>远程接入VPN</li></ul></li></ul></li><li>网络地址转换 NAT<ul><li>网络地址转换的过程</li></ul></li></ul></li></ul></li></ul></blockquote><h1 id="网络层提供的两种服务"><a class="markdownIt-Anchor" href="#网络层提供的两种服务"></a> 网络层提供的两种服务</h1><p>在计算机网络领域，网络层应该向运输层提供怎样的服务（“面向连接”还是“无连接”）曾引起了长期的争论。<br />争论焦点的实质就是：在计算机通信中，<strong>可靠交付应当由谁来负责</strong>？<strong>是网络还是端系统</strong>？<br />根据电信网的成功经验，我们选择让网络负责可靠交付。</p><ul><li><strong>面向连接</strong>的通信方式。</li><li>建立<strong>虚电路</strong>(Virtual Circuit)，以保证双方通信所需的一切网络资源。</li><li>如果再使用可靠传输的网络协议，就可使所发送的分组无差错按序到达终点。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516190359.png" alt="H1 发送给 H2 的所有分组都沿着同一条虚电路传送" /></li></ul><h2 id="虚电路是逻辑连接"><a class="markdownIt-Anchor" href="#虚电路是逻辑连接"></a> 虚电路是逻辑连接</h2><ul><li>虚电路表示这只是一条<strong>逻辑上的连接</strong>，分组都沿着这条逻辑连接按照存储转发方式传送，而并不是真正建立了一条物理连接。</li><li>请注意，电路交换的电话通信是先建立了一条<strong>真正的连接</strong>。因此分组交换的虚连接和电路交换的连接只是类似，但并不完全一样。</li></ul><h2 id="因特网采用的设计思路"><a class="markdownIt-Anchor" href="#因特网采用的设计思路"></a> 因特网采用的设计思路</h2><p>网络层向上只提供简单灵活的、<strong>无连接的</strong>、<strong>尽最大努力交付</strong>的<strong>数据报服务</strong>。<br />网络在发送分组时不需要先建立连接。每一个分组（即 IP 数据报）独立发送，与其前后的分组无关（不进行编号）。<br />网络层不提供服务质量的承诺。即所传送的分组可能出错、丢失、重复和失序（不按序到达终点），当然也不保证分组传送的时限。</p><h2 id="尽最大努力交付的好处"><a class="markdownIt-Anchor" href="#尽最大努力交付的好处"></a> 尽最大努力交付的好处</h2><ul><li>由于传输网络不提供端到端的可靠传输服务，这就使网络中的路由器可以做得比较简单，而且价格低廉（与电信网的交换机相比较）。</li><li>如果主机（即端系统）中的进程之间的通信需要是可靠的，那么就由网络的主机中的运输层负责（包括差错处理、流量控制等）。</li><li>采用这种设计思路的好处是：网络的造价大大降低，运行方式灵活，能够适应多种应用。</li><li>因特网能够发展到今日的规模，充分证明了当初采用这种设计思路的正确性。</li></ul><hr /><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516191745.png" alt="H1 发送给 H2 的分组可能沿着不同路径传送" /></p><h2 id="虚电路服务与数据报服务的对比"><a class="markdownIt-Anchor" href="#虚电路服务与数据报服务的对比"></a> 虚电路服务与数据报服务的对比</h2><table><thead><tr><th></th><th><strong>虚电路服务</strong></th><th><strong>数据报服务</strong></th></tr></thead><tbody><tr><td><strong>思路</strong></td><td>可靠通信应当由网络来保证</td><td>可靠通信应当由用户主机来保证</td></tr><tr><td><strong>连接的建立</strong></td><td>必须有</td><td>不需要</td></tr><tr><td><strong>终点地址</strong></td><td>仅在连接建立阶段使用，每个分组使用短的虚电路号</td><td>每个分组都有终点的完整地址</td></tr><tr><td><strong>分组的转发</strong></td><td>属于同一条虚电路的分组均按照同一路由进行转发</td><td>每个分组独立选择路由进行转发</td></tr><tr><td><strong>当结点出故障时</strong></td><td>所有通过出故障的结点的虚电路均不能工作</td><td>出故障的结点可能会丢失分组，一些路由可能会发生变化</td></tr><tr><td><strong>分组的顺序</strong></td><td>总是按发送顺序到达终点</td><td>到达终点时不一定按发送顺序</td></tr><tr><td><strong>端到端的差错处理和流量控制</strong></td><td>可以由网络负责，也可以由用户主机负责</td><td>由用户主机负责</td></tr></tbody></table><h1 id="网际协议-ip"><a class="markdownIt-Anchor" href="#网际协议-ip"></a> 网际协议 IP</h1><ul><li>网际协议 IP 是 TCP/IP 体系中两个最主要的协议之一。与 IP 协议配套使用的还有四个协议：<ul><li>地址解析协议 ARP(Address Resolution Protocol)</li><li>逆地址解析协议 RARP(Reverse Address Resolution Protocol)</li><li>网际控制报文协议 ICMP(Internet Control Message Protocol)</li><li>网际组管理协议 IGMP(Internet Group Management Protocol)<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516192228.png" alt="" /></li></ul></li></ul><h2 id="虚拟互连网络"><a class="markdownIt-Anchor" href="#虚拟互连网络"></a> 虚拟互连网络</h2><ul><li>互连在一起的网络要进行通信，会遇到许多问题需要解决，如：<ul><li>不同的寻址方案</li><li>不同的最大分组长度</li><li>不同的网络接入机制</li><li>不同的超时控制</li><li>不同的差错恢复方法</li><li>不同的状态报告方法</li><li>不同的路由选择技术</li><li>不同的用户接入控制</li><li>不同的服务（面向连接服务和无连接服务）</li><li>不同的管理与控制方式</li></ul></li></ul><h3 id="网络互相连接起来要使用一些中间设备"><a class="markdownIt-Anchor" href="#网络互相连接起来要使用一些中间设备"></a> 网络互相连接起来要使用一些中间设备</h3><ul><li><strong>中间设备</strong>又称为<strong>中间系统</strong>或<strong>中继</strong>(relay)系统。<ul><li>物理层中继系统：<strong>转发器</strong>(repeater)。</li><li>数据链路层中继系统：<strong>网桥或桥接器</strong>(bridge)。</li><li>网络层中继系统：<strong>路由器</strong>(router)。</li><li>网桥和路由器的混合物：<strong>桥路器</strong>(brouter)。</li><li>网络层以上的中继系统：<strong>网关</strong>(gateway)。</li></ul></li></ul><h3 id="网络互连使用路由器"><a class="markdownIt-Anchor" href="#网络互连使用路由器"></a> 网络互连使用路由器</h3><ul><li>当中继系统是转发器或网桥时，一般并不称之为网络互连，因为这仅仅是把一个网络扩大了，而这仍然是一个网络。</li><li>网关由于比较复杂，目前使用得较少。</li><li>互联网都是指用路由器进行互连的网络。</li><li>由于历史的原因，许多有关 TCP/IP 的文献将网络层使用的路由器称为<strong>网关</strong>。</li></ul><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516193146.png" alt="互连网络与虚拟互连网络" /></p><h3 id="虚拟互连网络的意义"><a class="markdownIt-Anchor" href="#虚拟互连网络的意义"></a> 虚拟互连网络的意义</h3><ul><li>所谓虚拟互连网络也就是逻辑互连网络，它的意思就是互连起来的各种物理网络的异构性本来是客观存在的，但是我们利用 IP 协议就可以使这些性能各异的网络从用户看起来好像是一个统一的网络。</li><li>使用 IP 协议的虚拟互连网络可简称为 IP 网。</li><li>使用虚拟互连网络的好处是：当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516194123.png" alt="" /></li></ul><h3 id="从网络层看-ip-数据报的传送"><a class="markdownIt-Anchor" href="#从网络层看-ip-数据报的传送"></a> 从网络层看 IP 数据报的传送</h3><p>如果我们只从网络层考虑问题，那么 IP 数据报就可以想象是在网络层中传送。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516194200.png" alt="" /></p><h2 id="分类的-ip-地址"><a class="markdownIt-Anchor" href="#分类的-ip-地址"></a> 分类的 IP 地址</h2><h3 id="ip-地址及其表示方法"><a class="markdownIt-Anchor" href="#ip-地址及其表示方法"></a> IP 地址及其表示方法</h3><ul><li>我们把整个因特网看成为一个单一的、抽象的网络。IP 地址就是给每个连接在因特网上的主机（或路由器）分配一个在全世界范围是唯一的 32 位的标识符。</li><li>IP 地址现在由<strong>因特网名字与号码指派公司</strong>ICANN (Internet Corporation for Assigned Names and Numbers)进行分配</li></ul><h3 id="ip-地址的编址方法"><a class="markdownIt-Anchor" href="#ip-地址的编址方法"></a> IP 地址的编址方法</h3><p>分类的 IP 地址。这是最基本的编址方法，在 1981 年就通过了相应的标准协议。<br />子网的划分。这是对最基本的编址方法的改进，其标准[RFC 950]在 1985 年通过。<br />构成超网。这是比较新的无分类编址方法。1993 年提出后很快就得到推广应用。</p><h3 id="分类-ip-地址"><a class="markdownIt-Anchor" href="#分类-ip-地址"></a> 分类 IP 地址</h3><p>每一类地址都由两个固定长度的字段组成，其中一个字段是<strong>网络号 net-id</strong>，它标志主机（或路由器）所连接到的网络，而另一个字段则是<strong>主机号 host-id</strong>，它标志该主机（或路由器）。<br />两级的 IP 地址可以记为：<code>IP 地址 ::= { &lt;网络号&gt;, &lt;主机号&gt;}</code><br /><code>::=</code> 代表“定义为”。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516205541.gif" alt="" /></p><h3 id="点分十进制记法"><a class="markdownIt-Anchor" href="#点分十进制记法"></a> 点分十进制记法</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516210727.png" alt="" /></p><h3 id="常用的三种类别的-ip-地址"><a class="markdownIt-Anchor" href="#常用的三种类别的-ip-地址"></a> 常用的三种类别的 IP 地址</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516210753.png" alt="" /></p><h3 id="ip-地址的一些重要特点"><a class="markdownIt-Anchor" href="#ip-地址的一些重要特点"></a> IP 地址的一些重要特点</h3><ol><li>IP 地址是一种分等级的地址结构。分两个等级的好处是：<ol><li>IP 地址管理机构在分配 IP 地址时只分配网络号，而剩下的主机号则由得到该网络号的单位自行分配。这样就方便了 IP 地址的管理。</li><li>路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目的主机号），这样就可以使路由表中的项目数大幅度减少，从而减小了路由表所占的存储空间。</li></ol></li><li>实际上 IP 地址是标志一个主机（或路由器）和一条链路的接口。<ol><li>当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号 net-id 必须是不同的。这种主机称为多归属主机(multihomed host)。</li><li>由于一个路由器至少应当连接到两个网络（这样它才能将 IP 数据报从一个网络转发到另一个网络），因此一个路由器至少应当有两个不同的 IP 地址。</li></ol></li><li>用转发器或网桥连接起来的若干个局域网仍为一个网络，因此这些局域网都具有同样的网络号 net-id。</li><li>所有分配到网络号 net-id 的网络，范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。</li></ol><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516211017.png" alt="" /></p><blockquote><p>在同一个局域网上的主机或路由器的IP 地址中的网络号必须是一样的。图中的网络号就是 IP 地址中的 net-id。<br />路由器总是具有两个或两个以上的 IP 地址。路由器的每一个接口都有一个不同网络号的 IP 地址。<br />两个路由器直接相连的接口处，可指明也可不指明 IP 地址。如指明 IP 地址，则这一段连线就构成了一种只包含一段线路的特殊“网络” 。现在常不指明 IP 地址。</p></blockquote><h2 id="ip-地址与硬件地址"><a class="markdownIt-Anchor" href="#ip-地址与硬件地址"></a> IP 地址与硬件地址</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516211438.png" alt="" /></p><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516211439.gif" alt="" /></p><h2 id="地址解析协议-arp-与逆地址解析协议-rarp"><a class="markdownIt-Anchor" href="#地址解析协议-arp-与逆地址解析协议-rarp"></a> 地址解析协议 ARP 与逆地址解析协议 RARP</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516212531.png" alt="" /></p><h3 id="地址解析协议-arp"><a class="markdownIt-Anchor" href="#地址解析协议-arp"></a> 地址解析协议 ARP</h3><ul><li>不管网络层使用的是什么协议，在实际网络的链路上传送数据帧时，最终还是必须使用硬件地址。</li><li>每一个主机都设有一个 ARP 高速缓存(ARP cache)，里面有所在的局域网上的各主机和路由器的 IP 地址到硬件地址的映射表。</li><li>当主机 A 欲向本局域网上的某个主机 B 发送 IP 数据报时，就先在其 ARP 高速缓存中查看有无主机 B 的 IP 地址。如有，就可查出其对应的硬件地址，再将此硬件地址写入 MAC 帧，然后通过局域网将该 MAC 帧发往此硬件地址。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516212656.png" alt="" /></li></ul><h4 id="arp-高速缓存的作用"><a class="markdownIt-Anchor" href="#arp-高速缓存的作用"></a> ARP 高速缓存的作用</h4><ul><li>为了减少网络上的通信量，主机 A 在发送其 ARP 请求分组时，就将自己的 IP 地址到硬件地址的映射写入 ARP 请求分组。</li><li>当主机 B 收到 A 的 ARP 请求分组时，就将主机 A 的这一地址映射写入主机 B 自己的 ARP 高速缓存中。这对主机 B 以后向 A 发送数据报时就更方便了。</li></ul><h4 id="应当注意的问题"><a class="markdownIt-Anchor" href="#应当注意的问题"></a> 应当注意的问题</h4><ul><li>ARP 是解决同一个局域网上的主机或路由器的 IP 地址和硬件地址的映射问题。</li><li>如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。剩下的工作就由下一个网络来做。</li><li>从IP地址到硬件地址的解析是自动进行的，主机的用户对这种地址解析过程是不知道的。</li><li>只要主机或路由器要和本网络上的另一个已知 IP 地址的主机或路由器进行通信，ARP 协议就会自动地将该 IP 地址解析为链路层所需要的硬件地址。</li></ul><h4 id="使用-arp-的四种典型情况"><a class="markdownIt-Anchor" href="#使用-arp-的四种典型情况"></a> 使用 ARP 的四种典型情况</h4><ul><li>发送方是主机，要把IP数据报发送到本网络上的另一个主机。这时用 ARP 找到目的主机的硬件地址。</li><li>发送方是主机，要把 IP 数据报发送到另一个网络上的一个主机。这时用 ARP 找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成。</li><li>发送方是路由器，要把 IP 数据报转发到本网络上的一个主机。这时用 ARP 找到目的主机的硬件地址。</li><li>发送方是路由器，要把 IP 数据报转发到另一个网络上的一个主机。这时用 ARP 找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成。</li></ul><h4 id="什么我们不直接使用硬件地址进行通信"><a class="markdownIt-Anchor" href="#什么我们不直接使用硬件地址进行通信"></a> 什么我们不直接使用硬件地址进行通信？</h4><ul><li>由于全世界存在着各式各样的网络，它们使用不同的硬件地址。要使这些异构网络能够互相通信就必须进行非常复杂的硬件地址转换工作，因此几乎是不可能的事。</li><li>连接到因特网的主机都拥有统一的 IP 地址，它们之间的通信就像连接在同一个网络上那样简单方便，因为调用 ARP 来寻找某个路由器或主机的硬件地址都是由计算机软件自动进行的，对用户来说是看不见这种调用过程的。</li></ul><h3 id="逆地址解析协议-rarp"><a class="markdownIt-Anchor" href="#逆地址解析协议-rarp"></a> 逆地址解析协议 RARP</h3><ul><li>逆地址解析协议 RARP 使只知道自己硬件地址的主机能够知道其 IP 地址。</li><li>这种主机往往是无盘工作站。 因此 RARP协议目前已很少使用。</li></ul><h2 id="ip-数据报的格式"><a class="markdownIt-Anchor" href="#ip-数据报的格式"></a> IP 数据报的格式</h2><ul><li>一个 IP 数据报由首部和数据两部分组成。</li><li>首部的前一部分是固定长度，共 20 字节，是所有 IP 数据报必须具有的。</li><li>在首部的固定部分的后面是一些可选字段，其长度是可变的。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516213028.png" alt="" /></li><li>版本——占 4 位，指 IP 协议的版本。目前的 IP 协议版本号为 4 (即 IPv4)</li><li>首部长度——占 4 位，可表示的最大数值是 15 个单位(一个单位为 4 字节)。因此 IP 的首部长度的最大值是 60 字节。</li><li>区分服务——占 8 位，用来获得更好的服务在旧标准中叫做服务类型，但实际上一直未被使用过。1998 年这个字段改名为区分服务。只有在使用区分服务（DiffServ）时，这个字段才起作用。在一般的情况下都不使用这个字段。</li><li>总长度——占 16 位，指首部和数据之和的长度，单位为字节，因此数据报的最大长度为 65535 字节。总长度必须不超过最大传送单元 MTU。</li><li>标识(identification) ——占 16 位，它是一个计数器，用来产生数据报的标识。</li><li>标志(flag) ——占 3 位，目前只有前两位有意义。标志字段的最低位是 MF (More Fragment)。<ul><li>MF =1 表示后面“还有分片”。MF = 0 表示最后一个分片。</li><li>标志字段中间的一位是 DF (Don’t Fragment) 。</li><li>只有当 DF = 0 时才允许分片。</li></ul></li><li>片偏移——占13位，指出较长的分组在分片后某片在原分组中的相对位置。片偏移以 8 个字节为偏移单位。<a href="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516214248.png" target="_blank" rel="noopener">IP 数据报分片</a></li><li>生存时间——占8位，记为 TTL (Time To Live)。数据报在网络中可通过的路由器数的最大值。</li><li>协议——占8位，字段指出此数据报携带的数据使用何种协议，以便目的主机的 IP 层将数据部分上交给哪个处理过程。<a href="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516214435.png" target="_blank" rel="noopener">协议字段示意图</a></li><li>首部检验和(16 位)字段只检验数据报的首部，不检验数据部分。这里不采用 CRC 检验码而采用简单的计算方法。<a href="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516214826.png" target="_blank" rel="noopener">检验算法</a></li><li>源地址和目的地址——各占 4 字节</li><li>IP 首部的可变部分就是一个选项字段，用来支持排错、测量以及安全等措施，内容很丰富。<ul><li>选项字段的长度可变，从 1 个字节到 40 个字节不等，取决于所选择的项目。</li><li>增加首部的可变部分是为了增加 IP 数据报的功能，但这同时也使得 IP 数据报的首部长度成为可变的。这就增加了每一个路由器处理数据报的开销。</li><li>实际上这些选项很少被使用。</li></ul></li></ul><h2 id="ip-层转发分组的流程"><a class="markdownIt-Anchor" href="#ip-层转发分组的流程"></a> IP 层转发分组的流程</h2><ul><li>有四个 A 类网络通过三个路由器连接在一起。每一个网络上都可能有成千上万个主机。</li><li>可以想像，若按目的主机号来制作路由表，则所得出的路由表就会过于庞大。</li><li>但若按主机所在的<strong>网络地址</strong>来制作路由表，那么每一个路由器中的路由表就只包含 4 个项目。这样就可使路由表大大简化。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516220101.png" alt="" /></li></ul><h3 id="查找路由表"><a class="markdownIt-Anchor" href="#查找路由表"></a> 查找路由表</h3><p>根据目的网络地址就能确定下一跳路由器，这样做的结果是：</p><ul><li>IP 数据报最终一定可以找到目的主机所在目的网络上的路由器（可能要通过多次的间接交付）。</li><li>只有到达最后一个路由器时，才试图向目的主机进行直接交付。</li></ul><h3 id="特定主机路由"><a class="markdownIt-Anchor" href="#特定主机路由"></a> 特定主机路由</h3><ul><li>这种路由是为特定的目的主机指明一个路由。</li><li>采用特定主机路由可使网络管理人员能更方便地控制网络和测试网络，同时也可在需要考虑某种安全问题时采用这种特定主机路由。</li></ul><h3 id="默认路由default-route"><a class="markdownIt-Anchor" href="#默认路由default-route"></a> 默认路由(default route)</h3><ul><li>路由器还可采用<strong>默认路由</strong>以减少路由表所占用的空间和搜索路由表所用的时间。</li><li>这种转发方式在一个网络只有很少的对外连接时是很有用的。</li><li>默认路由在主机发送 IP 数据报时往往更能显示出它的好处。</li><li>如果一个主机连接在一个小网络上，而这个网络只用一个路由器和因特网连接，那么在这种情况下使用默认路由是非常合适的。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200516225536.png" alt="" /></li></ul><h3 id="必须强调指出"><a class="markdownIt-Anchor" href="#必须强调指出"></a> 必须强调指出</h3><ul><li>IP 数据报的首部中没有地方可以用来指明“下一跳路由器的 IP 地址”。</li><li>当路由器收到待转发的数据报，不是将下一跳路由器的 IP 地址填入 IP 数据报，而是送交下层的网络接口软件。</li><li>网络接口软件使用 ARP 负责将下一跳路由器的 IP 地址转换成硬件地址，并将此硬件地址放在链路层的 MAC 帧的首部，然后根据这个硬件地址找到下一跳路由器。</li></ul><h1 id="划分子网和构造超网"><a class="markdownIt-Anchor" href="#划分子网和构造超网"></a> 划分子网和构造超网</h1><h2 id="划分子网"><a class="markdownIt-Anchor" href="#划分子网"></a> 划分子网</h2><p>从两级 IP 地址到三级 IP 地址。</p><ul><li>在 ARPANET 的早期，IP 地址的设计确实不够合理。<ul><li>IP 地址空间的利用率有时很低。</li><li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。</li><li>两级的 IP 地址不够灵活。</li></ul></li></ul><h3 id="三级的-ip-地址"><a class="markdownIt-Anchor" href="#三级的-ip-地址"></a> 三级的 IP 地址</h3><ul><li>从 1985 年起在 IP 地址中又增加了一个“子网号字段”，使两级的 IP 地址变成为<strong>三级的 IP 地址</strong>。</li><li>这种做法叫作<strong>划分子网</strong>(subnetting) 。划分子网已成为因特网的正式标准协议。</li></ul><h3 id="划分子网的基本思路"><a class="markdownIt-Anchor" href="#划分子网的基本思路"></a> 划分子网的基本思路</h3><ul><li>划分子网纯属<strong>一个单位内部的事情</strong>。单位对外仍然表现为没有划分子网的网络。</li><li>从主机号<strong>借用</strong>若干个位作为<strong>子网号</strong> subnet-id，而主机号 host-id 也就相应减少了若干个位。<ul><li><code>IP地址 ::= {&lt;网络号&gt;, &lt;子网号&gt;, &lt;主机号&gt;}</code></li></ul></li><li>凡是从其他网络发送给本单位某个主机的 IP 数据报，仍然是根据 IP 数据报的目的网络号 net-id，先找到连接在本单位网络上的路由器。</li><li>然后此路由器在收到 IP 数据报后，再按目的网络号 net-id 和子网号 subnet-id 找到目的子网。</li><li>最后就将 IP 数据报直接交付目的主机。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164156.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164214.png" alt="" /></li></ul><h3 id="划分子网后变成了三级结构"><a class="markdownIt-Anchor" href="#划分子网后变成了三级结构"></a> 划分子网后变成了三级结构</h3><ul><li>当没有划分子网时，IP 地址是两级结构。</li><li>划分子网后 IP 地址就变成了<strong>三级结构</strong>。</li><li>划分子网只是把 IP 地址的主机号 host-id 这部分进行再划分，而不改变 IP 地址原来的网络号 net-id。</li></ul><h2 id="子网掩码"><a class="markdownIt-Anchor" href="#子网掩码"></a> 子网掩码</h2><ul><li>从一个 IP 数据报的首部并无法判断源主机或目的主机所连接的网络是否进行了子网划分。</li><li>使用子网掩码(subnet mask)可以找出 IP 地址中的子网部分。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164439.png" alt="" /></li></ul><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164522.png" alt="" /></p><h3 id="默认子网掩码"><a class="markdownIt-Anchor" href="#默认子网掩码"></a> 默认子网掩码</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517164543.png" alt="" /></p><h3 id="子网掩码是一个重要属性"><a class="markdownIt-Anchor" href="#子网掩码是一个重要属性"></a> 子网掩码是一个重要属性</h3><ul><li>子网掩码是一个网络或一个子网的重要属性。</li><li>路由器在和相邻路由器交换路由信息时，必须把自己所在网络（或子网）的子网掩码告诉相邻路由器。</li><li>路由器的路由表中的每一个项目，除了要给出目的网络地址外，还必须同时给出该网络的子网掩码。</li><li>若一个路由器连接在两个子网上就拥有两个网络地址和两个子网掩码。</li></ul><blockquote><p><strong>【例】已知 IP 地址是 141.14.72.24，子网掩码是 255.255.192.0。试求网络地址。</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517165035.png" alt="" /><br /><strong>【例】在上例中，若子网掩码改为255.255.224.0。试求网络地址，讨论所得结果。</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517165116.png" alt="" /></p></blockquote><h2 id="使用子网时分组转发"><a class="markdownIt-Anchor" href="#使用子网时分组转发"></a> 使用子网时分组转发</h2><ul><li>在不划分子网的两级 IP 地址下，从 IP 地址得出网络地址是个很简单的事。</li><li>但在划分子网的情况下，从 IP 地址却不能唯一地得出网络地址来，这是因为网络地址取决于那个网络所采用的子网掩码，但数据报的首部并没有提供子网掩码的信息。</li><li>因此分组转发的算法也必须做相应的改动。</li></ul><hr /><ol><li>从收到的分组的首部提取目的 IP 地址 D。</li><li>先用各网络的子网掩码和 D 逐位相“与”，看是否和否则就是间接交付，执行(3)。</li><li>若路由表中有目的地址为 D 的特定主机路由，则将分组传送给指明的下一跳路由器；否则，执行(4)。</li><li>对路由表中的每一行的子网掩码和 D 逐位相“与”，若其结果与该行的目的网络地址匹配，则将分组传送给该行指明的下一跳路由器；否则，执行(5)。</li><li>若路由表中有一个默认路由，则将分组传送给路由表中所指明的默认路由器；否则，执行(6)。</li><li>报告转发分组出错。</li></ol><h2 id="无分类编址-cidr构造超网"><a class="markdownIt-Anchor" href="#无分类编址-cidr构造超网"></a> 无分类编址 CIDR（构造超网）</h2><blockquote><p><strong>【例】已知互联网和路由器 R1 中的路由表。主机 H1 向 H2 发送分组。试讨论 R1 收到 H1 向 H2 发送的分组后查找路由表的过程。</strong><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517165438.png" alt="" /><br />因此 H1 首先检查主机 128.30.33.138 是否连接在本网络上。如果是，则直接交付；否则，就送交路由器 R1，并逐项查找路由表。<br />主机 H1 首先将本子网的子网掩码 255.255.255.128与分组的 IP 地址 128.30.33.138 逐比特相“与”(AND 操作) 。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517170116.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200517170148.png" alt="" /></p></blockquote><h3 id="网络前缀"><a class="markdownIt-Anchor" href="#网络前缀"></a> 网络前缀</h3><ul><li>划分子网在一定程度上缓解了因特网在发展中遇到的困难。然而在 1992 年因特网仍然面临三个必须尽早解决的问题，这就是：<ul><li>B 类地址在 1992 年已分配了近一半，眼看就要在 1994 年 3 月全部分配完毕！</li><li>因特网主干网上的路由表中的项目数急剧增长（从几千个增长到几万个）。</li><li>整个 IPv4 的地址空间最终将全部耗尽。</li></ul></li></ul><h3 id="ip-编址问题的演进"><a class="markdownIt-Anchor" href="#ip-编址问题的演进"></a> IP 编址问题的演进</h3><ul><li>1987 年，RFC 1009 就指明了在一个划分子网的网络中可同时使用几个不同的子网掩码。使用<strong>变长子网掩码 VLSM</strong> (Variable Length Subnet Mask)可进一步提高 IP 地址资源的利用率。</li><li>在 VLSM 的基础上又进一步研究出无分类编址方法，它的正式名字是<strong>无分类域间路由选择</strong> CIDR (Classless Inter-Domain Routing)。</li></ul><h3 id="cidr-最主要的特点"><a class="markdownIt-Anchor" href="#cidr-最主要的特点"></a> CIDR 最主要的特点</h3><ul><li>CIDR 消除了传统的 A 类、B 类和 C 类地址以及划分子网的概念，因而可以更加有效地分配 IPv4 的地址空间。</li><li>CIDR使用各种长度的“<strong>网络前缀</strong>”(network-prefix)来代替分类地址中的网络号和子网号。</li><li>IP 地址从三级编址（使用子网掩码）又回到了两级编址。</li></ul><h2 id="无分类的两级编址"><a class="markdownIt-Anchor" href="#无分类的两级编址"></a> 无分类的两级编址</h2><ul><li>无分类的两级编址的记法是：<ul><li><code>IP地址 ::= {&lt;网络前缀&gt;, &lt;主机号&gt;}</code></li></ul></li><li>CIDR 还使用“<strong>斜线记法</strong>”(slash notation)，它又称为<strong>CIDR记法</strong>，即在 IP 地址面加上一个斜线“/”，然后写上网络前缀所占的位数（这个数值对应于三级编址中子网掩码中 1 的个数）。</li><li>CIDR 把网络前缀都相同的连续的 IP 地址组成“<strong>CIDR 地址块</strong>”。</li></ul><h3 id="cidr-地址块"><a class="markdownIt-Anchor" href="#cidr-地址块"></a> CIDR 地址块</h3><ul><li>128.14.32.0/20 表示的地址块共有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup><mn>2</mn></mrow><annotation encoding="application/x-tex">2^12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord">2</span></span></span></span> 个地址（因为<strong>斜线后面的 20 是网络前缀的位数，所以这个地址的主机号是 12 位</strong>）。</li><li>这个地址块的起始地址是 128.14.32.0。</li><li>在不需要指出地址块的起始地址时，也可将这样的地址块简称为“<strong>/20 地址块</strong>”。</li><li>128.14.32.0/20 地址块的最小地址：128.14.32.0</li><li>128.14.32.0/20 地址块的最大地址：128.14.47.255</li><li>全 0 和全 1 的主机号地址一般不使用。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200518133738.png" alt="" /></li></ul><h3 id="路由聚合"><a class="markdownIt-Anchor" href="#路由聚合"></a> 路由聚合</h3><ul><li>一个 CIDR 地址块可以表示很多地址，这种地址的聚合常称为<strong>路由聚合</strong>，它使得路由表中的一个项目可以表示很多个（例如上千个）原来传统分类地址的路由。</li><li>路由聚合也称为<strong>构成超网</strong>(supernetting)。</li><li>CIDR 虽然不使用子网了，但仍然使用“<strong>掩码</strong>”这一名词（但不叫子网掩码）。</li><li>对于 /20  地址块，它的掩码是 20 个连续的 1。 斜线记法中的数字就是掩码中1的个数。</li></ul><h3 id="cidr-记法的其他形式"><a class="markdownIt-Anchor" href="#cidr-记法的其他形式"></a> CIDR 记法的其他形式</h3><ul><li>10.0.0.0/10 可简写为 10/10，也就是把点分十进制中低位连续的 0 省略。</li><li>10.0.0.0/10 隐含地指出 IP 地址 10.0.0.0 的<strong>掩码</strong>是 255.192.0.0。此掩码可表示为<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234340.png" alt="" /></li><li>10.0.0.0/10 可简写为 10/10，也就是将点分十进制中低位连续的 0 省略。</li><li>10.0.0.0/10 相当于指出 IP 地址 10.0.0.0 的掩码是 255.192.0.0，即<ul><li>11111111 11000000 00000000 00000000</li></ul></li><li>网络前缀的后面加一个星号 * 的表示方法<ul><li>如 00001010 00*，在星号 * 之前是网络前缀，而星号 * 表示 IP 地址中的主机号，可以是任意值。</li></ul></li></ul><h3 id="构成超网"><a class="markdownIt-Anchor" href="#构成超网"></a> 构成超网</h3><ul><li>前缀长度不超过 23 位的 CIDR 地址块都包含了多个 C 类地址。</li><li>这些 C 类地址合起来就构成了超网。</li><li>CIDR 地址块中的地址数一定是 2 的整数次幂。</li><li>网络前缀越短，其地址块所包含的地址数就越多。而在三级结构的IP地址中，划分子网是使网络前缀变长。</li></ul><h3 id="cidr-地址块划分举例"><a class="markdownIt-Anchor" href="#cidr-地址块划分举例"></a> CIDR 地址块划分举例</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234448.png" alt="" /><br />这个 ISP 共有 64 个 C 类网络。如果不采用 CIDR 技术，则在与该 ISP 的路由器交换路由信息的每一个路由器的路由表中，就需要有 64 个项目。但采用地址聚合后，只需用路由聚合后的 1 个项目 206.0.64.0/18 就能找到该 ISP。</p><h3 id="最长前缀匹配"><a class="markdownIt-Anchor" href="#最长前缀匹配"></a> 最长前缀匹配</h3><ul><li>使用 CIDR 时，路由表中的每个项目由“网络前缀”和“下一跳地址”组成。在查找路由表时可能会得到不止一个匹配结果。</li><li>应当从匹配结果中选择具有最长网络前缀的路由：<strong>最长前缀匹配</strong>(longest-prefix matching)。</li><li>网络前缀越长，其地址块就越小，因而路由就越具体(more specific) 。</li><li>最长前缀匹配又称为<strong>最长匹配或最佳匹配</strong>。</li></ul><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234607.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234629.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520234643.png" alt="" /></p><ul><li>D AND (11111111 11111111 11111100 00000000) = 206.0.68.0/22             <strong>匹配</strong></li><li>D AND (11111111 11111111 11111111 10000000) = 206.0.71.128/25         <strong>匹配</strong></li><li>选择两个匹配的地址中更具体的一个，即选择最长前缀的地址。</li></ul><h3 id="使用二叉线索查找路由表"><a class="markdownIt-Anchor" href="#使用二叉线索查找路由表"></a> 使用二叉线索查找路由表</h3><ul><li>当路由表的项目数很大时，怎样设法减小路由表的查找时间就成为一个非常重要的问题。</li><li>为了进行更加有效的查找，通常是将无分类编址的路由表存放在一种层次的数据结构中，然后自上而下地按层次进行查找。这里最常用的就是<strong>二叉线索</strong>(binary trie)。</li><li>IP 地址中从左到右的比特值决定了从根结点逐层向下层延伸的路径，而二叉线索中的各个路径就代表路由表中存放的各个地址。</li><li>为了提高二叉线索的查找速度，广泛使用了各种压缩技术。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235029.png" alt="" /></li></ul><h1 id="网际控制报文协议-icmp"><a class="markdownIt-Anchor" href="#网际控制报文协议-icmp"></a> 网际控制报文协议 ICMP</h1><ul><li>为了提高 IP 数据报交付成功的机会，在网际层使用了网际控制报文协议 ICMP (Internet Control Message Protocol)。</li><li>ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告。</li><li>ICMP 不是高层协议，而是 IP 层的协议。</li><li>ICMP 报文作为 IP 层数据报的数据，加上数据报的首部，组成 IP 数据报发送出去。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235109.png" alt="" /></li></ul><h2 id="icmp-报文的种类"><a class="markdownIt-Anchor" href="#icmp-报文的种类"></a> ICMP 报文的种类</h2><ul><li>ICMP 报文的种类有两种，即 ICMP <strong>差错报告报文</strong>和 ICMP <strong>询问报文</strong>。</li><li>ICMP 报文的前 4 个字节是统一的格式，共有三个字段：即<strong>类型、代码和检验和</strong>。接着的 4 个字节的内容与 ICMP 的类型有关。</li></ul><h2 id="icmp-差错报告报文共有-5-种"><a class="markdownIt-Anchor" href="#icmp-差错报告报文共有-5-种"></a> ICMP 差错报告报文共有 5 种</h2><ul><li>终点不可达</li><li>源点抑制(Source quench)</li><li>时间超过</li><li>参数问题</li><li>改变路由（重定向）(Redirect)<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235343.png" alt="" /></li></ul><h3 id="不应发送-icmp-差错报告报文的几种情况"><a class="markdownIt-Anchor" href="#不应发送-icmp-差错报告报文的几种情况"></a> 不应发送 ICMP 差错报告报文的几种情况</h3><ul><li>对 ICMP 差错报告报文不再发送 ICMP 差错报告报文。</li><li>对第一个分片的数据报片的所有后续数据报片都不发送 ICMP 差错报告报文。</li><li>对具有多播地址的数据报都不发送 ICMP 差错报告报文。</li><li>对具有特殊地址（如127.0.0.0 或 0.0.0.0）的数据报不发送 ICMP 差错报告报文。</li></ul><h3 id="icmp-询问报文有两种"><a class="markdownIt-Anchor" href="#icmp-询问报文有两种"></a> ICMP 询问报文有两种</h3><ul><li>回送请求和回答报文</li><li>时间戳请求和回答报文</li><li>下面的几种 ICMP 报文不再使用<ul><li>信息请求与回答报文</li><li>掩码地址请求和回答报文</li><li>路由器询问和通告报文</li></ul></li></ul><h2 id="icmp-的应用举例"><a class="markdownIt-Anchor" href="#icmp-的应用举例"></a> ICMP 的应用举例</h2><h3 id="ping"><a class="markdownIt-Anchor" href="#ping"></a> PING</h3><p>PING 用来测试两个主机之间的连通性。<br />PING 使用了 ICMP 回送请求与回送回答报文。<br />PING 是应用层直接使用网络层 ICMP 的例子，它没有通过运输层的 TCP 或UDP。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235522.png" alt="" /></p><h3 id="traceroute"><a class="markdownIt-Anchor" href="#traceroute"></a> Traceroute</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200520235542.png" alt="" /></p><h1 id="因特网的路由选择协议"><a class="markdownIt-Anchor" href="#因特网的路由选择协议"></a> 因特网的路由选择协议</h1><h2 id="有关路由选择协议的几个基本概念"><a class="markdownIt-Anchor" href="#有关路由选择协议的几个基本概念"></a> 有关路由选择协议的几个基本概念</h2><ul><li>理想的路由算法<ul><li>算法必须是正确的和完整的。</li><li>算法在计算上应简单。</li><li>算法应能适应通信量和网络拓扑的变化，这就是说，要有自适应性。</li><li>算法应具有稳定性。</li><li>算法应是公平的。</li><li>算法应是最佳的。</li></ul></li></ul><h3 id="关于最佳路由"><a class="markdownIt-Anchor" href="#关于最佳路由"></a> 关于“最佳路由”</h3><ul><li>不存在一种绝对的最佳路由算法。</li><li>所谓“最佳”只能是相对于某一种特定要求下得出的较为合理的选择而已。</li><li>实际的路由选择算法，应尽可能接近于理想的算法。</li><li>路由选择是个非常复杂的问题<ul><li>它是网络中的所有结点共同协调工作的结果。</li><li>路由选择的环境往往是不断变化的，而这种变化有时无法事先知道。</li></ul></li></ul><h3 id="从路由算法的自适应性考虑"><a class="markdownIt-Anchor" href="#从路由算法的自适应性考虑"></a> 从路由算法的自适应性考虑</h3><ul><li><strong>静态</strong>路由选择策略——即非自适应路由选择，其特点是简单和开销较小，但不能及时适应网络状态的变化。</li><li><strong>动态</strong>路由选择策略——即自适应路由选择，其特点是能较好地适应网络状态的变化，但实现起来较为复杂，开销也比较大。</li></ul><h3 id="分层次的路由选择协议"><a class="markdownIt-Anchor" href="#分层次的路由选择协议"></a> 分层次的路由选择协议</h3><ul><li>因特网采用分层次的路由选择协议。</li><li>因特网的规模非常大。如果让所有的路由器知道所有的网络应怎样到达，则这种路由表将非常大，处理起来也太花时间。而所有这些路由器之间交换路由信息所需的带宽就会使因特网的通信链路饱和。</li><li>许多单位不愿意外界了解自己单位网络的布局细节和本部门所采用的路由选择协议（这属于本部门内部的事情），但同时还希望连接到因特网上。</li></ul><h3 id="自治系统-as"><a class="markdownIt-Anchor" href="#自治系统-as"></a> 自治系统 AS</h3><ul><li>在单一的技术管理下的一组路由器，而这些路由器使用一种 AS 内部的路由选择协议和共同的度量以确定分组在该 AS 内的路由，同时还使用一种 AS 之间的路由选择协议用以确定分组在 AS之间的路由。</li><li>现在对自治系统 AS 的定义是强调下面的事实：尽管一个 AS 使用了多种内部路由选择协议和度量，但重要的是一个 AS 对其他 AS 表现出的是一个<strong>单一的和一致的路由选择策略</strong>。</li></ul><h4 id="因特网有两大类路由选择协议"><a class="markdownIt-Anchor" href="#因特网有两大类路由选择协议"></a> 因特网有两大类路由选择协议</h4><ul><li>内部网关协议 IGP (Interior Gateway Protocol)    即在一个自治系统内部使用的路由选择协议。目前这类路由选择协议使用得最多，如 RIP 和 OSPF 协议。</li><li>外部网关协议EGP (External Gateway Protocol)    若源站和目的站处在不同的自治系统中，当数据报传到一个自治系统的边界时，就需要使用一种协议将路由选择信息传递到另一个自治系统中。这样的协议就是外部网关协议 EGP。在外部网关协议中目前使用最多的是 BGP-4。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521000034.png" alt="" /></li></ul><hr /><ul><li>因特网的早期 RFC 文档中未使用“路由器”而是使用“网关”这一名词。但是在新的 RFC 文档中又使用了“路由器”这一名词。应当把这两个属于当作同义词。</li><li>IGP 和 EGP 是协议类别的名称。但 RFC 在使用 EGP 这个名词时出现了一点混乱，因为最早的一个外部网关协议的协议名字正好也是 EGP。因此 遇到名词 EGP 时，应弄清它是指旧的协议 EGP 还是指外部网关协议 EGP 这个类别。</li></ul><h3 id="因特网的路由选择协议-2"><a class="markdownIt-Anchor" href="#因特网的路由选择协议-2"></a> 因特网的路由选择协议</h3><ul><li>内部网关协议 IGP：具体的协议有多种，如 RIP 和 OSPF 等。</li><li>外部网关协议 EGP：目前使用的协议就是 BGP。</li></ul><h2 id="内部网关协议-rip"><a class="markdownIt-Anchor" href="#内部网关协议-rip"></a> 内部网关协议 RIP</h2><h3 id="工作原理"><a class="markdownIt-Anchor" href="#工作原理"></a> 工作原理</h3><ul><li>路由信息协议 RIP 是内部网关协议 IGP中最先得到广泛使用的协议。</li><li>RIP 是一种分布式的基于<strong>距离向量</strong>的路由选择协议。</li><li>RIP 协议要求网络中的每一个路由器都要维护从它自己到其他每一个目的网络的距离记录。</li></ul><h4 id="距离"><a class="markdownIt-Anchor" href="#距离"></a> 距离</h4><ul><li>从一路由器到直接连接的网络的距离定义为 1。</li><li>从一个路由器到非直接连接的网络的距离定义为所经过的路由器数加 1。</li><li>RIP 协议中的“距离”也称为“跳数”(hop count)，因为每经过一个路由器，跳数就加 1。</li><li>这里的“距离”实际上指的是“最短距离”。</li><li>RIP 认为一个好的路由就是它通过的路由器的数目少，即“距离短”。</li><li>RIP 允许一条路径最多只能包含 15 个路由器。</li><li>“距离”的最大值为16 时即相当于不可达。可见 RIP 只适用于小型互联网。</li><li>RIP 不能在两个网络之间同时使用多条路由。RIP 选择一个具有最少路由器的路由（即最短路由），哪怕还存在另一条高速(低时延)但路由器较多的路由。</li></ul><h3 id="rip-协议的三个要点"><a class="markdownIt-Anchor" href="#rip-协议的三个要点"></a> RIP 协议的三个要点</h3><ul><li>仅和相邻路由器交换信息。</li><li>交换的信息是当前本路由器所知道的全部信息，即自己的路由表。</li><li>按固定的时间间隔交换路由信息，例如，每隔 30 秒。</li></ul><h3 id="路由表的建立"><a class="markdownIt-Anchor" href="#路由表的建立"></a> 路由表的建立</h3><ul><li>路由器在刚刚开始工作时，只知道到直接连接的网络的距离（此距离定义为1）。</li><li>以后，每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息。</li><li>经过若干次更新后，所有的路由器最终都会知道到达本自治系统中任何一个网络的最短距离和下一跳路由器的地址。</li><li>RIP 协议的<strong>收敛</strong>(convergence)过程较快，即在自治系统中所有的结点都得到正确的路由选择信息的过程。</li></ul><h4 id="距离向量算法"><a class="markdownIt-Anchor" href="#距离向量算法"></a> 距离向量算法</h4><ul><li>收到相邻路由器（其地址为 X）的一个 RIP 报文：<ol><li>先修改此 RIP 报文中的所有项目：把“下一跳”字段中的地址都改为 X，并把所有的“距离”字段的值加 1。</li><li>对修改后的 RIP 报文中的每一个项目，重复以下步骤：<ul><li>若项目中的目的网络不在路由表中，则把该项目加到路由表中。</li><li>否则<ul><li>若下一跳字段给出的路由器地址是同样的，则把收到的项目替换原路由表中的项目。</li></ul></li><li>否则<ul><li>若收到项目中的距离小于路由表中的距离，则进行更新，</li></ul></li><li>否则，什么也不做。</li></ul></li><li>若 3 分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达路由器，即将距离置为16（距离为16表示不可达）。</li><li>返回。</li></ol></li></ul><h4 id="路由器之间交换信息"><a class="markdownIt-Anchor" href="#路由器之间交换信息"></a> 路由器之间交换信息</h4><ul><li>RIP协议让互联网中的所有路由器都和自己的相邻路由器不断交换路由信息，并不断更新其路由表，使得从每一个路由器到每一个目的网络的路由都是最短的（即跳数最少）。</li><li>虽然所有的路由器最终都拥有了整个自治系统的全局路由信息，但由于每一个路由器的位置不同，它们的路由表当然也应当是不同的。</li></ul><h3 id="rip2-协议的报文格式"><a class="markdownIt-Anchor" href="#rip2-协议的报文格式"></a> RIP2 协议的报文格式</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521151211.png" alt="" /></p><h4 id="rip2-的报文由首部和路由部分组成"><a class="markdownIt-Anchor" href="#rip2-的报文由首部和路由部分组成"></a> RIP2 的报文由首部和路由部分组成</h4><ul><li>RIP2 报文中的路由部分由若干个路由信息组成。每个路由信息需要用 20 个字节。地址族标识符（又称为地址类别）字段用来标志所使用的地址协议。</li><li>路由标记填入自治系统的号码，这是考虑使RIP 有可能收到本自治系统以外的路由选择信息。再后面指出某个网络地址、该网络的子网掩码、下一跳路由器地址以及到此网络的距离。</li></ul><h4 id="rip-协议的优缺点"><a class="markdownIt-Anchor" href="#rip-协议的优缺点"></a> RIP 协议的优缺点</h4><ul><li>RIP 存在的一个问题是当网络出现故障时，要经过比较长的时间才能将此信息传送到所有的路由器。</li><li>RIP 协议最大的优点就是实现简单，开销较小。</li><li>RIP 限制了网络的规模，它能使用的最大距离为 15（16 表示不可达）。</li><li>路由器之间交换的路由信息是路由器中的完整路由表，因而随着网络规模的扩大，开销也就增加。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152340.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152505.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152706.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152716.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152726.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521152737.png" alt="" /></li></ul><h2 id="内部网关协议-ospf"><a class="markdownIt-Anchor" href="#内部网关协议-ospf"></a> 内部网关协议 OSPF</h2><h3 id="ospf-协议的基本特点"><a class="markdownIt-Anchor" href="#ospf-协议的基本特点"></a> OSPF 协议的基本特点</h3><ul><li>“开放”表明 OSPF 协议不是受某一家厂商控制，而是公开发表的。</li><li>“最短路径优先”是因为使用了 Dijkstra 提出的最短路径算法SPF</li><li>OSPF 只是一个协议的名字，它并不表示其他的路由选择协议不是“最短路径优先”。</li><li>是分布式的<strong>链路状态协议</strong>。</li></ul><h3 id="三个要点"><a class="markdownIt-Anchor" href="#三个要点"></a> 三个要点</h3><ul><li><strong>向本自治系统中所有路由器发送信息</strong>，这里使用的方法是洪泛法。</li><li>发送的信息就是与本路由器<strong>相邻</strong>的所有路由器的链路状态，但这只是路由器所知道的<strong>部分信息</strong>。<ul><li>“链路状态”就是说明本路由器都和哪些路由器相邻，以及该链路的“<strong>度量</strong>”(metric)。</li></ul></li><li>只有当链路状态<strong>发生变化</strong>时，路由器才用洪泛法向所有路由器发送此信息。</li></ul><h3 id="链路状态数据库"><a class="markdownIt-Anchor" href="#链路状态数据库"></a> 链路状态数据库</h3><ul><li>由于各路由器之间频繁地交换链路状态信息，因此所有的路由器最终都能建立一个链路状态数据库。</li><li>这个数据库实际上就是<strong>全网的拓扑结构图</strong>，它在全网范围内是一致的（这称为链路状态数据库的同步）。</li><li>OSPF 的链路状态数据库能较快地进行更新，使各个路由器能及时更新其路由表。OSPF 的更新过程收敛得快是其重要优点。</li></ul><h4 id="ospf-的区域area"><a class="markdownIt-Anchor" href="#ospf-的区域area"></a> OSPF 的区域(area)</h4><ul><li>为了使 OSPF 能够用于规模很大的网络，OSPF 将一个自治系统再划分为若干个更小的范围，叫作<strong>区域</strong>。</li><li>每一个区域都有一个 32 位的区域标识符（用点分十进制表示）。</li><li>区域也不能太大，在一个区域内的路由器最好不超过 200 个。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521153011.png" alt="" /></li></ul><h4 id="划分区域"><a class="markdownIt-Anchor" href="#划分区域"></a> 划分区域</h4><ul><li>划分区域的好处就是将利用洪泛法交换链路状态信息的范围局限于每一个区域而不是整个的自治系统，这就减少了整个网络上的通信量。</li><li>在一个区域内部的路由器只知道本区域的完整网络拓扑，而不知道其他区域的网络拓扑的情况。</li><li>OSPF 使用层次结构的区域划分。在上层的区域叫作<strong>主干区域</strong>(backbone area)。主干区域的标识符规定为0.0.0.0。主干区域的作用是用来连通其他在下层的区域。</li></ul><h3 id="ospf-直接用-ip-数据报传送"><a class="markdownIt-Anchor" href="#ospf-直接用-ip-数据报传送"></a> OSPF 直接用 IP 数据报传送</h3><ul><li>OSPF 不用 UDP 而是直接用 IP 数据报传送。</li><li>OSPF 构成的数据报很短。这样做可减少路由信息的通信量。</li><li>数据报很短的另一好处是可以不必将长的数据报分片传送。分片传送的数据报只要丢失一个，就无法组装成原来的数据报，而整个数据报就必须重传。</li></ul><h3 id="ospf-的其他特点"><a class="markdownIt-Anchor" href="#ospf-的其他特点"></a> OSPF 的其他特点</h3><ul><li>OSPF 对不同的链路可根据 IP 分组的不同服务类型 TOS 而设置成不同的代价。因此，OSPF 对于不同类型的业务可计算出不同的路由。</li><li>如果到同一个目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径。这叫作多路径间的负载平衡。</li><li>所有在 OSPF 路由器之间交换的分组都具有鉴别的功能。</li><li>支持可变长度的子网划分和无分类编址 CIDR。<br />+每一个链路状态都带上一个 32 位的序号，序号越大状态就越新。</li></ul><h3 id="ospf-的五种分组类型"><a class="markdownIt-Anchor" href="#ospf-的五种分组类型"></a> OSPF 的五种分组类型</h3><ul><li>类型1，问候(Hello)分组。</li><li>类型2，数据库描述(Database Description)分组。</li><li>类型3，链路状态请求(Link State Request)分组。</li><li>类型4，链路状态更新(Link State Update)分组，用洪泛法对全网更新链路状态。</li><li>类型5，链路状态确认(Link State Acknowledgment)分组。</li></ul><h3 id="ospf的基本操作"><a class="markdownIt-Anchor" href="#ospf的基本操作"></a> OSPF的基本操作</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521153920.png" alt="" /></p><h3 id="ospf-使用的是可靠的洪泛法"><a class="markdownIt-Anchor" href="#ospf-使用的是可靠的洪泛法"></a> OSPF 使用的是可靠的洪泛法</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521154002.png" alt="" /></p><h3 id="ospf-的其他特点-2"><a class="markdownIt-Anchor" href="#ospf-的其他特点-2"></a> OSPF 的其他特点</h3><ul><li>OSPF 还规定每隔一段时间，如 30 分钟，要刷新一次数据库中的链路状态。</li><li>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当互联网规模很大时，OSPF 协议要比距离向量协议 RIP 好得多。</li><li>OSPF 没有“坏消息传播得慢”的问题，据统计，其响应网络变化的时间小于 100 ms。</li></ul><h3 id="指定的路由器designated-router"><a class="markdownIt-Anchor" href="#指定的路由器designated-router"></a> 指定的路由器(designated router)</h3><ul><li>多点接入的局域网采用了指定的路由器的方法，使广播的信息量大大减少。</li><li>指定的路由器代表该局域网上所有的链路向连接到该网络上的各路由器发送状态信息。</li></ul><h2 id="外部网关协议-bgp"><a class="markdownIt-Anchor" href="#外部网关协议-bgp"></a> 外部网关协议 BGP</h2><ul><li>BGP 是不同自治系统的路由器之间交换路由信息的协议。</li><li>BGP 较新版本是 2006 年 1 月发表的 BGP-4（BGP 第 4 个版本），即 RFC 4271 ~ 4278。</li><li>可以将 BGP-4 简写为 BGP。</li></ul><h3 id="bgp-使用的环境却不同"><a class="markdownIt-Anchor" href="#bgp-使用的环境却不同"></a> BGP 使用的环境却不同</h3><ul><li>因特网的规模太大，使得自治系统之间路由选择非常困难。对于自治系统之间的路由选择，要寻找最佳路由是很不现实的。<ul><li>当一条路径通过几个不同 AS 时，要想对这样的路径计算出有意义的代价是不太可能的。</li><li>比较合理的做法是在 AS 之间交换“可达性”信息。</li></ul></li><li>自治系统之间的路由选择必须考虑有关策略。</li><li>因此，边界网关协议 BGP 只能是力求寻找一条能够到达目的网络且<strong>比较好的路由</strong>（不能兜圈子），而<strong>并非要寻找一条最佳路由</strong>。</li></ul><h3 id="bgp-发言人"><a class="markdownIt-Anchor" href="#bgp-发言人"></a> BGP 发言人</h3><ul><li>每一个自治系统的管理员要选择至少一个路由器作为该自治系统的“ <strong>BGP 发言人</strong>” 。</li><li>一般说来，两个 BGP 发言人都是通过一个共享网络连接在一起的，而 BGP 发言人往往就是 BGP 边界路由器，但也可以不是 BGP 边界路由器。</li></ul><h3 id="bgp-交换路由信息"><a class="markdownIt-Anchor" href="#bgp-交换路由信息"></a> BGP 交换路由信息</h3><ul><li>一个 BGP 发言人与其他自治系统中的 BGP 发言人要交换路由信息，就要先建立 TCP 连接，然后在此连接上交换 BGP 报文以建立 BGP <strong>会话</strong>(session)，利用 BGP 会话交换路由信息。</li><li>使用 TCP 连接能提供可靠的服务，也简化了路由选择协议。</li><li>使用 TCP 连接交换路由信息的两个 BGP 发言人，彼此成为对方的邻站或对等站。</li></ul><h3 id="bgp-发言人和自治系统-as-的关系"><a class="markdownIt-Anchor" href="#bgp-发言人和自治系统-as-的关系"></a> BGP 发言人和自治系统 AS 的关系</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521154300.png" alt="" /></p><h4 id="as-的连通图举例"><a class="markdownIt-Anchor" href="#as-的连通图举例"></a> AS 的连通图举例</h4><p>BGP 所交换的网络可达性的信息就是要到达某个网络所要经过的一系列 AS。<br />当 BGP 发言人互相交换了网络可达性的信息后，各 BGP 发言人就根据所采用的策略从收到的路由信息中找出到达各 AS 的较好路由。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521154334.png" alt="" /></p><h4 id="bgp-发言人交换路径向量"><a class="markdownIt-Anchor" href="#bgp-发言人交换路径向量"></a> BGP 发言人交换路径向量</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200521155322726_12178.png" alt="20200521154704" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="_v_images/20200521155335430_10835.png" alt="20200521154723" /></p><h3 id="bgp-协议的特点"><a class="markdownIt-Anchor" href="#bgp-协议的特点"></a> BGP 协议的特点</h3><ul><li>BGP 协议交换路由信息的结点数量级是<strong>自治系统数的量级</strong>，这要比这些自治系统中的网络数少很多。</li><li>每一个自治系统中 BGP 发言人（或边界路由器）的数目是很少的。这样就使得自治系统之间的路由选择不致过分复杂。</li><li><strong>BGP 支持 CIDR</strong>，因此 BGP 的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</li><li>在BGP 刚刚运行时，BGP 的邻站是交换整个的 BGP 路由表。但以后只需要在发生变化时<strong>更新有变化的部分</strong>。这样做对节省网络带宽和减少路由器的处理开销方面都有好处。</li></ul><h3 id="bgp-4-共使用四种报文"><a class="markdownIt-Anchor" href="#bgp-4-共使用四种报文"></a> BGP-4 共使用四种报文</h3><ol><li>打开(OPEN)报文，用来与相邻的另一个BGP发言人建立关系。</li><li>更新(UPDATE)报文，用来发送某一路由的信息，以及列出要撤消的多条路由。</li><li>保活(KEEPALIVE)报文，用来确认打开报文和周期性地证实邻站关系。</li><li>通知(NOTIFICATION)报文，用来发送检测到的差错。<br />在 RFC 2918 中增加了 ROUTE-REFRESH 报文，用来请求对等端重新通告。</li></ol><h3 id="bgp-报文具有通用的首部"><a class="markdownIt-Anchor" href="#bgp-报文具有通用的首部"></a> BGP 报文具有通用的首部</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155512.png" alt="" /></p><h2 id="路由器的构成"><a class="markdownIt-Anchor" href="#路由器的构成"></a> 路由器的构成</h2><ul><li>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。也就是说，将路由器某个输入端口收到的分组，按照分组要去的目的地（即目的网络），把该分组从路由器的某个合适的输出端口转发给下一跳路由器。</li><li>下一跳路由器也按照这种方法处理分组，直到该分组到达终点为止。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155648.png" alt="" /></li></ul><h3 id="转发和路由选择的区别"><a class="markdownIt-Anchor" href="#转发和路由选择的区别"></a> “转发”和“路由选择”的区别</h3><ul><li>“转发”(forwarding)就是路由器根据转发表将用户的 IP 数据报从合适的端口转发出去。</li><li>“路由选择”(routing)则是按照分布式算法，根据从各相邻路由器得到的关于网络拓扑的变化情况，动态地改变所选择的路由。</li><li>路由表是根据路由选择算法得出的。而转发表是从路由表得出的。</li><li>在讨论路由选择的原理时，往往不去区分转发表和路由表的区别。</li></ul><h3 id="输入端口对线路上收到的分组的处理"><a class="markdownIt-Anchor" href="#输入端口对线路上收到的分组的处理"></a> 输入端口对线路上收到的分组的处理</h3><p>数据链路层剥去帧首部和尾部后，将分组送到网络层的队列中排队等待处理。这会产生一定的时延。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155820.png" alt="" /></p><h3 id="输出端口将交换结构传送来的分组发送到线路"><a class="markdownIt-Anchor" href="#输出端口将交换结构传送来的分组发送到线路"></a> 输出端口将交换结构传送来的分组发送到线路</h3><p>当交换结构传送过来的分组先进行缓存。数据链路层处理模块将分组加上链路层的首部和尾部，交给物理层后发送到外部线路。<br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521155901.png" alt="" /></p><h3 id="分组丢弃"><a class="markdownIt-Anchor" href="#分组丢弃"></a> 分组丢弃</h3><ul><li>若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃。</li><li>路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。</li></ul><h3 id="交换结构"><a class="markdownIt-Anchor" href="#交换结构"></a> 交换结构</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160021.png" alt="" /></p><h1 id="ip-多播"><a class="markdownIt-Anchor" href="#ip-多播"></a> IP 多播</h1><h2 id="ip-多播的基本概念"><a class="markdownIt-Anchor" href="#ip-多播的基本概念"></a> IP 多播的基本概念</h2><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160300.png" alt="" /></p><h3 id="多播可明显地减少网络中资源的消耗"><a class="markdownIt-Anchor" href="#多播可明显地减少网络中资源的消耗"></a> 多播可明显地减少网络中资源的消耗</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160335.png" alt="" /></p><h3 id="ip-多播的一些特点"><a class="markdownIt-Anchor" href="#ip-多播的一些特点"></a> IP 多播的一些特点</h3><ol><li>多播使用组地址—— IP 使用 D 类地址支持多播。多播地址只能用于目的地址，而不能用于源地址。</li><li>永久组地址——由因特网号码指派管理局 IANA 负责指派。</li><li>动态的组成员</li><li>使用硬件进行多播</li></ol><h2 id="在局域网上进行硬件多播"><a class="markdownIt-Anchor" href="#在局域网上进行硬件多播"></a> 在局域网上进行硬件多播</h2><ul><li>因特网号码指派管理局 IANA 拥有的以太网地址块的高 24 位为 00-00-5E。</li><li>因此 TCP/IP 协议使用的以太网多播地址块的范围是：从 00-00-5E-00-00-00 到 00-00-5E-FF-FF-FF</li><li>D 类 IP 地址可供分配的有 28 位，在这 28 位中的前 5 位不能用来构成以太网硬件地址。</li></ul><h3 id="d-类-ip-地址与以太网多播地址的映射关系"><a class="markdownIt-Anchor" href="#d-类-ip-地址与以太网多播地址的映射关系"></a> D 类 IP 地址与以太网多播地址的映射关系</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160436.png" alt="" /></p><h2 id="因特网组管理协议-igmp-和多播路由选择协议"><a class="markdownIt-Anchor" href="#因特网组管理协议-igmp-和多播路由选择协议"></a> 因特网组管理协议 IGMP 和多播路由选择协议</h2><h3 id="ip多播需要两种协议"><a class="markdownIt-Anchor" href="#ip多播需要两种协议"></a> IP多播需要两种协议</h3><ul><li>为了使路由器知道多播组成员的信息，<strong>需要利用网际组管理协议 IGMP</strong> (Internet Group Management Protocol)。</li><li>连接在局域网上的多播路由器还必须和因特网上的其他多播路由器协同工作，以便把多播数据报用最小代价传送给所有的组成员。这就需要使用<strong>多播路由选择协议</strong>。</li></ul><h3 id="igmp-使多播路由器知道多播组成员信息"><a class="markdownIt-Anchor" href="#igmp-使多播路由器知道多播组成员信息"></a> IGMP 使多播路由器知道多播组成员信息</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160528.png" alt="" /></p><h3 id="igmp-的本地使用范围"><a class="markdownIt-Anchor" href="#igmp-的本地使用范围"></a> IGMP 的本地使用范围</h3><ul><li>IGMP <strong>并非</strong>在因特网范围内对所有多播组成员进行管理的协议。</li><li>IGMP <strong>不知道</strong> IP 多播组包含的成员数，<strong>也不知道</strong>这些成员都分布在哪些网络上。</li><li>IGMP 协议是让连接在<strong>本地局域网</strong>上的多播路由器知道本局域网上是否有主机（严格讲，是主机上的某个进程）参加或退出了某个多播组。</li></ul><h3 id="多播路由选择协议比单播路由选择协议复杂得多"><a class="markdownIt-Anchor" href="#多播路由选择协议比单播路由选择协议复杂得多"></a> 多播路由选择协议比单播路由选择协议复杂得多</h3><ul><li>多播转发必须<strong>动态地</strong>适应多播组成员的变化（这时网络拓扑并未发生变化）。请注意，单播路由选择通常是在网络拓扑发生变化时才需要更新路由。</li><li>多播路由器在转发多播数据报时，不能仅仅根据多播数据报中的目的地址，而是还要考虑这个多播数据报从什么地方来和要到什么地方去。</li><li>多播数据报可以由没有加入多播组的主机发出，也可以通过没有组成员接入的网络。</li></ul><h3 id="网际组管理协议-igmp"><a class="markdownIt-Anchor" href="#网际组管理协议-igmp"></a> 网际组管理协议 IGMP</h3><ul><li>1989 年公布的 RFC 1112（IGMPv1）早已成为了因特网的标准协议。</li><li>1997 年公布的 RFC 2236（IGMPv2，建议标准）对 IGMPv1 进行了更新。</li><li>2002 年 10 月公布了 RFC 3376（IGMPv3，建议标准），宣布 RFC 2236（IGMPv2）是陈旧的。</li></ul><h4 id="igmp-是整个网际协议-ip-的一个组成部分"><a class="markdownIt-Anchor" href="#igmp-是整个网际协议-ip-的一个组成部分"></a> IGMP 是整个网际协议 IP 的一个组成部分</h4><ul><li>和 ICMP 相似，IGMP 使用 IP 数据报传递其报文（即 IGMP 报文加上 IP 首部构成 IP 数据报），但它也向 IP 提供服务。</li><li>因此，我们不把 IGMP 看成是一个单独的协议，而是属于整个网际协议 IP 的一个组成部分。</li></ul><h4 id="igmp-可分为两个阶段"><a class="markdownIt-Anchor" href="#igmp-可分为两个阶段"></a> IGMP 可分为两个阶段</h4><ul><li>第一阶段：当某个主机加入新的多播组时，该主机应向多播组的多播地址发送IGMP 报文，声明自己要成为该组的成员。本地的多播路由器收到 IGMP 报文后，将组成员关系转发给因特网上的其他多播路由器。</li><li>第二阶段：因为组成员关系是<strong>动态</strong>的，因此本地多播路由器要<strong>周期性地探询</strong>本地局域网上的主机，以便知道这些主机是否还继续是组的成员。</li><li>只要对某个组有一个主机响应，那么多播路由器就认为这个组是活跃的。</li><li>但一个组在经过几次的探询后仍然没有一个主机响应，则不再将该组的成员关系转发给其他的多播路由器。</li></ul><h4 id="igmp-采用的一些具体措施"><a class="markdownIt-Anchor" href="#igmp-采用的一些具体措施"></a> IGMP 采用的一些具体措施</h4><ul><li>在主机和多播路由器之间的所有通信都是使用 IP 多播。</li><li>多播路由器在探询组成员关系时，只需要对所有的组发送一个请求信息的询问报文，而不需要对每一个组发送一个询问报文。默认的询问速率是每 125 秒发送一次。</li><li>当同一个网络上连接有几个多播路由器时，它们能够迅速和有效地选择其中的一个来探询主机的成员关系。</li><li>在 IGMP 的询问报文中有一个数值 N，它指明一个最长响应时间（默认值为 10秒）。当收到询问时，主机在 0 到 N 之间随机选择发送响应所需经过的时延。对应于最小时延的响应最先发送。</li><li>同一个组内的每一个主机都要监听响应，只要有本组的其他主机先发送了响应，自己就可以不再发送响应了。</li></ul><h3 id="多播路由选择"><a class="markdownIt-Anchor" href="#多播路由选择"></a> 多播路由选择</h3><ul><li>多播路由选择协议尚未标准化。</li><li>一个多播组中的成员是动态变化的，随时会有主机加入或离开这个多播组。</li><li>多播路由选择实际上就是要找出以源主机为根结点的多播转发树。</li><li>在多播转发树上的路由器不会收到重复的多播数据报。</li><li>对不同的多播组对应于不同的多播转发树。同一个多播组，对不同的源点也会有不同的多播转发树。</li></ul><h3 id="转发多播数据报使用的方法"><a class="markdownIt-Anchor" href="#转发多播数据报使用的方法"></a> 转发多播数据报使用的方法</h3><h4 id="洪泛与剪除"><a class="markdownIt-Anchor" href="#洪泛与剪除"></a> 洪泛与剪除</h4><ul><li>这种方法适合于较小的多播组，而所有的组成员接入的局域网也是相邻接的。</li><li>一开始，路由器转发多播数据报使用洪泛的方法（这就是广播）。为了避免兜圈子，采用了叫做<strong>反向路径广播</strong> RPB (Reverse Path Broadcasting)的策略。</li></ul><h5 id="rpb-的要点"><a class="markdownIt-Anchor" href="#rpb-的要点"></a> RPB 的要点</h5><ul><li>路由器收到多播数据报时，先检查是否从源点经最短路径传送来的。</li><li>若是，就向所有其他方向转发刚才收到的多播数据报（但进入的方向除外），否则就丢弃而不转发。</li><li>如果存在几条同样长度的最短路径），那么只能选择一条最短路径，选择的准则就是看这几条最短路径中的相邻路由器谁的 IP 地址最小。</li></ul><h4 id="反向路径广播-rpb-和剪除"><a class="markdownIt-Anchor" href="#反向路径广播-rpb-和剪除"></a> 反向路径广播 RPB 和剪除</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521160952.png" alt="" /></p><h4 id="隧道技术"><a class="markdownIt-Anchor" href="#隧道技术"></a> 隧道技术</h4><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521161029.png" alt="" /></p><h4 id="基于核心的发现技术"><a class="markdownIt-Anchor" href="#基于核心的发现技术"></a> 基于核心的发现技术</h4><ul><li>这种方法对于多播组的大小在较大范围内变化时都适合。</li><li>这种方法是对每一个多播组 G 指定一个<strong>核心</strong>(core)路由器，给出它的 IP 单播地址。</li><li>核心路由器按照前面讲过的方法创建出对应于多播组 G 的转发树。</li></ul><h3 id="几种多播路由选择协议"><a class="markdownIt-Anchor" href="#几种多播路由选择协议"></a> 几种多播路由选择协议</h3><ul><li>距离向量多播路由选择协议 DVMRP (Distance Vector Multicast Routing Protocol)</li><li>基于核心的转发树 CBT (Core Based Tree)</li><li>开放最短通路优先的多播扩展 MOSPF (Multicast Extensions to OSPF)</li><li>协议无关多播-稀疏方式 PIM-SM (Protocol Independent Multicast-Sparse Mode)</li><li>协议无关多播-密集方式 PIM-DM (Protocol Independent Multicast-Dense Mode)</li></ul><h1 id="虚拟专用网-vpn-和网络地址转换-nat"><a class="markdownIt-Anchor" href="#虚拟专用网-vpn-和网络地址转换-nat"></a> 虚拟专用网 VPN 和网络地址转换 NAT</h1><h2 id="虚拟专用网-vpn"><a class="markdownIt-Anchor" href="#虚拟专用网-vpn"></a> 虚拟专用网 VPN</h2><ul><li>本地地址——仅在机构内部使用的 IP 地址，可以由本机构自行分配，而不需要向因特网的管理机构申请。</li><li>全球地址——全球唯一的IP地址，必须向因特网的管理机构申请。</li></ul><h3 id="rfc-1918-指明的专用地址private-address"><a class="markdownIt-Anchor" href="#rfc-1918-指明的专用地址private-address"></a> RFC 1918 指明的专用地址(private address)</h3><ul><li>10.0.0.0 到 10.255.255.255</li><li>172.16.0.0 到 172.31.255.255</li><li>192.168.0.0 到 192.168.255.255</li><li>这些地址只能用于一个机构的内部通信，而不能用于和因特网上的主机通信。</li><li>专用地址只能用作本地地址而不能用作全球地址。在因特网中的所有路由器对目的地址是专用地址的数据报一律不进行转发。</li></ul><h3 id="用隧道技术实现虚拟专用网"><a class="markdownIt-Anchor" href="#用隧道技术实现虚拟专用网"></a> 用隧道技术实现虚拟专用网</h3><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521161756.png" alt="" /><br /><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/zoruasama/Zorua-Pic/raw/master/20200521161814.png" alt="" /></p><h4 id="内联网-intranet-和外联网-extranet都是基于-tcpip-协议"><a class="markdownIt-Anchor" href="#内联网-intranet-和外联网-extranet都是基于-tcpip-协议"></a> 内联网 intranet 和外联网 extranet（都是基于 TCP/IP 协议）</h4><ul><li>由部门 A 和 B 的内部网络所构成的虚拟专用网 VPN 又称为<strong>内联网</strong>(intranet)，表示部门 A 和 B 都是<strong>在同一个机构</strong>的内部。</li><li>一个机构和某些<strong>外部机构</strong>共同建立的虚拟专用网 VPN 又称为<strong>外联网</strong>(extranet)。</li></ul><h4 id="远程接入vpn"><a class="markdownIt-Anchor" href="#远程接入vpn"></a> 远程接入VPN</h4><ul><li>有的公司可能没有分布在不同场所的部门，但有很多流动员工在外地工作。公司需要和他们保持联系，远程接入 VPN 可满足这种需求。</li><li>在外地工作的员工拨号接入因特网，而驻留在员工 PC 机中的 VPN 软件可在员工的 PC 机和公司的主机之间建立 VPN 隧道，因而外地员工与公司通信的内容是保密的，员工们感到好像就是使用公司内部的本地网络。</li></ul><h2 id="网络地址转换-nat"><a class="markdownIt-Anchor" href="#网络地址转换-nat"></a> 网络地址转换 NAT</h2><p>网络地址转换 NAT  方法于1994年提出。<br />需要在专用网连接到因特网的路由器上安装 NAT 软件。装有 NAT 软件的路由器叫做 NAT路由器，它至少有一个有效的外部全球地址 IPG。<br />所有使用本地地址的主机在和外界通信时都要在 NAT 路由器上将其本地地址转换成 IPG 才能和因特网连接。</p><h3 id="网络地址转换的过程"><a class="markdownIt-Anchor" href="#网络地址转换的过程"></a> 网络地址转换的过程</h3><ul><li>内部主机 X 用本地地址 IPX 和因特网上主机 Y 通信所发送的数据报必须经过 NAT 路由器。</li><li>NAT 路由器将数据报的源地址 IPX 转换成全球地址 IPG，但目的地址 IPY 保持不变，然后发送到因特网。</li><li>NAT 路由器收到主机 Y 发回的数据报时，知道数据报中的源地址是 IPY 而目的地址是 IPG。</li><li>根据 NAT 转换表，NAT 路由器将目的地址 IPG 转换为 IPX，转发给最终的内部主机 X。</li></ul><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/zoruasama/zoruasama.github.io@latest/css/mindmap.css">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;思维导图&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#思维导图&quot;&gt;&lt;/a&gt; 思维导图&lt;/h1&gt;
&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;网络层
&lt;ul&gt;
&lt;l
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://zoruasama.gitee.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="计算机网络" scheme="https://zoruasama.gitee.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
      <category term="网络" scheme="https://zoruasama.gitee.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
      <category term="互联网" scheme="https://zoruasama.gitee.io/tags/%E4%BA%92%E8%81%94%E7%BD%91/"/>
    
  </entry>
  
</feed>
